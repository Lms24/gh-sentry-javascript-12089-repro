/*! @sentry/aws-serverless 8.4.0 (3b96745e9) | https://github.com/getsentry/sentry-javascript */
var t=require("perf_hooks"),n=require("path"),e=require("util"),r=require("module"),o=require("fs"),i=require("os"),s=require("tty"),c=require("url"),u=require("process"),a=require("node:util"),l=require("node:child_process"),f=require("node:fs"),d=require("node:os"),h=require("node:path"),p=require("events"),S=require("node:worker_threads"),E=require("node:inspector"),m=require("node:http"),T=require("node:https"),_=require("node:stream"),b=require("node:zlib"),v=require("node:net"),y=require("node:tls"),R=require("worker_threads"),A=require("async_hooks"),O="undefined"!=typeof document?document.currentScript:null;function g(t){var n=Object.create(null);return t&&Object.keys(t).forEach((function(e){if("default"!==e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}})),n.default=t,Object.freeze(n)}function N(t,n){return n.forEach((function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach((function(e){if("default"!==e&&!(e in t)){var r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return n[e]}})}}))})),Object.freeze(t)}var C=g(n),L=g(a),I=g(d),w=g(E),M=g(m),Z=g(T),P=g(v),V=g(y);const G=Object.prototype.toString;function X(t){switch(G.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return j(t,Error)}}function U(t,n){return G.call(t)===`[object ${n}]`}function W(t){return U(t,"String")}function Y(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function H(t){return U(t,"Object")}function D(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function j(t,n){try{return t instanceof n}catch(t){return!1}}function x(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t.i)}function k(t,n=0){return"string"!=typeof t||0===n||t.length<=n?t:`${t.slice(0,n)}...`}function K(t,n){let e=t;const r=e.length;if(r<=150)return e;n>r&&(n=r);let o=Math.max(n-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),e=e.slice(o,i),o>0&&(e=`'{snip} ${e}`),i<r&&(e+=" {snip}"),e}function B(t,n){if(!Array.isArray(t))return"";const e=[];for(let n=0;n<t.length;n++){const r=t[n];try{x(r)?e.push("[VueViewModel]"):e.push(String(r))}catch(t){e.push("[value cannot be serialized]")}}return e.join(n)}function F(t,n,e=!1){return!!W(t)&&(U(n,"RegExp")?n.test(t):!!W(n)&&(e?t===n:t.includes(n)))}function J(t,n=[],e=!1){return n.some((n=>F(t,n,e)))}function z(t,n,e=250,r,o,i,s){if(!(i.exception&&i.exception.values&&s&&j(s.originalException,Error)))return;const c=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var u,a;c&&(i.exception.values=(u=Q(t,n,o,s.originalException,r,i.exception.values,c,0),a=e,u.map((t=>(t.value&&(t.value=k(t.value,a)),t)))))}function Q(t,n,e,r,o,i,s,c){if(i.length>=e+1)return i;let u=[...i];if(j(r[o],Error)){$(s,c);const i=t(n,r[o]),a=u.length;q(i,o,a,c),u=Q(t,n,e,r[o],o,[i,...u],i,a)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(j(r,Error)){$(s,c);const a=t(n,r),l=u.length;q(a,`errors[${i}]`,l,c),u=Q(t,n,e,r,o,[a,...u],a,l)}})),u}function $(t,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:n}}function q(t,n,e,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:n,exception_id:e,parent_id:r}}const tt=globalThis;function nt(t,n,e){const r=e||tt,o=r.__SENTRY__=r.__SENTRY__||{};return o[t]||(o[t]=n())}const et=tt,rt=80;function ot(t,n){const e=t,r=[];let o,i,s,c,u;if(!e||!e.tagName)return"";if(et.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}r.push(e.tagName.toLowerCase());const a=n&&n.length?n.filter((t=>e.getAttribute(t))).map((t=>[t,e.getAttribute(t)])):null;if(a&&a.length)a.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(e.id&&r.push(`#${e.id}`),o=e.className,o&&W(o))for(i=o.split(/\s+/),u=0;u<i.length;u++)r.push(`.${i[u]}`);const l=["aria-label","type","name","title","alt"];for(u=0;u<l.length;u++)s=l[u],c=e.getAttribute(s),c&&r.push(`[${s}="${c}"]`);return r.join("")}const it=["debug","info","warn","error","log","assert","trace"],st={};function ct(t){if(!("console"in tt))return t();const n=tt.console,e={},r=Object.keys(st);r.forEach((t=>{const r=st[t];e[t]=n[t],n[t]=r}));try{return t()}finally{r.forEach((t=>{n[t]=e[t]}))}}const ut=function(){let t=!1;const n={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return it.forEach((t=>{n[t]=()=>{}})),n}(),at=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function lt(t,n=!1){const{host:e,path:r,pass:o,port:i,projectId:s,protocol:c,publicKey:u}=t;return`${c}://${u}${n&&o?`:${o}`:""}@${e}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function ft(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function dt(t){const n="string"==typeof t?function(t){const n=at.exec(t);if(!n)return void ct((()=>{console.error(`Invalid Sentry Dsn: ${t}`)}));const[e,r,o="",i,s="",c]=n.slice(1);let u="",a=c;const l=a.split("/");if(l.length>1&&(u=l.slice(0,-1).join("/"),a=l.pop()),a){const t=a.match(/^\d+/);t&&(a=t[0])}return ft({host:i,pass:o,path:u,projectId:a,port:s,protocol:e,publicKey:r})}(t):ft(t);if(n)return n}class ht extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function pt(t,n,e){if(!(n in t))return;const r=t[n],o=e(r);"function"==typeof o&&function(t,n){try{const e=n.prototype||{};t.prototype=n.prototype=e,St(t,"__sentry_original__",n)}catch(t){}}(o,r),t[n]=o}function St(t,n,e){try{Object.defineProperty(t,n,{value:e,writable:!0,configurable:!0})}catch(t){}}function Et(t){if(X(t))return{message:t.message,name:t.name,stack:t.stack,...Tt(t)};if(n=t,"undefined"!=typeof Event&&j(n,Event)){const n={type:t.type,target:mt(t.target),currentTarget:mt(t.currentTarget),...Tt(t)};return"undefined"!=typeof CustomEvent&&j(t,CustomEvent)&&(n.detail=t.detail),n}return t;var n}function mt(t){try{return n=t,"undefined"!=typeof Element&&j(n,Element)?function(t,n={}){if(!t)return"<unknown>";try{let e=t;const r=5,o=[];let i=0,s=0;const c=" > ",u=c.length;let a;const l=Array.isArray(n)?n:n.keyAttrs,f=!Array.isArray(n)&&n.maxStringLength||rt;for(;e&&i++<r&&(a=ot(e,l),!("html"===a||i>1&&s+o.length*u+a.length>=f));)o.push(a),s+=a.length,e=e.parentNode;return o.reverse().join(c)}catch(t){return"<unknown>"}}(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}var n}function Tt(t){if("object"==typeof t&&null!==t){const n={};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}return{}}function _t(t){return bt(t,new Map)}function bt(t,n){if(function(t){if(!H(t))return!1;try{const n=Object.getPrototypeOf(t).constructor.name;return!n||"Object"===n}catch(t){return!0}}(t)){const e=n.get(t);if(void 0!==e)return e;const r={};n.set(t,r);for(const e of Object.keys(t))void 0!==t[e]&&(r[e]=bt(t[e],n));return r}if(Array.isArray(t)){const e=n.get(t);if(void 0!==e)return e;const r=[];return n.set(t,r),t.forEach((t=>{r.push(bt(t,n))})),r}return t}const vt=50,yt="?",Rt=/\(error: (.*)\)/,At=/captureMessage|captureException/;function Ot(...t){const n=t.sort(((t,n)=>t[0]-n[0])).map((t=>t[1]));return(t,e=0,r=0)=>{const o=[],i=t.split("\n");for(let t=e;t<i.length;t++){const e=i[t];if(e.length>1024)continue;const s=Rt.test(e)?e.replace(Rt,"$1"):e;if(!s.match(/\S*Error: /)){for(const t of n){const n=t(s);if(n){o.push(n);break}}if(o.length>=vt+r)break}}return function(t){if(!t.length)return[];const n=Array.from(t);/sentryWrapped/.test(n[n.length-1].function||"")&&n.pop();n.reverse(),At.test(n[n.length-1].function||"")&&(n.pop(),At.test(n[n.length-1].function||"")&&n.pop());return n.slice(0,vt).map((t=>({...t,filename:t.filename||n[n.length-1].filename,function:t.function||yt})))}(o.slice(r))}}function gt(t){return Array.isArray(t)?Ot(...t):t}const Nt="<anonymous>";const Ct={},Lt={};function It(t,n){Ct[t]=Ct[t]||[],Ct[t].push(n)}function wt(t,n){Lt[t]||(n(),Lt[t]=!0)}function Mt(t,n){const e=t&&Ct[t];if(e)for(const t of e)try{t(n)}catch(t){}}function Zt(t){const n="console";It(n,t),wt(n,Pt)}function Pt(){"console"in tt&&it.forEach((function(t){t in tt.console&&pt(tt.console,t,(function(n){return st[t]=n,function(...n){Mt("console",{args:n,level:t});const e=st[t];e&&e.apply(tt.console,n)}}))}))}const Vt=1e3;function Gt(){return Date.now()/Vt}const Xt=function(){const{performance:t}=tt;if(!t||!t.now)return Gt;const n=Date.now()-t.now(),e=null==t.timeOrigin?n:t.timeOrigin;return()=>(e+t.now())/Vt}();(()=>{const{performance:t}=tt;if(!t||!t.now)return;const n=36e5,e=t.now(),r=Date.now(),o=t.timeOrigin?Math.abs(t.timeOrigin+e-r):n,i=o<n,s=t.timing&&t.timing.navigationStart,c="number"==typeof s?Math.abs(s+e-r):n;(i||c<n)&&(o<=c&&t.timeOrigin)})();let Ut=null;function Wt(){Ut=tt.onerror,tt.onerror=function(t,n,e,r,o){return Mt("error",{column:r,error:o,line:e,msg:t,url:n}),!(!Ut||Ut.__SENTRY_LOADER__)&&Ut.apply(this,arguments)},tt.onerror.__SENTRY_INSTRUMENTED__=!0}let Yt=null;function Ht(){Yt=tt.onunhandledrejection,tt.onunhandledrejection=function(t){return Mt("unhandledrejection",t),!(Yt&&!Yt.__SENTRY_LOADER__)||Yt.apply(this,arguments)},tt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Dt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function jt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xt(t){if(t.__esModule)return t;var n=t.default;if("function"==typeof n){var e=function t(){return this instanceof t?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function kt(){const t=tt,n=t.crypto||t.msCrypto;let e=()=>16*Math.random();try{if(n&&n.randomUUID)return n.randomUUID().replace(/-/g,"");n&&n.getRandomValues&&(e=()=>{const t=new Uint8Array(1);return n.getRandomValues(t),t[0]})}catch(t){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&e())>>t/4).toString(16)))}function Kt(t,n){const e=function(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}(t);if(!e)return;const r=e.mechanism;if(e.mechanism={type:"generic",handled:!0,...r,...n},n&&"data"in n){const t={...r&&r.data,...n.data};e.mechanism.data=t}}const Bt=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function Ft(t,n,e=5){if(void 0===n.lineno)return;const r=t.length,o=Math.max(Math.min(r-1,n.lineno-1),0);n.pre_context=t.slice(Math.max(0,o-e),o).map((t=>K(t,0))),n.context_line=K(t[Math.min(r-1,o)],n.colno||0),n.post_context=t.slice(Math.min(o+1,r),o+1+e).map((t=>K(t,0)))}function Jt(t){if(t&&t.__sentry_captured__)return!0;try{St(t,"__sentry_captured__",!0)}catch(t){}return!1}function zt(t){return Array.isArray(t)?t:[t]}function Qt(t,n=100,e=1/0){try{return qt("",t,n,e)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function $t(t,n=3,e=102400){const r=Qt(t,n);return o=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(o))>e?$t(t,n-1,e):r;var o}function qt(t,n,e=1/0,r=1/0,o=function(){const t="function"==typeof WeakSet,n=t?new WeakSet:[];return[function(e){if(t)return!!n.has(e)||(n.add(e),!1);for(let t=0;t<n.length;t++)if(n[t]===e)return!0;return n.push(e),!1},function(e){if(t)n.delete(e);else for(let t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}}]}()){const[i,s]=o;if(null==n||["number","boolean","string"].includes(typeof n)&&!Number.isNaN(n))return n;const c=function(t,n){try{if("domain"===t&&n&&"object"==typeof n&&n.u)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if("undefined"!=typeof global&&n===global)return"[Global]";if("undefined"!=typeof window&&n===window)return"[Window]";if("undefined"!=typeof document&&n===document)return"[Document]";if(x(n))return"[VueViewModel]";if(H(e=n)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e)return"[SyntheticEvent]";if("number"==typeof n&&n!=n)return"[NaN]";if("function"==typeof n)return`[Function: ${function(t){try{return t&&"function"==typeof t&&t.name||Nt}catch(t){return Nt}}(n)}]`;if("symbol"==typeof n)return`[${String(n)}]`;if("bigint"==typeof n)return`[BigInt: ${String(n)}]`;const r=function(t){const n=Object.getPrototypeOf(t);return n?n.constructor.name:"null prototype"}(n);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(t){return`**non-serializable** (${t})`}var e}(t,n);if(!c.startsWith("[object "))return c;if(n.__sentry_skip_normalization__)return n;const u="number"==typeof n.__sentry_override_normalization_depth__?n.__sentry_override_normalization_depth__:e;if(0===u)return c.replace("object ","");if(i(n))return"[Circular ~]";const a=n;if(a&&"function"==typeof a.toJSON)try{return qt("",a.toJSON(),u-1,r,o)}catch(t){}const l=Array.isArray(n)?[]:{};let f=0;const d=Et(n);for(const t in d){if(!Object.prototype.hasOwnProperty.call(d,t))continue;if(f>=r){l[t]="[MaxProperties ~]";break}const n=d[t];l[t]=qt(t,n,u-1,r,o),f++}return s(n),l}const tn=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function nn(t){const n=t.length>1024?`<truncated>${t.slice(-1024)}`:t,e=tn.exec(n);return e?e.slice(1):[]}function en(...t){let n="",e=!1;for(let r=t.length-1;r>=-1&&!e;r--){const o=r>=0?t[r]:"/";o&&(n=`${o}/${n}`,e="/"===o.charAt(0))}return n=function(t,n){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),e++):e&&(t.splice(n,1),e--)}if(n)for(;e--;e)t.unshift("..");return t}(n.split("/").filter((t=>!!t)),!e).join("/"),(e?"/":"")+n||"."}function rn(t){let n=0;for(;n<t.length&&""===t[n];n++);let e=t.length-1;for(;e>=0&&""===t[e];e--);return n>e?[]:t.slice(n,e-n+1)}var on;function sn(t){return new un((n=>{n(t)}))}function cn(t){return new un(((n,e)=>{e(t)}))}!function(t){t[t.PENDING=0]="PENDING";t[t.RESOLVED=1]="RESOLVED";t[t.REJECTED=2]="REJECTED"}(on||(on={}));class un{constructor(t){un.prototype.__init.call(this),un.prototype.__init2.call(this),un.prototype.__init3.call(this),un.prototype.__init4.call(this),this.l=on.PENDING,this.h=[];try{t(this.p,this.S)}catch(t){this.S(t)}}then(t,n){return new un(((e,r)=>{this.h.push([!1,n=>{if(t)try{e(t(n))}catch(t){r(t)}else e(n)},t=>{if(n)try{e(n(t))}catch(t){r(t)}else r(t)}]),this.m()}))}catch(t){return this.then((t=>t),t)}finally(t){return new un(((n,e)=>{let r,o;return this.then((n=>{o=!1,r=n,t&&t()}),(n=>{o=!0,r=n,t&&t()})).then((()=>{o?e(r):n(r)}))}))}__init(){this.p=t=>{this.T(on.RESOLVED,t)}}__init2(){this.S=t=>{this.T(on.REJECTED,t)}}__init3(){this.T=(t,n)=>{this.l===on.PENDING&&(D(n)?n.then(this.p,this.S):(this.l=t,this._=n,this.m()))}}__init4(){this.m=()=>{if(this.l===on.PENDING)return;const t=this.h.slice();this.h=[],t.forEach((t=>{t[0]||(this.l===on.RESOLVED&&t[1](this._),this.l===on.REJECTED&&t[2](this._),t[0]=!0)}))}}}function an(t){const n=[];function e(t){return n.splice(n.indexOf(t),1)[0]}return{$:n,add:function(r){if(!(void 0===t||n.length<t))return cn(new ht("Not adding Promise because buffer limit was reached."));const o=r();return-1===n.indexOf(o)&&n.push(o),o.then((()=>e(o))).then(null,(()=>e(o).then(null,(()=>{})))),o},drain:function(t){return new un(((e,r)=>{let o=n.length;if(!o)return e(!0);const i=setTimeout((()=>{t&&t>0&&e(!1)}),t);n.forEach((t=>{sn(t).then((()=>{--o||(clearTimeout(i),e(!0))}),r)}))}))}}}function ln(t){if(!t)return{};const n=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!n)return{};const e=n[6]||"",r=n[8]||"";return{host:n[4],path:n[5],protocol:n[2],search:e,hash:r,relative:n[5]+e+r}}function fn(t){return t.split(/[\?#]/,1)[0]}function dn(t){const{protocol:n,host:e,path:r}=t;return`${n?`${n}://`:""}${e&&e.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||""}${r}`}const hn={ip:!1,request:!0,transaction:!0,user:!0},pn=["cookies","data","headers","method","query_string","url"],Sn=["id","username","email"];function En(t,n={}){const e=t.method&&t.method.toUpperCase();let r="",o="url";n.customRoute||t.route?(r=n.customRoute||`${t.baseUrl||""}${t.route&&t.route.path}`,o="route"):(t.originalUrl||t.url)&&(r=fn(t.originalUrl||t.url||""));let i="";return n.method&&e&&(i+=e),n.method&&n.path&&(i+=" "),n.path&&r&&(i+=r),[i,o]}function mn(t,n){const{include:e=pn}=n||{},r={},o=t.headers||{},i=t.method,s=o.host||t.hostname||t.host||"<no host>",c="https"===t.protocol||t.socket&&t.socket.encrypted?"https":"http",u=t.originalUrl||t.url||"",a=u.startsWith(c)?u:`${c}://${s}${u}`;return e.forEach((n=>{switch(n){case"headers":r.headers=o,e.includes("cookies")||delete r.headers.cookie;break;case"method":r.method=i;break;case"url":r.url=a;break;case"cookies":r.cookies=t.cookies||o.cookie&&function(t){const n={};let e=0;for(;e<t.length;){const r=t.indexOf("=",e);if(-1===r)break;let o=t.indexOf(";",e);if(-1===o)o=t.length;else if(o<r){e=t.lastIndexOf(";",r-1)+1;continue}const i=t.slice(e,r).trim();if(void 0===n[i]){let e=t.slice(r+1,o).trim();34===e.charCodeAt(0)&&(e=e.slice(1,-1));try{n[i]=-1!==e.indexOf("%")?decodeURIComponent(e):e}catch(t){n[i]=e}}e=o+1}return n}(o.cookie)||{};break;case"query_string":r.query_string=function(t){let n=t.originalUrl||t.url||"";if(!n)return;n.startsWith("/")&&(n=`http://dogs.are.great${n}`);try{const e=t.query||new URL(n).search.slice(1);return e.length?e:void 0}catch(t){return}}(t);break;case"data":if("GET"===i||"HEAD"===i)break;void 0!==t.body&&(r.data=W(t.body)?t.body:JSON.stringify(Qt(t.body)));break;default:({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}})),r}function Tn(t,n,e){const r={...hn,...e&&e.include};if(r.request){const e=Array.isArray(r.request)?mn(n,{include:r.request}):mn(n);t.request={...t.request,...e}}if(r.user){const e=n.user&&H(n.user)?function(t,n){const e={};return(Array.isArray(n)?n:Sn).forEach((n=>{t&&n in t&&(e[n]=t[n])})),e}(n.user,r.user):{};Object.keys(e).length&&(t.user={...t.user,...e})}if(r.ip){const e=n.ip||n.socket&&n.socket.remoteAddress;e&&(t.user={...t.user,ip_address:e})}return r.transaction&&!t.transaction&&"transaction"===t.type&&(t.transaction=function(t,n){switch(n){case"path":return En(t,{path:!0})[0];case"handler":return t.route&&t.route.stack&&t.route.stack[0]&&t.route.stack[0].name||"<anonymous>";default:return En(t,{path:!0,method:!0,customRoute:t.R?t.R:void 0})[0]}}(n,r.transaction)),t}const _n=["fatal","error","warning","log","info","debug"];function bn(t){return"warn"===t?"warning":_n.includes(t)?t:"log"}function vn(t,n=!1){return!(n||t&&!t.startsWith("/")&&!t.match(/^[A-Z]:/)&&!t.startsWith(".")&&!t.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&void 0!==t&&!t.includes("node_modules/")}function yn(t){const n=/^\s*[-]{4,}$/,e=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{const o=r.match(e);if(o){let n,e,r,i,s;if(o[1]){r=o[1];let t=r.lastIndexOf(".");if("."===r[t-1]&&t--,t>0){n=r.slice(0,t),e=r.slice(t+1);const o=n.indexOf(".Module");o>0&&(r=r.slice(o+1),n=n.slice(0,o))}i=void 0}e&&(i=n,s=e),"<anonymous>"===e&&(s=void 0,r=void 0),void 0===r&&(s=s||yt,r=i?`${i}.${s}`:s);let c=o[2]&&o[2].startsWith("file://")?o[2].slice(7):o[2];const u="native"===o[5];return c&&c.match(/\/[A-Z]:/)&&(c=c.slice(1)),c||!o[5]||u||(c=o[5]),{filename:c,module:t?t(c):void 0,function:r,lineno:parseInt(o[3],10)||void 0,colno:parseInt(o[4],10)||void 0,in_app:vn(c,u)}}if(r.match(n))return{filename:r}}}const Rn="sentry-",An=/^sentry-/,On=8192;function gn(t){const n=Cn(t);if(!n)return;const e=Object.entries(n).reduce(((t,[n,e])=>{if(n.match(An)){t[n.slice(Rn.length)]=e}return t}),{});return Object.keys(e).length>0?e:void 0}function Nn(t){if(!t)return;return function(t){if(0===Object.keys(t).length)return;return Object.entries(t).reduce(((t,[n,e],r)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(e)}`,i=0===r?o:`${t},${o}`;return i.length>On?t:i}),"")}(Object.entries(t).reduce(((t,[n,e])=>(e&&(t[`${Rn}${n}`]=e),t)),{}))}function Cn(t){if(t&&(W(t)||Array.isArray(t)))return Array.isArray(t)?t.reduce(((t,n)=>{const e=Ln(n);for(const n of Object.keys(e))t[n]=e[n];return t}),{}):Ln(t)}function Ln(t){return t.split(",").map((t=>t.split("=").map((t=>decodeURIComponent(t.trim()))))).reduce(((t,[n,e])=>(t[n]=e,t)),{})}const In=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function wn(t,n){const e=function(t){if(!t)return;const n=t.match(In);if(!n)return;let e;return"1"===n[3]?e=!0:"0"===n[3]&&(e=!1),{traceId:n[1],parentSampled:e,parentSpanId:n[2]}}(t),r=gn(n),{traceId:o,parentSpanId:i,parentSampled:s}=e||{};return e?{traceId:o||kt(),parentSpanId:i||kt().substring(16),spanId:kt().substring(16),sampled:s,dsc:r||{}}:{traceId:o||kt(),spanId:kt().substring(16)}}function Mn(t=kt(),n=kt().substring(16),e){let r="";return void 0!==e&&(r=e?"-1":"-0"),`${t}-${n}${r}`}function Zn(t,n=[]){return[t,n]}function Pn(t,n){const[e,r]=t;return[e,[...r,n]]}function Vn(t,n){const e=t[1];for(const t of e){if(n(t,t[0].type))return!0}return!1}function Gn(t){return tt.__SENTRY__&&tt.__SENTRY__.encodePolyfill?tt.__SENTRY__.encodePolyfill(t):(new TextEncoder).encode(t)}function Xn(t){const[n,e]=t;let r=JSON.stringify(n);function o(t){"string"==typeof r?r="string"==typeof t?r+t:[Gn(r),t]:r.push("string"==typeof t?Gn(t):t)}for(const t of e){const[n,e]=t;if(o(`\n${JSON.stringify(n)}\n`),"string"==typeof e||e instanceof Uint8Array)o(e);else{let t;try{t=JSON.stringify(e)}catch(n){t=JSON.stringify(Qt(e))}o(t)}}return"string"==typeof r?r:function(t){const n=t.reduce(((t,n)=>t+n.length),0),e=new Uint8Array(n);let r=0;for(const n of t)e.set(n,r),r+=n.length;return e}(r)}function Un(t){return[{type:"span"},t]}function Wn(t){const n="string"==typeof t.data?Gn(t.data):t.data;return[_t({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const Yn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Hn(t){return Yn[t]}function Dn(t){if(!t||!t.sdk)return;const{name:n,version:e}=t.sdk;return{name:n,version:e}}const jn=6e4;function xn(t,{statusCode:n,headers:e},r=Date.now()){const o={...t},i=e&&e["x-sentry-rate-limits"],s=e&&e["retry-after"];if(i)for(const t of i.trim().split(",")){const[n,e,,,i]=t.split(":",5),s=parseInt(n,10),c=1e3*(isNaN(s)?60:s);if(e)for(const t of e.split(";"))"metric_bucket"===t&&i&&!i.split(";").includes("custom")||(o[t]=r+c);else o.all=r+c}else s?o.all=r+function(t,n=Date.now()){const e=parseInt(`${t}`,10);if(!isNaN(e))return 1e3*e;const r=Date.parse(`${t}`);return isNaN(r)?jn:r-n}(s,r):429===n&&(o.all=r+6e4);return o}function kn(t,n){return t(n.stack||"",1)}function Kn(t,n){const e={type:n.name||n.constructor.name,value:n.message},r=kn(t,n);return r.length&&(e.stacktrace={frames:r}),e}function Bn(t){if("name"in t&&"string"==typeof t.name){let n=`'${t.name}' captured as exception`;return"message"in t&&"string"==typeof t.message&&(n+=` with message '${t.message}'`),n}if("message"in t&&"string"==typeof t.message)return t.message;const n=function(t,n=40){const e=Object.keys(Et(t));if(e.sort(),!e.length)return"[object has no keys]";if(e[0].length>=n)return k(e[0],n);for(let t=e.length;t>0;t--){const r=e.slice(0,t).join(", ");if(!(r.length>n))return t===e.length?r:k(r,n)}return""}(t);if(U(t,"ErrorEvent"))return`Event \`ErrorEvent\` captured as exception with message \`${t.message}\``;const e=function(t){try{const n=Object.getPrototypeOf(t);return n?n.constructor.name:void 0}catch(t){}}(t);return`${e&&"Object"!==e?`'${e}'`:"Object"} captured as exception with keys: ${n}`}function Fn(t,n,e,r){if(X(e))return[e,void 0];if(n.synthetic=!0,H(e)){const n={__serialized__:$t(e,t&&t.getOptions().normalizeDepth)},o=function(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];if(e instanceof Error)return e}}(e);if(o)return[o,n];const i=Bn(e),s=r&&r.syntheticException||new Error(i);return s.message=i,[s,n]}const o=r&&r.syntheticException||new Error(e);return o.message=`${e}`,[o,void 0]}class Jn{constructor(t){this.A=t,this.N=new Map}get size(){return this.N.size}get(t){const n=this.N.get(t);if(void 0!==n)return this.N.delete(t),this.N.set(t,n),n}set(t,n){this.N.size>=this.A&&this.N.delete(this.N.keys().next().value),this.N.set(t,n)}remove(t){const n=this.N.get(t);return n&&this.N.delete(t),n}clear(){this.N.clear()}keys(){return Array.from(this.N.keys())}values(){const t=[];return this.N.forEach((n=>t.push(n))),t}}function zn(t,n){return null!=t?t:n()}function Qn(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}function $n(t){const n=Qn(t);return null==n||n}function qn(){return{traceId:kt(),spanId:kt().substring(16)}}var te={},ne={},ee="object"==typeof globalThis?globalThis:global,re="1.8.0",oe=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var ie=function(t){var n=new Set([t]),e=new Set,r=t.match(oe);if(!r)return function(){return!1};var o=+r[1],i=+r[2],s=+r[3];if(null!=r[4])return function(n){return n===t};function c(t){return e.add(t),!1}function u(t){return n.add(t),!0}return function(t){if(n.has(t))return!0;if(e.has(t))return!1;var r=t.match(oe);if(!r)return c(t);var a=+r[1],l=+r[2],f=+r[3];return null!=r[4]||o!==a?c(t):0===o?i===l&&s<=f?u(t):c(t):i<=l?u(t):c(t)}}(re),se=re.split(".")[0],ce=Symbol.for("opentelemetry.js.api."+se),ue=ee;function ae(t,n,e,r){var o;void 0===r&&(r=!1);var i=ue[ce]=null!==(o=ue[ce])&&void 0!==o?o:{version:re};if(!r&&i[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return e.error(s.stack||s.message),!1}if(i.version!==re){s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+re);return e.error(s.stack||s.message),!1}return i[t]=n,e.debug("@opentelemetry/api: Registered a global for "+t+" v"+re+"."),!0}function le(t){var n,e,r=null===(n=ue[ce])||void 0===n?void 0:n.version;if(r&&ie(r))return null===(e=ue[ce])||void 0===e?void 0:e[t]}function fe(t,n){n.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+re+".");var e=ue[ce];e&&delete e[t]}var de,he=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},pe=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},Se=function(){function t(t){this.C=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ee("debug",this.C,t)},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ee("error",this.C,t)},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ee("info",this.C,t)},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ee("warn",this.C,t)},t.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ee("verbose",this.C,t)},t}();function Ee(t,n,e){var r=le("diag");if(r)return e.unshift(n),r[t].apply(r,pe([],he(e),!1))}!function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"}(de||(de={}));var me=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},Te=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},_e=function(){function t(){function t(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=le("diag");if(r)return r[t].apply(r,Te([],me(n),!1))}}var n=this;n.setLogger=function(t,e){var r,o,i;if(void 0===e&&(e={logLevel:de.INFO}),t===n){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error(null!==(r=s.stack)&&void 0!==r?r:s.message),!1}"number"==typeof e&&(e={logLevel:e});var c=le("diag"),u=function(t,n){function e(e,r){var o=n[e];return"function"==typeof o&&t>=r?o.bind(n):function(){}}return t<de.NONE?t=de.NONE:t>de.ALL&&(t=de.ALL),n=n||{},{error:e("error",de.ERROR),warn:e("warn",de.WARN),info:e("info",de.INFO),debug:e("debug",de.DEBUG),verbose:e("verbose",de.VERBOSE)}}(null!==(o=e.logLevel)&&void 0!==o?o:de.INFO,t);if(c&&!e.suppressOverrideMessage){var a=null!==(i=(new Error).stack)&&void 0!==i?i:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+a),u.warn("Current logger will overwrite one already registered from "+a)}return ae("diag",u,n,!0)},n.disable=function(){fe("diag",n)},n.createComponentLogger=function(t){return new Se(t)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return t.instance=function(){return this.L||(this.L=new t),this.L},t}(),be=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},ve=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=function(){function t(t){this.I=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var n=this.I.get(t);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this.I.entries()).map((function(t){var n=be(t,2);return[n[0],n[1]]}))},t.prototype.setEntry=function(n,e){var r=new t(this.I);return r.I.set(n,e),r},t.prototype.removeEntry=function(n){var e=new t(this.I);return e.I.delete(n),e},t.prototype.removeEntries=function(){for(var n,e,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new t(this.I);try{for(var s=ve(r),c=s.next();!c.done;c=s.next()){var u=c.value;i.I.delete(u)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(n)throw n.error}}return i},t.prototype.clear=function(){return new t},t}(),Re=Symbol("BaggageEntryMetadata"),Ae=_e.instance();function Oe(t){return void 0===t&&(t={}),new ye(new Map(Object.entries(t)))}function ge(t){return"string"!=typeof t&&(Ae.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Re,toString:function(){return t}}}function Ne(t){return Symbol.for(t)}var Ce,Le,Ie=function t(n){var e=this;e.M=n?new Map(n):new Map,e.getValue=function(t){return e.M.get(t)},e.setValue=function(n,r){var o=new t(e.M);return o.M.set(n,r),o},e.deleteValue=function(n){var r=new t(e.M);return r.M.delete(n),r}},we=new Ie,Me=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Ze=function(){function t(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(console){var r=console[t];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,n)}}}for(var n=0;n<Me.length;n++)this[Me[n].n]=t(Me[n].c)},Pe=(Ce=function(t,n){return Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},Ce(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}Ce(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),Ve=function(){function t(){}return t.prototype.createHistogram=function(t,n){return Ke},t.prototype.createCounter=function(t,n){return ke},t.prototype.createUpDownCounter=function(t,n){return Be},t.prototype.createObservableGauge=function(t,n){return Je},t.prototype.createObservableCounter=function(t,n){return Fe},t.prototype.createObservableUpDownCounter=function(t,n){return ze},t.prototype.addBatchObservableCallback=function(t,n){},t.prototype.removeBatchObservableCallback=function(t){},t}(),Ge=function(){},Xe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pe(n,t),n.prototype.add=function(t,n){},n}(Ge),Ue=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pe(n,t),n.prototype.add=function(t,n){},n}(Ge),We=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pe(n,t),n.prototype.record=function(t,n){},n}(Ge),Ye=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),He=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pe(n,t),n}(Ye),De=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pe(n,t),n}(Ye),je=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Pe(n,t),n}(Ye),xe=new Ve,ke=new Xe,Ke=new We,Be=new Ue,Fe=new He,Je=new De,ze=new je;!function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"}(Le||(Le={}));var Qe,$e={get:function(t,n){if(null!=t)return t[n]},keys:function(t){return null==t?[]:Object.keys(t)}},qe={set:function(t,n,e){null!=t&&(t[n]=e)}},tr=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},nr=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},er=function(){function t(){}return t.prototype.active=function(){return we},t.prototype.with=function(t,n,e){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return n.call.apply(n,nr([e],tr(r),!1))},t.prototype.bind=function(t,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),rr=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},or=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},ir="context",sr=new er,cr=function(){function t(){}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalContextManager=function(t){return ae(ir,t,_e.instance())},t.prototype.active=function(){return this.Z().active()},t.prototype.with=function(t,n,e){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this.Z()).with.apply(r,or([t,n,e],rr(o),!1))},t.prototype.bind=function(t,n){return this.Z().bind(t,n)},t.prototype.Z=function(){return le(ir)||sr},t.prototype.disable=function(){this.Z().disable(),fe(ir,_e.instance())},t}();!function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"}(Qe||(Qe={}));var ur="0000000000000000",ar="00000000000000000000000000000000",lr={traceId:ar,spanId:ur,traceFlags:Qe.NONE},fr=function(){function t(t){void 0===t&&(t=lr),this.P=t}return t.prototype.spanContext=function(){return this.P},t.prototype.setAttribute=function(t,n){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,n){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,n){},t}(),dr=Ne("OpenTelemetry Context Key SPAN");function hr(t){return t.getValue(dr)||void 0}function pr(){return hr(cr.getInstance().active())}function Sr(t,n){return t.setValue(dr,n)}function Er(t){return t.deleteValue(dr)}function mr(t,n){return Sr(t,new fr(n))}function Tr(t){var n;return null===(n=hr(t))||void 0===n?void 0:n.spanContext()}var _r=/^([0-9a-f]{32})$/i,br=/^[0-9a-f]{16}$/i;function vr(t){return _r.test(t)&&t!==ar}function yr(t){return br.test(t)&&t!==ur}function Rr(t){return vr(t.traceId)&&yr(t.spanId)}function Ar(t){return new fr(t)}var Or=cr.getInstance(),gr=function(){function t(){}return t.prototype.startSpan=function(t,n,e){if(void 0===e&&(e=Or.active()),Boolean(null==n?void 0:n.root))return new fr;var r,o=e&&Tr(e);return"object"==typeof(r=o)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&Rr(o)?new fr(o):new fr},t.prototype.startActiveSpan=function(t,n,e,r){var o,i,s;if(!(arguments.length<2)){2===arguments.length?s=n:3===arguments.length?(o=n,s=e):(o=n,i=e,s=r);var c=null!=i?i:Or.active(),u=this.startSpan(t,o,c),a=Sr(c,u);return Or.with(a,s,void 0,u)}},t}();var Nr,Cr,Lr,Ir=new gr,wr=function(){function t(t,n,e,r){this.V=t,this.name=n,this.version=e,this.options=r}return t.prototype.startSpan=function(t,n,e){return this.G().startSpan(t,n,e)},t.prototype.startActiveSpan=function(t,n,e,r){var o=this.G();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype.G=function(){if(this.X)return this.X;var t=this.V.getDelegateTracer(this.name,this.version,this.options);return t?(this.X=t,this.X):Ir},t}(),Mr=new(function(){function t(){}return t.prototype.getTracer=function(t,n,e){return new gr},t}()),Zr=function(){function t(){}return t.prototype.getTracer=function(t,n,e){var r;return null!==(r=this.getDelegateTracer(t,n,e))&&void 0!==r?r:new wr(this,t,n,e)},t.prototype.getDelegate=function(){var t;return null!==(t=this.X)&&void 0!==t?t:Mr},t.prototype.setDelegate=function(t){this.X=t},t.prototype.getDelegateTracer=function(t,n,e){var r;return null===(r=this.X)||void 0===r?void 0:r.getTracer(t,n,e)},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Nr||(Nr={})),function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(Cr||(Cr={})),function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}(Lr||(Lr={}));var Pr="[_0-9a-z-*/]",Vr=new RegExp("^(?:"+("[a-z]"+Pr+"{0,255}")+"|"+("[a-z0-9]"+Pr+"{0,240}@[a-z]"+Pr+"{0,13}")+")$"),Gr=/^[ -~]{0,255}[!-~]$/,Xr=/,|=/;var Ur=function(){function t(t){this.U=new Map,t&&this.W(t)}return t.prototype.set=function(t,n){var e=this.Y();return e.U.has(t)&&e.U.delete(t),e.U.set(t,n),e},t.prototype.unset=function(t){var n=this.Y();return n.U.delete(t),n},t.prototype.get=function(t){return this.U.get(t)},t.prototype.serialize=function(){var t=this;return this.H().reduce((function(n,e){return n.push(e+"="+t.get(e)),n}),[]).join(",")},t.prototype.W=function(t){t.length>512||(this.U=t.split(",").reverse().reduce((function(t,n){var e=n.trim(),r=e.indexOf("=");if(-1!==r){var o=e.slice(0,r),i=e.slice(r+1,n.length);(function(t){return Vr.test(t)})(o)&&function(t){return Gr.test(t)&&!Xr.test(t)}(i)&&t.set(o,i)}return t}),new Map),this.U.size>32&&(this.U=new Map(Array.from(this.U.entries()).reverse().slice(0,32))))},t.prototype.H=function(){return Array.from(this.U.keys()).reverse()},t.prototype.Y=function(){var n=new t;return n.U=new Map(this.U),n},t}();var Wr=cr.getInstance(),Yr=_e.instance(),Hr=new(function(){function t(){}return t.prototype.getMeter=function(t,n,e){return xe},t}()),Dr="metrics",jr=function(){function t(){}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalMeterProvider=function(t){return ae(Dr,t,_e.instance())},t.prototype.getMeterProvider=function(){return le(Dr)||Hr},t.prototype.getMeter=function(t,n,e){return this.getMeterProvider().getMeter(t,n,e)},t.prototype.disable=function(){fe(Dr,_e.instance())},t}(),xr=jr.getInstance(),kr=function(){function t(){}return t.prototype.inject=function(t,n){},t.prototype.extract=function(t,n){return t},t.prototype.fields=function(){return[]},t}(),Kr=Ne("OpenTelemetry Baggage Key");function Br(t){return t.getValue(Kr)||void 0}function Fr(){return Br(cr.getInstance().active())}function Jr(t,n){return t.setValue(Kr,n)}function zr(t){return t.deleteValue(Kr)}var Qr="propagation",$r=new kr,qr=function(){function t(){this.createBaggage=Oe,this.getBaggage=Br,this.getActiveBaggage=Fr,this.setBaggage=Jr,this.deleteBaggage=zr}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalPropagator=function(t){return ae(Qr,t,_e.instance())},t.prototype.inject=function(t,n,e){return void 0===e&&(e=qe),this.D().inject(t,n,e)},t.prototype.extract=function(t,n,e){return void 0===e&&(e=$e),this.D().extract(t,n,e)},t.prototype.fields=function(){return this.D().fields()},t.prototype.disable=function(){fe(Qr,_e.instance())},t.prototype.D=function(){return le(Qr)||$r},t}(),to=qr.getInstance(),no="trace",eo=function(){function t(){this.K=new Zr,this.wrapSpanContext=Ar,this.isSpanContextValid=Rr,this.deleteSpan=Er,this.getSpan=hr,this.getActiveSpan=pr,this.getSpanContext=Tr,this.setSpan=Sr,this.setSpanContext=mr}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalTracerProvider=function(t){var n=ae(no,this.K,_e.instance());return n&&this.K.setDelegate(t),n},t.prototype.getTracerProvider=function(){return le(no)||this.K},t.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},t.prototype.disable=function(){fe(no,_e.instance()),this.K=new Zr},t}(),ro=eo.getInstance(),oo={context:Wr,diag:Yr,metrics:xr,propagation:to,trace:ro},io=xt(Object.freeze({__proto__:null,DiagConsoleLogger:Ze,get DiagLogLevel(){return de},INVALID_SPANID:ur,INVALID_SPAN_CONTEXT:lr,INVALID_TRACEID:ar,ProxyTracer:wr,ProxyTracerProvider:Zr,ROOT_CONTEXT:we,get SamplingDecision(){return Nr},get SpanKind(){return Cr},get SpanStatusCode(){return Lr},get TraceFlags(){return Qe},get ValueType(){return Le},baggageEntryMetadataFromString:ge,context:Wr,createContextKey:Ne,createNoopMeter:function(){return xe},createTraceState:function(t){return new Ur(t)},default:oo,defaultTextMapGetter:$e,defaultTextMapSetter:qe,diag:Yr,isSpanContextValid:Rr,isValidSpanId:yr,isValidTraceId:vr,metrics:xr,propagation:to,trace:ro})),so=Ne("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function co(t){return t.setValue(so,!0)}function uo(t){return!0===t.getValue(so)}var ao="=",lo=";",fo=",",ho="baggage",po=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s};function So(t){return t.reduce((function(t,n){var e=""+t+(""!==t?fo:"")+n;return e.length>8192?t:e}),"")}function Eo(t){return t.getAllEntries().map((function(t){var n=po(t,2),e=n[0],r=n[1],o=encodeURIComponent(e)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=lo+r.metadata.toString()),o}))}function mo(t){var n=t.split(lo);if(!(n.length<=0)){var e=n.shift();if(e){var r=e.indexOf(ao);if(!(r<=0)){var o,i=decodeURIComponent(e.substring(0,r).trim()),s=decodeURIComponent(e.substring(r+1).trim());return n.length>0&&(o=ge(n.join(lo))),{key:i,value:s,metadata:o}}}}}var To=Object.freeze({__proto__:null,getKeyPairs:Eo,parseKeyPairsIntoRecord:function(t){return"string"!=typeof t||0===t.length?{}:t.split(fo).map((function(t){return mo(t)})).filter((function(t){return void 0!==t&&t.value.length>0})).reduce((function(t,n){return t[n.key]=n.value,t}),{})},parsePairKeyValue:mo,serializeKeyPairs:So}),_o=function(){function t(){}return t.prototype.inject=function(t,n,e){var r=to.getBaggage(t);if(r&&!uo(t)){var o=So(Eo(r).filter((function(t){return t.length<=4096})).slice(0,180));o.length>0&&e.set(n,ho,o)}},t.prototype.extract=function(t,n,e){var r=e.get(n,ho),o=Array.isArray(r)?r.join(fo):r;if(!o)return t;var i={};return 0===o.length?t:(o.split(fo).forEach((function(t){var n=mo(t);if(n){var e={value:n.value};n.metadata&&(e.metadata=n.metadata),i[n.key]=e}})),0===Object.entries(i).length?t:to.setBaggage(t,to.createBaggage(i)))},t.prototype.fields=function(){return[ho]},t}(),bo=function(){function t(t,n){this.B=n,this.F=t.now(),this.J=n.now()}return t.prototype.now=function(){var t=this.B.now()-this.J;return this.F+t},t}(),vo=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},yo=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s};function Ro(t){return"string"==typeof t&&t.length>0}function Ao(t){return null==t||(Array.isArray(t)?function(t){var n,e,r;try{for(var o=vo(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(null!=s){if(!r){if(Oo(s)){r=typeof s;continue}return!1}if(typeof s!==r)return!1}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return!0}(t):Oo(t))}function Oo(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function go(){return function(t){Yr.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){var n={},e=t;for(;null!==e;)Object.getOwnPropertyNames(e).forEach((function(t){if(!n[t]){var r=e[t];r&&(n[t]=String(r))}})),e=Object.getPrototypeOf(e);return n}(t))}(t))}}var No,Co=go();function Lo(t){try{Co(t)}catch(t){}}!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(No||(No={}));var Io=",",wo=["OTEL_SDK_DISABLED"];function Mo(t){return wo.indexOf(t)>-1}var Zo=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Po(t){return Zo.indexOf(t)>-1}var Vo=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Go(t){return Vo.indexOf(t)>-1}var Xo=1/0,Uo=128,Wo={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:de.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xo,OTEL_ATTRIBUTE_COUNT_LIMIT:Uo,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xo,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Uo,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xo,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Uo,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:No.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Yo(t,n,e){if(void 0!==e[t]){var r=String(e[t]);n[t]="true"===r.toLowerCase()}}function Ho(t,n,e,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==e[t]){var i=Number(e[t]);isNaN(i)||(n[t]=i<r?r:i>o?o:i)}}function Do(t,n,e,r){void 0===r&&(r=Io);var o=e[t];"string"==typeof o&&(n[t]=o.split(r).map((function(t){return t.trim()})))}var jo={ALL:de.ALL,VERBOSE:de.VERBOSE,DEBUG:de.DEBUG,INFO:de.INFO,WARN:de.WARN,ERROR:de.ERROR,NONE:de.NONE};function xo(t,n,e){var r=e[t];if("string"==typeof r){var o=jo[r.toUpperCase()];null!=o&&(n[t]=o)}}function ko(t){var n={};for(var e in Wo){var r=e;if("OTEL_LOG_LEVEL"===r)xo(r,n,t);else if(Mo(r))Yo(r,n,t);else if(Po(r))Ho(r,n,t);else if(Go(r))Do(r,n,t);else{var o=t[r];null!=o&&(n[r]=String(o))}}return n}var Ko="object"==typeof globalThis?globalThis:global;function Bo(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function Fo(t){for(var n=new Uint8Array(t.length/2),e=0,r=0;r<t.length;r+=2){var o=Bo(t.charCodeAt(r)),i=Bo(t.charCodeAt(r+1));n[e++]=o<<4|i}return n}var Jo=function(){this.generateTraceId=Qo(16),this.generateSpanId=Qo(8)},zo=Buffer.allocUnsafe(16);function Qo(t){return function(){for(var n=0;n<t/4;n++)zo.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*n);for(n=0;n<t&&!(zo[n]>0);n++)n===t-1&&(zo[t-1]=1);return zo.toString("hex",0,t)}}var $o=t.performance,qo="1.24.1";function ti(t){for(var n={},e=t.length,r=0;r<e;r++){var o=t[r];o&&(n[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return n}var ni,ei="aws.lambda.invoked_arn",ri="db.system",oi="db.connection_string",ii="db.user",si="db.jdbc.driver_classname",ci="db.name",ui="db.statement",ai="db.operation",li="db.mssql.instance_name",fi="db.cassandra.keyspace",di="db.cassandra.page_size",hi="db.cassandra.consistency_level",pi="db.cassandra.table",Si="db.cassandra.idempotence",Ei="db.cassandra.speculative_execution_count",mi="db.cassandra.coordinator.id",Ti="db.cassandra.coordinator.dc",_i="db.hbase.namespace",bi="db.redis.database_index",vi="db.mongodb.collection",yi="db.sql.table",Ri="exception.type",Ai="exception.message",Oi="exception.stacktrace",gi="exception.escaped",Ni="faas.trigger",Ci="faas.execution",Li="faas.document.collection",Ii="faas.document.operation",wi="faas.document.time",Mi="faas.document.name",Zi="faas.time",Pi="faas.cron",Vi="faas.coldstart",Gi="faas.invoked_name",Xi="faas.invoked_provider",Ui="faas.invoked_region",Wi="net.transport",Yi="net.peer.ip",Hi="net.peer.port",Di="net.peer.name",ji="net.host.ip",xi="net.host.port",ki="net.host.name",Ki="net.host.connection.type",Bi="net.host.connection.subtype",Fi="net.host.carrier.name",Ji="net.host.carrier.mcc",zi="net.host.carrier.mnc",Qi="net.host.carrier.icc",$i="peer.service",qi="enduser.id",ts="enduser.role",ns="enduser.scope",es="thread.id",rs="thread.name",os="code.function",is="code.namespace",ss="code.filepath",cs="code.lineno",us="http.method",as="http.url",ls="http.target",fs="http.host",ds="http.scheme",hs="http.status_code",ps="http.flavor",Ss="http.user_agent",Es="http.request_content_length",ms="http.request_content_length_uncompressed",Ts="http.response_content_length",_s="http.response_content_length_uncompressed",bs="http.server_name",vs="http.route",ys="http.client_ip",Rs="aws.dynamodb.table_names",As="aws.dynamodb.consumed_capacity",Os="aws.dynamodb.item_collection_metrics",gs="aws.dynamodb.provisioned_read_capacity",Ns="aws.dynamodb.provisioned_write_capacity",Cs="aws.dynamodb.consistent_read",Ls="aws.dynamodb.projection",Is="aws.dynamodb.limit",ws="aws.dynamodb.attributes_to_get",Ms="aws.dynamodb.index_name",Zs="aws.dynamodb.select",Ps="aws.dynamodb.global_secondary_indexes",Vs="aws.dynamodb.local_secondary_indexes",Gs="aws.dynamodb.exclusive_start_table",Xs="aws.dynamodb.table_count",Us="aws.dynamodb.scan_forward",Ws="aws.dynamodb.segment",Ys="aws.dynamodb.total_segments",Hs="aws.dynamodb.count",Ds="aws.dynamodb.scanned_count",js="aws.dynamodb.attribute_definitions",xs="aws.dynamodb.global_secondary_index_updates",ks="messaging.system",Ks="messaging.destination",Bs="messaging.destination_kind",Fs="messaging.temp_destination",Js="messaging.protocol",zs="messaging.protocol_version",Qs="messaging.url",$s="messaging.message_id",qs="messaging.conversation_id",tc="messaging.message_payload_size_bytes",nc="messaging.message_payload_compressed_size_bytes",ec="messaging.operation",rc="messaging.consumer_id",oc="messaging.rabbitmq.routing_key",ic="messaging.kafka.message_key",sc="messaging.kafka.consumer_group",cc="messaging.kafka.client_id",uc="messaging.kafka.partition",ac="messaging.kafka.tombstone",lc="rpc.system",fc="rpc.service",dc="rpc.method",hc="rpc.grpc.status_code",pc="rpc.jsonrpc.version",Sc="rpc.jsonrpc.request_id",Ec="rpc.jsonrpc.error_code",mc="rpc.jsonrpc.error_message",Tc="message.type",_c="message.id",bc="message.compressed_size",vc="message.uncompressed_size",yc=ei,Rc=ri,Ac=oi,Oc=ii,gc=si,Nc=ci,Cc=ui,Lc=ai,Ic=li,wc=fi,Mc=di,Zc=hi,Pc=pi,Vc=Si,Gc=Ei,Xc=mi,Uc=Ti,Wc=_i,Yc=bi,Hc=vi,Dc=yi,jc=Ri,xc=Ai,kc=Oi,Kc=gi,Bc=Ni,Fc=Ci,Jc=Li,zc=Ii,Qc=wi,$c=Mi,qc=Zi,tu=Pi,nu=Vi,eu=Gi,ru=Xi,ou=Ui,iu=Wi,su=Yi,cu=Hi,uu=Di,au=ji,lu=xi,fu=ki,du=Ki,hu=Bi,pu=Fi,Su=Ji,Eu=zi,mu=Qi,Tu=$i,_u=qi,bu=ts,vu=ns,yu=es,Ru=rs,Au=os,Ou=is,gu=ss,Nu=cs,Cu=us,Lu=as,Iu=ls,wu=fs,Mu=ds,Zu=hs,Pu=ps,Vu=Ss,Gu=Es,Xu=ms,Uu=Ts,Wu=_s,Yu=bs,Hu=vs,Du=ys,ju=Rs,xu=As,ku=Os,Ku=gs,Bu=Ns,Fu=Cs,Ju=Ls,zu=Is,Qu=ws,$u=Ms,qu=Zs,ta=Ps,na=Vs,ea=Gs,ra=Xs,oa=Us,ia=Ws,sa=Ys,ca=Hs,ua=Ds,aa=js,la=xs,fa=ks,da=Ks,ha=Bs,pa=Fs,Sa=Js,Ea=zs,ma=Qs,Ta=$s,_a=qs,ba=tc,va=nc,ya=ec,Ra=rc,Aa=oc,Oa=ic,ga=sc,Na=cc,Ca=uc,La=ac,Ia=lc,wa=fc,Ma=dc,Za=hc,Pa=pc,Va=Sc,Ga=Ec,Xa=mc,Ua=Tc,Wa=_c,Ya=bc,Ha=vc,Da=ti([ei,ri,oi,ii,si,ci,ui,ai,li,fi,di,hi,pi,Si,Ei,mi,Ti,_i,bi,vi,yi,Ri,Ai,Oi,gi,Ni,Ci,Li,Ii,wi,Mi,Zi,Pi,Vi,Gi,Xi,Ui,Wi,Yi,Hi,Di,ji,xi,ki,Ki,Bi,Fi,Ji,zi,Qi,$i,qi,ts,ns,es,rs,os,is,ss,cs,us,as,ls,fs,ds,hs,ps,Ss,Es,ms,Ts,_s,bs,vs,ys,Rs,As,Os,gs,Ns,Cs,Ls,Is,ws,Ms,Zs,Ps,Vs,Gs,Xs,Us,Ws,Ys,Hs,Ds,js,xs,ks,Ks,Bs,Fs,Js,zs,Qs,$s,qs,tc,nc,ec,rc,oc,ic,sc,cc,uc,ac,lc,fc,dc,hc,pc,Sc,Ec,mc,Tc,_c,bc,vc]),ja="other_sql",xa="mssql",ka="mysql",Ka="oracle",Ba="postgresql",Fa="redshift",Ja="hive",za="cloudscape",Qa="hsqldb",$a="progress",qa="maxdb",tl="hanadb",nl="ingres",el="firstsql",rl="cache",ol="adabas",il="firebird",sl="derby",cl="filemaker",ul="informix",al="instantdb",ll="interbase",fl="mariadb",dl="netezza",hl="pervasive",pl="pointbase",Sl="sqlite",El="sybase",ml="teradata",Tl="vertica",_l="coldfusion",bl="cassandra",vl="hbase",yl="mongodb",Rl="redis",Al="couchbase",Ol="couchdb",gl="cosmosdb",Nl="dynamodb",Cl="neo4j",Ll="geode",Il="elasticsearch",wl="memcached",Ml="cockroachdb",Zl=ja,Pl=xa,Vl=ka,Gl=Ka,Xl=Ba,Ul=Fa,Wl=Ja,Yl=za,Hl=Qa,Dl=$a,jl=qa,xl=tl,kl=nl,Kl=el,Bl=rl,Fl=ol,Jl=il,zl=sl,Ql=cl,$l=ul,ql=al,tf=ll,nf=fl,ef=dl,rf=hl,of=pl,sf=Sl,cf=El,uf=ml,af=Tl,lf=_l,ff=bl,df=vl,hf=yl,pf=Rl,Sf=Al,Ef=Ol,mf=gl,Tf=Nl,_f=Cl,bf=Ll,vf=Il,yf=wl,Rf=Ml,Af=ti([ja,xa,ka,Ka,"db2",Ba,Fa,Ja,za,Qa,$a,qa,tl,nl,el,"edb",rl,ol,il,sl,cl,ul,al,ll,fl,dl,hl,pl,Sl,El,ml,Tl,"h2",_l,bl,vl,yl,Rl,Al,Ol,gl,Nl,Cl,Ll,Il,wl,Ml]),Of="each_quorum",gf="quorum",Nf="local_quorum",Cf="three",Lf="local_one",If="serial",wf="local_serial",Mf=Of,Zf=gf,Pf=Nf,Vf=Cf,Gf=Lf,Xf=If,Uf=wf,Wf=ti(["all",Of,gf,Nf,"one","two",Cf,Lf,"any",If,wf]),Yf="datasource",Hf="http",Df="pubsub",jf="timer",xf="other",kf=Yf,Kf=Hf,Bf=Df,Ff=jf,Jf=xf,zf=ti([Yf,Hf,Df,jf,xf]),Qf="insert",$f="edit",qf="delete",td=Qf,nd=$f,ed=qf,rd=ti([Qf,$f,qf]),od="alibaba_cloud",id="azure",sd=od,cd=id,ud=ti([od,"aws",id,"gcp"]),ad="ip_tcp",ld="ip_udp",fd="unix",dd="pipe",hd="inproc",pd="other",Sd=ad,Ed=ld,md=fd,Td=dd,_d=hd,bd=pd,vd=ti([ad,ld,"ip",fd,dd,hd,pd]),yd="wifi",Rd="wired",Ad="cell",Od="unavailable",gd="unknown",Nd=yd,Cd=Rd,Ld=Ad,Id=Od,wd=gd,Md=ti([yd,Rd,Ad,Od,gd]),Zd="gprs",Pd="edge",Vd="umts",Gd="cdma",Xd="evdo_0",Ud="evdo_a",Wd="cdma2000_1xrtt",Yd="hsdpa",Hd="hsupa",Dd="hspa",jd="iden",xd="evdo_b",kd="ehrpd",Kd="hspap",Bd="td_scdma",Fd="iwlan",Jd="nrnsa",zd="lte_ca",Qd=Zd,$d=Pd,qd=Vd,th=Gd,nh=Xd,eh=Ud,rh=Wd,oh=Yd,ih=Hd,sh=Dd,ch=jd,uh=xd,ah=kd,lh=Kd,fh=Bd,dh=Fd,hh=Jd,ph=zd,Sh=ti([Zd,Pd,Vd,Gd,Xd,Ud,Wd,Yd,Hd,Dd,jd,xd,"lte",kd,Kd,"gsm",Bd,Fd,"nr",Jd,zd]),Eh="SPDY",mh="QUIC",Th=Eh,_h=mh,bh={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:Eh,QUIC:mh},vh="queue",yh="topic",Rh=vh,Ah=yh,Oh=ti([vh,yh]),gh="receive",Nh="process",Ch=gh,Lh=Nh,Ih=ti([gh,Nh]),wh={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},Mh="SENT",Zh="RECEIVED",Ph=Mh,Vh=Zh,Gh=ti([Mh,Zh]),Xh="cloud.provider",Uh="cloud.account.id",Wh="cloud.region",Yh="cloud.availability_zone",Hh="cloud.platform",Dh="aws.ecs.container.arn",jh="aws.ecs.cluster.arn",xh="aws.ecs.launchtype",kh="aws.ecs.task.arn",Kh="aws.ecs.task.family",Bh="aws.ecs.task.revision",Fh="aws.eks.cluster.arn",Jh="aws.log.group.names",zh="aws.log.group.arns",Qh="aws.log.stream.names",$h="aws.log.stream.arns",qh="container.name",tp="container.id",np="container.runtime",ep="container.image.name",rp="container.image.tag",op="deployment.environment",ip="device.id",sp="device.model.identifier",cp="device.model.name",up="faas.name",ap="faas.id",lp="faas.version",fp="faas.instance",dp="faas.max_memory",hp="host.id",pp="host.name",Sp="host.type",Ep="host.arch",mp="host.image.name",Tp="host.image.id",_p="host.image.version",bp="k8s.cluster.name",vp="k8s.node.name",yp="k8s.node.uid",Rp="k8s.namespace.name",Ap="k8s.pod.uid",Op="k8s.pod.name",gp="k8s.container.name",Np="k8s.replicaset.uid",Cp="k8s.replicaset.name",Lp="k8s.deployment.uid",Ip="k8s.deployment.name",wp="k8s.statefulset.uid",Mp="k8s.statefulset.name",Zp="k8s.daemonset.uid",Pp="k8s.daemonset.name",Vp="k8s.job.uid",Gp="k8s.job.name",Xp="k8s.cronjob.uid",Up="k8s.cronjob.name",Wp="os.type",Yp="os.description",Hp="os.name",Dp="os.version",jp="process.pid",xp="process.executable.name",kp="process.executable.path",Kp="process.command",Bp="process.command_line",Fp="process.command_args",Jp="process.owner",zp="process.runtime.name",Qp="process.runtime.version",$p="process.runtime.description",qp="service.name",tS="service.namespace",nS="service.instance.id",eS="service.version",rS="telemetry.sdk.name",oS="telemetry.sdk.language",iS="telemetry.sdk.version",sS="telemetry.auto.version",cS="webengine.name",uS="webengine.version",aS="webengine.description",lS=Xh,fS=Uh,dS=Wh,hS=Yh,pS=Hh,SS=Dh,ES=jh,mS=xh,TS=kh,_S=Kh,bS=Bh,vS=Fh,yS=Jh,RS=zh,AS=Qh,OS=$h,gS=qh,NS=tp,CS=np,LS=ep,IS=rp,wS=op,MS=ip,ZS=sp,PS=cp,VS=up,GS=ap,XS=lp,US=fp,WS=dp,YS=hp,HS=pp,DS=Sp,jS=Ep,xS=mp,kS=Tp,KS=_p,BS=bp,FS=vp,JS=yp,zS=Rp,QS=Ap,$S=Op,qS=gp,tE=Np,nE=Cp,eE=Lp,rE=Ip,oE=wp,iE=Mp,sE=Zp,cE=Pp,uE=Vp,aE=Gp,lE=Xp,fE=Up,dE=Wp,hE=Yp,pE=Hp,SE=Dp,EE=jp,mE=xp,TE=kp,_E=Kp,bE=Bp,vE=Fp,yE=Jp,RE=zp,AE=Qp,OE=$p,gE=qp,NE=tS,CE=nS,LE=eS,IE=rS,wE=oS,ME=iS,ZE=sS,PE=cS,VE=uS,GE=aS,XE=ti([Xh,Uh,Wh,Yh,Hh,Dh,jh,xh,kh,Kh,Bh,Fh,Jh,zh,Qh,$h,qh,tp,np,ep,rp,op,ip,sp,cp,up,ap,lp,fp,dp,hp,pp,Sp,Ep,mp,Tp,_p,bp,vp,yp,Rp,Ap,Op,gp,Np,Cp,Lp,Ip,wp,Mp,Zp,Pp,Vp,Gp,Xp,Up,Wp,Yp,Hp,Dp,jp,xp,kp,Kp,Bp,Fp,Jp,zp,Qp,$p,qp,tS,nS,eS,rS,oS,iS,sS,cS,uS,aS]),UE="alibaba_cloud",WE="azure",YE=UE,HE=WE,DE=ti([UE,"aws",WE,"gcp"]),jE="alibaba_cloud_ecs",xE="alibaba_cloud_fc",kE="aws_ec2",KE="aws_ecs",BE="aws_eks",FE="aws_lambda",JE="aws_elastic_beanstalk",zE="azure_vm",QE="azure_container_instances",$E="azure_aks",qE="azure_functions",tm="azure_app_service",nm="gcp_compute_engine",em="gcp_cloud_run",rm="gcp_kubernetes_engine",om="gcp_cloud_functions",im="gcp_app_engine",sm=jE,cm=xE,um=kE,am=KE,lm=BE,fm=FE,dm=JE,hm=zE,pm=QE,Sm=$E,Em=qE,mm=tm,Tm=nm,_m=em,bm=rm,vm=om,ym=im,Rm=ti([jE,xE,kE,KE,BE,FE,JE,zE,QE,$E,qE,tm,nm,em,rm,om,im]),Am="fargate",Om=Am,gm=ti(["ec2",Am]),Nm="amd64",Cm="arm32",Lm="arm64",Im="ia64",wm="ppc32",Mm="ppc64",Zm=Nm,Pm=Cm,Vm=Lm,Gm=Im,Xm=wm,Um=Mm,Wm=ti([Nm,Cm,Lm,Im,wm,Mm,"x86"]),Ym="windows",Hm="linux",Dm="darwin",jm="freebsd",xm="netbsd",km="openbsd",Km="dragonflybsd",Bm="hpux",Fm="solaris",Jm="z_os",zm=Ym,Qm=Hm,$m=Dm,qm=jm,tT=xm,nT=km,eT=Km,rT=Bm,oT=Fm,iT=Jm,sT=ti([Ym,Hm,Dm,jm,xm,km,Km,Bm,"aix",Fm,Jm]),cT="dotnet",uT="erlang",aT="java",lT="nodejs",fT="python",dT="ruby",hT="webjs",pT=cT,ST=uT,ET=aT,mT=lT,TT=fT,_T=dT,bT=hT,vT=ti(["cpp",cT,uT,"go",aT,lT,"php",fT,dT,hT]),yT=Object.freeze({__proto__:null,AWSECSLAUNCHTYPEVALUES_EC2:"ec2",AWSECSLAUNCHTYPEVALUES_FARGATE:Om,AwsEcsLaunchtypeValues:gm,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:sm,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:cm,CLOUDPLATFORMVALUES_AWS_EC2:um,CLOUDPLATFORMVALUES_AWS_ECS:am,CLOUDPLATFORMVALUES_AWS_EKS:lm,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:dm,CLOUDPLATFORMVALUES_AWS_LAMBDA:fm,CLOUDPLATFORMVALUES_AZURE_AKS:Sm,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:mm,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:pm,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:Em,CLOUDPLATFORMVALUES_AZURE_VM:hm,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:ym,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:vm,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:_m,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:Tm,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:bm,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:YE,CLOUDPROVIDERVALUES_AWS:"aws",CLOUDPROVIDERVALUES_AZURE:HE,CLOUDPROVIDERVALUES_GCP:"gcp",CloudPlatformValues:Rm,CloudProviderValues:DE,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:"all",DBCASSANDRACONSISTENCYLEVELVALUES_ANY:"any",DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:Mf,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:Gf,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:Pf,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:Uf,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:"one",DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:Zf,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:Xf,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:Vf,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:"two",DBSYSTEMVALUES_ADABAS:Fl,DBSYSTEMVALUES_CACHE:Bl,DBSYSTEMVALUES_CASSANDRA:ff,DBSYSTEMVALUES_CLOUDSCAPE:Yl,DBSYSTEMVALUES_COCKROACHDB:Rf,DBSYSTEMVALUES_COLDFUSION:lf,DBSYSTEMVALUES_COSMOSDB:mf,DBSYSTEMVALUES_COUCHBASE:Sf,DBSYSTEMVALUES_COUCHDB:Ef,DBSYSTEMVALUES_DB2:"db2",DBSYSTEMVALUES_DERBY:zl,DBSYSTEMVALUES_DYNAMODB:Tf,DBSYSTEMVALUES_EDB:"edb",DBSYSTEMVALUES_ELASTICSEARCH:vf,DBSYSTEMVALUES_FILEMAKER:Ql,DBSYSTEMVALUES_FIREBIRD:Jl,DBSYSTEMVALUES_FIRSTSQL:Kl,DBSYSTEMVALUES_GEODE:bf,DBSYSTEMVALUES_H2:"h2",DBSYSTEMVALUES_HANADB:xl,DBSYSTEMVALUES_HBASE:df,DBSYSTEMVALUES_HIVE:Wl,DBSYSTEMVALUES_HSQLDB:Hl,DBSYSTEMVALUES_INFORMIX:$l,DBSYSTEMVALUES_INGRES:kl,DBSYSTEMVALUES_INSTANTDB:ql,DBSYSTEMVALUES_INTERBASE:tf,DBSYSTEMVALUES_MARIADB:nf,DBSYSTEMVALUES_MAXDB:jl,DBSYSTEMVALUES_MEMCACHED:yf,DBSYSTEMVALUES_MONGODB:hf,DBSYSTEMVALUES_MSSQL:Pl,DBSYSTEMVALUES_MYSQL:Vl,DBSYSTEMVALUES_NEO4J:_f,DBSYSTEMVALUES_NETEZZA:ef,DBSYSTEMVALUES_ORACLE:Gl,DBSYSTEMVALUES_OTHER_SQL:Zl,DBSYSTEMVALUES_PERVASIVE:rf,DBSYSTEMVALUES_POINTBASE:of,DBSYSTEMVALUES_POSTGRESQL:Xl,DBSYSTEMVALUES_PROGRESS:Dl,DBSYSTEMVALUES_REDIS:pf,DBSYSTEMVALUES_REDSHIFT:Ul,DBSYSTEMVALUES_SQLITE:sf,DBSYSTEMVALUES_SYBASE:cf,DBSYSTEMVALUES_TERADATA:uf,DBSYSTEMVALUES_VERTICA:af,DbCassandraConsistencyLevelValues:Wf,DbSystemValues:Af,FAASDOCUMENTOPERATIONVALUES_DELETE:ed,FAASDOCUMENTOPERATIONVALUES_EDIT:nd,FAASDOCUMENTOPERATIONVALUES_INSERT:td,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:sd,FAASINVOKEDPROVIDERVALUES_AWS:"aws",FAASINVOKEDPROVIDERVALUES_AZURE:cd,FAASINVOKEDPROVIDERVALUES_GCP:"gcp",FAASTRIGGERVALUES_DATASOURCE:kf,FAASTRIGGERVALUES_HTTP:Kf,FAASTRIGGERVALUES_OTHER:Jf,FAASTRIGGERVALUES_PUBSUB:Bf,FAASTRIGGERVALUES_TIMER:Ff,FaasDocumentOperationValues:rd,FaasInvokedProviderValues:ud,FaasTriggerValues:zf,HOSTARCHVALUES_AMD64:Zm,HOSTARCHVALUES_ARM32:Pm,HOSTARCHVALUES_ARM64:Vm,HOSTARCHVALUES_IA64:Gm,HOSTARCHVALUES_PPC32:Xm,HOSTARCHVALUES_PPC64:Um,HOSTARCHVALUES_X86:"x86",HTTPFLAVORVALUES_HTTP_1_0:"1.0",HTTPFLAVORVALUES_HTTP_1_1:"1.1",HTTPFLAVORVALUES_HTTP_2_0:"2.0",HTTPFLAVORVALUES_QUIC:_h,HTTPFLAVORVALUES_SPDY:Th,HostArchValues:Wm,HttpFlavorValues:bh,MESSAGETYPEVALUES_RECEIVED:Vh,MESSAGETYPEVALUES_SENT:Ph,MESSAGINGDESTINATIONKINDVALUES_QUEUE:Rh,MESSAGINGDESTINATIONKINDVALUES_TOPIC:Ah,MESSAGINGOPERATIONVALUES_PROCESS:Lh,MESSAGINGOPERATIONVALUES_RECEIVE:Ch,MessageTypeValues:Gh,MessagingDestinationKindValues:Oh,MessagingOperationValues:Ih,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:th,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:rh,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:$d,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:ah,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:nh,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:eh,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:uh,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:Qd,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:"gsm",NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:oh,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:sh,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:lh,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:ih,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:ch,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:dh,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:"lte",NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:ph,NETHOSTCONNECTIONSUBTYPEVALUES_NR:"nr",NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:hh,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:fh,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:qd,NETHOSTCONNECTIONTYPEVALUES_CELL:Ld,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:Id,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:wd,NETHOSTCONNECTIONTYPEVALUES_WIFI:Nd,NETHOSTCONNECTIONTYPEVALUES_WIRED:Cd,NETTRANSPORTVALUES_INPROC:_d,NETTRANSPORTVALUES_IP:"ip",NETTRANSPORTVALUES_IP_TCP:Sd,NETTRANSPORTVALUES_IP_UDP:Ed,NETTRANSPORTVALUES_OTHER:bd,NETTRANSPORTVALUES_PIPE:Td,NETTRANSPORTVALUES_UNIX:md,NetHostConnectionSubtypeValues:Sh,NetHostConnectionTypeValues:Md,NetTransportValues:vd,OSTYPEVALUES_AIX:"aix",OSTYPEVALUES_DARWIN:$m,OSTYPEVALUES_DRAGONFLYBSD:eT,OSTYPEVALUES_FREEBSD:qm,OSTYPEVALUES_HPUX:rT,OSTYPEVALUES_LINUX:Qm,OSTYPEVALUES_NETBSD:tT,OSTYPEVALUES_OPENBSD:nT,OSTYPEVALUES_SOLARIS:oT,OSTYPEVALUES_WINDOWS:zm,OSTYPEVALUES_Z_OS:iT,OsTypeValues:sT,RPCGRPCSTATUSCODEVALUES_ABORTED:10,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:6,RPCGRPCSTATUSCODEVALUES_CANCELLED:1,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:15,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:4,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:9,RPCGRPCSTATUSCODEVALUES_INTERNAL:13,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:3,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:5,RPCGRPCSTATUSCODEVALUES_OK:0,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:11,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:7,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:8,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:16,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:14,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:12,RPCGRPCSTATUSCODEVALUES_UNKNOWN:2,RpcGrpcStatusCodeValues:wh,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:Qu,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:aa,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:Fu,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:xu,SEMATTRS_AWS_DYNAMODB_COUNT:ca,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:ea,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:ta,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:la,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:$u,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:ku,SEMATTRS_AWS_DYNAMODB_LIMIT:zu,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:na,SEMATTRS_AWS_DYNAMODB_PROJECTION:Ju,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:Ku,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:Bu,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:ua,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:oa,SEMATTRS_AWS_DYNAMODB_SEGMENT:ia,SEMATTRS_AWS_DYNAMODB_SELECT:qu,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:ra,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:ju,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:sa,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:yc,SEMATTRS_CODE_FILEPATH:gu,SEMATTRS_CODE_FUNCTION:Au,SEMATTRS_CODE_LINENO:Nu,SEMATTRS_CODE_NAMESPACE:Ou,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:Zc,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:Uc,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:Xc,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:Vc,SEMATTRS_DB_CASSANDRA_KEYSPACE:wc,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:Mc,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:Gc,SEMATTRS_DB_CASSANDRA_TABLE:Pc,SEMATTRS_DB_CONNECTION_STRING:Ac,SEMATTRS_DB_HBASE_NAMESPACE:Wc,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:gc,SEMATTRS_DB_MONGODB_COLLECTION:Hc,SEMATTRS_DB_MSSQL_INSTANCE_NAME:Ic,SEMATTRS_DB_NAME:Nc,SEMATTRS_DB_OPERATION:Lc,SEMATTRS_DB_REDIS_DATABASE_INDEX:Yc,SEMATTRS_DB_SQL_TABLE:Dc,SEMATTRS_DB_STATEMENT:Cc,SEMATTRS_DB_SYSTEM:Rc,SEMATTRS_DB_USER:Oc,SEMATTRS_ENDUSER_ID:_u,SEMATTRS_ENDUSER_ROLE:bu,SEMATTRS_ENDUSER_SCOPE:vu,SEMATTRS_EXCEPTION_ESCAPED:Kc,SEMATTRS_EXCEPTION_MESSAGE:xc,SEMATTRS_EXCEPTION_STACKTRACE:kc,SEMATTRS_EXCEPTION_TYPE:jc,SEMATTRS_FAAS_COLDSTART:nu,SEMATTRS_FAAS_CRON:tu,SEMATTRS_FAAS_DOCUMENT_COLLECTION:Jc,SEMATTRS_FAAS_DOCUMENT_NAME:$c,SEMATTRS_FAAS_DOCUMENT_OPERATION:zc,SEMATTRS_FAAS_DOCUMENT_TIME:Qc,SEMATTRS_FAAS_EXECUTION:Fc,SEMATTRS_FAAS_INVOKED_NAME:eu,SEMATTRS_FAAS_INVOKED_PROVIDER:ru,SEMATTRS_FAAS_INVOKED_REGION:ou,SEMATTRS_FAAS_TIME:qc,SEMATTRS_FAAS_TRIGGER:Bc,SEMATTRS_HTTP_CLIENT_IP:Du,SEMATTRS_HTTP_FLAVOR:Pu,SEMATTRS_HTTP_HOST:wu,SEMATTRS_HTTP_METHOD:Cu,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:Gu,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:Xu,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:Uu,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:Wu,SEMATTRS_HTTP_ROUTE:Hu,SEMATTRS_HTTP_SCHEME:Mu,SEMATTRS_HTTP_SERVER_NAME:Yu,SEMATTRS_HTTP_STATUS_CODE:Zu,SEMATTRS_HTTP_TARGET:Iu,SEMATTRS_HTTP_URL:Lu,SEMATTRS_HTTP_USER_AGENT:Vu,SEMATTRS_MESSAGE_COMPRESSED_SIZE:Ya,SEMATTRS_MESSAGE_ID:Wa,SEMATTRS_MESSAGE_TYPE:Ua,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:Ha,SEMATTRS_MESSAGING_CONSUMER_ID:Ra,SEMATTRS_MESSAGING_CONVERSATION_ID:_a,SEMATTRS_MESSAGING_DESTINATION:da,SEMATTRS_MESSAGING_DESTINATION_KIND:ha,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:Na,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:ga,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:Oa,SEMATTRS_MESSAGING_KAFKA_PARTITION:Ca,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:La,SEMATTRS_MESSAGING_MESSAGE_ID:Ta,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:va,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:ba,SEMATTRS_MESSAGING_OPERATION:ya,SEMATTRS_MESSAGING_PROTOCOL:Sa,SEMATTRS_MESSAGING_PROTOCOL_VERSION:Ea,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:Aa,SEMATTRS_MESSAGING_SYSTEM:fa,SEMATTRS_MESSAGING_TEMP_DESTINATION:pa,SEMATTRS_MESSAGING_URL:ma,SEMATTRS_NET_HOST_CARRIER_ICC:mu,SEMATTRS_NET_HOST_CARRIER_MCC:Su,SEMATTRS_NET_HOST_CARRIER_MNC:Eu,SEMATTRS_NET_HOST_CARRIER_NAME:pu,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:hu,SEMATTRS_NET_HOST_CONNECTION_TYPE:du,SEMATTRS_NET_HOST_IP:au,SEMATTRS_NET_HOST_NAME:fu,SEMATTRS_NET_HOST_PORT:lu,SEMATTRS_NET_PEER_IP:su,SEMATTRS_NET_PEER_NAME:uu,SEMATTRS_NET_PEER_PORT:cu,SEMATTRS_NET_TRANSPORT:iu,SEMATTRS_PEER_SERVICE:Tu,SEMATTRS_RPC_GRPC_STATUS_CODE:Za,SEMATTRS_RPC_JSONRPC_ERROR_CODE:Ga,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:Xa,SEMATTRS_RPC_JSONRPC_REQUEST_ID:Va,SEMATTRS_RPC_JSONRPC_VERSION:Pa,SEMATTRS_RPC_METHOD:Ma,SEMATTRS_RPC_SERVICE:wa,SEMATTRS_RPC_SYSTEM:Ia,SEMATTRS_THREAD_ID:yu,SEMATTRS_THREAD_NAME:Ru,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:ES,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:SS,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:mS,SEMRESATTRS_AWS_ECS_TASK_ARN:TS,SEMRESATTRS_AWS_ECS_TASK_FAMILY:_S,SEMRESATTRS_AWS_ECS_TASK_REVISION:bS,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:vS,SEMRESATTRS_AWS_LOG_GROUP_ARNS:RS,SEMRESATTRS_AWS_LOG_GROUP_NAMES:yS,SEMRESATTRS_AWS_LOG_STREAM_ARNS:OS,SEMRESATTRS_AWS_LOG_STREAM_NAMES:AS,SEMRESATTRS_CLOUD_ACCOUNT_ID:fS,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:hS,SEMRESATTRS_CLOUD_PLATFORM:pS,SEMRESATTRS_CLOUD_PROVIDER:lS,SEMRESATTRS_CLOUD_REGION:dS,SEMRESATTRS_CONTAINER_ID:NS,SEMRESATTRS_CONTAINER_IMAGE_NAME:LS,SEMRESATTRS_CONTAINER_IMAGE_TAG:IS,SEMRESATTRS_CONTAINER_NAME:gS,SEMRESATTRS_CONTAINER_RUNTIME:CS,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:wS,SEMRESATTRS_DEVICE_ID:MS,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:ZS,SEMRESATTRS_DEVICE_MODEL_NAME:PS,SEMRESATTRS_FAAS_ID:GS,SEMRESATTRS_FAAS_INSTANCE:US,SEMRESATTRS_FAAS_MAX_MEMORY:WS,SEMRESATTRS_FAAS_NAME:VS,SEMRESATTRS_FAAS_VERSION:XS,SEMRESATTRS_HOST_ARCH:jS,SEMRESATTRS_HOST_ID:YS,SEMRESATTRS_HOST_IMAGE_ID:kS,SEMRESATTRS_HOST_IMAGE_NAME:xS,SEMRESATTRS_HOST_IMAGE_VERSION:KS,SEMRESATTRS_HOST_NAME:HS,SEMRESATTRS_HOST_TYPE:DS,SEMRESATTRS_K8S_CLUSTER_NAME:BS,SEMRESATTRS_K8S_CONTAINER_NAME:qS,SEMRESATTRS_K8S_CRONJOB_NAME:fE,SEMRESATTRS_K8S_CRONJOB_UID:lE,SEMRESATTRS_K8S_DAEMONSET_NAME:cE,SEMRESATTRS_K8S_DAEMONSET_UID:sE,SEMRESATTRS_K8S_DEPLOYMENT_NAME:rE,SEMRESATTRS_K8S_DEPLOYMENT_UID:eE,SEMRESATTRS_K8S_JOB_NAME:aE,SEMRESATTRS_K8S_JOB_UID:uE,SEMRESATTRS_K8S_NAMESPACE_NAME:zS,SEMRESATTRS_K8S_NODE_NAME:FS,SEMRESATTRS_K8S_NODE_UID:JS,SEMRESATTRS_K8S_POD_NAME:$S,SEMRESATTRS_K8S_POD_UID:QS,SEMRESATTRS_K8S_REPLICASET_NAME:nE,SEMRESATTRS_K8S_REPLICASET_UID:tE,SEMRESATTRS_K8S_STATEFULSET_NAME:iE,SEMRESATTRS_K8S_STATEFULSET_UID:oE,SEMRESATTRS_OS_DESCRIPTION:hE,SEMRESATTRS_OS_NAME:pE,SEMRESATTRS_OS_TYPE:dE,SEMRESATTRS_OS_VERSION:SE,SEMRESATTRS_PROCESS_COMMAND:_E,SEMRESATTRS_PROCESS_COMMAND_ARGS:vE,SEMRESATTRS_PROCESS_COMMAND_LINE:bE,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:mE,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:TE,SEMRESATTRS_PROCESS_OWNER:yE,SEMRESATTRS_PROCESS_PID:EE,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:OE,SEMRESATTRS_PROCESS_RUNTIME_NAME:RE,SEMRESATTRS_PROCESS_RUNTIME_VERSION:AE,SEMRESATTRS_SERVICE_INSTANCE_ID:CE,SEMRESATTRS_SERVICE_NAME:gE,SEMRESATTRS_SERVICE_NAMESPACE:NE,SEMRESATTRS_SERVICE_VERSION:LE,SEMRESATTRS_TELEMETRY_AUTO_VERSION:ZE,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:wE,SEMRESATTRS_TELEMETRY_SDK_NAME:IE,SEMRESATTRS_TELEMETRY_SDK_VERSION:ME,SEMRESATTRS_WEBENGINE_DESCRIPTION:GE,SEMRESATTRS_WEBENGINE_NAME:PE,SEMRESATTRS_WEBENGINE_VERSION:VE,SemanticAttributes:Da,SemanticResourceAttributes:XE,TELEMETRYSDKLANGUAGEVALUES_CPP:"cpp",TELEMETRYSDKLANGUAGEVALUES_DOTNET:pT,TELEMETRYSDKLANGUAGEVALUES_ERLANG:ST,TELEMETRYSDKLANGUAGEVALUES_GO:"go",TELEMETRYSDKLANGUAGEVALUES_JAVA:ET,TELEMETRYSDKLANGUAGEVALUES_NODEJS:mT,TELEMETRYSDKLANGUAGEVALUES_PHP:"php",TELEMETRYSDKLANGUAGEVALUES_PYTHON:TT,TELEMETRYSDKLANGUAGEVALUES_RUBY:_T,TELEMETRYSDKLANGUAGEVALUES_WEBJS:bT,TelemetrySdkLanguageValues:vT}),RT=((ni={})[XE.TELEMETRY_SDK_NAME]="opentelemetry",ni[XE.PROCESS_RUNTIME_NAME]="node",ni[XE.TELEMETRY_SDK_LANGUAGE]=vT.NODEJS,ni[XE.TELEMETRY_SDK_VERSION]=qo,ni);var AT,OT=Math.pow(10,6),gT=Math.pow(10,9);function NT(t){var n=t/1e3;return[Math.trunc(n),Math.round(t%1e3*OT)]}function CT(){var t=$o.timeOrigin;if("number"!=typeof t){var n=$o;t=n.timing&&n.timing.fetchStart}return t}function LT(t){return wT(NT(CT()),NT("number"==typeof t?t:$o.now()))}function IT(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function wT(t,n){var e=[t[0]+n[0],t[1]+n[1]];return e[1]>=gT&&(e[1]-=gT,e[0]+=1),e}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(AT||(AT={}));var MT=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ZT=function(){function t(t){var n;void 0===t&&(t={}),this.tt=null!==(n=t.propagators)&&void 0!==n?n:[],this.nt=Array.from(new Set(this.tt.map((function(t){return"function"==typeof t.fields?t.fields():[]})).reduce((function(t,n){return t.concat(n)}),[])))}return t.prototype.inject=function(t,n,e){var r,o;try{for(var i=MT(this.tt),s=i.next();!s.done;s=i.next()){var c=s.value;try{c.inject(t,n,e)}catch(t){Yr.warn("Failed to inject with "+c.constructor.name+". Err: "+t.message)}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.extract=function(t,n,e){return this.tt.reduce((function(t,r){try{return r.extract(t,n,e)}catch(t){Yr.warn("Failed to inject with "+r.constructor.name+". Err: "+t.message)}return t}),t)},t.prototype.fields=function(){return this.nt.slice()},t}(),PT="[_0-9a-z-*/]",VT=new RegExp("^(?:"+("[a-z]"+PT+"{0,255}")+"|"+("[a-z0-9]"+PT+"{0,240}@[a-z]"+PT+"{0,13}")+")$"),GT=/^[ -~]{0,255}[!-~]$/,XT=/,|=/;var UT=function(){function t(t){this.U=new Map,t&&this.W(t)}return t.prototype.set=function(t,n){var e=this.Y();return e.U.has(t)&&e.U.delete(t),e.U.set(t,n),e},t.prototype.unset=function(t){var n=this.Y();return n.U.delete(t),n},t.prototype.get=function(t){return this.U.get(t)},t.prototype.serialize=function(){var t=this;return this.H().reduce((function(n,e){return n.push(e+"="+t.get(e)),n}),[]).join(",")},t.prototype.W=function(t){t.length>512||(this.U=t.split(",").reverse().reduce((function(t,n){var e=n.trim(),r=e.indexOf("=");if(-1!==r){var o=e.slice(0,r),i=e.slice(r+1,n.length);(function(t){return VT.test(t)})(o)&&function(t){return GT.test(t)&&!XT.test(t)}(i)&&t.set(o,i)}return t}),new Map),this.U.size>32&&(this.U=new Map(Array.from(this.U.entries()).reverse().slice(0,32))))},t.prototype.H=function(){return Array.from(this.U.keys()).reverse()},t.prototype.Y=function(){var n=new t;return n.U=new Map(this.U),n},t}(),WT="traceparent",YT="tracestate",HT=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function DT(t){var n=HT.exec(t);return n?"00"===n[1]&&n[5]?null:{traceId:n[2],spanId:n[3],traceFlags:parseInt(n[4],16)}:null}var jT,xT=function(){function t(){}return t.prototype.inject=function(t,n,e){var r=ro.getSpanContext(t);if(r&&!uo(t)&&Rr(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||Qe.NONE).toString(16);e.set(n,WT,o),r.traceState&&e.set(n,YT,r.traceState.serialize())}},t.prototype.extract=function(t,n,e){var r=e.get(n,WT);if(!r)return t;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return t;var i=DT(o);if(!i)return t;i.isRemote=!0;var s=e.get(n,YT);if(s){var c=Array.isArray(s)?s.join(","):s;i.traceState=new UT("string"==typeof c?c:void 0)}return ro.setSpanContext(t,i)},t.prototype.fields=function(){return[WT,YT]},t}(),kT=Ne("OpenTelemetry SDK Context Key RPC_METADATA");(jT||(jT={})).HTTP="http";var KT,BT,FT=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Nr.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),JT=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Nr.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),zT=function(){function t(t){var n,e,r,o;this.et=t.root,this.et||(Lo(new Error("ParentBasedSampler must have a root sampler configured")),this.et=new JT),this.rt=null!==(n=t.remoteParentSampled)&&void 0!==n?n:new JT,this.ot=null!==(e=t.remoteParentNotSampled)&&void 0!==e?e:new FT,this.it=null!==(r=t.localParentSampled)&&void 0!==r?r:new JT,this.st=null!==(o=t.localParentNotSampled)&&void 0!==o?o:new FT}return t.prototype.shouldSample=function(t,n,e,r,o,i){var s=ro.getSpanContext(t);return s&&Rr(s)?s.isRemote?s.traceFlags&Qe.SAMPLED?this.rt.shouldSample(t,n,e,r,o,i):this.ot.shouldSample(t,n,e,r,o,i):s.traceFlags&Qe.SAMPLED?this.it.shouldSample(t,n,e,r,o,i):this.st.shouldSample(t,n,e,r,o,i):this.et.shouldSample(t,n,e,r,o,i)},t.prototype.toString=function(){return"ParentBased{root="+this.et.toString()+", remoteParentSampled="+this.rt.toString()+", remoteParentNotSampled="+this.ot.toString()+", localParentSampled="+this.it.toString()+", localParentNotSampled="+this.st.toString()+"}"},t}(),QT=function(){function t(t){void 0===t&&(t=0),this.ct=t,this.ct=this.ut(t),this.ft=Math.floor(4294967295*this.ct)}return t.prototype.shouldSample=function(t,n){return{decision:vr(n)&&this.dt(n)<this.ft?Nr.RECORD_AND_SAMPLED:Nr.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this.ct+"}"},t.prototype.ut=function(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t},t.prototype.dt=function(t){for(var n=0,e=0;e<t.length/8;e++){var r=8*e;n=(n^parseInt(t.slice(r,r+8),16))>>>0}return n},t}(),$T="[object Object]",qT="[object Null]",t_="[object Undefined]",n_=Function.prototype.toString,e_=n_.call(Object),r_=(KT=Object.getPrototypeOf,BT=Object,function(t){return KT(BT(t))}),o_=Object.prototype,i_=o_.hasOwnProperty,s_=Symbol?Symbol.toStringTag:void 0,c_=o_.toString;function u_(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||function(t){if(null==t)return void 0===t?t_:qT;return s_&&s_ in Object(t)?function(t){var n=i_.call(t,s_),e=t[s_],r=!1;try{t[s_]=void 0,r=!0}catch(t){}var o=c_.call(t);r&&(n?t[s_]=e:delete t[s_]);return o}(t):function(t){return c_.call(t)}(t)}(t)!==$T)return!1;var n=r_(t);if(null===n)return!0;var e=i_.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&n_.call(e)===e_}var a_=20;function l_(t){return h_(t)?t.slice():t}function f_(t,n,e,r){var o;if(void 0===e&&(e=0),!(e>a_)){if(e++,E_(t)||E_(n)||p_(n))o=l_(n);else if(h_(t)){if(o=t.slice(),h_(n))for(var i=0,s=n.length;i<s;i++)o.push(l_(n[i]));else if(S_(n))for(i=0,s=(c=Object.keys(n)).length;i<s;i++){o[u=c[i]]=l_(n[u])}}else if(S_(t))if(S_(n)){if(!function(t,n){if(!u_(t)||!u_(n))return!1;return!0}(t,n))return n;o=Object.assign({},t);var c;for(i=0,s=(c=Object.keys(n)).length;i<s;i++){var u,a=n[u=c[i]];if(E_(a))void 0===a?delete o[u]:o[u]=a;else{var l=o[u],f=a;if(d_(t,u,r)||d_(n,u,r))delete o[u];else{if(S_(l)&&S_(f)){var d=r.get(l)||[],h=r.get(f)||[];d.push({obj:t,key:u}),h.push({obj:n,key:u}),r.set(l,d),r.set(f,h)}o[u]=f_(o[u],a,e,r)}}}}else o=n;return o}}function d_(t,n,e){for(var r=e.get(t[n])||[],o=0,i=r.length;o<i;o++){var s=r[o];if(s.key===n&&s.obj===t)return!0}return!1}function h_(t){return Array.isArray(t)}function p_(t){return"function"==typeof t}function S_(t){return!E_(t)&&!h_(t)&&!p_(t)&&"object"==typeof t}function E_(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}var m_=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),T_=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return m_(n,t),n}(Error);var __=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function b_(t,n){return"string"==typeof n?t===n:!!t.match(n)}var v_=function(){function t(){var t=this;this.ht=new Promise((function(n,e){t.p=n,t.S=e}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this.ht},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this.p(t)},t.prototype.reject=function(t){this.S(t)},t}(),y_=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},R_=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},A_=function(){function t(t,n){this.St=t,this.Et=n,this.Tt=!1,this._t=new v_}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this.Tt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._t.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!this.Tt){this.Tt=!0;try{Promise.resolve((t=this.St).call.apply(t,R_([this.Et],y_(e),!1))).then((function(t){return n._t.resolve(t)}),(function(t){return n._t.reject(t)}))}catch(t){this._t.reject(t)}}return this._t.promise},t}();var O_={bt:function(t,n){return new Promise((function(e){Wr.with(co(Wr.active()),(function(){t.export(n,(function(t){e(t)}))}))}))}},g_=Object.freeze({__proto__:null,AlwaysOffSampler:FT,AlwaysOnSampler:JT,AnchoredClock:bo,BindOnceFuture:A_,CompositePropagator:ZT,DEFAULT_ATTRIBUTE_COUNT_LIMIT:Uo,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:Xo,DEFAULT_ENVIRONMENT:Wo,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,get ExportResultCode(){return AT},ParentBasedSampler:zT,get RPCType(){return jT},RandomIdGenerator:Jo,SDK_INFO:RT,TRACE_PARENT_HEADER:WT,TRACE_STATE_HEADER:YT,TimeoutError:T_,TraceIdRatioBasedSampler:QT,TraceState:UT,get TracesSamplerValues(){return No},VERSION:qo,W3CBaggagePropagator:_o,W3CTraceContextPropagator:xT,vt:Ko,addHrTimes:wT,baggageUtils:To,callWithTimeout:function(t,n){var e,r=new Promise((function(t,r){e=setTimeout((function(){r(new T_("Operation timed out."))}),n)}));return Promise.race([t,r]).then((function(t){return clearTimeout(e),t}),(function(t){throw clearTimeout(e),t}))},deleteRPCMetadata:function(t){return t.deleteValue(kT)},getEnv:function(){var t=ko(process.env);return Object.assign({},Wo,t)},getEnvWithoutDefaults:function(){return ko(process.env)},getRPCMetadata:function(t){return t.getValue(kT)},getTimeOrigin:CT,globalErrorHandler:Lo,hexToBase64:function(t){return Buffer.from(Fo(t)).toString("base64")},hexToBinary:Fo,hrTime:LT,hrTimeDuration:function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return r<0&&(e-=1,r+=gT),[e,r]},hrTimeToMicroseconds:function(t){return 1e6*t[0]+t[1]/1e3},hrTimeToMilliseconds:function(t){return 1e3*t[0]+t[1]/1e6},hrTimeToNanoseconds:function(t){return t[0]*gT+t[1]},hrTimeToTimeStamp:function(t){var n=""+"0".repeat(9)+t[1]+"Z",e=n.substr(n.length-9-1);return new Date(1e3*t[0]).toISOString().replace("000Z",e)},internal:O_,isAttributeKey:Ro,isAttributeValue:Ao,isTimeInput:function(t){return IT(t)||"number"==typeof t||t instanceof Date},isTimeInputHrTime:IT,isTracingSuppressed:uo,isUrlIgnored:function(t,n){var e,r;if(!n)return!1;try{for(var o=__(n),i=o.next();!i.done;i=o.next()){if(b_(t,i.value))return!0}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return!1},isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},loggingErrorHandler:go,merge:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.shift(),r=new WeakMap;t.length>0;)e=f_(e,t.shift(),0,r);return e},millisToHrTime:NT,otperformance:$o,parseEnvironment:ko,parseTraceParent:DT,sanitizeAttributes:function(t){var n,e,r={};if("object"!=typeof t||null==t)return r;try{for(var o=vo(Object.entries(t)),i=o.next();!i.done;i=o.next()){var s=yo(i.value,2),c=s[0],u=s[1];Ro(c)?Ao(u)?Array.isArray(u)?r[c]=u.slice():r[c]=u:Yr.warn("Invalid attribute value set for key: "+c):Yr.warn("Invalid attribute key: "+c)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return r},setGlobalErrorHandler:function(t){Co=t},setRPCMetadata:function(t,n){return t.setValue(kT,n)},suppressTracing:co,timeInputToHrTime:function(t){if(IT(t))return t;if("number"==typeof t)return t<CT()?LT(t):NT(t);if(t instanceof Date)return NT(t.getTime());throw TypeError("Invalid input type")},unrefTimer:function(t){t.unref()},unsuppressTracing:function(t){return t.deleteValue(so)},urlMatches:b_}),N_=xt(g_),C_={exports:{}};var L_={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var I_="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};!function(t,n){const{MAX_SAFE_COMPONENT_LENGTH:e,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:o}=L_,i=I_,s=(n=t.exports={}).re=[],c=n.safeRe=[],u=n.src=[],a=n.t={};let l=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",o],[f,r]],h=(t,n,e)=>{const r=(t=>{for(const[n,e]of d)t=t.split(`${n}*`).join(`${n}{0,${e}}`).split(`${n}+`).join(`${n}{1,${e}}`);return t})(n),o=l++;i(t,o,n),a[t]=o,u[o]=n,s[o]=new RegExp(n,e?"g":void 0),c[o]=new RegExp(r,e?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${u[a.NUMERICIDENTIFIER]})\\.(${u[a.NUMERICIDENTIFIER]})\\.(${u[a.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[a.NUMERICIDENTIFIERLOOSE]})\\.(${u[a.NUMERICIDENTIFIERLOOSE]})\\.(${u[a.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[a.NUMERICIDENTIFIER]}|${u[a.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[a.NUMERICIDENTIFIERLOOSE]}|${u[a.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${u[a.PRERELEASEIDENTIFIER]}(?:\\.${u[a.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[a.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${u[a.BUILDIDENTIFIER]}(?:\\.${u[a.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[a.MAINVERSION]}${u[a.PRERELEASE]}?${u[a.BUILD]}?`),h("FULL",`^${u[a.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[a.MAINVERSIONLOOSE]}${u[a.PRERELEASELOOSE]}?${u[a.BUILD]}?`),h("LOOSE",`^${u[a.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[a.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[a.XRANGEIDENTIFIER]})(?:\\.(${u[a.XRANGEIDENTIFIER]})(?:\\.(${u[a.XRANGEIDENTIFIER]})(?:${u[a.PRERELEASE]})?${u[a.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[a.XRANGEIDENTIFIERLOOSE]})(?:${u[a.PRERELEASELOOSE]})?${u[a.BUILD]}?)?)?`),h("XRANGE",`^${u[a.GTLT]}\\s*${u[a.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[a.GTLT]}\\s*${u[a.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?(?:$|[^\\d])`),h("COERCERTL",u[a.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[a.LONETILDE]}\\s+`,!0),n.tildeTrimReplace="$1~",h("TILDE",`^${u[a.LONETILDE]}${u[a.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[a.LONETILDE]}${u[a.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[a.LONECARET]}\\s+`,!0),n.caretTrimReplace="$1^",h("CARET",`^${u[a.LONECARET]}${u[a.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[a.LONECARET]}${u[a.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[a.GTLT]}\\s*(${u[a.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[a.GTLT]}\\s*(${u[a.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[a.GTLT]}\\s*(${u[a.LOOSEPLAIN]}|${u[a.XRANGEPLAIN]})`,!0),n.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[a.XRANGEPLAIN]})\\s+-\\s+(${u[a.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[a.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(C_,C_.exports);var w_=C_.exports;const M_=Object.freeze({loose:!0}),Z_=Object.freeze({});var P_=t=>t?"object"!=typeof t?M_:t:Z_;const V_=/^[0-9]+$/,G_=(t,n)=>{const e=V_.test(t),r=V_.test(n);return e&&r&&(t=+t,n=+n),t===n?0:e&&!r?-1:r&&!e?1:t<n?-1:1};var X_={compareIdentifiers:G_,rcompareIdentifiers:(t,n)=>G_(n,t)};const U_=I_,{MAX_LENGTH:W_,MAX_SAFE_INTEGER:Y_}=L_,{safeRe:H_,t:D_}=w_,j_=P_,{compareIdentifiers:x_}=X_;var k_=class t{constructor(n,e){if(e=j_(e),n instanceof t){if(n.loose===!!e.loose&&n.includePrerelease===!!e.includePrerelease)return n;n=n.version}else if("string"!=typeof n)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof n}".`);if(n.length>W_)throw new TypeError(`version is longer than ${W_} characters`);U_("SemVer",n,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const r=n.trim().match(e.loose?H_[D_.LOOSE]:H_[D_.FULL]);if(!r)throw new TypeError(`Invalid Version: ${n}`);if(this.raw=n,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Y_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Y_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Y_||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const n=+t;if(n>=0&&n<Y_)return n}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(n){if(U_("SemVer.compare",this.version,this.options,n),!(n instanceof t)){if("string"==typeof n&&n===this.version)return 0;n=new t(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}compareMain(n){return n instanceof t||(n=new t(n,this.options)),x_(this.major,n.major)||x_(this.minor,n.minor)||x_(this.patch,n.patch)}comparePre(n){if(n instanceof t||(n=new t(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;let e=0;do{const t=this.prerelease[e],r=n.prerelease[e];if(U_("prerelease compare",e,t,r),void 0===t&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===t)return-1;if(t!==r)return x_(t,r)}while(++e)}compareBuild(n){n instanceof t||(n=new t(n,this.options));let e=0;do{const t=this.build[e],r=n.build[e];if(U_("prerelease compare",e,t,r),void 0===t&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===t)return-1;if(t!==r)return x_(t,r)}while(++e)}inc(t,n,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,e),this.inc("pre",n,e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",n,e),this.inc("pre",n,e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(e)?1:0;if(!n&&!1===e)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(n===this.prerelease.join(".")&&!1===e)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(n){let r=[n,t];!1===e&&(r=[n]),0===x_(this.prerelease[0],n)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const K_=k_;var B_=(t,n,e=!1)=>{if(t instanceof K_)return t;try{return new K_(t,n)}catch(t){if(!e)return null;throw t}};const F_=B_;var J_=(t,n)=>{const e=F_(t,n);return e?e.version:null};const z_=B_;var Q_=(t,n)=>{const e=z_(t.trim().replace(/^[=v]+/,""),n);return e?e.version:null};const $_=k_;var q_=(t,n,e,r,o)=>{"string"==typeof e&&(o=r,r=e,e=void 0);try{return new $_(t instanceof $_?t.version:t,e).inc(n,r,o).version}catch(t){return null}};const tb=B_;var nb=(t,n)=>{const e=tb(t,null,!0),r=tb(n,null,!0),o=e.compare(r);if(0===o)return null;const i=o>0,s=i?e:r,c=i?r:e,u=!!s.prerelease.length;if(!!c.prerelease.length&&!u)return c.patch||c.minor?s.patch?"patch":s.minor?"minor":"major":"major";const a=u?"pre":"";return e.major!==r.major?a+"major":e.minor!==r.minor?a+"minor":e.patch!==r.patch?a+"patch":"prerelease"};const eb=k_;var rb=(t,n)=>new eb(t,n).major;const ob=k_;var ib=(t,n)=>new ob(t,n).minor;const sb=k_;var cb=(t,n)=>new sb(t,n).patch;const ub=B_;var ab=(t,n)=>{const e=ub(t,n);return e&&e.prerelease.length?e.prerelease:null};const lb=k_;var fb=(t,n,e)=>new lb(t,e).compare(new lb(n,e));const db=fb;var hb=(t,n,e)=>db(n,t,e);const pb=fb;var Sb=(t,n)=>pb(t,n,!0);const Eb=k_;var mb=(t,n,e)=>{const r=new Eb(t,e),o=new Eb(n,e);return r.compare(o)||r.compareBuild(o)};const Tb=mb;var _b=(t,n)=>t.sort(((t,e)=>Tb(t,e,n)));const bb=mb;var vb=(t,n)=>t.sort(((t,e)=>bb(e,t,n)));const yb=fb;var Rb=(t,n,e)=>yb(t,n,e)>0;const Ab=fb;var Ob=(t,n,e)=>Ab(t,n,e)<0;const gb=fb;var Nb=(t,n,e)=>0===gb(t,n,e);const Cb=fb;var Lb=(t,n,e)=>0!==Cb(t,n,e);const Ib=fb;var wb=(t,n,e)=>Ib(t,n,e)>=0;const Mb=fb;var Zb=(t,n,e)=>Mb(t,n,e)<=0;const Pb=Nb,Vb=Lb,Gb=Rb,Xb=wb,Ub=Ob,Wb=Zb;var Yb=(t,n,e,r)=>{switch(n){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof e&&(e=e.version),t===e;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof e&&(e=e.version),t!==e;case"":case"=":case"==":return Pb(t,e,r);case"!=":return Vb(t,e,r);case">":return Gb(t,e,r);case">=":return Xb(t,e,r);case"<":return Ub(t,e,r);case"<=":return Wb(t,e,r);default:throw new TypeError(`Invalid operator: ${n}`)}};const Hb=k_,Db=B_,{safeRe:jb,t:xb}=w_;var kb,Kb,Bb,Fb,Jb,zb,Qb,$b,qb,tv,nv=(t,n)=>{if(t instanceof Hb)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let e=null;if((n=n||{}).rtl){let n;for(;(n=jb[xb.COERCERTL].exec(t))&&(!e||e.index+e[0].length!==t.length);)e&&n.index+n[0].length===e.index+e[0].length||(e=n),jb[xb.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;jb[xb.COERCERTL].lastIndex=-1}else e=t.match(jb[xb.COERCE]);return null===e?null:Db(`${e[2]}.${e[3]||"0"}.${e[4]||"0"}`,n)};function ev(){if(Fb)return Bb;function t(n){var e=this;if(e instanceof t||(e=new t),e.tail=null,e.head=null,e.length=0,n&&"function"==typeof n.forEach)n.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)e.push(arguments[r]);return e}function n(t,n,e){var r=n===t.head?new o(e,null,n,t):new o(e,n,n.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function e(t,n){t.tail=new o(n,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function r(t,n){t.head=new o(n,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function o(t,n,e,r){if(!(this instanceof o))return new o(t,n,e,r);this.list=r,this.value=t,n?(n.next=this,this.prev=n):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}Fb=1,Bb=t,t.Node=o,t.create=t,t.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var n=t.next,e=t.prev;return n&&(n.prev=e),e&&(e.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=e),t.list.length--,t.next=null,t.prev=null,t.list=null,n},t.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},t.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++}},t.prototype.push=function(){for(var t=0,n=arguments.length;t<n;t++)e(this,arguments[t]);return this.length},t.prototype.unshift=function(){for(var t=0,n=arguments.length;t<n;t++)r(this,arguments[t]);return this.length},t.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},t.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},t.prototype.forEach=function(t,n){n=n||this;for(var e=this.head,r=0;null!==e;r++)t.call(n,e.value,r,this),e=e.next},t.prototype.forEachReverse=function(t,n){n=n||this;for(var e=this.tail,r=this.length-1;null!==e;r--)t.call(n,e.value,r,this),e=e.prev},t.prototype.get=function(t){for(var n=0,e=this.head;null!==e&&n<t;n++)e=e.next;if(n===t&&null!==e)return e.value},t.prototype.getReverse=function(t){for(var n=0,e=this.tail;null!==e&&n<t;n++)e=e.prev;if(n===t&&null!==e)return e.value},t.prototype.map=function(n,e){e=e||this;for(var r=new t,o=this.head;null!==o;)r.push(n.call(e,o.value,this)),o=o.next;return r},t.prototype.mapReverse=function(n,e){e=e||this;for(var r=new t,o=this.tail;null!==o;)r.push(n.call(e,o.value,this)),o=o.prev;return r},t.prototype.reduce=function(t,n){var e,r=this.head;if(arguments.length>1)e=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,e=this.head.value}for(var o=0;null!==r;o++)e=t(e,r.value,o),r=r.next;return e},t.prototype.reduceReverse=function(t,n){var e,r=this.tail;if(arguments.length>1)e=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,e=this.tail.value}for(var o=this.length-1;null!==r;o--)e=t(e,r.value,o),r=r.prev;return e},t.prototype.toArray=function(){for(var t=new Array(this.length),n=0,e=this.head;null!==e;n++)t[n]=e.value,e=e.next;return t},t.prototype.toArrayReverse=function(){for(var t=new Array(this.length),n=0,e=this.tail;null!==e;n++)t[n]=e.value,e=e.prev;return t},t.prototype.slice=function(n,e){(e=e||this.length)<0&&(e+=this.length),(n=n||0)<0&&(n+=this.length);var r=new t;if(e<n||e<0)return r;n<0&&(n=0),e>this.length&&(e=this.length);for(var o=0,i=this.head;null!==i&&o<n;o++)i=i.next;for(;null!==i&&o<e;o++,i=i.next)r.push(i.value);return r},t.prototype.sliceReverse=function(n,e){(e=e||this.length)<0&&(e+=this.length),(n=n||0)<0&&(n+=this.length);var r=new t;if(e<n||e<0)return r;n<0&&(n=0),e>this.length&&(e=this.length);for(var o=this.length,i=this.tail;null!==i&&o>e;o--)i=i.prev;for(;null!==i&&o>n;o--,i=i.prev)r.push(i.value);return r},t.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var o=0,i=this.head;null!==i&&o<t;o++)i=i.next;var s=[];for(o=0;i&&o<e;o++)s.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(o=0;o<r.length;o++)i=n(this,i,r[o]);return s},t.prototype.reverse=function(){for(var t=this.head,n=this.tail,e=t;null!==e;e=e.prev){var r=e.prev;e.prev=e.next,e.next=r}return this.head=n,this.tail=t,this};try{(Kb?kb:(Kb=1,kb=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}))(t)}catch(t){}return Bb}function rv(){if($b)return Qb;$b=1;class t{constructor(n,e){if(e=r(e),n instanceof t)return n.loose===!!e.loose&&n.includePrerelease===!!e.includePrerelease?n:new t(n.raw,e);if(n instanceof o)return this.raw=n.value,this.set=[[n]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=n.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((t=>this.parseRange(t.trim()))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!p(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&S(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((t=>t.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const n=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+t,r=e.get(n);if(r)return r;const s=this.options.loose,S=s?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];t=t.replace(S,N(this.options.includePrerelease)),i("hyphen replace",t),t=t.replace(c[u.COMPARATORTRIM],a),i("comparator trim",t),t=t.replace(c[u.TILDETRIM],l),i("tilde trim",t),t=t.replace(c[u.CARETTRIM],f),i("caret trim",t);let E=t.split(" ").map((t=>m(t,this.options))).join(" ").split(/\s+/).map((t=>g(t,this.options)));s&&(E=E.filter((t=>(i("loose invalid filter",t,this.options),!!t.match(c[u.COMPARATORLOOSE]))))),i("range list",E);const T=new Map,_=E.map((t=>new o(t,this.options)));for(const t of _){if(p(t))return[t];T.set(t.value,t)}T.size>1&&T.has("")&&T.delete("");const b=[...T.values()];return e.set(n,b),b}intersects(n,e){if(!(n instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>E(t,e)&&n.set.some((n=>E(n,e)&&t.every((t=>n.every((n=>t.intersects(n,e)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new s(t,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(C(this.set[n],t,this.options))return!0;return!1}}Qb=t;const n=function(){if(zb)return Jb;zb=1;const t=ev(),n=Symbol("max"),e=Symbol("length"),r=Symbol("lengthCalculator"),o=Symbol("allowStale"),i=Symbol("maxAge"),s=Symbol("dispose"),c=Symbol("noDisposeOnSet"),u=Symbol("lruList"),a=Symbol("cache"),l=Symbol("updateAgeOnGet"),f=()=>1,d=(t,n,e)=>{const r=t[a].get(n);if(r){const n=r.value;if(h(t,n)){if(S(t,r),!t[o])return}else e&&(t[l]&&(r.value.now=Date.now()),t[u].unshiftNode(r));return n.value}},h=(t,n)=>{if(!n||!n.maxAge&&!t[i])return!1;const e=Date.now()-n.now;return n.maxAge?e>n.maxAge:t[i]&&e>t[i]},p=t=>{if(t[e]>t[n])for(let r=t[u].tail;t[e]>t[n]&&null!==r;){const n=r.prev;S(t,r),r=n}},S=(t,n)=>{if(n){const r=n.value;t[s]&&t[s](r.key,r.value),t[e]-=r.length,t[a].delete(r.key),t[u].removeNode(n)}};class E{constructor(t,n,e,r,o){this.key=t,this.value=n,this.length=e,this.now=r,this.maxAge=o||0}}const m=(t,n,e,r)=>{let i=e.value;h(t,i)&&(S(t,e),t[o]||(i=void 0)),i&&n.call(r,i.value,i.key,t)};return Jb=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[n]=t.max||1/0;const e=t.length||f;if(this[r]="function"!=typeof e?f:e,this[o]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[i]=t.maxAge||0,this[s]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[l]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[n]=t||1/0,p(this)}get max(){return this[n]}set allowStale(t){this[o]=!!t}get allowStale(){return this[o]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[i]=t,p(this)}get maxAge(){return this[i]}set lengthCalculator(t){"function"!=typeof t&&(t=f),t!==this[r]&&(this[r]=t,this[e]=0,this[u].forEach((t=>{t.length=this[r](t.value,t.key),this[e]+=t.length}))),p(this)}get lengthCalculator(){return this[r]}get length(){return this[e]}get itemCount(){return this[u].length}rforEach(t,n){n=n||this;for(let e=this[u].tail;null!==e;){const r=e.prev;m(this,t,e,n),e=r}}forEach(t,n){n=n||this;for(let e=this[u].head;null!==e;){const r=e.next;m(this,t,e,n),e=r}}keys(){return this[u].toArray().map((t=>t.key))}values(){return this[u].toArray().map((t=>t.value))}reset(){this[s]&&this[u]&&this[u].length&&this[u].forEach((t=>this[s](t.key,t.value))),this[a]=new Map,this[u]=new t,this[e]=0}dump(){return this[u].map((t=>!h(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[u]}set(t,o,l){if((l=l||this[i])&&"number"!=typeof l)throw new TypeError("maxAge must be a number");const f=l?Date.now():0,d=this[r](o,t);if(this[a].has(t)){if(d>this[n])return S(this,this[a].get(t)),!1;const r=this[a].get(t).value;return this[s]&&(this[c]||this[s](t,r.value)),r.now=f,r.maxAge=l,r.value=o,this[e]+=d-r.length,r.length=d,this.get(t),p(this),!0}const h=new E(t,o,d,f,l);return h.length>this[n]?(this[s]&&this[s](t,o),!1):(this[e]+=h.length,this[u].unshift(h),this[a].set(t,this[u].head),p(this),!0)}has(t){if(!this[a].has(t))return!1;const n=this[a].get(t).value;return!h(this,n)}get(t){return d(this,t,!0)}peek(t){return d(this,t,!1)}pop(){const t=this[u].tail;return t?(S(this,t),t.value):null}del(t){S(this,this[a].get(t))}load(t){this.reset();const n=Date.now();for(let e=t.length-1;e>=0;e--){const r=t[e],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const t=o-n;t>0&&this.set(r.k,r.v,t)}}}prune(){this[a].forEach(((t,n)=>d(this,n,!1)))}},Jb}(),e=new n({max:1e3}),r=P_,o=ov(),i=I_,s=k_,{safeRe:c,t:u,comparatorTrimReplace:a,tildeTrimReplace:l,caretTrimReplace:f}=w_,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=L_,p=t=>"<0.0.0-0"===t.value,S=t=>""===t.value,E=(t,n)=>{let e=!0;const r=t.slice();let o=r.pop();for(;e&&r.length;)e=r.every((t=>o.intersects(t,n))),o=r.pop();return e},m=(t,n)=>(i("comp",t,n),t=v(t,n),i("caret",t),t=_(t,n),i("tildes",t),t=R(t,n),i("xrange",t),t=O(t,n),i("stars",t),t),T=t=>!t||"x"===t.toLowerCase()||"*"===t,_=(t,n)=>t.trim().split(/\s+/).map((t=>b(t,n))).join(" "),b=(t,n)=>{const e=n.loose?c[u.TILDELOOSE]:c[u.TILDE];return t.replace(e,((n,e,r,o,s)=>{let c;return i("tilde",t,n,e,r,o,s),T(e)?c="":T(r)?c=`>=${e}.0.0 <${+e+1}.0.0-0`:T(o)?c=`>=${e}.${r}.0 <${e}.${+r+1}.0-0`:s?(i("replaceTilde pr",s),c=`>=${e}.${r}.${o}-${s} <${e}.${+r+1}.0-0`):c=`>=${e}.${r}.${o} <${e}.${+r+1}.0-0`,i("tilde return",c),c}))},v=(t,n)=>t.trim().split(/\s+/).map((t=>y(t,n))).join(" "),y=(t,n)=>{i("caret",t,n);const e=n.loose?c[u.CARETLOOSE]:c[u.CARET],r=n.includePrerelease?"-0":"";return t.replace(e,((n,e,o,s,c)=>{let u;return i("caret",t,n,e,o,s,c),T(e)?u="":T(o)?u=`>=${e}.0.0${r} <${+e+1}.0.0-0`:T(s)?u="0"===e?`>=${e}.${o}.0${r} <${e}.${+o+1}.0-0`:`>=${e}.${o}.0${r} <${+e+1}.0.0-0`:c?(i("replaceCaret pr",c),u="0"===e?"0"===o?`>=${e}.${o}.${s}-${c} <${e}.${o}.${+s+1}-0`:`>=${e}.${o}.${s}-${c} <${e}.${+o+1}.0-0`:`>=${e}.${o}.${s}-${c} <${+e+1}.0.0-0`):(i("no pr"),u="0"===e?"0"===o?`>=${e}.${o}.${s}${r} <${e}.${o}.${+s+1}-0`:`>=${e}.${o}.${s}${r} <${e}.${+o+1}.0-0`:`>=${e}.${o}.${s} <${+e+1}.0.0-0`),i("caret return",u),u}))},R=(t,n)=>(i("replaceXRanges",t,n),t.split(/\s+/).map((t=>A(t,n))).join(" ")),A=(t,n)=>{t=t.trim();const e=n.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return t.replace(e,((e,r,o,s,c,u)=>{i("xRange",t,e,r,o,s,c,u);const a=T(o),l=a||T(s),f=l||T(c),d=f;return"="===r&&d&&(r=""),u=n.includePrerelease?"-0":"",a?e=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(s=0),c=0,">"===r?(r=">=",l?(o=+o+1,s=0,c=0):(s=+s+1,c=0)):"<="===r&&(r="<",l?o=+o+1:s=+s+1),"<"===r&&(u="-0"),e=`${r+o}.${s}.${c}${u}`):l?e=`>=${o}.0.0${u} <${+o+1}.0.0-0`:f&&(e=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),i("xRange return",e),e}))},O=(t,n)=>(i("replaceStars",t,n),t.trim().replace(c[u.STAR],"")),g=(t,n)=>(i("replaceGTE0",t,n),t.trim().replace(c[n.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=t=>(n,e,r,o,i,s,c,u,a,l,f,d,h)=>`${e=T(r)?"":T(o)?`>=${r}.0.0${t?"-0":""}`:T(i)?`>=${r}.${o}.0${t?"-0":""}`:s?`>=${e}`:`>=${e}${t?"-0":""}`} ${u=T(a)?"":T(l)?`<${+a+1}.0.0-0`:T(f)?`<${a}.${+l+1}.0-0`:d?`<=${a}.${l}.${f}-${d}`:t?`<${a}.${l}.${+f+1}-0`:`<=${u}`}`.trim(),C=(t,n,e)=>{for(let e=0;e<t.length;e++)if(!t[e].test(n))return!1;if(n.prerelease.length&&!e.includePrerelease){for(let e=0;e<t.length;e++)if(i(t[e].semver),t[e].semver!==o.ANY&&t[e].semver.prerelease.length>0){const r=t[e].semver;if(r.major===n.major&&r.minor===n.minor&&r.patch===n.patch)return!0}return!1}return!0};return Qb}function ov(){if(tv)return qb;tv=1;const t=Symbol("SemVer ANY");class n{static get ANY(){return t}constructor(r,o){if(o=e(o),r instanceof n){if(r.loose===!!o.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),s("comparator",r,o),this.options=o,this.loose=!!o.loose,this.parse(r),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(n){const e=this.options.loose?r[o.COMPARATORLOOSE]:r[o.COMPARATOR],i=n.match(e);if(!i)throw new TypeError(`Invalid comparator: ${n}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new c(i[2],this.options.loose):this.semver=t}toString(){return this.value}test(n){if(s("Comparator.test",n,this.options.loose),this.semver===t||n===t)return!0;if("string"==typeof n)try{n=new c(n,this.options)}catch(t){return!1}return i(n,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof n))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(t.value,r).test(this.value):""===t.operator?""===t.value||new u(this.value,r).test(t.semver):(!(r=e(r)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==t.value)&&(!(!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!t.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!t.operator.startsWith("<"))||(!(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))||(!!(i(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))||!!(i(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))))))}}qb=n;const e=P_,{safeRe:r,t:o}=w_,i=Yb,s=I_,c=k_,u=rv();return qb}const iv=rv();var sv=(t,n,e)=>{try{n=new iv(n,e)}catch(t){return!1}return n.test(t)};const cv=rv();var uv=(t,n)=>new cv(t,n).set.map((t=>t.map((t=>t.value)).join(" ").trim().split(" ")));const av=k_,lv=rv();var fv=(t,n,e)=>{let r=null,o=null,i=null;try{i=new lv(n,e)}catch(t){return null}return t.forEach((t=>{i.test(t)&&(r&&-1!==o.compare(t)||(r=t,o=new av(r,e)))})),r};const dv=k_,hv=rv();var pv=(t,n,e)=>{let r=null,o=null,i=null;try{i=new hv(n,e)}catch(t){return null}return t.forEach((t=>{i.test(t)&&(r&&1!==o.compare(t)||(r=t,o=new dv(r,e)))})),r};const Sv=k_,Ev=rv(),mv=Rb;var Tv=(t,n)=>{t=new Ev(t,n);let e=new Sv("0.0.0");if(t.test(e))return e;if(e=new Sv("0.0.0-0"),t.test(e))return e;e=null;for(let n=0;n<t.set.length;++n){const r=t.set[n];let o=null;r.forEach((t=>{const n=new Sv(t.semver.version);switch(t.operator){case">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case"":case">=":o&&!mv(n,o)||(o=n);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}})),!o||e&&!mv(e,o)||(e=o)}return e&&t.test(e)?e:null};const _v=rv();var bv=(t,n)=>{try{return new _v(t,n).range||"*"}catch(t){return null}};const vv=k_,yv=ov(),{ANY:Rv}=yv,Av=rv(),Ov=sv,gv=Rb,Nv=Ob,Cv=Zb,Lv=wb;var Iv=(t,n,e,r)=>{let o,i,s,c,u;switch(t=new vv(t,r),n=new Av(n,r),e){case">":o=gv,i=Cv,s=Nv,c=">",u=">=";break;case"<":o=Nv,i=Lv,s=gv,c="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ov(t,n,r))return!1;for(let e=0;e<n.set.length;++e){const a=n.set[e];let l=null,f=null;if(a.forEach((t=>{t.semver===Rv&&(t=new yv(">=0.0.0")),l=l||t,f=f||t,o(t.semver,l.semver,r)?l=t:s(t.semver,f.semver,r)&&(f=t)})),l.operator===c||l.operator===u)return!1;if((!f.operator||f.operator===c)&&i(t,f.semver))return!1;if(f.operator===u&&s(t,f.semver))return!1}return!0};const wv=Iv;var Mv=(t,n,e)=>wv(t,n,">",e);const Zv=Iv;var Pv=(t,n,e)=>Zv(t,n,"<",e);const Vv=rv();var Gv=(t,n,e)=>(t=new Vv(t,e),n=new Vv(n,e),t.intersects(n,e));const Xv=sv,Uv=fb;const Wv=rv(),Yv=ov(),{ANY:Hv}=Yv,Dv=sv,jv=fb,xv=[new Yv(">=0.0.0-0")],kv=[new Yv(">=0.0.0")],Kv=(t,n,e)=>{if(t===n)return!0;if(1===t.length&&t[0].semver===Hv){if(1===n.length&&n[0].semver===Hv)return!0;t=e.includePrerelease?xv:kv}if(1===n.length&&n[0].semver===Hv){if(e.includePrerelease)return!0;n=kv}const r=new Set;let o,i,s,c,u,a,l;for(const n of t)">"===n.operator||">="===n.operator?o=Bv(o,n,e):"<"===n.operator||"<="===n.operator?i=Fv(i,n,e):r.add(n.semver);if(r.size>1)return null;if(o&&i){if(s=jv(o.semver,i.semver,e),s>0)return null;if(0===s&&(">="!==o.operator||"<="!==i.operator))return null}for(const t of r){if(o&&!Dv(t,String(o),e))return null;if(i&&!Dv(t,String(i),e))return null;for(const r of n)if(!Dv(t,String(r),e))return!1;return!0}let f=!(!i||e.includePrerelease||!i.semver.prerelease.length)&&i.semver,d=!(!o||e.includePrerelease||!o.semver.prerelease.length)&&o.semver;f&&1===f.prerelease.length&&"<"===i.operator&&0===f.prerelease[0]&&(f=!1);for(const t of n){if(l=l||">"===t.operator||">="===t.operator,a=a||"<"===t.operator||"<="===t.operator,o)if(d&&t.semver.prerelease&&t.semver.prerelease.length&&t.semver.major===d.major&&t.semver.minor===d.minor&&t.semver.patch===d.patch&&(d=!1),">"===t.operator||">="===t.operator){if(c=Bv(o,t,e),c===t&&c!==o)return!1}else if(">="===o.operator&&!Dv(o.semver,String(t),e))return!1;if(i)if(f&&t.semver.prerelease&&t.semver.prerelease.length&&t.semver.major===f.major&&t.semver.minor===f.minor&&t.semver.patch===f.patch&&(f=!1),"<"===t.operator||"<="===t.operator){if(u=Fv(i,t,e),u===t&&u!==i)return!1}else if("<="===i.operator&&!Dv(i.semver,String(t),e))return!1;if(!t.operator&&(i||o)&&0!==s)return!1}return!(o&&a&&!i&&0!==s)&&(!(i&&l&&!o&&0!==s)&&(!d&&!f))},Bv=(t,n,e)=>{if(!t)return n;const r=jv(t.semver,n.semver,e);return r>0?t:r<0||">"===n.operator&&">="===t.operator?n:t},Fv=(t,n,e)=>{if(!t)return n;const r=jv(t.semver,n.semver,e);return r<0?t:r>0||"<"===n.operator&&"<="===t.operator?n:t};var Jv=(t,n,e={})=>{if(t===n)return!0;t=new Wv(t,e),n=new Wv(n,e);let r=!1;t:for(const o of t.set){for(const t of n.set){const n=Kv(o,t,e);if(r=r||null!==n,n)continue t}if(r)return!1}return!0};const zv=w_,Qv=L_,$v=k_,qv=X_,ty=(t,n,e)=>{const r=[];let o=null,i=null;const s=t.sort(((t,n)=>Uv(t,n,e)));for(const t of s){Xv(t,n,e)?(i=t,o||(o=t)):(i&&r.push([o,i]),i=null,o=null)}o&&r.push([o,null]);const c=[];for(const[t,n]of r)t===n?c.push(t):n||t!==s[0]?n?t===s[0]?c.push(`<=${n}`):c.push(`${t} - ${n}`):c.push(`>=${t}`):c.push("*");const u=c.join(" || "),a="string"==typeof n.raw?n.raw:String(n);return u.length<a.length?u:n};var ny={parse:B_,valid:J_,clean:Q_,inc:q_,diff:nb,major:rb,minor:ib,patch:cb,prerelease:ab,compare:fb,rcompare:hb,compareLoose:Sb,compareBuild:mb,sort:_b,rsort:vb,gt:Rb,lt:Ob,eq:Nb,neq:Lb,gte:wb,lte:Zb,cmp:Yb,coerce:nv,Comparator:ov(),Range:rv(),satisfies:sv,toComparators:uv,maxSatisfying:fv,minSatisfying:pv,minVersion:Tv,validRange:bv,outside:Iv,gtr:Mv,ltr:Pv,intersects:Gv,simplifyRange:ty,subset:Jv,SemVer:$v,re:zv.re,src:zv.src,tokens:zv.t,SEMVER_SPEC_VERSION:Qv.SEMVER_SPEC_VERSION,RELEASE_TYPES:Qv.RELEASE_TYPES,compareIdentifiers:qv.compareIdentifiers,rcompareIdentifiers:qv.rcompareIdentifiers},ey={},ry=xt(yT),oy={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.HTTP_ERROR_NAME="http.error_name",t.HTTP_ERROR_MESSAGE="http.error_message",t.HTTP_STATUS_TEXT="http.status_text"}(t.AttributeNames||(t.AttributeNames={}))}(oy),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.headerCapture=t.getIncomingRequestMetricAttributesOnResponse=t.getIncomingRequestAttributesOnResponse=t.getIncomingRequestMetricAttributes=t.getIncomingRequestAttributes=t.getOutgoingRequestMetricAttributesOnResponse=t.getOutgoingRequestAttributesOnResponse=t.setAttributesFromHttpKind=t.getOutgoingRequestMetricAttributes=t.getOutgoingRequestAttributes=t.extractHostnameAndPort=t.isValidOptionsType=t.getRequestInfo=t.isCompressed=t.setResponseContentLengthAttribute=t.setRequestContentLengthAttribute=t.setSpanWithError=t.isIgnored=t.satisfiesPattern=t.parseResponseStatus=t.getAbsoluteUrl=void 0;const n=io,e=ry,r=N_,o=c,i=oy;t.getAbsoluteUrl=(t,n,e="http:")=>{const r=t||{},o=r.protocol||e,i=(r.port||"").toString(),s=r.path||"/";let c=r.host||r.hostname||n.host||"localhost";return-1===c.indexOf(":")&&i&&"80"!==i&&"443"!==i&&(c+=`:${i}`),`${o}//${c}${s}`};t.parseResponseStatus=(t,e)=>{const r=t===n.SpanKind.CLIENT?400:500;return e&&e>=100&&e<r?n.SpanStatusCode.UNSET:n.SpanStatusCode.ERROR};t.satisfiesPattern=(t,n)=>{if("string"==typeof n)return n===t;if(n instanceof RegExp)return n.test(t);if("function"==typeof n)return n(t);throw new TypeError("Pattern is in unsupported datatype")};t.isIgnored=(n,e,r)=>{if(!e)return!1;try{for(const r of e)if((0,t.satisfiesPattern)(n,r))return!0}catch(t){r&&r(t)}return!1};t.setSpanWithError=(t,e)=>{const r=e.message;t.setAttribute(i.AttributeNames.HTTP_ERROR_NAME,e.name),t.setAttribute(i.AttributeNames.HTTP_ERROR_MESSAGE,r),t.setStatus({code:n.SpanStatusCode.ERROR,message:r}),t.recordException(e)};t.setRequestContentLengthAttribute=(n,r)=>{const o=s(n.headers);null!==o&&((0,t.isCompressed)(n.headers)?r[e.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH]=o:r[e.SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED]=o)};function s(t){const n=t["content-length"];if(void 0===n)return null;const e=parseInt(n,10);return isNaN(e)?null:e}t.setResponseContentLengthAttribute=(n,r)=>{const o=s(n.headers);null!==o&&((0,t.isCompressed)(n.headers)?r[e.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH]=o:r[e.SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED]=o)};t.isCompressed=t=>{const n=t["content-encoding"];return!!n&&"identity"!==n};t.getRequestInfo=(t,n)=>{let e,r="/",i="";if("string"==typeof t)e=o.parse(t),r=e.pathname||"/",i=`${e.protocol||"http:"}//${e.host}`,void 0!==n&&Object.assign(e,n);else if(t instanceof o.URL)e={protocol:t.protocol,hostname:"string"==typeof t.hostname&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,path:`${t.pathname||""}${t.search||""}`},""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`),r=t.pathname,i=t.origin,void 0!==n&&Object.assign(e,n);else{e=Object.assign({protocol:t.host?"http:":void 0},t),r=t.pathname,!r&&e.path&&(r=o.parse(e.path).pathname||"/");const n=e.host||(null!=e.port?`${e.hostname}${e.port}`:e.hostname);i=`${e.protocol||"http:"}//${n}`}return{origin:i,pathname:r,method:e.method?e.method.toUpperCase():"GET",optionsParsed:e}};t.isValidOptionsType=t=>{if(!t)return!1;const n=typeof t;return"string"===n||"object"===n&&!Array.isArray(t)};t.extractHostnameAndPort=t=>{var n;if(t.hostname&&t.port)return{hostname:t.hostname,port:t.port};const e=(null===(n=t.host)||void 0===n?void 0:n.match(/^([^:/ ]+)(:\d{1,5})?/))||null,r=t.hostname||(null===e?"localhost":e[1]);let o=t.port;return o||(o=e&&e[2]?e[2].substring(1):"https:"===t.protocol?"443":"80"),{hostname:r,port:o}};t.getOutgoingRequestAttributes=(n,r)=>{var o;const i=r.hostname,s=r.port,c=n.method,u=c?c.toUpperCase():"GET",a=n.headers||{},l=a["user-agent"],f={[e.SEMATTRS_HTTP_URL]:(0,t.getAbsoluteUrl)(n,a,`${r.component}:`),[e.SEMATTRS_HTTP_METHOD]:u,[e.SEMATTRS_HTTP_TARGET]:n.path||"/",[e.SEMATTRS_NET_PEER_NAME]:i,[e.SEMATTRS_HTTP_HOST]:null!==(o=a.host)&&void 0!==o?o:`${i}:${s}`};return void 0!==l&&(f[e.SEMATTRS_HTTP_USER_AGENT]=l),Object.assign(f,r.hookAttributes)};t.getOutgoingRequestMetricAttributes=t=>{const n={};return n[e.SEMATTRS_HTTP_METHOD]=t[e.SEMATTRS_HTTP_METHOD],n[e.SEMATTRS_NET_PEER_NAME]=t[e.SEMATTRS_NET_PEER_NAME],n};t.setAttributesFromHttpKind=(t,n)=>{t&&(n[e.SEMATTRS_HTTP_FLAVOR]=t,"QUIC"!==t.toUpperCase()?n[e.SEMATTRS_NET_TRANSPORT]=e.NETTRANSPORTVALUES_IP_TCP:n[e.SEMATTRS_NET_TRANSPORT]=e.NETTRANSPORTVALUES_IP_UDP)};t.getOutgoingRequestAttributesOnResponse=n=>{const{statusCode:r,statusMessage:o,httpVersion:s,socket:c}=n,u={};if(c){const{remoteAddress:t,remotePort:n}=c;u[e.SEMATTRS_NET_PEER_IP]=t,u[e.SEMATTRS_NET_PEER_PORT]=n}return(0,t.setResponseContentLengthAttribute)(n,u),r&&(u[e.SEMATTRS_HTTP_STATUS_CODE]=r,u[i.AttributeNames.HTTP_STATUS_TEXT]=(o||"").toUpperCase()),(0,t.setAttributesFromHttpKind)(s,u),u};t.getOutgoingRequestMetricAttributesOnResponse=t=>{const n={};return n[e.SEMATTRS_NET_PEER_PORT]=t[e.SEMATTRS_NET_PEER_PORT],n[e.SEMATTRS_HTTP_STATUS_CODE]=t[e.SEMATTRS_HTTP_STATUS_CODE],n[e.SEMATTRS_HTTP_FLAVOR]=t[e.SEMATTRS_HTTP_FLAVOR],n};t.getIncomingRequestAttributes=(n,r)=>{const i=n.headers,s=i["user-agent"],c=i["x-forwarded-for"],u=n.method||"GET",a=n.httpVersion,l=n.url?o.parse(n.url):null,f=(null==l?void 0:l.host)||i.host,d=(null==l?void 0:l.hostname)||(null==f?void 0:f.replace(/^(.*)(:[0-9]{1,5})/,"$1"))||"localhost",h=r.serverName,p={[e.SEMATTRS_HTTP_URL]:(0,t.getAbsoluteUrl)(l,i,`${r.component}:`),[e.SEMATTRS_HTTP_HOST]:f,[e.SEMATTRS_NET_HOST_NAME]:d,[e.SEMATTRS_HTTP_METHOD]:u,[e.SEMATTRS_HTTP_SCHEME]:r.component};return"string"==typeof c&&(p[e.SEMATTRS_HTTP_CLIENT_IP]=c.split(",")[0]),"string"==typeof h&&(p[e.SEMATTRS_HTTP_SERVER_NAME]=h),l&&(p[e.SEMATTRS_HTTP_TARGET]=l.path||"/"),void 0!==s&&(p[e.SEMATTRS_HTTP_USER_AGENT]=s),(0,t.setRequestContentLengthAttribute)(n,p),(0,t.setAttributesFromHttpKind)(a,p),Object.assign(p,r.hookAttributes)};t.getIncomingRequestMetricAttributes=t=>{const n={};return n[e.SEMATTRS_HTTP_SCHEME]=t[e.SEMATTRS_HTTP_SCHEME],n[e.SEMATTRS_HTTP_METHOD]=t[e.SEMATTRS_HTTP_METHOD],n[e.SEMATTRS_NET_HOST_NAME]=t[e.SEMATTRS_NET_HOST_NAME],n[e.SEMATTRS_HTTP_FLAVOR]=t[e.SEMATTRS_HTTP_FLAVOR],n};t.getIncomingRequestAttributesOnResponse=(t,o)=>{const{socket:s}=t,{statusCode:c,statusMessage:u}=o,a=(0,r.getRPCMetadata)(n.context.active()),l={};if(s){const{localAddress:t,localPort:n,remoteAddress:r,remotePort:o}=s;l[e.SEMATTRS_NET_HOST_IP]=t,l[e.SEMATTRS_NET_HOST_PORT]=n,l[e.SEMATTRS_NET_PEER_IP]=r,l[e.SEMATTRS_NET_PEER_PORT]=o}return l[e.SEMATTRS_HTTP_STATUS_CODE]=c,l[i.AttributeNames.HTTP_STATUS_TEXT]=(u||"").toUpperCase(),(null==a?void 0:a.type)===r.RPCType.HTTP&&void 0!==a.route&&(l[e.SEMATTRS_HTTP_ROUTE]=a.route),l};t.getIncomingRequestMetricAttributesOnResponse=t=>{const n={};return n[e.SEMATTRS_HTTP_STATUS_CODE]=t[e.SEMATTRS_HTTP_STATUS_CODE],n[e.SEMATTRS_NET_HOST_PORT]=t[e.SEMATTRS_NET_HOST_PORT],void 0!==t[e.SEMATTRS_HTTP_ROUTE]&&(n[e.SEMATTRS_HTTP_ROUTE]=t[e.SEMATTRS_HTTP_ROUTE]),n},t.headerCapture=function(t,n){const e=new Map;for(let t=0,r=n.length;t<r;t++){const r=n[t].toLowerCase();e.set(r,r.replace(/-/g,"_"))}return(n,r)=>{for(const o of e.keys()){const i=r(o);if(void 0===i)continue;const s=e.get(o),c=`http.${t}.header.${s}`;"string"==typeof i?n.setAttribute(c,[i]):Array.isArray(i)?n.setAttribute(c,i):n.setAttribute(c,[i])}}}}(ey);var iy={};Object.defineProperty(iy,"__esModule",{value:!0}),iy.VERSION=void 0,iy.VERSION="0.51.1";var sy=function(){function t(){}return t.prototype.emit=function(t){},t}(),cy=function(){function t(){}return t.prototype.getLogger=function(t,n,e){return new sy},t}(),uy=new cy,ay="object"==typeof globalThis?globalThis:global,ly=Symbol.for("io.opentelemetry.js.api.logs"),fy=ay;var dy=function(){function t(){}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalLoggerProvider=function(t){return fy[ly]?this.getLoggerProvider():(fy[ly]=(n=1,e=t,r=uy,function(t){return t===n?e:r}),t);var n,e,r},t.prototype.getLoggerProvider=function(){var t,n;return null!==(n=null===(t=fy[ly])||void 0===t?void 0:t.call(fy,1))&&void 0!==n?n:uy},t.prototype.getLogger=function(t,n,e){return this.getLoggerProvider().getLogger(t,n,e)},t.prototype.disable=function(){delete fy[ly]},t}(),hy=dy.getInstance();function py(t){void 0===t&&(t=[]);for(var n=[],e=0,r=t.length;e<r;e++){var o=t[e];if(Array.isArray(o)){var i=py(o);n=n.concat(i.instrumentations)}else"function"==typeof o?n.push(new o):o.instrumentationName&&n.push(o)}return{instrumentations:n}}function Sy(t){return"function"==typeof t}var Ey=console.error.bind(console);function my(t,n,e){var r=!!t[n]&&t.propertyIsEnumerable(n);Object.defineProperty(t,n,{configurable:!0,enumerable:r,writable:!0,value:e})}function Ty(t){t&&t.logger&&(Sy(t.logger)?Ey=t.logger:Ey("new logger isn't a function, not replacing"))}function _y(t,n,e){if(t&&t[n]){if(!e)return Ey("no wrapper function"),void Ey((new Error).stack);if(Sy(t[n])&&Sy(e)){var r=t[n],o=e(r,n);return my(o,"__original",r),my(o,"__unwrap",(function(){t[n]===o&&my(t,n,r)})),my(o,"__wrapped",!0),my(t,n,o),o}Ey("original object and wrapper must be functions")}else Ey("no original function "+n+" to wrap")}function by(t,n){return t&&t[n]?t[n].__unwrap?t[n].__unwrap():void Ey("no original to unwrap to -- has "+n+" already been unwrapped?"):(Ey("no function to unwrap."),void Ey((new Error).stack))}Ty.wrap=_y,Ty.massWrap=function(t,n,e){if(!t)return Ey("must provide one or more modules to patch"),void Ey((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){_y(t,n,e)}))})):Ey("must provide one or more functions to wrap on modules")},Ty.unwrap=by,Ty.massUnwrap=function(t,n){if(!t)return Ey("must provide one or more modules to patch"),void Ey((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){by(t,n)}))})):Ey("must provide one or more functions to unwrap on modules")};var vy,yy=Ty,Ry=function(){return Ry=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Ry.apply(this,arguments)},Ay=function(){function t(t,n,e){void 0===e&&(e={}),this.instrumentationName=t,this.instrumentationVersion=n,this.yt=yy.wrap,this.Rt=yy.unwrap,this.At=yy.massWrap,this.Ot=yy.massUnwrap,this.Nt=Ry({enabled:!0},e),this.Ct=Yr.createComponentLogger({namespace:t}),this.Lt=ro.getTracer(t,n),this.It=xr.getMeter(t,n),this.wt=hy.getLogger(t,n),this.Mt()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this.It=t.getMeter(this.instrumentationName,this.instrumentationVersion),this.Mt()},Object.defineProperty(t.prototype,"logger",{get:function(){return this.wt},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(t){this.wt=t.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var t,n=null!==(t=this.init())&&void 0!==t?t:[];return Array.isArray(n)?n:[n]},t.prototype.Mt=function(){},t.prototype.getConfig=function(){return this.Nt},t.prototype.setConfig=function(t){void 0===t&&(t={}),this.Nt=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this.Lt=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),t}(),Oy={exports:{}},gy=i.homedir||function(){var t=process.env.HOME,n=process.env.LOGNAME||process.env.USER||process.env.LNAME||process.env.USERNAME;return"win32"===process.platform?process.env.USERPROFILE||process.env.HOMEDRIVE+process.env.HOMEPATH||t||null:"darwin"===process.platform?t||(n?"/Users/"+n:null):"linux"===process.platform?t||(0===process.getuid()?"/root":n?"/home/"+n:null):t||null},Ny=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(t,n){return n};var n=(new Error).stack;return Error.prepareStackTrace=t,n[2].getFileName()},Cy={exports:{}};var Ly=n,Iy=Ly.parse||function(){if(vy)return Cy.exports;vy=1;var t="win32"===process.platform,n=/^(((?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/,e={};e.parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e,r=(e=t,n.exec(e).slice(1));if(!r||5!==r.length)throw new TypeError("Invalid path '"+t+"'");return{root:r[1],dir:r[0]===r[1]?r[0]:r[0].slice(0,-1),base:r[2],ext:r[4],name:r[3]}};var r=/^((\/?)(?:[^\/]*\/)*)((\.{1,2}|[^\/]+?|)(\.[^.\/]*|))[\/]*$/,o={};return o.parse=function(t){if("string"!=typeof t)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var n,e=(n=t,r.exec(n).slice(1));if(!e||5!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[1],dir:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}},Cy.exports=t?e.parse:o.parse,Cy.exports.posix=o.parse,Cy.exports.win32=e.parse,Cy.exports}(),wy=function(t,n){var e="/";/^([A-Za-z]:)/.test(t)?e="":/^\\\\/.test(t)&&(e="\\\\");for(var r=[t],o=Iy(t);o.dir!==r[r.length-1];)r.push(o.dir),o=Iy(o.dir);return r.reduce((function(t,r){return t.concat(n.map((function(t){return Ly.resolve(e,r,t)})))}),[])},My=function(t,n,e){var r=n&&n.moduleDirectory?[].concat(n.moduleDirectory):["node_modules"];if(n&&"function"==typeof n.paths)return n.paths(e,t,(function(){return wy(t,r)}),n);var o=wy(t,r);return n&&n.paths?o.concat(n.paths):o},Zy=function(t,n){return n||{}},Py=Array.prototype.slice,Vy=Object.prototype.toString,Gy=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==Vy.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var e,r=Py.call(arguments,1),o=Math.max(0,n.length-r.length),i=[],s=0;s<o;s++)i.push("$"+s);if(e=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof e){var o=n.apply(this,r.concat(Py.call(arguments)));return Object(o)===o?o:this}return n.apply(t,r.concat(Py.call(arguments)))})),n.prototype){var c=function(){};c.prototype=n.prototype,e.prototype=new c,c.prototype=null}return e},Xy=(Function.prototype.bind||Gy).call(Function.call,Object.prototype.hasOwnProperty);function Uy(t,n){for(var e=t.split("."),r=n.split(" "),o=r.length>1?r[0]:"=",i=(r.length>1?r[1]:r[0]).split("."),s=0;s<3;++s){var c=parseInt(e[s]||0,10),u=parseInt(i[s]||0,10);if(c!==u)return"<"===o?c<u:">="===o&&c>=u}return">="===o}function Wy(t,n){var e=n.split(/ ?&& ?/);if(0===e.length)return!1;for(var r=0;r<e.length;++r)if(!Uy(t,e[r]))return!1;return!0}var Yy={assert:!0,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:!0,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:!0,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:!0,"node:console":[">= 14.18 && < 15",">= 16"],constants:!0,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:!0,"node:crypto":[">= 14.18 && < 15",">= 16"],Zt:">= 1 && < 8",Pt:"< 8",dgram:!0,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:!0,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:!0,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:!0,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],Vt:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],Gt:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],Xt:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],Ut:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],Wt:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],Yt:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:!0,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:!0,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],Ht:"< 8",module:!0,"node:module":[">= 14.18 && < 15",">= 16"],net:!0,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:!0,"node:os":[">= 14.18 && < 15",">= 16"],path:!0,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:!0,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:!0,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:!0,"node:repl":[">= 14.18 && < 15",">= 16"],smalloc:">= 0.11.5 && < 3",Dt:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],jt:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],xt:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],kt:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],Kt:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],Bt:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:!0,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:!0,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"node:test":[">= 16.17 && < 17",">= 18"],timers:!0,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",Ft:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],Jt:">= 0.11.3 && < 10",zt:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:!0,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:!0,"node:tty":[">= 14.18 && < 15",">= 16"],url:!0,"node:url":[">= 14.18 && < 15",">= 16"],util:!0,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:!0,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:">= 13.4 && < 13.5",worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]},Hy=function(t,n){return Xy(Yy,t)&&function(t,n){if("boolean"==typeof n)return n;var e=void 0===t?process.versions&&process.versions.node:t;if("string"!=typeof e)throw new TypeError(void 0===t?"Unable to determine current node version":"If provided, a valid node version is required");if(n&&"object"==typeof n){for(var r=0;r<n.length;++r)if(Wy(e,n[r]))return!0;return!1}return Wy(e,n)}(n,Yy[t])},Dy=o,jy=gy,xy=n,ky=Ny,Ky=My,By=Zy,Fy=Hy,Jy="win32"!==process.platform&&Dy.realpath&&"function"==typeof Dy.realpath.native?Dy.realpath.native:Dy.realpath,zy=jy(),Qy=function(t,n){Dy.stat(t,(function(t,e){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?n(null,!1):n(t):n(null,e.isFile()||e.isFIFO())}))},$y=function(t,n){Dy.stat(t,(function(t,e){return t?"ENOENT"===t.code||"ENOTDIR"===t.code?n(null,!1):n(t):n(null,e.isDirectory())}))},qy=function(t,n){Jy(t,(function(e,r){e&&"ENOENT"!==e.code?n(e):n(null,e?t:r)}))},tR=function(t,n,e,r){e&&!1===e.preserveSymlinks?t(n,r):r(null,n)},nR=function(t,n,e){t(n,(function(t,n){if(t)e(t);else try{var r=JSON.parse(n);e(null,r)}catch(t){e(null)}}))},eR={assert:!0,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:!0,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:!0,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:!0,"node:console":[">= 14.18 && < 15",">= 16"],constants:!0,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:!0,"node:crypto":[">= 14.18 && < 15",">= 16"],Zt:">= 1 && < 8",Pt:"< 8",dgram:!0,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:!0,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:!0,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:!0,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],Vt:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],Gt:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],Xt:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],Ut:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],Wt:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],Yt:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:!0,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:!0,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],Ht:"< 8",module:!0,"node:module":[">= 14.18 && < 15",">= 16"],net:!0,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:!0,"node:os":[">= 14.18 && < 15",">= 16"],path:!0,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:!0,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:!0,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:!0,"node:repl":[">= 14.18 && < 15",">= 16"],smalloc:">= 0.11.5 && < 3",Dt:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],jt:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],xt:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],kt:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],Kt:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],Bt:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:!0,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:!0,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"node:test":">= 18",timers:!0,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",Ft:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],Jt:">= 0.11.3 && < 10",zt:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:!0,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:!0,"node:tty":[">= 14.18 && < 15",">= 16"],url:!0,"node:url":[">= 14.18 && < 15",">= 16"],util:!0,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:!0,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:">= 13.4 && < 13.5",worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]},rR=process.versions&&process.versions.node&&process.versions.node.split(".")||[];function oR(t){for(var n=t.split(" "),e=n.length>1?n[0]:"=",r=(n.length>1?n[1]:n[0]).split("."),o=0;o<3;++o){var i=parseInt(rR[o]||0,10),s=parseInt(r[o]||0,10);if(i!==s)return"<"===e?i<s:">="===e&&i>=s}return">="===e}function iR(t){var n=t.split(/ ?&& ?/);if(0===n.length)return!1;for(var e=0;e<n.length;++e)if(!oR(n[e]))return!1;return!0}function sR(t){if("boolean"==typeof t)return t;if(t&&"object"==typeof t){for(var n=0;n<t.length;++n)if(iR(t[n]))return!0;return!1}return iR(t)}var cR=eR,uR={};for(var aR in cR)Object.prototype.hasOwnProperty.call(cR,aR)&&(uR[aR]=sR(cR[aR]));var lR=uR,fR=Hy,dR=Hy,hR=o,pR=n,SR=gy,ER=Ny,mR=My,TR=Zy,_R="win32"!==process.platform&&hR.realpathSync&&"function"==typeof hR.realpathSync.native?hR.realpathSync.native:hR.realpathSync,bR=SR(),vR=function(t){try{var n=hR.statSync(t,{throwIfNoEntry:!1})}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return!!n&&(n.isFile()||n.isFIFO())},yR=function(t){try{var n=hR.statSync(t,{throwIfNoEntry:!1})}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return!1;throw t}return!!n&&n.isDirectory()},RR=function(t){try{return _R(t)}catch(t){if("ENOENT"!==t.code)throw t}return t},AR=function(t,n,e){return e&&!1===e.preserveSymlinks?t(n):n},OR=function(t,n){var e=t(n);try{return JSON.parse(e)}catch(t){}},gR=function(t,n,e){var r=e,o=n;if("function"==typeof n&&(r=o,o={}),"string"!=typeof t){var i=new TypeError("Path must be a string.");return process.nextTick((function(){r(i)}))}var s=(o=By(t,o)).isFile||Qy,c=o.isDirectory||$y,u=o.readFile||Dy.readFile,a=o.realpath||qy,l=o.readPackage||nR;if(o.readFile&&o.readPackage){var f=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick((function(){r(f)}))}var d=o.packageIterator,h=o.extensions||[".js"],p=!1!==o.includeCoreModules,S=o.basedir||xy.dirname(ky()),E=o.filename||S;o.paths=o.paths||[xy.join(zy,".node_modules"),xy.join(zy,".node_libraries")];var m,T=xy.resolve(S);function _(n,e,i){n?r(n):e?r(null,e,i):y(m,(function(n,e,i){if(n)r(n);else if(e)tR(a,e,o,(function(t,n){t?r(t):r(null,n,i)}));else{var s=new Error("Cannot find module '"+t+"' from '"+E+"'");s.code="MODULE_NOT_FOUND",r(s)}}))}function b(t,n,e){var r=n,i=e;"function"==typeof r&&(i=r,r=void 0),function t(n,e,r){if(0===n.length)return i(null,void 0,r);var c=e+n[0],u=r;u?a(null,u):v(xy.dirname(c),a);function a(r,a,f){if(u=a,r)return i(r);if(f&&u&&o.pathFilter){var d=xy.relative(f,c),p=d.slice(0,d.length-n[0].length),S=o.pathFilter(u,e,p);if(S)return t([""].concat(h.slice()),xy.resolve(f,S),u)}s(c,l)}function l(r,o){return r?i(r):o?i(null,c,u):void t(n.slice(1),e,u)}}([""].concat(h),t,r)}function v(t,n){return""===t||"/"===t||"win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t)?n(null):void tR(a,t,o,(function(e,r){if(e)return v(xy.dirname(t),n);var i=xy.join(r,"package.json");s(i,(function(e,r){if(!r)return v(xy.dirname(t),n);l(u,i,(function(e,r){e&&n(e);var s=r;s&&o.packageFilter&&(s=o.packageFilter(s,i)),n(null,s,t)}))}))}))}function y(t,n,e){var r=e,i=n;"function"==typeof i&&(r=i,i=o.package),tR(a,t,o,(function(n,e){if(n)return r(n);var c=xy.join(e,"package.json");s(c,(function(n,e){return n?r(n):e?void l(u,c,(function(n,e){if(n)return r(n);var i=e;if(i&&o.packageFilter&&(i=o.packageFilter(i,c)),i&&i.main){if("string"!=typeof i.main){var s=new TypeError("package “"+i.name+"” `main` must be a string");return s.code="INVALID_PACKAGE_MAIN",r(s)}return"."!==i.main&&"./"!==i.main||(i.main="index"),void b(xy.resolve(t,i.main),i,(function(n,e,o){return n?r(n):e?r(null,e,o):o?void y(xy.resolve(t,o.main),o,(function(n,e,o){return n?r(n):e?r(null,e,o):void b(xy.join(t,"index"),o,r)})):b(xy.join(t,"index"),o,r)}))}b(xy.join(t,"/index"),i,r)})):b(xy.join(t,"index"),i,r)}))}))}function R(t,n){if(0===n.length)return t(null,void 0);var e=n[0];function r(n,r,s){return n?t(n):r?t(null,r,s):void y(e,o.package,i)}function i(e,r,o){return e?t(e):r?t(null,r,o):void R(t,n.slice(1))}c(xy.dirname(e),(function(i,s){if(i)return t(i);if(!s)return R(t,n.slice(1));b(e,o.package,r)}))}tR(a,T,o,(function(n,e){n?r(n):function(n){if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t))m=xy.resolve(n,t),"."!==t&&".."!==t&&"/"!==t.slice(-1)||(m+="/"),/\/$/.test(t)&&m===n?y(m,o.package,_):b(m,o.package,_);else{if(p&&Fy(t))return r(null,t);!function(t,n,e){var r=function(){return function(t,n,e){for(var r=Ky(n,e,t),o=0;o<r.length;o++)r[o]=xy.join(r[o],t);return r}(t,n,o)};R(e,d?d(t,n,r,o):r())}(t,n,(function(n,e,i){if(n)r(n);else{if(e)return tR(a,e,o,(function(t,n){t?r(t):r(null,n,i)}));var s=new Error("Cannot find module '"+t+"' from '"+E+"'");s.code="MODULE_NOT_FOUND",r(s)}}))}}(e)}))};gR.core=lR,gR.isCore=function(t){return fR(t)},gR.sync=function(t,n){if("string"!=typeof t)throw new TypeError("Path must be a string.");var e=TR(t,n),r=e.isFile||vR,o=e.readFileSync||hR.readFileSync,i=e.isDirectory||yR,s=e.realpathSync||RR,c=e.readPackageSync||OR;if(e.readFileSync&&e.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var u=e.packageIterator,a=e.extensions||[".js"],l=!1!==e.includeCoreModules,f=e.basedir||pR.dirname(ER()),d=e.filename||f;e.paths=e.paths||[pR.join(bR,".node_modules"),pR.join(bR,".node_libraries")];var h=AR(s,pR.resolve(f),e);if(/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/.test(t)){var p=pR.resolve(h,t);"."!==t&&".."!==t&&"/"!==t.slice(-1)||(p+="/");var S=T(p)||b(p);if(S)return AR(s,S,e)}else{if(l&&dR(t))return t;var E=function(t,n){for(var r=function(){return function(t,n,e){for(var r=mR(n,e,t),o=0;o<r.length;o++)r[o]=pR.join(r[o],t);return r}(t,n,e)},o=u?u(t,n,r,e):r(),s=0;s<o.length;s++){var c=o[s];if(i(pR.dirname(c))){var a=T(c);if(a)return a;var l=b(c);if(l)return l}}}(t,h);if(E)return AR(s,E,e)}var m=new Error("Cannot find module '"+t+"' from '"+d+"'");throw m.code="MODULE_NOT_FOUND",m;function T(t){var n=_(pR.dirname(t));if(n&&n.dir&&n.pkg&&e.pathFilter){var o=pR.relative(n.dir,t),i=e.pathFilter(n.pkg,t,o);i&&(t=pR.resolve(n.dir,i))}if(r(t))return t;for(var s=0;s<a.length;s++){var c=t+a[s];if(r(c))return c}}function _(t){if(""!==t&&"/"!==t&&!("win32"===process.platform&&/^\w:[/\\]*$/.test(t)||/[/\\]node_modules[/\\]*$/.test(t))){var n=pR.join(AR(s,t,e),"package.json");if(!r(n))return _(pR.dirname(t));var i=c(o,n);return i&&e.packageFilter&&(i=e.packageFilter(i,t)),{pkg:i,dir:t}}}function b(t){var n=pR.join(AR(s,t,e),"/package.json");if(r(n)){try{var i=c(o,n)}catch(t){}if(i&&e.packageFilter&&(i=e.packageFilter(i,t)),i&&i.main){if("string"!=typeof i.main){var u=new TypeError("package “"+i.name+"” `main` must be a string");throw u.code="INVALID_PACKAGE_MAIN",u}"."!==i.main&&"./"!==i.main||(i.main="index");try{var a=T(pR.resolve(t,i.main));if(a)return a;var l=b(pR.resolve(t,i.main));if(l)return l}catch(t){}}}return T(pR.join(t,"/index"))}};var NR,CR,LR,IR,wR,MR=gR,ZR={exports:{}},PR={exports:{}};function VR(){if(CR)return NR;CR=1;var t=1e3,n=60*t,e=60*n,r=24*e,o=7*r,i=365.25*r;function s(t,n,e,r){var o=n>=1.5*e;return Math.round(t/e)+" "+r+(o?"s":"")}return NR=function(c,u){u=u||{};var a=typeof c;if("string"===a&&c.length>0)return function(s){if((s=String(s)).length>100)return;var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!c)return;var u=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*e;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(c);if("number"===a&&isFinite(c))return u.long?function(o){var i=Math.abs(o);if(i>=r)return s(o,i,r,"day");if(i>=e)return s(o,i,e,"hour");if(i>=n)return s(o,i,n,"minute");if(i>=t)return s(o,i,t,"second");return o+" ms"}(c):function(o){var i=Math.abs(o);if(i>=r)return Math.round(o/r)+"d";if(i>=e)return Math.round(o/e)+"h";if(i>=n)return Math.round(o/n)+"m";if(i>=t)return Math.round(o/t)+"s";return o+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}}function GR(){if(IR)return LR;return IR=1,LR=function(t){function n(t){let r,o,i,s=null;function c(...t){if(!c.enabled)return;const e=c,o=Number(new Date),i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const i=n.formatters[o];if("function"==typeof i){const n=t[s];r=i.call(e,n),t.splice(s,1),s--}return r})),n.formatArgs.call(e,t);(e.log||n.log).apply(e,t)}return c.namespace=t,c.useColors=n.useColors(),c.color=n.selectColor(t),c.extend=e,c.destroy=n.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==n.namespaces&&(o=n.namespaces,i=n.enabled(t)),i),set:t=>{s=t}}),"function"==typeof n.init&&n.init(c),c}function e(t,e){const r=n(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},n.disable=function(){const t=[...n.names.map(r),...n.skips.map(r).map((t=>"-"+t))].join(",");return n.enable(""),t},n.enable=function(t){let e;n.save(t),n.namespaces=t,n.names=[],n.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(e=0;e<o;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.slice(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=VR(),n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((e=>{n[e]=t[e]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return n.colors[Math.abs(e)%n.colors.length]},n.enable(n.load()),n},LR}var XR,UR,WR,YR,HR,DR={exports:{}};function jR(){return UR?XR:(UR=1,XR=(t,n=process.argv)=>{const e=t.startsWith("-")?"":1===t.length?"-":"--",r=n.indexOf(e+t),o=n.indexOf("--");return-1!==r&&(-1===o||r<o)})}"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?ZR.exports=(wR||(wR=1,function(t,n){n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const e="color: "+this.color;n.splice(1,0,e,"color: inherit");let r=0,o=0;n[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))})),n.splice(o,0,e)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=function(){let t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=GR()(n);const{formatters:e}=t.exports;e.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(PR,PR.exports)),PR.exports):ZR.exports=(HR||(HR=1,function(t,n){const r=s,o=e;n.init=function(t){t.inspectOpts={};const e=Object.keys(n.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=n.inspectOpts[e[r]]},n.log=function(...t){return process.stderr.write(o.format(...t)+"\n")},n.formatArgs=function(e){const{namespace:r,useColors:o}=this;if(o){const n=this.color,o="[3"+(n<8?n:"8;5;"+n),i=`  ${o};1m${r} [0m`;e[0]=i+e[0].split("\n").join("\n"+i),e.push(o+"m+"+t.exports.humanize(this.diff)+"[0m")}else e[0]=(n.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+e[0]},n.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},n.load=function(){return process.env.DEBUG},n.useColors=function(){return"colors"in n.inspectOpts?Boolean(n.inspectOpts.colors):r.isatty(process.stderr.fd)},n.destroy=o.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),n.colors=[6,2,3,4,5,1];try{const t=function(){if(YR)return WR;YR=1;const t=i,n=s,e=jR(),{env:r}=process;let o;function c(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function u(n,i){if(0===o)return 0;if(e("color=16m")||e("color=full")||e("color=truecolor"))return 3;if(e("color=256"))return 2;if(n&&!i&&void 0===o)return 0;const s=o||0;if("dumb"===r.TERM)return s;if("win32"===process.platform){const n=t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((t=>t in r))||"codeship"===r.CI_NAME?1:s;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if("truecolor"===r.COLORTERM)return 3;if("TERM_PROGRAM"in r){const t=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:s}return e("no-color")||e("no-colors")||e("color=false")||e("color=never")?o=0:(e("color")||e("colors")||e("color=true")||e("color=always"))&&(o=1),"FORCE_COLOR"in r&&(o="true"===r.FORCE_COLOR?1:"false"===r.FORCE_COLOR?0:0===r.FORCE_COLOR.length?1:Math.min(parseInt(r.FORCE_COLOR,10),3)),WR={supportsColor:function(t){return c(u(t,t&&t.isTTY))},stdout:c(u(!0,n.isatty(1))),stderr:c(u(!0,n.isatty(2)))},WR}();t&&(t.stderr||t).level>=2&&(n.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}n.inspectOpts=Object.keys(process.env).filter((t=>/^debug_/i.test(t))).reduce(((t,n)=>{const e=n.substring(6).toLowerCase().replace(/_([a-z])/g,((t,n)=>n.toUpperCase()));let r=process.env[n];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[e]=r,t}),{}),t.exports=GR()(n);const{formatters:c}=t.exports;c.o=function(t){return this.inspectOpts.colors=this.useColors,o.inspect(t,this.inspectOpts).split("\n").map((t=>t.trim())).join(" ")},c.O=function(t){return this.inspectOpts.colors=this.useColors,o.inspect(t,this.inspectOpts)}}(DR,DR.exports)),DR.exports);var xR=ZR.exports,kR=n,KR=function(t){var n=t.split(kR.sep),e=n.lastIndexOf("node_modules");if(-1!==e&&n[e+1]){var r="@"===n[e+1][0],o=r?3:2;return{name:r?n[e+1]+"/"+n[e+2]:n[e+1],basedir:n.slice(0,e+o).join(kR.sep),path:n.slice(e+o).join(kR.sep)}}},BR={url:"https://github.com/elastic/require-in-the-middle/issues"};const FR=n,JR=r,zR=MR,QR=xR("require-in-the-middle"),$R=KR;Oy.exports=rA;var qR=Oy.exports.Hook=rA;let tA;if(JR.isBuiltin)tA=JR.isBuiltin;else{const[t,n]=process.versions.node.split(".").map(Number);tA=8===t&&n<8?t=>"http2"===t||!!zR.core[t]:t=>!!zR.core[t]}const nA=/([/\\]index)?(\.js)?$/;class eA{constructor(){this.Qt=new Map,this.$t=Symbol("RitmExports")}has(t,n){if(this.Qt.has(t))return!0;if(n)return!1;{const n=require.cache[t];return!(!n||!(this.$t in n))}}get(t,n){const e=this.Qt.get(t);if(void 0!==e)return e;if(!n){const n=require.cache[t];return n&&n[this.$t]}}set(t,n,e){e?this.Qt.set(t,n):t in require.cache?require.cache[t][this.$t]=n:(QR('non-core module is unexpectedly not in require.cache: "%s"',t),this.Qt.set(t,n))}}function rA(t,n,e){if(this instanceof rA==!1)return new rA(t,n,e);if("function"==typeof t?(e=t,t=null,n=null):"function"==typeof n&&(e=n,n=null),"function"!=typeof JR._resolveFilename)return console.error("Error: Expected Module._resolveFilename to be a function (was: %s) - aborting!",typeof JR._resolveFilename),void console.error("Please report this error as an issue related to Node.js %s at %s",process.version,BR.url);this.N=new eA,this.qt=!1,this.tn=JR.prototype.require;const r=this,o=new Set,i=!!n&&!0===n.internals,s=Array.isArray(t);QR("registering require hook"),this.nn=JR.prototype.require=function(n){if(!0===r.qt)return QR("ignoring require call - module is soft-unhooked"),r.tn.apply(this,arguments);const c=tA(n);let u,a,l;if(c){if(u=n,n.startsWith("node:")){const t=n.slice(5);tA(t)&&(u=t)}}else try{u=JR._resolveFilename(n,this)}catch(t){return QR('Module._resolveFilename("%s") threw %j, calling original Module.require',n,t.message),r.tn.apply(this,arguments)}if(QR("processing %s module require('%s'): %s",!0===c?"core":"non-core",n,u),!0===r.N.has(u,c))return QR("returning already patched cached module: %s",u),r.N.get(u,c);const f=o.has(u);!1===f&&o.add(u);const d=r.tn.apply(this,arguments);if(!0===f)return QR("module is in the process of being patched already - ignoring: %s",u),d;if(o.delete(u),!0===c){if(!0===s&&!1===t.includes(u))return QR("ignoring core module not on whitelist: %s",u),d;a=u}else if(!0===s&&t.includes(u)){const t=FR.parse(u);a=t.name,l=t.dir}else{const e=$R(u);if(void 0===e)return QR("could not parse filename: %s",u),d;a=e.name,l=e.basedir;const o=function(t){const n="/"!==FR.sep?t.path.split(FR.sep).join("/"):t.path;return FR.posix.join(t.name,n).replace(nA,"")}(e);if(QR("resolved filename to module: %s (id: %s, resolved: %s, basedir: %s)",a,n,o,l),!0===s&&!1===t.includes(a)){if(!1===t.includes(o))return d;a=o}else{let t;try{t=zR.sync(a,{basedir:l})}catch(t){return QR("could not resolve module: %s",a),r.N.set(u,d,c),d}if(t!==u){if(!0!==i)return QR("ignoring require of non-main module file: %s",t),r.N.set(u,d,c),d;a=a+FR.sep+FR.relative(l,u),QR("preparing to process require of internal file: %s",a)}}}r.N.set(u,d,c),QR("calling require hook: %s",a);const h=e(d,a,l);return r.N.set(u,h,c),QR("returning module: %s",a),h}}rA.prototype.unhook=function(){this.qt=!0,this.nn===JR.prototype.require?(JR.prototype.require=this.tn,QR("unhook successful")):QR("unhook unsuccessful")};var oA=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},iA=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},sA=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},cA="/",uA=function(){this.hooks=[],this.children=new Map},aA=function(){function t(){this.en=new uA,this.rn=0}return t.prototype.insert=function(t){var n,e,r=this.en;try{for(var o=oA(t.moduleName.split(cA)),i=o.next();!i.done;i=o.next()){var s=i.value,c=r.children.get(s);c||(c=new uA,r.children.set(s,c)),r=c}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}r.hooks.push({hook:t,insertedId:this.rn++})},t.prototype.search=function(t,n){var e,r,o=void 0===n?{}:n,i=o.maintainInsertionOrder,s=o.fullOnly,c=this.en,u=[],a=!0;try{for(var l=oA(t.split(cA)),f=l.next();!f.done;f=l.next()){var d=f.value,h=c.children.get(d);if(!h){a=!1;break}s||u.push.apply(u,sA([],iA(h.hooks),!1)),c=h}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s&&a&&u.push.apply(u,sA([],iA(c.hooks),!1)),0===u.length?[]:1===u.length?[u[0].hook]:(i&&u.sort((function(t,n){return t.insertedId-n.insertedId})),u.map((function(t){return t.hook})))},t}(),lA=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},fA=["afterEach","after","beforeEach","before","describe","it"].every((function(t){return"function"==typeof global[t]})),dA=function(){function t(){this.sn=new aA,this.cn()}return t.prototype.cn=function(){var t=this;new qR(null,{internals:!0},(function(n,e,r){var o,i,s,c=(s=e,C.sep!==cA?s.split(C.sep).join(cA):s),u=t.sn.search(c,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var a=lA(u),l=a.next();!l.done;l=a.next()){n=(0,l.value.onRequire)(n,e,r)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n}))},t.prototype.register=function(t,n){var e={moduleName:t,onRequire:n};return this.sn.insert(e),e},t.getInstance=function(){var n;return fA?new t:this.L=null!==(n=this.L)&&void 0!==n?n:new t},t}();var hA={exports:{}},pA={};const SA=[],EA=new WeakMap,mA=new Map,TA=[],_A={set:(t,n,e)=>EA.get(t)[n](e),defineProperty(t,n,e){if(!("value"in e))throw new Error("Getters/setters are not supported for exports property descriptors.");return EA.get(t)[n](e.value)}};pA.register=function(t,n,e,r){mA.set(t,r),EA.set(n,e);const o=new Proxy(n,_A);SA.forEach((n=>n(t,o))),TA.push([t,o])},pA.importHooks=SA,pA.specifiers=mA,pA.toHook=TA;const bA=n,vA=KR,{fileURLToPath:yA}=c,{importHooks:RA,specifiers:AA,toHook:OA}=pA;function gA(t){RA.push(t),OA.forEach((([n,e])=>t(n,e)))}function NA(t){const n=RA.indexOf(t);n>-1&&RA.splice(n,1)}function CA(t,n,e,r){const o=t(n,e,r);o&&o!==n&&(n.default=o)}function LA(t,n,e){if(this instanceof LA==!1)return new LA(t,n,e);"function"==typeof t?(e=t,t=null,n=null):"function"==typeof n&&(e=n,n=null);const r=!!n&&!0===n.internals;this.un=(n,o)=>{const i=n;let s;if(n.startsWith("node:"))n=n.replace(/^node:/,"");else{if(n.startsWith("file://"))try{n=yA(n)}catch(t){}const t=vA(n);t&&(n=t.name,s=t.basedir)}if(t){for(const c of t)if(c===n){if(s)if(r)n=n+bA.sep+bA.relative(s,yA(i));else if(!s.endsWith(AA.get(i)))continue;CA(e,o,n,s)}}else CA(e,o,n,s)},gA(this.un)}LA.prototype.unhook=function(){NA(this.un)},hA.exports=LA,hA.exports.addHook=gA,hA.exports.removeHook=NA;var IA=jt(hA.exports),wA=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),MA=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ZA=function(t){function n(n,r,o){void 0===o&&(o={});var i=t.call(this,n,r,o)||this;i.an=[],i.ln=dA.getInstance(),i.fn=!1,i.yt=function(t,n,r){if(e.types.isProxy(t)){var o=yy.wrap(Object.assign({},t),n,r);return Object.defineProperty(t,n,{value:o})}return yy.wrap(t,n,r)},i.Rt=function(t,n){return e.types.isProxy(t)?Object.defineProperty(t,n,{value:t[n]}):yy.unwrap(t,n)},i.At=function(t,n,e){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.yt(t,n,e)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")},i.Ot=function(t,n){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.Rt(t,n)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")};var s=i.init();return s&&!Array.isArray(s)&&(s=[s]),i.dn=s||[],0===i.dn.length&&Yr.debug("No modules instrumentation has been defined for '"+i.instrumentationName+"@"+i.instrumentationVersion+"', nothing will be patched"),i.Nt.enabled&&i.enable(),i}return wA(n,t),n.prototype.hn=function(){var t=this;this.dn.forEach((function(n){var e=n.name;try{var r=require.resolve(e);require.cache[r]&&t.Ct.warn("Module "+e+" has been loaded before "+t.instrumentationName+" so it might not work, please initialize it before requiring "+e)}catch(t){}}))},n.prototype.pn=function(t){try{var n=o.readFileSync(C.join(t,"package.json"),{encoding:"utf8"}),e=JSON.parse(n).version;return"string"==typeof e?e:void 0}catch(n){Yr.warn("Failed extracting version",t)}},n.prototype.Sn=function(t,n,e,r){var o,i=this;if(!r)return"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?(this.Ct.debug("Applying instrumentation patch for nodejs core module on require hook",{module:t.name}),t.patch(n)):n;var s=this.pn(r);if(t.moduleVersion=s,t.name===e)return PA(t.supportedVersions,s,t.includePrerelease)&&"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?(this.Ct.debug("Applying instrumentation patch for module on require hook",{module:t.name,version:t.moduleVersion,baseDir:r}),t.patch(n,t.moduleVersion)):n;var c=null!==(o=t.files)&&void 0!==o?o:[],u=C.normalize(e);return c.filter((function(t){return t.name===u})).filter((function(n){return PA(n.supportedVersions,s,t.includePrerelease)})).reduce((function(n,e){return e.moduleExports=n,i.fn?(i.Ct.debug("Applying instrumentation patch for nodejs module file on require hook",{module:t.name,version:t.moduleVersion,fileName:e.name,baseDir:r}),e.patch(n,t.moduleVersion)):n}),n)},n.prototype.enable=function(){var t,n,e,r,o,i,s=this;if(!this.fn)if(this.fn=!0,this.an.length>0)try{for(var c=MA(this.dn),u=c.next();!u.done;u=c.next()){var a=u.value;"function"==typeof a.patch&&a.moduleExports&&(this.Ct.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:a.name,version:a.moduleVersion}),a.patch(a.moduleExports,a.moduleVersion));try{for(var l=(e=void 0,MA(a.files)),f=l.next();!f.done;f=l.next()){var d=f.value;d.moduleExports&&(this.Ct.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:a.name,version:a.moduleVersion,fileName:d.name}),d.patch(d.moduleExports,a.moduleVersion))}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else{this.hn();var h=function(t){var n=function(n,e,r){return s.Sn(t,n,e,r)},e=C.isAbsolute(t.name)?new qR([t.name],{internals:!0},n):p.ln.register(t.name,n);p.an.push(e);var r=new IA([t.name],{internals:!1},(function(n,e,r){return s.Sn(t,n,e,r)}));p.an.push(r)},p=this;try{for(var S=MA(this.dn),E=S.next();!E.done;E=S.next()){h(E.value)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}},n.prototype.disable=function(){var t,n,e,r;if(this.fn){this.fn=!1;try{for(var o=MA(this.dn),i=o.next();!i.done;i=o.next()){var s=i.value;"function"==typeof s.unpatch&&s.moduleExports&&(this.Ct.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:s.name,version:s.moduleVersion}),s.unpatch(s.moduleExports,s.moduleVersion));try{for(var c=(e=void 0,MA(s.files)),u=c.next();!u.done;u=c.next()){var a=u.value;a.moduleExports&&(this.Ct.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:s.name,version:s.moduleVersion,fileName:a.name}),a.unpatch(a.moduleExports,s.moduleVersion))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},n.prototype.isEnabled=function(){return this.fn},n}(Ay);function PA(t,n,e){return void 0===n?t.includes("*"):t.some((function(t){return ny.satisfies(n,t,{includePrerelease:e})}))}var VA=function(t,n,e,r,o){this.name=t,this.supportedVersions=n,this.patch=e,this.unpatch=r,this.files=o||[]},GA=function(t,e,r,o){this.supportedVersions=e,this.patch=r,this.unpatch=o,this.name=n.normalize(t)},XA=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},UA=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var WA=Object.freeze({__proto__:null,InstrumentationBase:ZA,InstrumentationNodeModuleDefinition:VA,InstrumentationNodeModuleFile:GA,isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},registerInstrumentations:function(t){var n=py(t.instrumentations).instrumentations,e=t.tracerProvider||ro.getTracerProvider(),r=t.meterProvider||xr.getMeterProvider(),o=t.loggerProvider||hy.getLoggerProvider();return function(t,n,e,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];n&&s.setTracerProvider(n),e&&s.setMeterProvider(e),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}}(n,e,r,o),function(){!function(t){t.forEach((function(t){return t.disable()}))}(n)}},safeExecuteInTheMiddle:function(t,n,e){var r,o;try{o=t()}catch(t){r=t}finally{if(n(r,o),r&&!e)throw r;return o}},safeExecuteInTheMiddleAsync:function(t,n,e){return XA(this,void 0,void 0,(function(){var r,o,i;return UA(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,t()];case 1:return o=s.sent(),[3,4];case 2:return i=s.sent(),r=i,[3,4];case 3:if(n(r,o),r&&!e)throw r;return[2,o];case 4:return[2]}}))}))}}),YA=xt(WA);Object.defineProperty(ne,"__esModule",{value:!0}),ne.HttpInstrumentation=void 0;const HA=io,DA=N_,jA=ny,xA=c,kA=ey,KA=iy,BA=YA,FA=N_,JA=p,zA=ry;class QA extends BA.InstrumentationBase{constructor(t){super("@opentelemetry/instrumentation-http",KA.VERSION,t),this.En=new WeakSet,this.mn=this.Tn()}Mt(){this._n=this.meter.createHistogram("http.server.duration",{description:"Measures the duration of inbound HTTP requests.",unit:"ms",valueType:HA.ValueType.DOUBLE}),this.bn=this.meter.createHistogram("http.client.duration",{description:"Measures the duration of outbound HTTP requests.",unit:"ms",valueType:HA.ValueType.DOUBLE})}vn(){return this.Nt}setConfig(t){super.setConfig(t),this.mn=this.Tn()}init(){return[this.yn(),this.Rn()]}Rn(){return new BA.InstrumentationNodeModuleDefinition("http",["*"],(t=>((0,BA.isWrapped)(t.request)&&this.Rt(t,"request"),this.yt(t,"request",this.An("http")),(0,BA.isWrapped)(t.get)&&this.Rt(t,"get"),this.yt(t,"get",this.On(t.request)),(0,BA.isWrapped)(t.Server.prototype.emit)&&this.Rt(t.Server.prototype,"emit"),this.yt(t.Server.prototype,"emit",this.gn("http")),t)),(t=>{void 0!==t&&(this.Rt(t,"request"),this.Rt(t,"get"),this.Rt(t.Server.prototype,"emit"))}))}yn(){return new BA.InstrumentationNodeModuleDefinition("https",["*"],(t=>((0,BA.isWrapped)(t.request)&&this.Rt(t,"request"),this.yt(t,"request",this.Nn("https")),(0,BA.isWrapped)(t.get)&&this.Rt(t,"get"),this.yt(t,"get",this.Cn(t.request)),(0,BA.isWrapped)(t.Server.prototype.emit)&&this.Rt(t.Server.prototype,"emit"),this.yt(t.Server.prototype,"emit",this.gn("https")),t)),(t=>{void 0!==t&&(this.Rt(t,"request"),this.Rt(t,"get"),this.Rt(t.Server.prototype,"emit"))}))}gn(t){return n=>this.Ln(t,n)}An(t){return n=>this.In(t,n)}On(t){return n=>function(n,...e){const r=t(n,...e);return r.end(),r}}Nn(t){return n=>{const e=this;return function(r,...o){var i;return"https"===t&&"object"==typeof r&&"URL"!==(null===(i=null==r?void 0:r.constructor)||void 0===i?void 0:i.name)&&(r=Object.assign({},r),e.wn(r)),e.An(t)(n)(r,...o)}}}wn(t){t.protocol=t.protocol||"https:",t.port=t.port||443}Cn(t){return n=>{const e=this;return function(r,...o){return e.On(t)(n)(r,...o)}}}Mn(t,n,e,r){this.vn().requestHook&&this.Zn(n,t);let o=!1;return t.prependListener("response",(i=>{this.Ct.debug("outgoingRequest on response()"),t.listenerCount("response")<=1&&i.resume();const s=kA.getOutgoingRequestAttributesOnResponse(i);n.setAttributes(s),r=Object.assign(r,kA.getOutgoingRequestMetricAttributesOnResponse(s)),this.vn().responseHook&&this.Pn(n,i),this.mn.client.captureRequestHeaders(n,(n=>t.getHeader(n))),this.mn.client.captureResponseHeaders(n,(t=>i.headers[t])),HA.context.bind(HA.context.active(),i);const c=()=>{if(this.Ct.debug("outgoingRequest on end()"),o)return;let s;o=!0,s=i.aborted&&!i.complete?{code:HA.SpanStatusCode.ERROR}:{code:kA.parseResponseStatus(HA.SpanKind.CLIENT,i.statusCode)},n.setStatus(s),this.vn().applyCustomAttributesOnSpan&&(0,BA.safeExecuteInTheMiddle)((()=>this.vn().applyCustomAttributesOnSpan(n,t,i)),(()=>{}),!0),this.Vn(n,HA.SpanKind.CLIENT,e,r)};i.on("end",c),jA.lt(process.version,"16.0.0")&&i.on("close",c),i.on(JA.errorMonitor,(t=>{this.Ct.debug("outgoingRequest on error()",t),o||(o=!0,kA.setSpanWithError(n,t),n.setStatus({code:HA.SpanStatusCode.ERROR,message:t.message}),this.Vn(n,HA.SpanKind.CLIENT,e,r))}))})),t.on("close",(()=>{this.Ct.debug("outgoingRequest on request close()"),t.aborted||o||(o=!0,this.Vn(n,HA.SpanKind.CLIENT,e,r))})),t.on(JA.errorMonitor,(t=>{this.Ct.debug("outgoingRequest on request error()",t),o||(o=!0,kA.setSpanWithError(n,t),this.Vn(n,HA.SpanKind.CLIENT,e,r))})),this.Ct.debug("http.ClientRequest return request"),t}Ln(t,n){const e=this;return function(r,...o){if("request"!==r)return n.apply(this,[r,...o]);const i=o[0],s=o[1],c=i.url&&xA.parse(i.url).pathname||"/",u=i.method||"GET";if(e.Ct.debug(`${t} instrumentation incomingRequest`),kA.isIgnored(c,e.vn().ignoreIncomingPaths,(t=>e.Ct.error("caught ignoreIncomingPaths error: ",t)))||(0,BA.safeExecuteInTheMiddle)((()=>{var t,n;return null===(n=(t=e.vn()).ignoreIncomingRequestHook)||void 0===n?void 0:n.call(t,i)}),(t=>{null!=t&&e.Ct.error("caught ignoreIncomingRequestHook error: ",t)}),!0))return HA.context.with((0,DA.suppressTracing)(HA.context.active()),(()=>(HA.context.bind(HA.context.active(),i),HA.context.bind(HA.context.active(),s),n.apply(this,[r,...o]))));const a=i.headers,l=kA.getIncomingRequestAttributes(i,{component:t,serverName:e.vn().serverName,hookAttributes:e.Gn(i,e.vn().startIncomingSpanHook)}),f={kind:HA.SpanKind.SERVER,attributes:l},d=(0,DA.hrTime)(),h=kA.getIncomingRequestMetricAttributes(l),p=HA.propagation.extract(HA.ROOT_CONTEXT,a),S=e.Xn(u,f,p),E={type:FA.RPCType.HTTP,span:S};return HA.context.with((0,FA.setRPCMetadata)(HA.trace.setSpan(p,S),E),(()=>{HA.context.bind(HA.context.active(),i),HA.context.bind(HA.context.active(),s),e.vn().requestHook&&e.Zn(S,i),e.vn().responseHook&&e.Pn(S,s),e.mn.server.captureRequestHeaders(S,(t=>i.headers[t]));let t=!1;return s.on("close",(()=>{t||e.Un(i,s,S,h,d)})),s.on(JA.errorMonitor,(n=>{t=!0,e.Wn(S,h,d,n)})),(0,BA.safeExecuteInTheMiddle)((()=>n.apply(this,[r,...o])),(t=>{if(t)throw kA.setSpanWithError(S,t),e.Vn(S,HA.SpanKind.SERVER,d,h),t}))}))}}In(t,n){const e=this;return function(r,...o){if(!kA.isValidOptionsType(r))return n.apply(this,[r,...o]);const i="object"==typeof o[0]&&("string"==typeof r||r instanceof xA.URL)?o.shift():void 0,{origin:s,pathname:c,method:u,optionsParsed:a}=kA.getRequestInfo(r,i);if("http"===t&&jA.lt(process.version,"9.0.0")&&"https:"===a.protocol)return n.apply(this,[a,...o]);if(kA.isIgnored(s+c,e.vn().ignoreOutgoingUrls,(t=>e.Ct.error("caught ignoreOutgoingUrls error: ",t)))||(0,BA.safeExecuteInTheMiddle)((()=>{var t,n;return null===(n=(t=e.vn()).ignoreOutgoingRequestHook)||void 0===n?void 0:n.call(t,a)}),(t=>{null!=t&&e.Ct.error("caught ignoreOutgoingRequestHook error: ",t)}),!0))return n.apply(this,[a,...o]);const{hostname:l,port:f}=kA.extractHostnameAndPort(a),d=kA.getOutgoingRequestAttributes(a,{component:t,port:f,hostname:l,hookAttributes:e.Gn(a,e.vn().startOutgoingSpanHook)}),h=(0,DA.hrTime)(),p=kA.getOutgoingRequestMetricAttributes(d),S={kind:HA.SpanKind.CLIENT,attributes:d},E=e.Xn(u,S),m=HA.context.active(),T=HA.trace.setSpan(m,E);return a.headers?a.headers=Object.assign({},a.headers):a.headers={},HA.propagation.inject(T,a.headers),HA.context.with(T,(()=>{const r=o[o.length-1];"function"==typeof r&&(o[o.length-1]=HA.context.bind(m,r));const i=(0,BA.safeExecuteInTheMiddle)((()=>n.apply(this,[a,...o])),(t=>{if(t)throw kA.setSpanWithError(E,t),e.Vn(E,HA.SpanKind.CLIENT,h,p),t}));return e.Ct.debug(`${t} instrumentation outgoingRequest`),HA.context.bind(m,i),e.Mn(i,E,h,p)}))}}Un(t,n,e,r,o){const i=kA.getIncomingRequestAttributesOnResponse(t,n);r=Object.assign(r,kA.getIncomingRequestMetricAttributesOnResponse(i)),this.mn.server.captureResponseHeaders(e,(t=>n.getHeader(t))),e.setAttributes(i).setStatus({code:kA.parseResponseStatus(HA.SpanKind.SERVER,n.statusCode)});const s=i[zA.SEMATTRS_HTTP_ROUTE];s&&e.updateName(`${t.method||"GET"} ${s}`),this.vn().applyCustomAttributesOnSpan&&(0,BA.safeExecuteInTheMiddle)((()=>this.vn().applyCustomAttributesOnSpan(e,t,n)),(()=>{}),!0),this.Vn(e,HA.SpanKind.SERVER,o,r)}Wn(t,n,e,r){kA.setSpanWithError(t,r),this.Vn(t,HA.SpanKind.SERVER,e,n)}Xn(t,n,e=HA.context.active()){const r=n.kind===HA.SpanKind.CLIENT?this.vn().requireParentforOutgoingSpans:this.vn().requireParentforIncomingSpans;let o;const i=HA.trace.getSpan(e);return o=!0===r&&void 0===i?HA.trace.wrapSpanContext(HA.INVALID_SPAN_CONTEXT):!0===r&&(null==i?void 0:i.spanContext().isRemote)?i:this.tracer.startSpan(t,n,e),this.En.add(o),o}Vn(t,n,e,r){if(!this.En.has(t))return;t.end(),this.En.delete(t);const o=(0,DA.hrTimeToMilliseconds)((0,DA.hrTimeDuration)(e,(0,DA.hrTime)()));n===HA.SpanKind.SERVER?this._n.record(o,r):n===HA.SpanKind.CLIENT&&this.bn.record(o,r)}Pn(t,n){(0,BA.safeExecuteInTheMiddle)((()=>this.vn().responseHook(t,n)),(()=>{}),!0)}Zn(t,n){(0,BA.safeExecuteInTheMiddle)((()=>this.vn().requestHook(t,n)),(()=>{}),!0)}Gn(t,n){if("function"==typeof n)return(0,BA.safeExecuteInTheMiddle)((()=>n(t)),(()=>{}),!0)}Tn(){var t,n,e,r,o,i,s,c,u,a,l,f;const d=this.vn();return{client:{captureRequestHeaders:kA.headerCapture("request",null!==(e=null===(n=null===(t=d.headersToSpanAttributes)||void 0===t?void 0:t.client)||void 0===n?void 0:n.requestHeaders)&&void 0!==e?e:[]),captureResponseHeaders:kA.headerCapture("response",null!==(i=null===(o=null===(r=d.headersToSpanAttributes)||void 0===r?void 0:r.client)||void 0===o?void 0:o.responseHeaders)&&void 0!==i?i:[])},server:{captureRequestHeaders:kA.headerCapture("request",null!==(u=null===(c=null===(s=d.headersToSpanAttributes)||void 0===s?void 0:s.server)||void 0===c?void 0:c.requestHeaders)&&void 0!==u?u:[]),captureResponseHeaders:kA.headerCapture("response",null!==(f=null===(l=null===(a=d.headersToSpanAttributes)||void 0===a?void 0:a.server)||void 0===l?void 0:l.responseHeaders)&&void 0!==f?f:[])}}}}ne.HttpInstrumentation=QA;var $A={};function qA(t){for(var n={},e=t.length,r=0;r<e;r++){var o=t[r];o&&(n[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return n}Object.defineProperty($A,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(ne,t),e($A,t),e(ey,t)}(te);var tO="aws.lambda.invoked_arn",nO="db.system",eO="db.connection_string",rO="db.user",oO="db.jdbc.driver_classname",iO="db.name",sO="db.statement",cO="db.operation",uO="db.mssql.instance_name",aO="db.cassandra.keyspace",lO="db.cassandra.page_size",fO="db.cassandra.consistency_level",dO="db.cassandra.table",hO="db.cassandra.idempotence",pO="db.cassandra.speculative_execution_count",SO="db.cassandra.coordinator.id",EO="db.cassandra.coordinator.dc",mO="db.hbase.namespace",TO="db.redis.database_index",_O="db.mongodb.collection",bO="db.sql.table",vO="exception.type",yO="exception.message",RO="exception.stacktrace",AO="exception.escaped",OO="faas.trigger",gO="faas.execution",NO="faas.document.collection",CO="faas.document.operation",LO="faas.document.time",IO="faas.document.name",wO="faas.time",MO="faas.cron",ZO="faas.coldstart",PO="faas.invoked_name",VO="faas.invoked_provider",GO="faas.invoked_region",XO="net.transport",UO="net.peer.ip",WO="net.peer.port",YO="net.peer.name",HO="net.host.ip",DO="net.host.port",jO="net.host.name",xO="net.host.connection.type",kO="net.host.connection.subtype",KO="net.host.carrier.name",BO="net.host.carrier.mcc",FO="net.host.carrier.mnc",JO="net.host.carrier.icc",zO="peer.service",QO="enduser.id",$O="enduser.role",qO="enduser.scope",tg="thread.id",ng="thread.name",eg="code.function",rg="code.namespace",og="code.filepath",ig="code.lineno",sg="http.method",cg="http.url",ug="http.target",ag="http.host",lg="http.scheme",fg="http.status_code",dg="http.flavor",hg="http.user_agent",pg="http.request_content_length",Sg="http.request_content_length_uncompressed",Eg="http.response_content_length",mg="http.response_content_length_uncompressed",Tg="http.server_name",_g="http.route",bg="http.client_ip",vg="aws.dynamodb.table_names",yg="aws.dynamodb.consumed_capacity",Rg="aws.dynamodb.item_collection_metrics",Ag="aws.dynamodb.provisioned_read_capacity",Og="aws.dynamodb.provisioned_write_capacity",gg="aws.dynamodb.consistent_read",Ng="aws.dynamodb.projection",Cg="aws.dynamodb.limit",Lg="aws.dynamodb.attributes_to_get",Ig="aws.dynamodb.index_name",wg="aws.dynamodb.select",Mg="aws.dynamodb.global_secondary_indexes",Zg="aws.dynamodb.local_secondary_indexes",Pg="aws.dynamodb.exclusive_start_table",Vg="aws.dynamodb.table_count",Gg="aws.dynamodb.scan_forward",Xg="aws.dynamodb.segment",Ug="aws.dynamodb.total_segments",Wg="aws.dynamodb.count",Yg="aws.dynamodb.scanned_count",Hg="aws.dynamodb.attribute_definitions",Dg="aws.dynamodb.global_secondary_index_updates",jg="messaging.system",xg="messaging.destination",kg="messaging.destination_kind",Kg="messaging.temp_destination",Bg="messaging.protocol",Fg="messaging.protocol_version",Jg="messaging.url",zg="messaging.message_id",Qg="messaging.conversation_id",$g="messaging.message_payload_size_bytes",qg="messaging.message_payload_compressed_size_bytes",tN="messaging.operation",nN="messaging.consumer_id",eN="messaging.rabbitmq.routing_key",rN="messaging.kafka.message_key",oN="messaging.kafka.consumer_group",iN="messaging.kafka.client_id",sN="messaging.kafka.partition",cN="messaging.kafka.tombstone",uN="rpc.system",aN="rpc.service",lN="rpc.method",fN="rpc.grpc.status_code",dN="rpc.jsonrpc.version",hN="rpc.jsonrpc.request_id",pN="rpc.jsonrpc.error_code",SN="rpc.jsonrpc.error_message",EN="message.type",mN="message.id",TN="message.compressed_size",_N="message.uncompressed_size",bN=tO,vN=nO,yN=eO,RN=rO,AN=oO,ON=iO,gN=sO,NN=cO,CN=uO,LN=aO,IN=lO,wN=fO,MN=dO,ZN=hO,PN=pO,VN=SO,GN=EO,XN=mO,UN=TO,WN=_O,YN=bO,HN=vO,DN=yO,jN=RO,xN=AO,kN=OO,KN=gO,BN=NO,FN=CO,JN=LO,zN=IO,QN=wO,$N=MO,qN=ZO,tC=PO,nC=VO,eC=GO,rC=XO,oC=UO,iC=WO,sC=YO,cC=HO,uC=DO,aC=jO,lC=xO,fC=kO,dC=KO,hC=BO,pC=FO,SC=JO,EC=zO,mC=QO,TC=$O,_C=qO,bC=tg,vC=ng,yC=eg,RC=rg,AC=og,OC=ig,gC=sg,NC=cg,CC=ug,LC=ag,IC=lg,wC=fg,MC=dg,ZC=hg,PC=pg,VC=Sg,GC=Eg,XC=mg,UC=Tg,WC=_g,YC=bg,HC=vg,DC=yg,jC=Rg,xC=Ag,kC=Og,KC=gg,BC=Ng,FC=Cg,JC=Lg,zC=Ig,QC=wg,$C=Mg,qC=Zg,tL=Pg,nL=Vg,eL=Gg,rL=Xg,oL=Ug,iL=Wg,sL=Yg,cL=Hg,uL=Dg,aL=jg,lL=xg,fL=kg,dL=Kg,hL=Bg,pL=Fg,SL=Jg,EL=zg,mL=Qg,TL=$g,_L=qg,bL=tN,vL=nN,yL=eN,RL=rN,AL=oN,OL=iN,gL=sN,NL=cN,CL=uN,LL=aN,IL=lN,wL=fN,ML=dN,ZL=hN,PL=pN,VL=SN,GL=EN,XL=mN,UL=TN,WL=_N,YL=qA([tO,nO,eO,rO,oO,iO,sO,cO,uO,aO,lO,fO,dO,hO,pO,SO,EO,mO,TO,_O,bO,vO,yO,RO,AO,OO,gO,NO,CO,LO,IO,wO,MO,ZO,PO,VO,GO,XO,UO,WO,YO,HO,DO,jO,xO,kO,KO,BO,FO,JO,zO,QO,$O,qO,tg,ng,eg,rg,og,ig,sg,cg,ug,ag,lg,fg,dg,hg,pg,Sg,Eg,mg,Tg,_g,bg,vg,yg,Rg,Ag,Og,gg,Ng,Cg,Lg,Ig,wg,Mg,Zg,Pg,Vg,Gg,Xg,Ug,Wg,Yg,Hg,Dg,jg,xg,kg,Kg,Bg,Fg,Jg,zg,Qg,$g,qg,tN,nN,eN,rN,oN,iN,sN,cN,uN,aN,lN,fN,dN,hN,pN,SN,EN,mN,TN,_N]),HL="other_sql",DL="mssql",jL="mysql",xL="oracle",kL="postgresql",KL="redshift",BL="hive",FL="cloudscape",JL="hsqldb",zL="progress",QL="maxdb",$L="hanadb",qL="ingres",tI="firstsql",nI="cache",eI="adabas",rI="firebird",oI="derby",iI="filemaker",sI="informix",cI="instantdb",uI="interbase",aI="mariadb",lI="netezza",fI="pervasive",dI="pointbase",hI="sqlite",pI="sybase",SI="teradata",EI="vertica",mI="coldfusion",TI="cassandra",_I="hbase",bI="mongodb",vI="redis",yI="couchbase",RI="couchdb",AI="cosmosdb",OI="dynamodb",gI="neo4j",NI="geode",CI="elasticsearch",LI="memcached",II="cockroachdb",wI=HL,MI=DL,ZI=jL,PI=xL,VI=kL,GI=KL,XI=BL,UI=FL,WI=JL,YI=zL,HI=QL,DI=$L,jI=qL,xI=tI,kI=nI,KI=eI,BI=rI,FI=oI,JI=iI,zI=sI,QI=cI,$I=uI,qI=aI,tw=lI,nw=fI,ew=dI,rw=hI,ow=pI,iw=SI,sw=EI,cw=mI,uw=TI,aw=_I,lw=bI,fw=vI,dw=yI,hw=RI,pw=AI,Sw=OI,Ew=gI,mw=NI,Tw=CI,_w=LI,bw=II,vw=qA([HL,DL,jL,xL,"db2",kL,KL,BL,FL,JL,zL,QL,$L,qL,tI,"edb",nI,eI,rI,oI,iI,sI,cI,uI,aI,lI,fI,dI,hI,pI,SI,EI,"h2",mI,TI,_I,bI,vI,yI,RI,AI,OI,gI,NI,CI,LI,II]),yw="each_quorum",Rw="quorum",Aw="local_quorum",Ow="three",gw="local_one",Nw="serial",Cw="local_serial",Lw=yw,Iw=Rw,ww=Aw,Mw=Ow,Zw=gw,Pw=Nw,Vw=Cw,Gw=qA(["all",yw,Rw,Aw,"one","two",Ow,gw,"any",Nw,Cw]),Xw="datasource",Uw="http",Ww="pubsub",Yw="timer",Hw="other",Dw=Xw,jw=Uw,xw=Ww,kw=Yw,Kw=Hw,Bw=qA([Xw,Uw,Ww,Yw,Hw]),Fw="insert",Jw="edit",zw="delete",Qw=Fw,$w=Jw,qw=zw,tM=qA([Fw,Jw,zw]),nM="alibaba_cloud",eM="azure",rM=nM,oM=eM,iM=qA([nM,"aws",eM,"gcp"]),sM="ip_tcp",cM="ip_udp",uM="unix",aM="pipe",lM="inproc",fM="other",dM=sM,hM=cM,pM=uM,SM=aM,EM=lM,mM=fM,TM=qA([sM,cM,"ip",uM,aM,lM,fM]),_M="wifi",bM="wired",vM="cell",yM="unavailable",RM="unknown",AM=_M,OM=bM,gM=vM,NM=yM,CM=RM,LM=qA([_M,bM,vM,yM,RM]),IM="gprs",wM="edge",MM="umts",ZM="cdma",PM="evdo_0",VM="evdo_a",GM="cdma2000_1xrtt",XM="hsdpa",UM="hsupa",WM="hspa",YM="iden",HM="evdo_b",DM="ehrpd",jM="hspap",xM="td_scdma",kM="iwlan",KM="nrnsa",BM="lte_ca",FM=IM,JM=wM,zM=MM,QM=ZM,$M=PM,qM=VM,tZ=GM,nZ=XM,eZ=UM,rZ=WM,oZ=YM,iZ=HM,sZ=DM,cZ=jM,uZ=xM,aZ=kM,lZ=KM,fZ=BM,dZ=qA([IM,wM,MM,ZM,PM,VM,GM,XM,UM,WM,YM,HM,"lte",DM,jM,"gsm",xM,kM,"nr",KM,BM]),hZ="SPDY",pZ="QUIC",SZ=hZ,EZ=pZ,mZ={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:hZ,QUIC:pZ},TZ="queue",_Z="topic",bZ=TZ,vZ=_Z,yZ=qA([TZ,_Z]),RZ="receive",AZ="process",OZ=RZ,gZ=AZ,NZ=qA([RZ,AZ]),CZ={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},LZ="SENT",IZ="RECEIVED",wZ=LZ,MZ=IZ,ZZ=qA([LZ,IZ]),PZ="cloud.provider",VZ="cloud.account.id",GZ="cloud.region",XZ="cloud.availability_zone",UZ="cloud.platform",WZ="aws.ecs.container.arn",YZ="aws.ecs.cluster.arn",HZ="aws.ecs.launchtype",DZ="aws.ecs.task.arn",jZ="aws.ecs.task.family",xZ="aws.ecs.task.revision",kZ="aws.eks.cluster.arn",KZ="aws.log.group.names",BZ="aws.log.group.arns",FZ="aws.log.stream.names",JZ="aws.log.stream.arns",zZ="container.name",QZ="container.id",$Z="container.runtime",qZ="container.image.name",tP="container.image.tag",nP="deployment.environment",eP="device.id",rP="device.model.identifier",oP="device.model.name",iP="faas.name",sP="faas.id",cP="faas.version",uP="faas.instance",aP="faas.max_memory",lP="host.id",fP="host.name",dP="host.type",hP="host.arch",pP="host.image.name",SP="host.image.id",EP="host.image.version",mP="k8s.cluster.name",TP="k8s.node.name",_P="k8s.node.uid",bP="k8s.namespace.name",vP="k8s.pod.uid",yP="k8s.pod.name",RP="k8s.container.name",AP="k8s.replicaset.uid",OP="k8s.replicaset.name",gP="k8s.deployment.uid",NP="k8s.deployment.name",CP="k8s.statefulset.uid",LP="k8s.statefulset.name",IP="k8s.daemonset.uid",wP="k8s.daemonset.name",MP="k8s.job.uid",ZP="k8s.job.name",PP="k8s.cronjob.uid",VP="k8s.cronjob.name",GP="os.type",XP="os.description",UP="os.name",WP="os.version",YP="process.pid",HP="process.executable.name",DP="process.executable.path",jP="process.command",xP="process.command_line",kP="process.command_args",KP="process.owner",BP="process.runtime.name",FP="process.runtime.version",JP="process.runtime.description",zP="service.name",QP="service.namespace",$P="service.instance.id",qP="service.version",tV="telemetry.sdk.name",nV="telemetry.sdk.language",eV="telemetry.sdk.version",rV="telemetry.auto.version",oV="webengine.name",iV="webengine.version",sV="webengine.description",cV=PZ,uV=VZ,aV=GZ,lV=XZ,fV=UZ,dV=WZ,hV=YZ,pV=HZ,SV=DZ,EV=jZ,mV=xZ,TV=kZ,_V=KZ,bV=BZ,vV=FZ,yV=JZ,RV=zZ,AV=QZ,OV=$Z,gV=qZ,NV=tP,CV=nP,LV=eP,IV=rP,wV=oP,MV=iP,ZV=sP,PV=cP,VV=uP,GV=aP,XV=lP,UV=fP,WV=dP,YV=hP,HV=pP,DV=SP,jV=EP,xV=mP,kV=TP,KV=_P,BV=bP,FV=vP,JV=yP,zV=RP,QV=AP,$V=OP,qV=gP,tG=NP,nG=CP,eG=LP,rG=IP,oG=wP,iG=MP,sG=ZP,cG=PP,uG=VP,aG=GP,lG=XP,fG=UP,dG=WP,hG=YP,pG=HP,SG=DP,EG=jP,mG=xP,TG=kP,_G=KP,bG=BP,vG=FP,yG=JP,RG=zP,AG=QP,OG=$P,gG=qP,NG=tV,CG=nV,LG=eV,IG=rV,wG=oV,MG=iV,ZG=sV,PG=qA([PZ,VZ,GZ,XZ,UZ,WZ,YZ,HZ,DZ,jZ,xZ,kZ,KZ,BZ,FZ,JZ,zZ,QZ,$Z,qZ,tP,nP,eP,rP,oP,iP,sP,cP,uP,aP,lP,fP,dP,hP,pP,SP,EP,mP,TP,_P,bP,vP,yP,RP,AP,OP,gP,NP,CP,LP,IP,wP,MP,ZP,PP,VP,GP,XP,UP,WP,YP,HP,DP,jP,xP,kP,KP,BP,FP,JP,zP,QP,$P,qP,tV,nV,eV,rV,oV,iV,sV]),VG="alibaba_cloud",GG="azure",XG=VG,UG=GG,WG=qA([VG,"aws",GG,"gcp"]),YG="alibaba_cloud_ecs",HG="alibaba_cloud_fc",DG="aws_ec2",jG="aws_ecs",xG="aws_eks",kG="aws_lambda",KG="aws_elastic_beanstalk",BG="azure_vm",FG="azure_container_instances",JG="azure_aks",zG="azure_functions",QG="azure_app_service",$G="gcp_compute_engine",qG="gcp_cloud_run",tX="gcp_kubernetes_engine",nX="gcp_cloud_functions",eX="gcp_app_engine",rX=YG,oX=HG,iX=DG,sX=jG,cX=xG,uX=kG,aX=KG,lX=BG,fX=FG,dX=JG,hX=zG,pX=QG,SX=$G,EX=qG,mX=tX,TX=nX,_X=eX,bX=qA([YG,HG,DG,jG,xG,kG,KG,BG,FG,JG,zG,QG,$G,qG,tX,nX,eX]),vX="fargate",yX=vX,RX=qA(["ec2",vX]),AX="amd64",OX="arm32",gX="arm64",NX="ia64",CX="ppc32",LX="ppc64",IX=AX,wX=OX,MX=gX,ZX=NX,PX=CX,VX=LX,GX=qA([AX,OX,gX,NX,CX,LX,"x86"]),XX="windows",UX="linux",WX="darwin",YX="freebsd",HX="netbsd",DX="openbsd",jX="dragonflybsd",xX="hpux",kX="solaris",KX="z_os",BX=XX,FX=UX,JX=WX,zX=YX,QX=HX,$X=DX,qX=jX,tU=xX,nU=kX,eU=KX,rU=qA([XX,UX,WX,YX,HX,DX,jX,xX,"aix",kX,KX]),oU="dotnet",iU="erlang",sU="java",cU="nodejs",uU="python",aU="ruby",lU="webjs",fU=oU,dU=iU,hU=sU,pU=cU,SU=uU,EU=aU,mU=lU,TU=qA(["cpp",oU,iU,"go",sU,cU,"php",uU,aU,lU]),_U=Object.freeze({__proto__:null,AWSECSLAUNCHTYPEVALUES_EC2:"ec2",AWSECSLAUNCHTYPEVALUES_FARGATE:yX,AwsEcsLaunchtypeValues:RX,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:rX,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:oX,CLOUDPLATFORMVALUES_AWS_EC2:iX,CLOUDPLATFORMVALUES_AWS_ECS:sX,CLOUDPLATFORMVALUES_AWS_EKS:cX,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:aX,CLOUDPLATFORMVALUES_AWS_LAMBDA:uX,CLOUDPLATFORMVALUES_AZURE_AKS:dX,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:pX,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:fX,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:hX,CLOUDPLATFORMVALUES_AZURE_VM:lX,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:_X,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:TX,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:EX,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:SX,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:mX,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:XG,CLOUDPROVIDERVALUES_AWS:"aws",CLOUDPROVIDERVALUES_AZURE:UG,CLOUDPROVIDERVALUES_GCP:"gcp",CloudPlatformValues:bX,CloudProviderValues:WG,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:"all",DBCASSANDRACONSISTENCYLEVELVALUES_ANY:"any",DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:Lw,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:Zw,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:ww,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:Vw,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:"one",DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:Iw,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:Pw,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:Mw,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:"two",DBSYSTEMVALUES_ADABAS:KI,DBSYSTEMVALUES_CACHE:kI,DBSYSTEMVALUES_CASSANDRA:uw,DBSYSTEMVALUES_CLOUDSCAPE:UI,DBSYSTEMVALUES_COCKROACHDB:bw,DBSYSTEMVALUES_COLDFUSION:cw,DBSYSTEMVALUES_COSMOSDB:pw,DBSYSTEMVALUES_COUCHBASE:dw,DBSYSTEMVALUES_COUCHDB:hw,DBSYSTEMVALUES_DB2:"db2",DBSYSTEMVALUES_DERBY:FI,DBSYSTEMVALUES_DYNAMODB:Sw,DBSYSTEMVALUES_EDB:"edb",DBSYSTEMVALUES_ELASTICSEARCH:Tw,DBSYSTEMVALUES_FILEMAKER:JI,DBSYSTEMVALUES_FIREBIRD:BI,DBSYSTEMVALUES_FIRSTSQL:xI,DBSYSTEMVALUES_GEODE:mw,DBSYSTEMVALUES_H2:"h2",DBSYSTEMVALUES_HANADB:DI,DBSYSTEMVALUES_HBASE:aw,DBSYSTEMVALUES_HIVE:XI,DBSYSTEMVALUES_HSQLDB:WI,DBSYSTEMVALUES_INFORMIX:zI,DBSYSTEMVALUES_INGRES:jI,DBSYSTEMVALUES_INSTANTDB:QI,DBSYSTEMVALUES_INTERBASE:$I,DBSYSTEMVALUES_MARIADB:qI,DBSYSTEMVALUES_MAXDB:HI,DBSYSTEMVALUES_MEMCACHED:_w,DBSYSTEMVALUES_MONGODB:lw,DBSYSTEMVALUES_MSSQL:MI,DBSYSTEMVALUES_MYSQL:ZI,DBSYSTEMVALUES_NEO4J:Ew,DBSYSTEMVALUES_NETEZZA:tw,DBSYSTEMVALUES_ORACLE:PI,DBSYSTEMVALUES_OTHER_SQL:wI,DBSYSTEMVALUES_PERVASIVE:nw,DBSYSTEMVALUES_POINTBASE:ew,DBSYSTEMVALUES_POSTGRESQL:VI,DBSYSTEMVALUES_PROGRESS:YI,DBSYSTEMVALUES_REDIS:fw,DBSYSTEMVALUES_REDSHIFT:GI,DBSYSTEMVALUES_SQLITE:rw,DBSYSTEMVALUES_SYBASE:ow,DBSYSTEMVALUES_TERADATA:iw,DBSYSTEMVALUES_VERTICA:sw,DbCassandraConsistencyLevelValues:Gw,DbSystemValues:vw,FAASDOCUMENTOPERATIONVALUES_DELETE:qw,FAASDOCUMENTOPERATIONVALUES_EDIT:$w,FAASDOCUMENTOPERATIONVALUES_INSERT:Qw,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:rM,FAASINVOKEDPROVIDERVALUES_AWS:"aws",FAASINVOKEDPROVIDERVALUES_AZURE:oM,FAASINVOKEDPROVIDERVALUES_GCP:"gcp",FAASTRIGGERVALUES_DATASOURCE:Dw,FAASTRIGGERVALUES_HTTP:jw,FAASTRIGGERVALUES_OTHER:Kw,FAASTRIGGERVALUES_PUBSUB:xw,FAASTRIGGERVALUES_TIMER:kw,FaasDocumentOperationValues:tM,FaasInvokedProviderValues:iM,FaasTriggerValues:Bw,HOSTARCHVALUES_AMD64:IX,HOSTARCHVALUES_ARM32:wX,HOSTARCHVALUES_ARM64:MX,HOSTARCHVALUES_IA64:ZX,HOSTARCHVALUES_PPC32:PX,HOSTARCHVALUES_PPC64:VX,HOSTARCHVALUES_X86:"x86",HTTPFLAVORVALUES_HTTP_1_0:"1.0",HTTPFLAVORVALUES_HTTP_1_1:"1.1",HTTPFLAVORVALUES_HTTP_2_0:"2.0",HTTPFLAVORVALUES_QUIC:EZ,HTTPFLAVORVALUES_SPDY:SZ,HostArchValues:GX,HttpFlavorValues:mZ,MESSAGETYPEVALUES_RECEIVED:MZ,MESSAGETYPEVALUES_SENT:wZ,MESSAGINGDESTINATIONKINDVALUES_QUEUE:bZ,MESSAGINGDESTINATIONKINDVALUES_TOPIC:vZ,MESSAGINGOPERATIONVALUES_PROCESS:gZ,MESSAGINGOPERATIONVALUES_RECEIVE:OZ,MessageTypeValues:ZZ,MessagingDestinationKindValues:yZ,MessagingOperationValues:NZ,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:QM,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:tZ,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:JM,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:sZ,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:$M,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:qM,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:iZ,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:FM,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:"gsm",NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:nZ,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:rZ,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:cZ,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:eZ,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:oZ,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:aZ,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:"lte",NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:fZ,NETHOSTCONNECTIONSUBTYPEVALUES_NR:"nr",NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:lZ,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:uZ,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:zM,NETHOSTCONNECTIONTYPEVALUES_CELL:gM,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:NM,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:CM,NETHOSTCONNECTIONTYPEVALUES_WIFI:AM,NETHOSTCONNECTIONTYPEVALUES_WIRED:OM,NETTRANSPORTVALUES_INPROC:EM,NETTRANSPORTVALUES_IP:"ip",NETTRANSPORTVALUES_IP_TCP:dM,NETTRANSPORTVALUES_IP_UDP:hM,NETTRANSPORTVALUES_OTHER:mM,NETTRANSPORTVALUES_PIPE:SM,NETTRANSPORTVALUES_UNIX:pM,NetHostConnectionSubtypeValues:dZ,NetHostConnectionTypeValues:LM,NetTransportValues:TM,OSTYPEVALUES_AIX:"aix",OSTYPEVALUES_DARWIN:JX,OSTYPEVALUES_DRAGONFLYBSD:qX,OSTYPEVALUES_FREEBSD:zX,OSTYPEVALUES_HPUX:tU,OSTYPEVALUES_LINUX:FX,OSTYPEVALUES_NETBSD:QX,OSTYPEVALUES_OPENBSD:$X,OSTYPEVALUES_SOLARIS:nU,OSTYPEVALUES_WINDOWS:BX,OSTYPEVALUES_Z_OS:eU,OsTypeValues:rU,RPCGRPCSTATUSCODEVALUES_ABORTED:10,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:6,RPCGRPCSTATUSCODEVALUES_CANCELLED:1,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:15,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:4,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:9,RPCGRPCSTATUSCODEVALUES_INTERNAL:13,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:3,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:5,RPCGRPCSTATUSCODEVALUES_OK:0,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:11,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:7,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:8,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:16,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:14,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:12,RPCGRPCSTATUSCODEVALUES_UNKNOWN:2,RpcGrpcStatusCodeValues:CZ,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:JC,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:cL,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:KC,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:DC,SEMATTRS_AWS_DYNAMODB_COUNT:iL,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:tL,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:$C,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:uL,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:zC,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:jC,SEMATTRS_AWS_DYNAMODB_LIMIT:FC,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:qC,SEMATTRS_AWS_DYNAMODB_PROJECTION:BC,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:xC,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:kC,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:sL,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:eL,SEMATTRS_AWS_DYNAMODB_SEGMENT:rL,SEMATTRS_AWS_DYNAMODB_SELECT:QC,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:nL,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:HC,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:oL,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:bN,SEMATTRS_CODE_FILEPATH:AC,SEMATTRS_CODE_FUNCTION:yC,SEMATTRS_CODE_LINENO:OC,SEMATTRS_CODE_NAMESPACE:RC,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:wN,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:GN,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:VN,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:ZN,SEMATTRS_DB_CASSANDRA_KEYSPACE:LN,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:IN,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:PN,SEMATTRS_DB_CASSANDRA_TABLE:MN,SEMATTRS_DB_CONNECTION_STRING:yN,SEMATTRS_DB_HBASE_NAMESPACE:XN,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:AN,SEMATTRS_DB_MONGODB_COLLECTION:WN,SEMATTRS_DB_MSSQL_INSTANCE_NAME:CN,SEMATTRS_DB_NAME:ON,SEMATTRS_DB_OPERATION:NN,SEMATTRS_DB_REDIS_DATABASE_INDEX:UN,SEMATTRS_DB_SQL_TABLE:YN,SEMATTRS_DB_STATEMENT:gN,SEMATTRS_DB_SYSTEM:vN,SEMATTRS_DB_USER:RN,SEMATTRS_ENDUSER_ID:mC,SEMATTRS_ENDUSER_ROLE:TC,SEMATTRS_ENDUSER_SCOPE:_C,SEMATTRS_EXCEPTION_ESCAPED:xN,SEMATTRS_EXCEPTION_MESSAGE:DN,SEMATTRS_EXCEPTION_STACKTRACE:jN,SEMATTRS_EXCEPTION_TYPE:HN,SEMATTRS_FAAS_COLDSTART:qN,SEMATTRS_FAAS_CRON:$N,SEMATTRS_FAAS_DOCUMENT_COLLECTION:BN,SEMATTRS_FAAS_DOCUMENT_NAME:zN,SEMATTRS_FAAS_DOCUMENT_OPERATION:FN,SEMATTRS_FAAS_DOCUMENT_TIME:JN,SEMATTRS_FAAS_EXECUTION:KN,SEMATTRS_FAAS_INVOKED_NAME:tC,SEMATTRS_FAAS_INVOKED_PROVIDER:nC,SEMATTRS_FAAS_INVOKED_REGION:eC,SEMATTRS_FAAS_TIME:QN,SEMATTRS_FAAS_TRIGGER:kN,SEMATTRS_HTTP_CLIENT_IP:YC,SEMATTRS_HTTP_FLAVOR:MC,SEMATTRS_HTTP_HOST:LC,SEMATTRS_HTTP_METHOD:gC,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:PC,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:VC,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:GC,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:XC,SEMATTRS_HTTP_ROUTE:WC,SEMATTRS_HTTP_SCHEME:IC,SEMATTRS_HTTP_SERVER_NAME:UC,SEMATTRS_HTTP_STATUS_CODE:wC,SEMATTRS_HTTP_TARGET:CC,SEMATTRS_HTTP_URL:NC,SEMATTRS_HTTP_USER_AGENT:ZC,SEMATTRS_MESSAGE_COMPRESSED_SIZE:UL,SEMATTRS_MESSAGE_ID:XL,SEMATTRS_MESSAGE_TYPE:GL,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:WL,SEMATTRS_MESSAGING_CONSUMER_ID:vL,SEMATTRS_MESSAGING_CONVERSATION_ID:mL,SEMATTRS_MESSAGING_DESTINATION:lL,SEMATTRS_MESSAGING_DESTINATION_KIND:fL,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:OL,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:AL,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:RL,SEMATTRS_MESSAGING_KAFKA_PARTITION:gL,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:NL,SEMATTRS_MESSAGING_MESSAGE_ID:EL,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:_L,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:TL,SEMATTRS_MESSAGING_OPERATION:bL,SEMATTRS_MESSAGING_PROTOCOL:hL,SEMATTRS_MESSAGING_PROTOCOL_VERSION:pL,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:yL,SEMATTRS_MESSAGING_SYSTEM:aL,SEMATTRS_MESSAGING_TEMP_DESTINATION:dL,SEMATTRS_MESSAGING_URL:SL,SEMATTRS_NET_HOST_CARRIER_ICC:SC,SEMATTRS_NET_HOST_CARRIER_MCC:hC,SEMATTRS_NET_HOST_CARRIER_MNC:pC,SEMATTRS_NET_HOST_CARRIER_NAME:dC,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:fC,SEMATTRS_NET_HOST_CONNECTION_TYPE:lC,SEMATTRS_NET_HOST_IP:cC,SEMATTRS_NET_HOST_NAME:aC,SEMATTRS_NET_HOST_PORT:uC,SEMATTRS_NET_PEER_IP:oC,SEMATTRS_NET_PEER_NAME:sC,SEMATTRS_NET_PEER_PORT:iC,SEMATTRS_NET_TRANSPORT:rC,SEMATTRS_PEER_SERVICE:EC,SEMATTRS_RPC_GRPC_STATUS_CODE:wL,SEMATTRS_RPC_JSONRPC_ERROR_CODE:PL,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:VL,SEMATTRS_RPC_JSONRPC_REQUEST_ID:ZL,SEMATTRS_RPC_JSONRPC_VERSION:ML,SEMATTRS_RPC_METHOD:IL,SEMATTRS_RPC_SERVICE:LL,SEMATTRS_RPC_SYSTEM:CL,SEMATTRS_THREAD_ID:bC,SEMATTRS_THREAD_NAME:vC,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:hV,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:dV,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:pV,SEMRESATTRS_AWS_ECS_TASK_ARN:SV,SEMRESATTRS_AWS_ECS_TASK_FAMILY:EV,SEMRESATTRS_AWS_ECS_TASK_REVISION:mV,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:TV,SEMRESATTRS_AWS_LOG_GROUP_ARNS:bV,SEMRESATTRS_AWS_LOG_GROUP_NAMES:_V,SEMRESATTRS_AWS_LOG_STREAM_ARNS:yV,SEMRESATTRS_AWS_LOG_STREAM_NAMES:vV,SEMRESATTRS_CLOUD_ACCOUNT_ID:uV,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:lV,SEMRESATTRS_CLOUD_PLATFORM:fV,SEMRESATTRS_CLOUD_PROVIDER:cV,SEMRESATTRS_CLOUD_REGION:aV,SEMRESATTRS_CONTAINER_ID:AV,SEMRESATTRS_CONTAINER_IMAGE_NAME:gV,SEMRESATTRS_CONTAINER_IMAGE_TAG:NV,SEMRESATTRS_CONTAINER_NAME:RV,SEMRESATTRS_CONTAINER_RUNTIME:OV,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:CV,SEMRESATTRS_DEVICE_ID:LV,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:IV,SEMRESATTRS_DEVICE_MODEL_NAME:wV,SEMRESATTRS_FAAS_ID:ZV,SEMRESATTRS_FAAS_INSTANCE:VV,SEMRESATTRS_FAAS_MAX_MEMORY:GV,SEMRESATTRS_FAAS_NAME:MV,SEMRESATTRS_FAAS_VERSION:PV,SEMRESATTRS_HOST_ARCH:YV,SEMRESATTRS_HOST_ID:XV,SEMRESATTRS_HOST_IMAGE_ID:DV,SEMRESATTRS_HOST_IMAGE_NAME:HV,SEMRESATTRS_HOST_IMAGE_VERSION:jV,SEMRESATTRS_HOST_NAME:UV,SEMRESATTRS_HOST_TYPE:WV,SEMRESATTRS_K8S_CLUSTER_NAME:xV,SEMRESATTRS_K8S_CONTAINER_NAME:zV,SEMRESATTRS_K8S_CRONJOB_NAME:uG,SEMRESATTRS_K8S_CRONJOB_UID:cG,SEMRESATTRS_K8S_DAEMONSET_NAME:oG,SEMRESATTRS_K8S_DAEMONSET_UID:rG,SEMRESATTRS_K8S_DEPLOYMENT_NAME:tG,SEMRESATTRS_K8S_DEPLOYMENT_UID:qV,SEMRESATTRS_K8S_JOB_NAME:sG,SEMRESATTRS_K8S_JOB_UID:iG,SEMRESATTRS_K8S_NAMESPACE_NAME:BV,SEMRESATTRS_K8S_NODE_NAME:kV,SEMRESATTRS_K8S_NODE_UID:KV,SEMRESATTRS_K8S_POD_NAME:JV,SEMRESATTRS_K8S_POD_UID:FV,SEMRESATTRS_K8S_REPLICASET_NAME:$V,SEMRESATTRS_K8S_REPLICASET_UID:QV,SEMRESATTRS_K8S_STATEFULSET_NAME:eG,SEMRESATTRS_K8S_STATEFULSET_UID:nG,SEMRESATTRS_OS_DESCRIPTION:lG,SEMRESATTRS_OS_NAME:fG,SEMRESATTRS_OS_TYPE:aG,SEMRESATTRS_OS_VERSION:dG,SEMRESATTRS_PROCESS_COMMAND:EG,SEMRESATTRS_PROCESS_COMMAND_ARGS:TG,SEMRESATTRS_PROCESS_COMMAND_LINE:mG,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:pG,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:SG,SEMRESATTRS_PROCESS_OWNER:_G,SEMRESATTRS_PROCESS_PID:hG,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:yG,SEMRESATTRS_PROCESS_RUNTIME_NAME:bG,SEMRESATTRS_PROCESS_RUNTIME_VERSION:vG,SEMRESATTRS_SERVICE_INSTANCE_ID:OG,SEMRESATTRS_SERVICE_NAME:RG,SEMRESATTRS_SERVICE_NAMESPACE:AG,SEMRESATTRS_SERVICE_VERSION:gG,SEMRESATTRS_TELEMETRY_AUTO_VERSION:IG,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:CG,SEMRESATTRS_TELEMETRY_SDK_NAME:NG,SEMRESATTRS_TELEMETRY_SDK_VERSION:LG,SEMRESATTRS_WEBENGINE_DESCRIPTION:ZG,SEMRESATTRS_WEBENGINE_NAME:wG,SEMRESATTRS_WEBENGINE_VERSION:MG,SemanticAttributes:YL,SemanticResourceAttributes:PG,TELEMETRYSDKLANGUAGEVALUES_CPP:"cpp",TELEMETRYSDKLANGUAGEVALUES_DOTNET:fU,TELEMETRYSDKLANGUAGEVALUES_ERLANG:dU,TELEMETRYSDKLANGUAGEVALUES_GO:"go",TELEMETRYSDKLANGUAGEVALUES_JAVA:hU,TELEMETRYSDKLANGUAGEVALUES_NODEJS:pU,TELEMETRYSDKLANGUAGEVALUES_PHP:"php",TELEMETRYSDKLANGUAGEVALUES_PYTHON:SU,TELEMETRYSDKLANGUAGEVALUES_RUBY:EU,TELEMETRYSDKLANGUAGEVALUES_WEBJS:mU,TelemetrySdkLanguageValues:TU});function bU(){return vU(tt),tt}function vU(t){return t.__SENTRY__||(t.__SENTRY__={extensions:{}}),t.__SENTRY__}function yU(t){const n=Xt(),e={sid:kt(),init:!0,timestamp:n,started:n,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return _t({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(e)};return t&&RU(e,t),e}function RU(t,n={}){if(n.user&&(!t.ipAddress&&n.user.ip_address&&(t.ipAddress=n.user.ip_address),t.did||n.did||(t.did=n.user.id||n.user.email||n.user.username)),t.timestamp=n.timestamp||Xt(),n.abnormal_mechanism&&(t.abnormal_mechanism=n.abnormal_mechanism),n.ignoreDuration&&(t.ignoreDuration=n.ignoreDuration),n.sid&&(t.sid=32===n.sid.length?n.sid:kt()),void 0!==n.init&&(t.init=n.init),!t.did&&n.did&&(t.did=`${n.did}`),"number"==typeof n.started&&(t.started=n.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof n.duration)t.duration=n.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}n.release&&(t.release=n.release),n.environment&&(t.environment=n.environment),!t.ipAddress&&n.ipAddress&&(t.ipAddress=n.ipAddress),!t.userAgent&&n.userAgent&&(t.userAgent=n.userAgent),"number"==typeof n.errors&&(t.errors=n.errors),n.status&&(t.status=n.status)}const AU="_sentrySpan";function OU(t,n){n?St(t,AU,n):delete t[AU]}function gU(t){return t[AU]}class NU{constructor(){this.Yn=!1,this.Hn=[],this.Dn=[],this.jn=[],this.xn=[],this.kn={},this.Kn={},this.Bn={},this.Fn={},this.Jn={},this.zn=qn()}clone(){const t=new NU;return t.jn=[...this.jn],t.Kn={...this.Kn},t.Bn={...this.Bn},t.Fn={...this.Fn},t.kn=this.kn,t.Qn=this.Qn,t.$n=this.$n,t.qn=this.qn,t.te=this.te,t.Dn=[...this.Dn],t.ne=this.ne,t.xn=[...this.xn],t.Jn={...this.Jn},t.zn={...this.zn},t.ee=this.ee,t.oe=this.oe,OU(t,gU(this)),t}setClient(t){this.ee=t}setLastEventId(t){this.oe=t}getClient(){return this.ee}lastEventId(){return this.oe}addScopeListener(t){this.Hn.push(t)}addEventProcessor(t){return this.Dn.push(t),this}setUser(t){return this.kn=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this.$n&&RU(this.$n,{user:t}),this.ie(),this}getUser(){return this.kn}getRequestSession(){return this.ne}setRequestSession(t){return this.ne=t,this}setTags(t){return this.Kn={...this.Kn,...t},this.ie(),this}setTag(t,n){return this.Kn={...this.Kn,[t]:n},this.ie(),this}setExtras(t){return this.Bn={...this.Bn,...t},this.ie(),this}setExtra(t,n){return this.Bn={...this.Bn,[t]:n},this.ie(),this}setFingerprint(t){return this.te=t,this.ie(),this}setLevel(t){return this.Qn=t,this.ie(),this}setTransactionName(t){return this.qn=t,this.ie(),this}setContext(t,n){return null===n?delete this.Fn[t]:this.Fn[t]=n,this.ie(),this}setSession(t){return t?this.$n=t:delete this.$n,this.ie(),this}getSession(){return this.$n}update(t){if(!t)return this;const n="function"==typeof t?t(this):t,[e,r]=n instanceof CU?[n.getScopeData(),n.getRequestSession()]:H(n)?[t,t.requestSession]:[],{tags:o,extra:i,user:s,contexts:c,level:u,fingerprint:a=[],propagationContext:l}=e||{};return this.Kn={...this.Kn,...o},this.Bn={...this.Bn,...i},this.Fn={...this.Fn,...c},s&&Object.keys(s).length&&(this.kn=s),u&&(this.Qn=u),a.length&&(this.te=a),l&&(this.zn=l),r&&(this.ne=r),this}clear(){return this.jn=[],this.Kn={},this.Bn={},this.kn={},this.Fn={},this.Qn=void 0,this.qn=void 0,this.te=void 0,this.ne=void 0,this.$n=void 0,OU(this,void 0),this.xn=[],this.zn=qn(),this.ie(),this}addBreadcrumb(t,n){const e="number"==typeof n?n:100;if(e<=0)return this;const r={timestamp:Gt(),...t},o=this.jn;return o.push(r),this.jn=o.length>e?o.slice(-e):o,this.ie(),this}getLastBreadcrumb(){return this.jn[this.jn.length-1]}clearBreadcrumbs(){return this.jn=[],this.ie(),this}addAttachment(t){return this.xn.push(t),this}clearAttachments(){return this.xn=[],this}getScopeData(){return{breadcrumbs:this.jn,attachments:this.xn,contexts:this.Fn,tags:this.Kn,extra:this.Bn,user:this.kn,level:this.Qn,fingerprint:this.te||[],eventProcessors:this.Dn,propagationContext:this.zn,sdkProcessingMetadata:this.Jn,transactionName:this.qn,span:gU(this)}}setSDKProcessingMetadata(t){return this.Jn={...this.Jn,...t},this}setPropagationContext(t){return this.zn=t,this}getPropagationContext(){return this.zn}captureException(t,n){const e=n&&n.event_id?n.event_id:kt();if(!this.ee)return ut.warn("No client configured on scope - will not capture exception!"),e;const r=new Error("Sentry syntheticException");return this.ee.captureException(t,{originalException:t,syntheticException:r,...n,event_id:e},this),e}captureMessage(t,n,e){const r=e&&e.event_id?e.event_id:kt();if(!this.ee)return ut.warn("No client configured on scope - will not capture message!"),r;const o=new Error(t);return this.ee.captureMessage(t,n,{originalException:t,syntheticException:o,...e,event_id:r},this),r}captureEvent(t,n){const e=n&&n.event_id?n.event_id:kt();return this.ee?(this.ee.captureEvent(t,{...n,event_id:e},this),e):(ut.warn("No client configured on scope - will not capture event!"),e)}ie(){this.Yn||(this.Yn=!0,this.Hn.forEach((t=>{t(this)})),this.Yn=!1)}}const CU=NU;function LU(){return nt("defaultCurrentScope",(()=>new CU))}function IU(){return nt("defaultIsolationScope",(()=>new CU))}class wU{constructor(t,n){let e,r;e=t||new CU,r=n||new CU,this.se=[{scope:e}],this.ce=r}withScope(t){const n=this.ue();let e;try{e=t(n)}catch(t){throw this.ae(),t}return D(e)?e.then((t=>(this.ae(),t)),(t=>{throw this.ae(),t})):(this.ae(),e)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this.ce}getStack(){return this.se}getStackTop(){return this.se[this.se.length-1]}ue(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}ae(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}}function MU(){const t=vU(bU());return t.hub||(t.hub=new wU(LU(),IU())),t.hub}function ZU(t){return MU().withScope(t)}function PU(t,n){const e=MU();return e.withScope((()=>(e.getStackTop().scope=t,n(t))))}function VU(t){return MU().withScope((()=>t(MU().getIsolationScope())))}function GU(t){const n=vU(t);return n.acs?n.acs:{withIsolationScope:VU,withScope:ZU,withSetScope:PU,withSetIsolationScope:(t,n)=>VU(n),getCurrentScope:()=>MU().getScope(),getIsolationScope:()=>MU().getIsolationScope()}}function XU(){return GU(bU()).getCurrentScope()}function UU(){return GU(bU()).getIsolationScope()}function WU(){return nt("globalScope",(()=>new CU))}function YU(...t){const n=GU(bU());if(2===t.length){const[e,r]=t;return e?n.withSetScope(e,r):n.withScope(r)}return n.withScope(t[0])}function HU(...t){const n=GU(bU());if(2===t.length){const[e,r]=t;return e?n.withSetIsolationScope(e,r):n.withIsolationScope(r)}return n.withIsolationScope(t[0])}function DU(){return XU().getClient()}let jU;function xU(t){return jU?jU.get(t):void 0}function kU(t){const n=xU(t);if(!n)return;const e={};for(const[,[t,r]]of n)e[t]||(e[t]=[]),e[t].push(_t(r));return e}const KU="sentry.source",BU="sentry.sample_rate",FU="sentry.op",JU="sentry.origin",zU="sentry.measurement_unit",QU="sentry.measurement_value",$U="cache.key",qU=0,tW=1,nW=2;function eW(t){if(t<400&&t>=100)return{code:tW};if(t>=400&&t<500)switch(t){case 401:return{code:nW,message:"unauthenticated"};case 403:return{code:nW,message:"permission_denied"};case 404:return{code:nW,message:"not_found"};case 409:return{code:nW,message:"already_exists"};case 413:return{code:nW,message:"failed_precondition"};case 429:return{code:nW,message:"resource_exhausted"};case 499:return{code:nW,message:"cancelled"};default:return{code:nW,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:nW,message:"unimplemented"};case 503:return{code:nW,message:"unavailable"};case 504:return{code:nW,message:"deadline_exceeded"};default:return{code:nW,message:"internal_error"}}return{code:nW,message:"unknown_error"}}const rW=1;function oW(t){const{spanId:n,traceId:e}=t.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:c}=uW(t);return _t({parent_span_id:i,span_id:n,trace_id:e,data:r,op:o,status:s,origin:c})}function iW(t){const{spanId:n,traceId:e}=t.spanContext(),{parent_span_id:r}=uW(t);return _t({parent_span_id:r,span_id:n,trace_id:e})}function sW(t){return"number"==typeof t?cW(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?cW(t.getTime()):Xt()}function cW(t){return t>9999999999?t/1e3:t}function uW(t){if(function(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();try{const{spanId:n,traceId:e}=t.spanContext();if(function(t){const n=t;return!!(n.attributes&&n.startTime&&n.name&&n.endTime&&n.status)}(t)){const{attributes:r,startTime:o,name:i,endTime:s,parentSpanId:c,status:u}=t;return _t({span_id:n,trace_id:e,data:r,description:i,parent_span_id:c,start_timestamp:sW(o),timestamp:sW(s)||void 0,status:lW(u),op:r[FU],origin:r[JU],le:kU(t)})}return{span_id:n,trace_id:e}}catch(t){return{}}}function aW(t){const{traceFlags:n}=t.spanContext();return n===rW}function lW(t){if(t&&t.code!==qU)return t.code===tW?"ok":t.message||"unknown_error"}const fW="_sentryChildSpans",dW="_sentryRootSpan";function hW(t,n){const e=t[dW]||t;St(n,dW,e),t[fW]&&t[fW].size<1e3?t[fW].add(n):St(t,fW,new Set([n]))}function pW(t){const n=new Set;return function t(e){if(!n.has(e)&&aW(e)){n.add(e);const r=e[fW]?Array.from(e[fW]):[];for(const n of r)t(n)}}(t),Array.from(n)}function SW(t){return t[dW]||t}function EW(){const t=GU(bU());return t.getActiveSpan?t.getActiveSpan():gU(XU())}function mW(t,n,e,r,o,i){const s=EW();s&&function(t,n,e,r,o,i,s){const c=xU(t)||new Map,u=`${n}:${e}@${o}`,a=c.get(s);if(a){const[,t]=a;c.set(s,[u,{min:Math.min(t.min,r),max:Math.max(t.max,r),count:t.count+=1,sum:t.sum+=r,tags:t.tags}])}else c.set(s,[u,{min:r,max:r,count:1,sum:r,tags:i}]);jU||(jU=new WeakMap),jU.set(t,c)}(s,t,n,e,r,o,i)}let TW=!1;function _W(){TW||(TW=!0,function(t){const n="error";It(n,t),wt(n,Wt)}(bW),function(t){const n="unhandledrejection";It(n,t),wt(n,Ht)}(bW))}function bW(){const t=EW(),n=t&&SW(t);if(n){const t="internal_error";n.setStatus({code:nW,message:t})}}bW.tag="sentry_tracingErrorCallback";const vW="_sentryScope",yW="_sentryIsolationScope";function RW(t,n,e){t&&(St(t,yW,e),St(t,vW,n))}function AW(t){return{scope:t[vW],isolationScope:t[yW]}}function OW(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=t||function(){const t=DU();return t&&t.getOptions()}();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}class gW{constructor(t={}){this.fe=t.traceId||kt(),this.de=t.spanId||kt().substring(16)}spanContext(){return{spanId:this.de,traceId:this.fe,traceFlags:0}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,e){return this}}function NW(t,n,e=(()=>{})){let r;try{r=t()}catch(t){throw n(t),e(),t}return function(t,n,e){if(D(t))return t.then((t=>(e(),t)),(t=>{throw n(t),e(),t}));return e(),t}(r,n,e)}const CW="production",LW="_frozenDsc";function IW(t,n){St(t,LW,n)}function wW(t,n){const e=n.getOptions(),{publicKey:r}=n.getDsn()||{},o=_t({environment:e.environment||CW,release:e.release,public_key:r,trace_id:t});return n.emit("createDsc",o),o}function MW(t){const n=DU();if(!n)return{};const e=wW(uW(t).trace_id||"",n),r=SW(t);if(!r)return e;const o=r[LW];if(o)return o;const i=uW(r),s=i.data||{},c=s[BU];null!=c&&(e.sample_rate=`${c}`);const u=s[KU];return u&&"url"!==u&&(e.transaction=i.description),e.sampled=String(aW(r)),n.emit("createDsc",e),e}function ZW(t){if("boolean"==typeof t)return Number(t);const n="string"==typeof t?parseFloat(t):t;return"number"!=typeof n||isNaN(n)||n<0||n>1?void 0:n}function PW(t,n){if(!OW(t))return[!1];let e;e="function"==typeof t.tracesSampler?t.tracesSampler(n):void 0!==n.parentSampled?n.parentSampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1;const r=ZW(e);if(void 0===r)return[!1];if(!r)return[!1,r];return Math.random()<r?[!0,r]:[!1,r]}function VW(t,n,e,r){const o=Dn(e),i=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,n){n&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||n.name,t.sdk.version=t.sdk.version||n.version,t.sdk.integrations=[...t.sdk.integrations||[],...n.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...n.packages||[]])}(t,e&&e.sdk);const s=function(t,n,e,r){const o=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...n&&{sdk:n},...!!e&&r&&{dsn:lt(r)},...o&&{trace:_t({...o})}}}(t,o,r,n);delete t.sdkProcessingMetadata;return Zn(s,[[{type:i},t]])}function GW(t){if(!t||0===t.length)return;const n={};return t.forEach((t=>{const e=t.attributes||{},r=e[zU],o=e[QU];"string"==typeof r&&"number"==typeof o&&(n[t.name]={value:o,unit:r})})),n}class XW{constructor(t={}){this.fe=t.traceId||kt(),this.de=t.spanId||kt().substring(16),this.he=t.startTimestamp||Xt(),this.pe={},this.setAttributes({[JU]:"manual",[FU]:t.op,...t.attributes}),this.Se=t.name,t.parentSpanId&&(this.Ee=t.parentSpanId),"sampled"in t&&(this.me=t.sampled),t.endTimestamp&&(this.Te=t.endTimestamp),this.u=[],this._e=t.isStandalone,this.Te&&this.be()}spanContext(){const{de:t,fe:n,me:e}=this;return{spanId:t,traceId:n,traceFlags:e?rW:0}}setAttribute(t,n){void 0===n?delete this.pe[t]:this.pe[t]=n}setAttributes(t){Object.keys(t).forEach((n=>this.setAttribute(n,t[n])))}updateStartTime(t){this.he=sW(t)}setStatus(t){return this.ve=t,this}updateName(t){return this.Se=t,this}end(t){this.Te||(this.Te=sW(t),this.be())}getSpanJSON(){return _t({data:this.pe,description:this.Se,op:this.pe[FU],parent_span_id:this.Ee,span_id:this.de,start_timestamp:this.he,status:lW(this.ve),timestamp:this.Te,trace_id:this.fe,origin:this.pe[JU],le:kU(this),profile_id:this.pe["sentry.profile_id"],exclusive_time:this.pe["sentry.exclusive_time"],measurements:GW(this.u),is_segment:this._e&&SW(this)===this||void 0,segment_id:this._e?SW(this).spanContext().spanId:void 0})}isRecording(){return!this.Te&&!!this.me}addEvent(t,n,e){const r=UW(n)?n:e||Xt(),o=UW(n)?{}:n||{},i={name:t,time:sW(r),attributes:o};return this.u.push(i),this}isStandaloneSpan(){return!!this._e}be(){const t=DU();t&&t.emit("spanEnd",this);if(!(this._e||this===SW(this)))return;if(this._e)return void function(t){const n=DU();if(!n)return;const e=t[1];if(!e||0===e.length)return void n.recordDroppedEvent("before_send","span");const r=n.getTransport();r&&r.send(t).then(null,(t=>{}))}(function(t,n){const e=MW(t[0]),r=n&&n.getDsn(),o=n&&n.getOptions().tunnel,i={sent_at:(new Date).toISOString(),...function(t){return!!t.trace_id&&!!t.public_key}(e)&&{trace:e},...!!o&&r&&{dsn:lt(r)}},s=n&&n.getOptions().beforeSendSpan,c=s?t=>s(uW(t)):t=>uW(t),u=[];for(const n of t){const t=c(n);t&&u.push(Un(t))}return Zn(i,u)}([this],t));const n=this.ye();if(n){(AW(this).scope||XU()).captureEvent(n)}}ye(){if(!WW(uW(this)))return;this.Se||(this.Se="<unlabeled transaction>");const{scope:t,isolationScope:n}=AW(this),e=(t||XU()).getClient()||DU();if(!0!==this.me)return void(e&&e.recordDroppedEvent("sample_rate","transaction"));const r=pW(this).filter((t=>t!==this&&!function(t){return t instanceof XW&&t.isStandaloneSpan()}(t))).map((t=>uW(t))).filter(WW),o=this.pe[KU],i={contexts:{trace:oW(this)},spans:r,start_timestamp:this.he,timestamp:this.Te,transaction:this.Se,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,..._t({dynamicSamplingContext:MW(this)})},le:kU(this),...o&&{transaction_info:{source:o}}},s=GW(this.u);return s&&Object.keys(s).length&&(i.measurements=s),i}}function UW(t){return t&&"number"==typeof t||t instanceof Date||Array.isArray(t)}function WW(t){return!!(t.start_timestamp&&t.timestamp&&t.span_id&&t.trace_id)}const YW="__SENTRY_SUPPRESS_TRACING__";function HW(t,n){const e=KW();if(e.startSpanManual)return e.startSpanManual(t,n);const r=kW(t);return YU(t.scope,(e=>{const o=FW(e),i=t.onlyIfParent&&!o?new gW:xW({parentSpan:o,spanContext:r,forceTransaction:t.forceTransaction,scope:e});function s(){i.end()}return OU(e,i),NW((()=>n(i,s)),(()=>{const{status:t}=uW(i);!i.isRecording()||t&&"ok"!==t||i.setStatus({code:nW,message:"internal_error"})}))}))}const DW=({sentryTrace:t,baggage:n},e)=>YU((r=>{const o=wn(t,n);return r.setPropagationContext(o),e()}));function jW(t,n){const e=KW();return e.withActiveSpan?e.withActiveSpan(t,n):YU((e=>(OU(e,t||void 0),n(e))))}function xW({parentSpan:t,spanContext:n,forceTransaction:e,scope:r}){if(!OW())return new gW;const o=UU();let i;if(t&&!e)i=function(t,n,e){const{spanId:r,traceId:o}=t.spanContext(),i=!n.getScopeData().sdkProcessingMetadata[YW]&&aW(t),s=i?new XW({...e,parentSpanId:r,traceId:o,sampled:i}):new gW({traceId:o});hW(t,s);const c=DU();c&&(c.emit("spanStart",s),e.endTimestamp&&c.emit("spanEnd",s));return s}(t,r,n),hW(t,i);else if(t){const e=MW(t),{traceId:o,spanId:s}=t.spanContext(),c=aW(t);i=BW({traceId:o,parentSpanId:s,...n},r,c),IW(i,e)}else{const{traceId:t,dsc:e,parentSpanId:s,sampled:c}={...o.getPropagationContext(),...r.getPropagationContext()};i=BW({traceId:t,parentSpanId:s,...n},r,c),e&&IW(i,e)}return RW(i,r,o),i}function kW(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const e={...n};return e.startTimestamp=sW(t.startTime),delete e.startTime,e}return n}function KW(){return GU(bU())}function BW(t,n,e){const r=DU(),o=r&&r.getOptions()||{},{name:i="",attributes:s}=t,[c,u]=n.getScopeData().sdkProcessingMetadata[YW]?[!1]:PW(o,{name:i,parentSampled:e,attributes:s,transactionContext:{name:i,parentSampled:e}}),a=new XW({...t,attributes:{[KU]:"custom",...t.attributes},sampled:c});return void 0!==u&&a.setAttribute(BU,u),r&&r.emit("spanStart",a),a}function FW(t){const n=gU(t);if(!n)return;const e=DU();return(e?e.getOptions():{}).parentSpanIsAlwaysRootSpan?SW(n):n}function JW(t,n,e,r=0){return new un(((o,i)=>{const s=t[r];if(null===n||"function"!=typeof s)o(n);else{const c=s({...n},e);D(c)?c.then((n=>JW(t,n,e,r+1).then(o))).then(null,i):JW(t,c,e,r+1).then(o).then(null,i)}}))}function zW(t,n){const{fingerprint:e,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=n;!function(t,n){const{extra:e,tags:r,user:o,contexts:i,level:s,transactionName:c}=n,u=_t(e);u&&Object.keys(u).length&&(t.extra={...u,...t.extra});const a=_t(r);a&&Object.keys(a).length&&(t.tags={...a,...t.tags});const l=_t(o);l&&Object.keys(l).length&&(t.user={...l,...t.user});const f=_t(i);f&&Object.keys(f).length&&(t.contexts={...f,...t.contexts});s&&(t.level=s);c&&"transaction"!==t.type&&(t.transaction=c)}(t,n),r&&function(t,n){t.contexts={trace:iW(n),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:MW(n),...t.sdkProcessingMetadata};const e=SW(n),r=uW(e).description;r&&!t.transaction&&"transaction"===t.type&&(t.transaction=r)}(t,r),function(t,n){t.fingerprint=t.fingerprint?zt(t.fingerprint):[],n&&(t.fingerprint=t.fingerprint.concat(n));t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,e),function(t,n){const e=[...t.breadcrumbs||[],...n];t.breadcrumbs=e.length?e:void 0}(t,o),function(t,n){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...n}}(t,i)}function QW(t,n){const{extra:e,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:a,eventProcessors:l,attachments:f,propagationContext:d,transactionName:h,span:p}=n;$W(t,"extra",e),$W(t,"tags",r),$W(t,"user",o),$W(t,"contexts",i),$W(t,"sdkProcessingMetadata",c),s&&(t.level=s),h&&(t.transactionName=h),p&&(t.span=p),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),a.length&&(t.fingerprint=[...t.fingerprint,...a]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),f.length&&(t.attachments=[...t.attachments,...f]),t.propagationContext={...t.propagationContext,...d}}function $W(t,n,e){if(e&&Object.keys(e).length){t[n]={...t[n]};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[n][r]=e[r])}}function qW(t,n,e,r,o,i){const{normalizeDepth:s=3,normalizeMaxBreadth:c=1e3}=t,u={...n,event_id:n.event_id||e.event_id||kt(),timestamp:n.timestamp||Gt()},a=e.integrations||t.integrations.map((t=>t.name));!function(t,n){const{environment:e,release:r,dist:o,maxValueLength:i=250}=n;"environment"in t||(t.environment="environment"in n?e:CW);void 0===t.release&&void 0!==r&&(t.release=r);void 0===t.dist&&void 0!==o&&(t.dist=o);t.message&&(t.message=k(t.message,i));const s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=k(s.value,i));const c=t.request;c&&c.url&&(c.url=k(c.url,i))}(u,t),function(t,n){n.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...n])}(u,a),void 0===n.type&&function(t,n){const e=tt._sentryDebugIds;if(!e)return;let r;const o=tY.get(n);o?r=o:(r=new Map,tY.set(n,r));const i=Object.keys(e).reduce(((t,o)=>{let i;const s=r.get(o);s?i=s:(i=n(o),r.set(o,i));for(let n=i.length-1;n>=0;n--){const r=i[n];if(r.filename){t[r.filename]=e[o];break}}return t}),{});try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.filename&&(t.debug_id=i[t.filename])}))}))}catch(t){}}(u,t.stackParser);const l=function(t,n){if(!n)return t;const e=t?t.clone():new CU;return e.update(n),e}(r,e.captureContext);e.mechanism&&Kt(u,e.mechanism);const f=o?o.getEventProcessors():[],d=WU().getScopeData();if(i){QW(d,i.getScopeData())}if(l){QW(d,l.getScopeData())}const h=[...e.attachments||[],...d.attachments];h.length&&(e.attachments=h),zW(u,d);return JW([...f,...d.eventProcessors],u,e).then((t=>(t&&function(t){const n={};try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.debug_id&&(t.abs_path?n[t.abs_path]=t.debug_id:t.filename&&(n[t.filename]=t.debug_id),delete t.debug_id)}))}))}catch(t){}if(0===Object.keys(n).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const e=t.debug_meta.images;Object.keys(n).forEach((t=>{e.push({type:"sourcemap",code_file:t,debug_id:n[t]})}))}(t),"number"==typeof s&&s>0?function(t,n,e){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:Qt(t.data,n,e)}})))},...t.user&&{user:Qt(t.user,n,e)},...t.contexts&&{contexts:Qt(t.contexts,n,e)},...t.extra&&{extra:Qt(t.extra,n,e)}};t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Qt(t.contexts.trace.data,n,e)));t.spans&&(r.spans=t.spans.map((t=>({...t,...t.data&&{data:Qt(t.data,n,e)}}))));return r}(t,s,c):t)))}const tY=new WeakMap;function nY(t){if(t)return function(t){return t instanceof CU||"function"==typeof t}(t)||function(t){return Object.keys(t).some((t=>eY.includes(t)))}(t)?{captureContext:t}:t}const eY=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function captureException(t,n){return XU().captureException(t,nY(n))}function captureMessage(t,n){const e="string"==typeof n?n:void 0,r="string"!=typeof n?{captureContext:n}:void 0;return XU().captureMessage(t,e,r)}function rY(t,n){return XU().captureEvent(t,n)}function oY(t,n){UU().setContext(t,n)}function iY(t){UU().setExtras(t)}function sY(t,n){UU().setExtra(t,n)}function cY(t){UU().setTags(t)}function uY(t,n){UU().setTag(t,n)}function aY(t){UU().setUser(t)}function lY(t,n){const e=XU(),r=DU();if(r){if(r.captureCheckIn)return r.captureCheckIn(t,n,e)}else;return kt()}function fY(t,n,e){const r=lY({monitorSlug:t,status:"in_progress"},e),o=Xt();function i(n){lY({monitorSlug:t,status:n,checkInId:r,duration:Xt()-o})}return HU((()=>{let t;try{t=n()}catch(t){throw i("error"),t}return D(t)?Promise.resolve(t).then((()=>{i("ok")}),(()=>{i("error")})):i("ok"),t}))}async function dY(t){const n=DU();return n?n.flush(t):Promise.resolve(!1)}function hY(t){const n=DU(),e=UU(),r=XU(),{release:o,environment:i=CW}=n&&n.getOptions()||{},{userAgent:s}=tt.navigator||{},c=yU({release:o,environment:i,user:r.getUser()||e.getUser(),...s&&{userAgent:s},...t}),u=e.getSession();return u&&"ok"===u.status&&RU(u,{status:"exited"}),pY(),e.setSession(c),r.setSession(c),c}function pY(){const t=UU(),n=XU(),e=n.getSession()||t.getSession();e&&function(t,n){let e={};n?e={status:n}:"ok"===t.status&&(e={status:"exited"}),RU(t,e)}(e),SY(),t.setSession(),n.setSession()}function SY(){const t=UU(),n=XU(),e=DU(),r=n.getSession()||t.getSession();r&&e&&e.captureSession(r)}class EY{constructor(t,n){this.ee=t,this.flushTimeout=60,this.Re={},this.Ae=!0,this.Oe=setInterval((()=>this.flush()),1e3*this.flushTimeout),this.Oe.unref&&this.Oe.unref(),this.ge=n}flush(){const t=this.getSessionAggregates();0!==t.aggregates.length&&(this.Re={},this.ee.sendSession(t))}getSessionAggregates(){const t=Object.keys(this.Re).map((t=>this.Re[parseInt(t)]));return _t({attrs:this.ge,aggregates:t})}close(){clearInterval(this.Oe),this.Ae=!1,this.flush()}incrementSessionStatusCount(){if(!this.Ae)return;const t=UU(),n=t.getRequestSession();n&&n.status&&(this.Ne(n.status,new Date),t.setRequestSession(void 0))}Ne(t,n){const e=new Date(n).setSeconds(0,0);this.Re[e]=this.Re[e]||{};const r=this.Re[e];switch(r.started||(r.started=new Date(e).toISOString()),t){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}}}const mY="7";function TY(t,n){return e={sentry_key:t.publicKey,sentry_version:mY,...n&&{sentry_client:`${n.name}/${n.version}`}},Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&");var e}const _Y=[];function bY(t){const n=t.defaultIntegrations||[],e=t.integrations;let r;n.forEach((t=>{t.isDefaultInstance=!0})),r=Array.isArray(e)?[...n,...e]:"function"==typeof e?zt(e(n)):n;const o=function(t){const n={};return t.forEach((t=>{const{name:e}=t,r=n[e];r&&!r.isDefaultInstance&&t.isDefaultInstance||(n[e]=t)})),Object.keys(n).map((t=>n[t]))}(r),i=function(t,n){for(let e=0;e<t.length;e++)if(!0===n(t[e]))return e;return-1}(o,(t=>"Debug"===t.name));if(-1!==i){const[t]=o.splice(i,1);o.push(t)}return o}function vY(t,n){for(const e of n)e&&e.afterAllSetup&&e.afterAllSetup(t)}function yY(t,n,e){if(!e[n.name]){if(e[n.name]=n,-1===_Y.indexOf(n.name)&&"function"==typeof n.setupOnce&&(n.setupOnce(),_Y.push(n.name)),n.setup&&"function"==typeof n.setup&&n.setup(t),"function"==typeof n.preprocessEvent){const e=n.preprocessEvent.bind(n);t.on("preprocessEvent",((n,r)=>e(n,r,t)))}if("function"==typeof n.processEvent){const e=n.processEvent.bind(n),r=Object.assign(((n,r)=>e(n,r,t)),{id:n.name});t.addEventProcessor(r)}}}class RY{constructor(t){if(this.Ce=t,this._integrations={},this.Le=0,this.Ie={},this.an={},this.Dn=[],t.dsn&&(this.we=dt(t.dsn)),this.we){const o=(n=this.we,e=t.tunnel,r=t.Me?t.Me.sdk:void 0,e||`${function(t){return`${function(t){const n=t.protocol?`${t.protocol}:`:"",e=t.port?`:${t.port}`:"";return`${n}//${t.host}${e}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(n)}?${TY(n,r)}`);this.Ze=t.transport({tunnel:this.Ce.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:o})}var n,e,r}captureException(t,n,e){const r=kt();if(Jt(t))return r;const o={event_id:r,...n};return this.Pe(this.eventFromException(t,o).then((t=>this.Ve(t,o,e)))),o.event_id}captureMessage(t,n,e,r){const o={event_id:kt(),...e},i=Y(t)?t:String(t),s=null===(c=t)||Y(c)||"object"!=typeof c&&"function"!=typeof c?this.eventFromMessage(i,n,o):this.eventFromException(t,o);var c;return this.Pe(s.then((t=>this.Ve(t,o,r)))),o.event_id}captureEvent(t,n,e){const r=kt();if(n&&n.originalException&&Jt(n.originalException))return r;const o={event_id:r,...n},i=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this.Pe(this.Ve(t,o,i||e)),o.event_id}captureSession(t){"string"!=typeof t.release||(this.sendSession(t),RU(t,{init:!1}))}getDsn(){return this.we}getOptions(){return this.Ce}getSdkMetadata(){return this.Ce.Me}getTransport(){return this.Ze}flush(t){const n=this.Ze;return n?(this.emit("flush"),this.Ge(t).then((e=>n.flush(t).then((t=>e&&t))))):sn(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.emit("close"),t)))}getEventProcessors(){return this.Dn}addEventProcessor(t){this.Dn.push(t)}init(){this.Ae()&&this.Xe()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];yY(this,t,this._integrations),n||vY(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let e=VW(t,this.we,this.Ce.Me,this.Ce.tunnel);for(const t of n.attachments||[])e=Pn(e,Wn(t));const r=this.sendEnvelope(e);r&&r.then((n=>this.emit("afterSendEvent",t,n)),null)}sendSession(t){const n=function(t,n,e,r){const o=Dn(e);return Zn({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&n&&{dsn:lt(n)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this.we,this.Ce.Me,this.Ce.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,e){if(this.Ce.sendClientReports){const e=`${t}:${n}`;this.Ie[e]=this.Ie[e]+1||1}}on(t,n){this.an[t]||(this.an[t]=[]),this.an[t].push(n)}emit(t,...n){this.an[t]&&this.an[t].forEach((t=>t(...n)))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this.Ae()&&this.Ze?this.Ze.send(t).then(null,(t=>t)):sn({})}Xe(){const{integrations:t}=this.Ce;this._integrations=function(t,n){const e={};return n.forEach((n=>{n&&yY(t,n,e)})),e}(this,t),vY(this,t)}Ue(t,n){let e=!1,r=!1;const o=n.exception&&n.exception.values;if(o){r=!0;for(const t of o){const n=t.mechanism;if(n&&!1===n.handled){e=!0;break}}}const i="ok"===t.status;(i&&0===t.errors||i&&e)&&(RU(t,{...e&&{status:"crashed"},errors:t.errors||Number(r||e)}),this.captureSession(t))}Ge(t){return new un((n=>{let e=0;const r=setInterval((()=>{0==this.Le?(clearInterval(r),n(!0)):(e+=1,t&&e>=t&&(clearInterval(r),n(!1)))}),1)}))}Ae(){return!1!==this.getOptions().enabled&&void 0!==this.Ze}We(t,n,e,r=UU()){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i.length>0&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),qW(o,t,n,e,this,r).then((t=>{if(null===t)return t;const n={...r.getPropagationContext(),...e?e.getPropagationContext():void 0};if(!(t.contexts&&t.contexts.trace)&&n){const{traceId:e,spanId:r,parentSpanId:o,dsc:i}=n;t.contexts={trace:_t({trace_id:e,span_id:r,parent_span_id:o}),...t.contexts};const s=i||wW(e,this);t.sdkProcessingMetadata={dynamicSamplingContext:s,...t.sdkProcessingMetadata}}return t}))}Ve(t,n={},e){return this.Ye(t,n,e).then((t=>t.event_id),(t=>{}))}Ye(t,n,e){const r=this.getOptions(),{sampleRate:o}=r,i=OY(t),s=AY(t),c=t.type||"error",u=`before send for type \`${c}\``,a=void 0===o?void 0:ZW(o);if(s&&"number"==typeof a&&Math.random()>a)return this.recordDroppedEvent("sample_rate","error",t),cn(new ht(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===c?"replay":c,f=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this.We(t,n,e,f).then((e=>{if(null===e)throw this.recordDroppedEvent("event_processor",l,t),new ht("An event processor returned `null`, will not send event.","log");if(n.data&&!0===n.data.__sentry__)return e;const o=function(t,n,e){const{beforeSend:r,beforeSendTransaction:o,beforeSendSpan:i}=t;if(AY(n)&&r)return r(n,e);if(OY(n)){if(n.spans&&i){const t=[];for(const e of n.spans){const n=i(e);n&&t.push(n)}n.spans=t}if(o)return o(n,e)}return n}(r,e,n);return function(t,n){const e=`${n} must return \`null\` or a valid event.`;if(D(t))return t.then((t=>{if(!H(t)&&null!==t)throw new ht(e);return t}),(t=>{throw new ht(`${n} rejected with ${t}`)}));if(!H(t)&&null!==t)throw new ht(e);return t}(o,u)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",l,t),new ht(`${u} returned \`null\`, will not send event.`,"log");const o=e&&e.getSession();!i&&o&&this.Ue(o,r);const s=r.transaction_info;if(i&&s&&r.transaction!==t.transaction){const t="custom";r.transaction_info={...s,source:t}}return this.sendEvent(r,n),r})).then(null,(t=>{if(t instanceof ht)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new ht(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}Pe(t){this.Le++,t.then((t=>(this.Le--,t)),(t=>(this.Le--,t)))}He(){const t=this.Ie;return this.Ie={},Object.keys(t).map((n=>{const[e,r]=n.split(":");return{reason:e,category:r,quantity:t[n]}}))}}function AY(t){return void 0===t.type}function OY(t){return"transaction"===t.type}class gY extends RY{constructor(t){_W(),super(t)}eventFromException(t,n){return sn(function(t,n,e,r){const o=r&&r.data&&r.data.mechanism||{handled:!0,type:"generic"},[i,s]=Fn(t,o,e,r),c={exception:{values:[Kn(n,i)]}};return s&&(c.extra=s),function(t,n,e){const r=t.exception=t.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=n||""),i.type||(i.type=e||"Error")}(c,void 0,void 0),Kt(c,o),{...c,event_id:r&&r.event_id}}(this,this.Ce.stackParser,t,n))}eventFromMessage(t,n="info",e){return sn(function(t,n,e="info",r,o){const i={event_id:r&&r.event_id,level:e};if(o&&r&&r.syntheticException){const e=kn(t,r.syntheticException);e.length&&(i.exception={values:[{value:n,stacktrace:{frames:e}}]})}if(Y(n)){const{__sentry_template_string__:t,__sentry_template_values__:e}=n;return i.logentry={message:t,params:e},i}return i.message=n,i}(this.Ce.stackParser,t,n,e,this.Ce.attachStacktrace))}captureException(t,n,e){if(this.Ce.autoSessionTracking&&this.De){const t=UU().getRequestSession();t&&"ok"===t.status&&(t.status="errored")}return super.captureException(t,n,e)}captureEvent(t,n,e){if(this.Ce.autoSessionTracking&&this.De){if("exception"===(t.type||"exception")&&t.exception&&t.exception.values&&t.exception.values.length>0){const t=UU().getRequestSession();t&&"ok"===t.status&&(t.status="errored")}}return super.captureEvent(t,n,e)}close(t){return this.De&&this.De.close(),super.close(t)}initSessionFlusher(){const{release:t,environment:n}=this.Ce;t&&(this.De=new EY(this,{release:t,environment:n}))}captureCheckIn(t,n,e){const r="checkInId"in t&&t.checkInId?t.checkInId:kt();if(!this.Ae())return r;const o=this.getOptions(),{release:i,environment:s,tunnel:c}=o,u={check_in_id:r,monitor_slug:t.monitorSlug,status:t.status,release:i,environment:s};"duration"in t&&(u.duration=t.duration),n&&(u.monitor_config={schedule:n.schedule,checkin_margin:n.checkinMargin,max_runtime:n.maxRuntime,timezone:n.timezone});const[a,l]=this.je(e);l&&(u.contexts={trace:l});const f=function(t,n,e,r,o){const i={sent_at:(new Date).toISOString()};e&&e.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),r&&o&&(i.dsn=lt(o)),n&&(i.trace=_t(n));const s=function(t){return[{type:"check_in"},t]}(t);return Zn(i,[s])}(u,a,this.getSdkMetadata(),c,this.getDsn());return this.sendEnvelope(f),r}xe(){this.De&&this.De.incrementSessionStatusCount()}We(t,n,e,r){return this.Ce.platform&&(t.platform=t.platform||this.Ce.platform),this.Ce.runtime&&(t.contexts={...t.contexts,runtime:(t.contexts||{}).runtime||this.Ce.runtime}),this.Ce.serverName&&(t.server_name=t.server_name||this.Ce.serverName),super.We(t,n,e,r)}je(t){if(!t)return[void 0,void 0];const n=gU(t);if(n){const t=SW(n);return[MW(t),iW(t)]}const{traceId:e,spanId:r,parentSpanId:o,dsc:i}=t.getPropagationContext(),s={trace_id:e,span_id:r,parent_span_id:o};return i?[i,s]:[wW(e,this),s]}}const NY=64;function CY(t,n,e=an(t.bufferSize||NY)){let r={};return{send:function(o){const i=[];if(Vn(o,((n,e)=>{const o=Hn(e);if(function(t,n,e=Date.now()){return function(t,n){return t[n]||t.all||0}(t,n)>e}(r,o)){const r=LY(n,e);t.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(n)})),0===i.length)return sn({});const s=Zn(o[0],i),c=n=>{Vn(s,((e,r)=>{const o=LY(e,r);t.recordDroppedEvent(n,Hn(r),o)}))};return e.add((()=>n({body:Xn(s)}).then((t=>(r=xn(r,t),t)),(t=>{throw c("network_error"),t})))).then((t=>t),(t=>{if(t instanceof ht)return c("queue_overflow"),sn({});throw t}))},flush:t=>e.drain(t)}}function LY(t,n){if("event"===n||"transaction"===n)return Array.isArray(t)?t[1]:void 0}const IY="8.4.0";function wY(t,n){const e=n&&n.getDsn(),r=n&&n.getOptions().tunnel;return function(t,n){return!!n&&t.includes(n.host)}(t,e)||function(t,n){if(!n)return!1;return MY(t)===MY(n)}(t,r)}function MY(t){return"/"===t[t.length-1]?t.slice(0,-1):t}const ZY=100;function PY(t,n){const e=DU(),r=UU();if(!e)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=ZY}=e.getOptions();if(i<=0)return;const s={timestamp:Gt(),...t},c=o?ct((()=>o(s,n))):s;null!==c&&(e.emit&&e.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,i))}let VY;const GY=new WeakMap,XY=()=>({name:"FunctionToString",setupOnce(){VY=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=function(t){return t.__sentry_original__}(this),e=GY.has(DU())&&void 0!==n?n:this;return VY.apply(e,t)}}catch(t){}},setup(t){GY.set(t,!0)}}),UY=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],WY=(t={})=>({name:"InboundFilters",processEvent(n,e,r){const o=r.getOptions(),i=function(t={},n={}){return{allowUrls:[...t.allowUrls||[],...n.allowUrls||[]],denyUrls:[...t.denyUrls||[],...n.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...n.ignoreErrors||[],...t.disableErrorDefaults?[]:UY],ignoreTransactions:[...t.ignoreTransactions||[],...n.ignoreTransactions||[]],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,o);return function(t,n){if(n.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return!0;if(function(t,n){if(t.type||!n||!n.length)return!1;return function(t){const n=[];t.message&&n.push(t.message);let e;try{e=t.exception.values[t.exception.values.length-1]}catch(t){}e&&e.value&&(n.push(e.value),e.type&&n.push(`${e.type}: ${e.value}`));return n}(t).some((t=>J(t,n)))}(t,n.ignoreErrors))return!0;if(function(t,n){if("transaction"!==t.type||!n||!n.length)return!1;const e=t.transaction;return!!e&&J(e,n)}(t,n.ignoreTransactions))return!0;if(function(t,n){if(!n||!n.length)return!1;const e=YY(t);return!!e&&J(e,n)}(t,n.denyUrls))return!0;if(!function(t,n){if(!n||!n.length)return!0;const e=YY(t);return!e||J(e,n)}(t,n.allowUrls))return!0;return!1}(n,i)?null:n}});function YY(t){try{let n;try{n=t.exception.values[0].stacktrace.frames}catch(t){}return n?function(t=[]){for(let n=t.length-1;n>=0;n--){const e=t[n];if(e&&"<anonymous>"!==e.filename&&"[native code]"!==e.filename)return e.filename||null}return null}(n):null}catch(t){return null}}const HY=(t={})=>{const n=t.limit||5,e=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(t,r,o){const i=o.getOptions();z(Kn,i.stackParser,i.maxValueLength,e,n,t,r)}}},DY={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},jY=(t={})=>{const n={...DY,...t,include:{...DY.include,...t.include,user:t.include&&"boolean"==typeof t.include.user?t.include.user:{...DY.include.user,...(t.include||{}).user}}};return{name:"RequestData",processEvent(t){const{sdkProcessingMetadata:e={}}=t,r=e.request;if(!r)return t;return Tn(t,r,function(t){const{transactionNamingScheme:n,include:{ip:e,user:r,...o}}=t,i=["method"];for(const[t,n]of Object.entries(o))n&&i.push(t);let s;if(void 0===r)s=!0;else if("boolean"==typeof r)s=r;else{const t=[];for(const[n,e]of Object.entries(r))e&&t.push(n);s=t}return{include:{ip:e,user:s,request:0!==i.length?i:void 0,transaction:n}}}(n))}}};const xY=(t={})=>{const n=t.levels||it;return{name:"CaptureConsole",setup(t){"console"in tt&&Zt((({args:e,level:r})=>{DU()===t&&n.includes(r)&&function(t,n){const e={level:bn(n),extra:{arguments:t}};YU((r=>{if(r.addEventProcessor((t=>(t.logger="console",Kt(t,{handled:!1,type:"console"}),t))),"assert"===n){if(!t[0]){const n=`Assertion failed: ${B(t.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",t.slice(1)),captureMessage(n,e)}return}const o=t.find((t=>t instanceof Error));if(o)return void captureException(o,e);captureMessage(B(t," "),e)}))}(e,r)}))}}};const kY=(t={})=>{const n={debugger:!1,stringify:!1,...t};return{name:"Debug",setup(t){t.on("beforeSendEvent",((t,e)=>{n.debugger,ct((()=>{n.stringify?(console.log(JSON.stringify(t,null,2)),e&&Object.keys(e).length&&console.log(JSON.stringify(e,null,2))):(console.log(t),e&&Object.keys(e).length&&console.log(e))}))}))}}},KY=()=>{let t;return{name:"Dedupe",processEvent(n){if(n.type)return n;try{if(function(t,n){if(!n)return!1;if(function(t,n){const e=t.message,r=n.message;if(!e&&!r)return!1;if(e&&!r||!e&&r)return!1;if(e!==r)return!1;if(!FY(t,n))return!1;if(!BY(t,n))return!1;return!0}(t,n))return!0;if(function(t,n){const e=JY(n),r=JY(t);if(!e||!r)return!1;if(e.type!==r.type||e.value!==r.value)return!1;if(!FY(t,n))return!1;if(!BY(t,n))return!1;return!0}(t,n))return!0;return!1}(n,t))return null}catch(t){}return t=n}}};function BY(t,n){let e=zY(t),r=zY(n);if(!e&&!r)return!0;if(e&&!r||!e&&r)return!1;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++){const n=r[t],o=e[t];if(n.filename!==o.filename||n.lineno!==o.lineno||n.colno!==o.colno||n.function!==o.function)return!1}return!0}function FY(t,n){let e=t.fingerprint,r=n.fingerprint;if(!e&&!r)return!0;if(e&&!r||!e&&r)return!1;try{return!(e.join("")!==r.join(""))}catch(t){return!1}}function JY(t){return t.exception&&t.exception.values&&t.exception.values[0]}function zY(t){const n=t.exception;if(n)try{return n.values[0].stacktrace.frames}catch(t){return}}const QY=(t={})=>{const{depth:n=3,captureErrorCause:e=!0}=t;return{name:"ExtraErrorData",processEvent:(t,r)=>function(t,n={},e,r){if(!n.originalException||!X(n.originalException))return t;const o=n.originalException.name||n.originalException.constructor.name,i=function(t,n){try{const e=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const n of Object.keys(t)){if(-1!==e.indexOf(n))continue;const o=t[n];r[n]=X(o)?o.toString():o}if(n&&void 0!==t.cause&&(r.cause=X(t.cause)?t.cause.toString():t.cause),"function"==typeof t.toJSON){const n=t.toJSON();for(const t of Object.keys(n)){const e=n[t];r[t]=X(e)?e.toString():e}}return r}catch(t){}return null}(n.originalException,r);if(i){const n={...t.contexts},r=Qt(i,e);return H(r)&&(St(r,"__sentry_skip_normalization__",!0),n[o]=r),{...t,contexts:n}}return t}(t,r,n,e)}};const $Y=(t={})=>{const n=t.root,e=t.prefix||"app:///",r="window"in tt&&void 0!==tt.window,o=t.iteratee||function({isBrowser:t,root:n,prefix:e}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(t){if(n){const t=r.filename;0===t.indexOf(n)&&(r.filename=t.replace(n,e))}}else if(o||i){const t=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,i=n?function(t,n){t=en(t).slice(1),n=en(n).slice(1);const e=rn(t.split("/")),r=rn(n.split("/")),o=Math.min(e.length,r.length);let i=o;for(let t=0;t<o;t++)if(e[t]!==r[t]){i=t;break}let s=[];for(let t=i;t<e.length;t++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}(n,t):function(t,n){let e=nn(t)[2];return n&&e.slice(-1*n.length)===n&&(e=e.slice(0,e.length-n.length)),e}(t);r.filename=`${e}${i}`}return r}}({isBrowser:r,root:n,prefix:e});return{name:"RewriteFrames",processEvent(t){let n=t;return t.exception&&Array.isArray(t.exception.values)&&(n=function(t){try{return{...t,exception:{...t.exception,values:t.exception.values.map((t=>{return{...t,...t.stacktrace&&{stacktrace:(n=t.stacktrace,{...n,frames:n&&n.frames&&n.frames.map((t=>o(t)))})}};var n}))}}}catch(n){return t}}(n)),n}}};const qY=()=>{const t=1e3*Xt();return{name:"SessionTiming",processEvent(n){const e=1e3*Xt();return{...n,extra:{...n.extra,"session:start":t,"session:duration":e-t,"session:end":e}}}}};function tH(t){return{...t,path:"path"in t&&Array.isArray(t.path)?t.path.join("."):void 0,keys:"keys"in t?JSON.stringify(t.keys):void 0,unionErrors:"unionErrors"in t?JSON.stringify(t.unionErrors):void 0}}function nH(t){const n=new Set;for(const e of t.issues)e.path&&n.add(e.path[0]);return`Failed to validate keys: ${k(Array.from(n).join(", "),100)}`}function eH(t,n,e){return n.exception&&n.exception.values&&e&&e.originalException&&(X(r=e.originalException)&&"ZodError"===r.name&&Array.isArray(r.errors))&&0!==e.originalException.issues.length?{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:nH(e.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":e.originalException.errors.slice(0,t).map(tH)}}:n;var r}const rH=(t={})=>{const n=t.limit||10;return{name:"ZodErrors",processEvent:(t,e)=>eH(n,t,e)}},oH=1e4;function iH(t,n){const e=nt("globalMetricsAggregators",(()=>new WeakMap)),r=e.get(t);if(r)return r;const o=new n(t);return t.on("flush",(()=>o.flush())),t.on("close",(()=>o.close())),e.set(t,o),o}function sH(t,n,e,r,o={}){const i=o.client||DU();if(!i)return;const s=EW(),c=s?SW(s):void 0,{unit:u,tags:a,timestamp:l}=o,{release:f,environment:d}=i.getOptions(),h={};f&&(h.release=f),d&&(h.environment=d),c&&(h.transaction=uW(c).description||"");iH(i,t).add(n,e,r,u,{...h,...a},l)}const cH={increment:function(t,n,e=1,r){sH(t,"c",n,uH(e),r)},distribution:function(t,n,e,r){sH(t,"d",n,uH(e),r)},set:function(t,n,e,r){sH(t,"s",n,e,r)},gauge:function(t,n,e,r){sH(t,"g",n,uH(e),r)},getMetricsAggregatorForClient:iH};function uH(t){return"string"==typeof t?parseInt(t):t}function aH(t){return t.replace(/[^\w\-./]+/gi,"")}const lH=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function fH(t){return[...t].reduce(((t,n)=>t+function(t){for(const[n,e]of lH)if(t===n)return e;return t}(n)),"")}function dH(t,n){ut.log(`Flushing aggregated metrics, number of metrics: ${n.length}`);const e=function(t,n,e,r){const o={sent_at:(new Date).toISOString()};e&&e.sdk&&(o.sdk={name:e.sdk.name,version:e.sdk.version});r&&n&&(o.dsn=lt(n));const i=function(t){const n=function(t){let n="";for(const e of t){const t=Object.entries(e.tags),r=t.length>0?`|#${t.map((([t,n])=>`${t}:${n}`)).join(",")}`:"";n+=`${e.name}@${e.unit}:${e.metric}|${e.metricType}${r}|T${e.timestamp}\n`}return n}(t);return[{type:"statsd",length:n.length},n]}(t);return Zn(o,[i])}(n,t.getDsn(),t.getSdkMetadata(),t.getOptions().tunnel);t.sendEnvelope(e)}const hH={c:class{constructor(t){this._=t}get weight(){return 1}add(t){this._+=t}toString(){return`${this._}`}},g:class{constructor(t){this.ke=t,this.Ke=t,this.Be=t,this.Fe=t,this.Je=1}get weight(){return 5}add(t){this.ke=t,t<this.Ke&&(this.Ke=t),t>this.Be&&(this.Be=t),this.Fe+=t,this.Je++}toString(){return`${this.ke}:${this.Ke}:${this.Be}:${this.Fe}:${this.Je}`}},d:class{constructor(t){this._=[t]}get weight(){return this._.length}add(t){this._.push(t)}toString(){return this._.join(":")}},s:class{constructor(t){this.first=t,this._=new Set([t])}get weight(){return this._.size}add(t){this._.add(t)}toString(){return Array.from(this._).map((t=>"string"==typeof t?function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n&=n;return n>>>0}(t):t)).join(":")}}};class pH{constructor(t){this.ee=t,this.ze=new Map,this.Qe=0,this.$e=setInterval((()=>this.qe()),oH),this.$e.unref&&this.$e.unref(),this.tr=Math.floor(Math.random()*oH/1e3),this.nr=!1}add(t,n,e,r="none",o={},i=Xt()){const s=Math.floor(i),c=n.replace(/[^\w\-.]+/gi,"_");const u=function(t){const n={};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[aH(e)]=fH(String(t[e])));return n}(o),a=function(t){return t.replace(/[^\w]+/gi,"_")}(r),l=function(t,n,e,r){return`${t}${n}${e}${Object.entries(_t(r)).sort(((t,n)=>t[0].localeCompare(n[0])))}`}(t,c,a,u);let f=this.ze.get(l);const d=f&&"s"===t?f.metric.weight:0;f?(f.metric.add(e),f.timestamp<s&&(f.timestamp=s)):(f={metric:new hH[t](e),timestamp:s,metricType:t,name:c,unit:a,tags:u},this.ze.set(l,f));mW(t,c,"string"==typeof e?f.metric.weight-d:e,a,o,l),this.Qe+=f.metric.weight,this.Qe>=1e4&&this.flush()}flush(){this.nr=!0,this.qe()}close(){this.nr=!0,clearInterval(this.$e),this.qe()}qe(){if(this.nr)return this.nr=!1,this.Qe=0,this.er(this.ze),void this.ze.clear();const t=Math.floor(Xt())-10-this.tr,n=new Map;for(const[e,r]of this.ze)r.timestamp<=t&&(n.set(e,r),this.Qe-=r.metric.weight);for(const[t]of n)this.ze.delete(t);this.er(n)}er(t){if(t.size>0){const n=Array.from(t).map((([,t])=>t));dH(this.ee,n)}}}const SH={increment:function(t,n=1,e){cH.increment(pH,t,n,e)},distribution:function(t,n,e){cH.distribution(pH,t,n,e)},set:function(t,n,e){cH.set(pH,t,n,e)},gauge:function(t,n,e){cH.gauge(pH,t,n,e)},getMetricsAggregatorForClient:function(t){return cH.getMetricsAggregatorForClient(t,pH)}},EH={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};const mH=function(){return{bindClient(t){XU().setClient(t)},withScope:YU,getClient:()=>DU(),getScope:XU,getIsolationScope:UU,captureException:(t,n)=>XU().captureException(t,n),captureMessage:(t,n,e)=>XU().captureMessage(t,n,e),captureEvent:rY,addBreadcrumb:PY,setUser:aY,setTags:cY,setTag:uY,setExtra:sY,setExtras:iY,setContext:oY,getIntegration(t){const n=DU();return n&&n.getIntegrationByName(t.id)||null},startSession:hY,endSession:pY,captureSession(t){if(t)return pY();!function(){const t=XU(),n=DU(),e=t.getSession();n&&e&&n.captureSession(e)}()}}};var TH=Ne("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function _H(t){return t.setValue(TH,!0)}function bH(t){return!0===t.getValue(TH)}var vH="baggage",yH=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s};var RH=function(){function t(){}return t.prototype.inject=function(t,n,e){var r=to.getBaggage(t);if(r&&!bH(t)){var o=function(t){return t.getAllEntries().map((function(t){var n=yH(t,2),e=n[0],r=n[1],o=encodeURIComponent(e)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=";"+r.metadata.toString()),o}))}(r).filter((function(t){return t.length<=4096})).slice(0,180),i=function(t){return t.reduce((function(t,n){var e=t+(""!==t?",":"")+n;return e.length>8192?t:e}),"")}(o);i.length>0&&e.set(n,vH,i)}},t.prototype.extract=function(t,n,e){var r=e.get(n,vH),o=Array.isArray(r)?r.join(","):r;if(!o)return t;var i={};return 0===o.length?t:(o.split(",").forEach((function(t){var n=function(t){var n=t.split(";");if(!(n.length<=0)){var e=n.shift();if(e){var r=e.indexOf("=");if(!(r<=0)){var o,i=decodeURIComponent(e.substring(0,r).trim()),s=decodeURIComponent(e.substring(r+1).trim());return n.length>0&&(o=ge(n.join(";"))),{key:i,value:s,metadata:o}}}}}(t);if(n){var e={value:n.value};n.metadata&&(e.metadata=n.metadata),i[n.key]=e}})),0===Object.entries(i).length?t:to.setBaggage(t,to.createBaggage(i)))},t.prototype.fields=function(){return[vH]},t}(),AH="[_0-9a-z-*/]",OH=new RegExp("^(?:"+("[a-z]"+AH+"{0,255}")+"|"+("[a-z0-9]"+AH+"{0,240}@[a-z]"+AH+"{0,13}")+")$"),gH=/^[ -~]{0,255}[!-~]$/,NH=/,|=/;var CH=function(){function t(t){this.U=new Map,t&&this.W(t)}return t.prototype.set=function(t,n){var e=this.Y();return e.U.has(t)&&e.U.delete(t),e.U.set(t,n),e},t.prototype.unset=function(t){var n=this.Y();return n.U.delete(t),n},t.prototype.get=function(t){return this.U.get(t)},t.prototype.serialize=function(){var t=this;return this.H().reduce((function(n,e){return n.push(e+"="+t.get(e)),n}),[]).join(",")},t.prototype.W=function(t){t.length>512||(this.U=t.split(",").reverse().reduce((function(t,n){var e=n.trim(),r=e.indexOf("=");if(-1!==r){var o=e.slice(0,r),i=e.slice(r+1,n.length);(function(t){return OH.test(t)})(o)&&function(t){return gH.test(t)&&!NH.test(t)}(i)&&t.set(o,i)}return t}),new Map),this.U.size>32&&(this.U=new Map(Array.from(this.U.entries()).reverse().slice(0,32))))},t.prototype.H=function(){return Array.from(this.U.keys()).reverse()},t.prototype.Y=function(){var n=new t;return n.U=new Map(this.U),n},t}(),LH=Ne("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function IH(t){return t.setValue(LH,!0)}function wH(t){return!0===t.getValue(LH)}var MH="=",ZH=";",PH=",",VH="baggage",GH=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s};function XH(t){return t.reduce((function(t,n){var e=""+t+(""!==t?PH:"")+n;return e.length>8192?t:e}),"")}function UH(t){return t.getAllEntries().map((function(t){var n=GH(t,2),e=n[0],r=n[1],o=encodeURIComponent(e)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(o+=ZH+r.metadata.toString()),o}))}function WH(t){var n=t.split(ZH);if(!(n.length<=0)){var e=n.shift();if(e){var r=e.indexOf(MH);if(!(r<=0)){var o,i=decodeURIComponent(e.substring(0,r).trim()),s=decodeURIComponent(e.substring(r+1).trim());return n.length>0&&(o=ge(n.join(ZH))),{key:i,value:s,metadata:o}}}}}var YH=Object.freeze({__proto__:null,getKeyPairs:UH,parseKeyPairsIntoRecord:function(t){return"string"!=typeof t||0===t.length?{}:t.split(PH).map((function(t){return WH(t)})).filter((function(t){return void 0!==t&&t.value.length>0})).reduce((function(t,n){return t[n.key]=n.value,t}),{})},parsePairKeyValue:WH,serializeKeyPairs:XH}),HH=function(){function t(){}return t.prototype.inject=function(t,n,e){var r=to.getBaggage(t);if(r&&!wH(t)){var o=XH(UH(r).filter((function(t){return t.length<=4096})).slice(0,180));o.length>0&&e.set(n,VH,o)}},t.prototype.extract=function(t,n,e){var r=e.get(n,VH),o=Array.isArray(r)?r.join(PH):r;if(!o)return t;var i={};return 0===o.length?t:(o.split(PH).forEach((function(t){var n=WH(t);if(n){var e={value:n.value};n.metadata&&(e.metadata=n.metadata),i[n.key]=e}})),0===Object.entries(i).length?t:to.setBaggage(t,to.createBaggage(i)))},t.prototype.fields=function(){return[VH]},t}(),DH=function(){function t(t,n){this.B=n,this.F=t.now(),this.J=n.now()}return t.prototype.now=function(){var t=this.B.now()-this.J;return this.F+t},t}(),jH=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},xH=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s};function kH(t){var n,e,r={};if("object"!=typeof t||null==t)return r;try{for(var o=jH(Object.entries(t)),i=o.next();!i.done;i=o.next()){var s=xH(i.value,2),c=s[0],u=s[1];KH(c)?BH(u)?Array.isArray(u)?r[c]=u.slice():r[c]=u:Yr.warn("Invalid attribute value set for key: "+c):Yr.warn("Invalid attribute key: "+c)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return r}function KH(t){return"string"==typeof t&&t.length>0}function BH(t){return null==t||(Array.isArray(t)?function(t){var n,e,r;try{for(var o=jH(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(null!=s){if(!r){if(FH(s)){r=typeof s;continue}return!1}if(typeof s!==r)return!1}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return!0}(t):FH(t))}function FH(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function JH(){return function(t){Yr.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){var n={},e=t;for(;null!==e;)Object.getOwnPropertyNames(e).forEach((function(t){if(!n[t]){var r=e[t];r&&(n[t]=String(r))}})),e=Object.getPrototypeOf(e);return n}(t))}(t))}}var zH,QH=JH();function $H(t){try{QH(t)}catch(t){}}!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(zH||(zH={}));var qH="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},tD=",",nD=["OTEL_SDK_DISABLED"];function eD(t){return nD.indexOf(t)>-1}var rD=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function oD(t){return rD.indexOf(t)>-1}var iD=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function sD(t){return iD.indexOf(t)>-1}var cD=1/0,uD=128,aD={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:de.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:cD,OTEL_ATTRIBUTE_COUNT_LIMIT:uD,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:cD,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:uD,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:cD,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:uD,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:zH.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function lD(t,n,e){if(void 0!==e[t]){var r=String(e[t]);n[t]="true"===r.toLowerCase()}}function fD(t,n,e,r,o){if(void 0===r&&(r=-1/0),void 0===o&&(o=1/0),void 0!==e[t]){var i=Number(e[t]);isNaN(i)||(n[t]=i<r?r:i>o?o:i)}}function dD(t,n,e,r){void 0===r&&(r=tD);var o=e[t];"string"==typeof o&&(n[t]=o.split(r).map((function(t){return t.trim()})))}var hD={ALL:de.ALL,VERBOSE:de.VERBOSE,DEBUG:de.DEBUG,INFO:de.INFO,WARN:de.WARN,ERROR:de.ERROR,NONE:de.NONE};function pD(t,n,e){var r=e[t];if("string"==typeof r){var o=hD[r.toUpperCase()];null!=o&&(n[t]=o)}}function SD(t){var n={};for(var e in aD){var r=e;if("OTEL_LOG_LEVEL"===r)pD(r,n,t);else if(eD(r))lD(r,n,t);else if(oD(r))fD(r,n,t);else if(sD(r))dD(r,n,t);else{var o=t[r];null!=o&&(n[r]=String(o))}}return n}function ED(){return"undefined"!=typeof process&&process&&process.env?SD(process.env):SD(qH)}function mD(){var t=SD(process.env);return Object.assign({},aD,t)}var TD="object"==typeof globalThis?globalThis:global;function _D(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function bD(t){for(var n=new Uint8Array(t.length/2),e=0,r=0;r<t.length;r+=2){var o=_D(t.charCodeAt(r)),i=_D(t.charCodeAt(r+1));n[e++]=o<<4|i}return n}var vD=function(){this.generateTraceId=RD(16),this.generateSpanId=RD(8)},yD=Buffer.allocUnsafe(16);function RD(t){return function(){for(var n=0;n<t/4;n++)yD.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*n);for(n=0;n<t&&!(yD[n]>0);n++)n===t-1&&(yD[t-1]=1);return yD.toString("hex",0,t)}}var AD,OD=t.performance,gD="1.23.0",ND=((AD={})[PG.TELEMETRY_SDK_NAME]="opentelemetry",AD[PG.PROCESS_RUNTIME_NAME]="node",AD[PG.TELEMETRY_SDK_LANGUAGE]=TU.NODEJS,AD[PG.TELEMETRY_SDK_VERSION]=gD,AD);function CD(t){t.unref()}var LD,ID=Math.pow(10,6),wD=Math.pow(10,9);function MD(t){var n=t/1e3;return[Math.trunc(n),Math.round(t%1e3*ID)]}function ZD(){var t=OD.timeOrigin;if("number"!=typeof t){var n=OD;t=n.timing&&n.timing.fetchStart}return t}function PD(t){return WD(MD(ZD()),MD("number"==typeof t?t:OD.now()))}function VD(t,n){var e=n[0]-t[0],r=n[1]-t[1];return r<0&&(e-=1,r+=wD),[e,r]}function GD(t){return 1e6*t[0]+t[1]/1e3}function XD(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function UD(t){return XD(t)||"number"==typeof t||t instanceof Date}function WD(t,n){var e=[t[0]+n[0],t[1]+n[1]];return e[1]>=wD&&(e[1]-=wD,e[0]+=1),e}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(LD||(LD={}));var YD=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},HD=function(){function t(t){var n;void 0===t&&(t={}),this.tt=null!==(n=t.propagators)&&void 0!==n?n:[],this.nt=Array.from(new Set(this.tt.map((function(t){return"function"==typeof t.fields?t.fields():[]})).reduce((function(t,n){return t.concat(n)}),[])))}return t.prototype.inject=function(t,n,e){var r,o;try{for(var i=YD(this.tt),s=i.next();!s.done;s=i.next()){var c=s.value;try{c.inject(t,n,e)}catch(t){Yr.warn("Failed to inject with "+c.constructor.name+". Err: "+t.message)}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.extract=function(t,n,e){return this.tt.reduce((function(t,r){try{return r.extract(t,n,e)}catch(t){Yr.warn("Failed to inject with "+r.constructor.name+". Err: "+t.message)}return t}),t)},t.prototype.fields=function(){return this.nt.slice()},t}(),DD="[_0-9a-z-*/]",jD=new RegExp("^(?:"+("[a-z]"+DD+"{0,255}")+"|"+("[a-z0-9]"+DD+"{0,240}@[a-z]"+DD+"{0,13}")+")$"),xD=/^[ -~]{0,255}[!-~]$/,kD=/,|=/;var KD=function(){function t(t){this.U=new Map,t&&this.W(t)}return t.prototype.set=function(t,n){var e=this.Y();return e.U.has(t)&&e.U.delete(t),e.U.set(t,n),e},t.prototype.unset=function(t){var n=this.Y();return n.U.delete(t),n},t.prototype.get=function(t){return this.U.get(t)},t.prototype.serialize=function(){var t=this;return this.H().reduce((function(n,e){return n.push(e+"="+t.get(e)),n}),[]).join(",")},t.prototype.W=function(t){t.length>512||(this.U=t.split(",").reverse().reduce((function(t,n){var e=n.trim(),r=e.indexOf("=");if(-1!==r){var o=e.slice(0,r),i=e.slice(r+1,n.length);(function(t){return jD.test(t)})(o)&&function(t){return xD.test(t)&&!kD.test(t)}(i)&&t.set(o,i)}return t}),new Map),this.U.size>32&&(this.U=new Map(Array.from(this.U.entries()).reverse().slice(0,32))))},t.prototype.H=function(){return Array.from(this.U.keys()).reverse()},t.prototype.Y=function(){var n=new t;return n.U=new Map(this.U),n},t}(),BD="traceparent",FD="tracestate",JD=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function zD(t){var n=JD.exec(t);return n?"00"===n[1]&&n[5]?null:{traceId:n[2],spanId:n[3],traceFlags:parseInt(n[4],16)}:null}var QD,$D=function(){function t(){}return t.prototype.inject=function(t,n,e){var r=ro.getSpanContext(t);if(r&&!wH(t)&&Rr(r)){var o="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||Qe.NONE).toString(16);e.set(n,BD,o),r.traceState&&e.set(n,FD,r.traceState.serialize())}},t.prototype.extract=function(t,n,e){var r=e.get(n,BD);if(!r)return t;var o=Array.isArray(r)?r[0]:r;if("string"!=typeof o)return t;var i=zD(o);if(!i)return t;i.isRemote=!0;var s=e.get(n,FD);if(s){var c=Array.isArray(s)?s.join(","):s;i.traceState=new KD("string"==typeof c?c:void 0)}return ro.setSpanContext(t,i)},t.prototype.fields=function(){return[BD,FD]},t}(),qD=Ne("OpenTelemetry SDK Context Key RPC_METADATA");!function(t){t.HTTP="http"}(QD||(QD={}));var tj=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Nr.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),nj=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Nr.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),ej=function(){function t(t){var n,e,r,o;this.et=t.root,this.et||($H(new Error("ParentBasedSampler must have a root sampler configured")),this.et=new nj),this.rt=null!==(n=t.remoteParentSampled)&&void 0!==n?n:new nj,this.ot=null!==(e=t.remoteParentNotSampled)&&void 0!==e?e:new tj,this.it=null!==(r=t.localParentSampled)&&void 0!==r?r:new nj,this.st=null!==(o=t.localParentNotSampled)&&void 0!==o?o:new tj}return t.prototype.shouldSample=function(t,n,e,r,o,i){var s=ro.getSpanContext(t);return s&&Rr(s)?s.isRemote?s.traceFlags&Qe.SAMPLED?this.rt.shouldSample(t,n,e,r,o,i):this.ot.shouldSample(t,n,e,r,o,i):s.traceFlags&Qe.SAMPLED?this.it.shouldSample(t,n,e,r,o,i):this.st.shouldSample(t,n,e,r,o,i):this.et.shouldSample(t,n,e,r,o,i)},t.prototype.toString=function(){return"ParentBased{root="+this.et.toString()+", remoteParentSampled="+this.rt.toString()+", remoteParentNotSampled="+this.ot.toString()+", localParentSampled="+this.it.toString()+", localParentNotSampled="+this.st.toString()+"}"},t}(),rj=function(){function t(t){void 0===t&&(t=0),this.ct=t,this.ct=this.ut(t),this.ft=Math.floor(4294967295*this.ct)}return t.prototype.shouldSample=function(t,n){return{decision:vr(n)&&this.dt(n)<this.ft?Nr.RECORD_AND_SAMPLED:Nr.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this.ct+"}"},t.prototype.ut=function(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t},t.prototype.dt=function(t){for(var n=0,e=0;e<t.length/8;e++){var r=8*e;n=(n^parseInt(t.slice(r,r+8),16))>>>0}return n},t}(),oj="[object Object]",ij="[object Null]",sj="[object Undefined]",cj=Function.prototype.toString,uj=cj.call(Object),aj=function(t,n){return function(e){return t(n(e))}}(Object.getPrototypeOf,Object),lj=Object.prototype,fj=lj.hasOwnProperty,dj=Symbol?Symbol.toStringTag:void 0,hj=lj.toString;function pj(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||function(t){if(null==t)return void 0===t?sj:ij;return dj&&dj in Object(t)?function(t){var n=fj.call(t,dj),e=t[dj],r=!1;try{t[dj]=void 0,r=!0}catch(t){}var o=hj.call(t);r&&(n?t[dj]=e:delete t[dj]);return o}(t):function(t){return hj.call(t)}(t)}(t)!==oj)return!1;var n=aj(t);if(null===n)return!0;var e=fj.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&cj.call(e)===uj}var Sj=20;function Ej(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.shift(),r=new WeakMap;t.length>0;)e=Tj(e,t.shift(),0,r);return e}function mj(t){return bj(t)?t.slice():t}function Tj(t,n,e,r){var o;if(void 0===e&&(e=0),!(e>Sj)){if(e++,Rj(t)||Rj(n)||vj(n))o=mj(n);else if(bj(t)){if(o=t.slice(),bj(n))for(var i=0,s=n.length;i<s;i++)o.push(mj(n[i]));else if(yj(n))for(i=0,s=(c=Object.keys(n)).length;i<s;i++){o[u=c[i]]=mj(n[u])}}else if(yj(t))if(yj(n)){if(!function(t,n){if(!pj(t)||!pj(n))return!1;return!0}(t,n))return n;o=Object.assign({},t);var c;for(i=0,s=(c=Object.keys(n)).length;i<s;i++){var u,a=n[u=c[i]];if(Rj(a))void 0===a?delete o[u]:o[u]=a;else{var l=o[u],f=a;if(_j(t,u,r)||_j(n,u,r))delete o[u];else{if(yj(l)&&yj(f)){var d=r.get(l)||[],h=r.get(f)||[];d.push({obj:t,key:u}),h.push({obj:n,key:u}),r.set(l,d),r.set(f,h)}o[u]=Tj(o[u],a,e,r)}}}}else o=n;return o}}function _j(t,n,e){for(var r=e.get(t[n])||[],o=0,i=r.length;o<i;o++){var s=r[o];if(s.key===n&&s.obj===t)return!0}return!1}function bj(t){return Array.isArray(t)}function vj(t){return"function"==typeof t}function yj(t){return!Rj(t)&&!bj(t)&&!vj(t)&&"object"==typeof t}function Rj(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}var Aj=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oj=function(t){function n(e){var r=t.call(this,e)||this;return Object.setPrototypeOf(r,n.prototype),r}return Aj(n,t),n}(Error);var gj=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function Nj(t,n){return"string"==typeof n?t===n:!!t.match(n)}var Cj=function(){function t(){var t=this;this.ht=new Promise((function(n,e){t.p=n,t.S=e}))}return Object.defineProperty(t.prototype,"promise",{get:function(){return this.ht},enumerable:!1,configurable:!0}),t.prototype.resolve=function(t){this.p(t)},t.prototype.reject=function(t){this.S(t)},t}(),Lj=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},Ij=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},wj=function(){function t(t,n){this.St=t,this.Et=n,this.Tt=!1,this._t=new Cj}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this.Tt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._t.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!this.Tt){this.Tt=!0;try{Promise.resolve((t=this.St).call.apply(t,Ij([this.Et],Lj(e),!1))).then((function(t){return n._t.resolve(t)}),(function(t){return n._t.reject(t)}))}catch(t){this._t.reject(t)}}return this._t.promise},t}();var Mj,Zj={bt:function(t,n){return new Promise((function(e){Wr.with(IH(Wr.active()),(function(){t.export(n,(function(t){e(t)}))}))}))}},Pj=Object.freeze({__proto__:null,AlwaysOffSampler:tj,AlwaysOnSampler:nj,AnchoredClock:DH,BindOnceFuture:wj,CompositePropagator:HD,DEFAULT_ATTRIBUTE_COUNT_LIMIT:uD,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:cD,DEFAULT_ENVIRONMENT:aD,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,get ExportResultCode(){return LD},ParentBasedSampler:ej,get RPCType(){return QD},RandomIdGenerator:vD,SDK_INFO:ND,TRACE_PARENT_HEADER:BD,TRACE_STATE_HEADER:FD,TimeoutError:Oj,TraceIdRatioBasedSampler:rj,TraceState:KD,get TracesSamplerValues(){return zH},VERSION:gD,W3CBaggagePropagator:HH,W3CTraceContextPropagator:$D,vt:TD,addHrTimes:WD,baggageUtils:YH,callWithTimeout:function(t,n){var e,r=new Promise((function(t,r){e=setTimeout((function(){r(new Oj("Operation timed out."))}),n)}));return Promise.race([t,r]).then((function(t){return clearTimeout(e),t}),(function(t){throw clearTimeout(e),t}))},deleteRPCMetadata:function(t){return t.deleteValue(qD)},getEnv:mD,getEnvWithoutDefaults:ED,getRPCMetadata:function(t){return t.getValue(qD)},getTimeOrigin:ZD,globalErrorHandler:$H,hexToBase64:function(t){return Buffer.from(bD(t)).toString("base64")},hexToBinary:bD,hrTime:PD,hrTimeDuration:VD,hrTimeToMicroseconds:GD,hrTimeToMilliseconds:function(t){return 1e3*t[0]+t[1]/1e6},hrTimeToNanoseconds:function(t){return t[0]*wD+t[1]},hrTimeToTimeStamp:function(t){var n=""+"0".repeat(9)+t[1]+"Z",e=n.substr(n.length-9-1);return new Date(1e3*t[0]).toISOString().replace("000Z",e)},internal:Zj,isAttributeKey:KH,isAttributeValue:BH,isTimeInput:UD,isTimeInputHrTime:XD,isTracingSuppressed:wH,isUrlIgnored:function(t,n){var e,r;if(!n)return!1;try{for(var o=gj(n),i=o.next();!i.done;i=o.next()){if(Nj(t,i.value))return!0}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return!1},isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},loggingErrorHandler:JH,merge:Ej,millisToHrTime:MD,otperformance:OD,parseEnvironment:SD,parseTraceParent:zD,sanitizeAttributes:kH,setGlobalErrorHandler:function(t){QH=t},setRPCMetadata:function(t,n){return t.setValue(qD,n)},suppressTracing:IH,timeInputToHrTime:function(t){if(XD(t))return t;if("number"==typeof t)return t<ZD()?PD(t):MD(t);if(t instanceof Date)return MD(t.getTime());throw TypeError("Invalid input type")},unrefTimer:CD,unsuppressTracing:function(t){return t.deleteValue(LH)},urlMatches:Nj}),Vj=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Gj=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},Xj=function(){function t(t,n,e,r,o,i,s,c,u,a){void 0===s&&(s=[]),this.attributes={},this.links=[],this.events=[],this.rr=0,this.ir=0,this.sr=0,this.status={code:Lr.UNSET},this.endTime=[0,0],this.cr=!1,this.ur=[-1,-1],this.name=e,this.P=r,this.parentSpanId=i,this.kind=o,this.links=s;var l=Date.now();this.ar=OD.now(),this.lr=l-(this.ar+ZD()),this.dr=null!=c,this.startTime=this.hr(null!=c?c:l),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this.pr=t.getSpanLimits(),this.Sr=this.pr.attributeValueLengthLimit||0,null!=a&&this.setAttributes(a),this.Er=t.getActiveSpanProcessor(),this.Er.onStart(this,n)}return t.prototype.spanContext=function(){return this.P},t.prototype.setAttribute=function(t,n){return null==n||this.mr()?this:0===t.length?(Yr.warn("Invalid attribute key: "+t),this):BH(n)?Object.keys(this.attributes).length>=this.pr.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this.rr++,this):(this.attributes[t]=this.Tr(n),this):(Yr.warn("Invalid attribute value set for key: "+t),this)},t.prototype.setAttributes=function(t){var n,e;try{for(var r=Vj(Object.entries(t)),o=r.next();!o.done;o=r.next()){var i=Gj(o.value,2),s=i[0],c=i[1];this.setAttribute(s,c)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return this},t.prototype.addEvent=function(t,n,e){if(this.mr())return this;if(0===this.pr.eventCountLimit)return Yr.warn("No events allowed."),this.ir++,this;this.events.length>=this.pr.eventCountLimit&&(0===this.ir&&Yr.debug("Dropping extra events."),this.events.shift(),this.ir++),UD(n)&&(UD(e)||(e=n),n=void 0);var r=kH(n);return this.events.push({name:t,attributes:r,time:this.hr(e),droppedAttributesCount:0}),this},t.prototype.setStatus=function(t){return this.mr()||(this.status=t),this},t.prototype.updateName=function(t){return this.mr()||(this.name=t),this},t.prototype.end=function(t){this.mr()?Yr.error(this.name+" "+this.P.traceId+"-"+this.P.spanId+" - You can only call end() on a span once."):(this.cr=!0,this.endTime=this.hr(t),this.ur=VD(this.startTime,this.endTime),this.ur[0]<0&&(Yr.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this.ur=[0,0]),this.ir>0&&Yr.warn("Dropped "+this.ir+" events because eventCountLimit reached"),this.Er.onEnd(this))},t.prototype.hr=function(t){if("number"==typeof t&&t<OD.now())return PD(t+this.lr);if("number"==typeof t)return MD(t);if(t instanceof Date)return MD(t.getTime());if(XD(t))return t;if(this.dr)return MD(Date.now());var n=OD.now()-this.ar;return WD(this.startTime,MD(n))},t.prototype.isRecording=function(){return!1===this.cr},t.prototype.recordException=function(t,n){var e={};"string"==typeof t?e[YL.EXCEPTION_MESSAGE]=t:t&&(t.code?e[YL.EXCEPTION_TYPE]=t.code.toString():t.name&&(e[YL.EXCEPTION_TYPE]=t.name),t.message&&(e[YL.EXCEPTION_MESSAGE]=t.message),t.stack&&(e[YL.EXCEPTION_STACKTRACE]=t.stack)),e[YL.EXCEPTION_TYPE]||e[YL.EXCEPTION_MESSAGE]?this.addEvent("exception",e,n):Yr.warn("Failed to record an exception "+t)},Object.defineProperty(t.prototype,"duration",{get:function(){return this.ur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this.cr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this.rr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this.ir},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this.sr},enumerable:!1,configurable:!0}),t.prototype.mr=function(){return this.cr&&Yr.warn("Can not execute the operation on ended Span {traceId: "+this.P.traceId+", spanId: "+this.P.spanId+"}"),this.cr},t.prototype._r=function(t,n){return t.length<=n?t:t.substr(0,n)},t.prototype.Tr=function(t){var n=this,e=this.Sr;return e<=0?(Yr.warn("Attribute value limit must be positive, got "+e),t):"string"==typeof t?this._r(t,e):Array.isArray(t)?t.map((function(t){return"string"==typeof t?n._r(t,e):t})):t},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Mj||(Mj={}));var Uj=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Mj.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),Wj=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Mj.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),Yj=function(){function t(t){var n,e,r,o;this.et=t.root,this.et||($H(new Error("ParentBasedSampler must have a root sampler configured")),this.et=new Wj),this.rt=null!==(n=t.remoteParentSampled)&&void 0!==n?n:new Wj,this.ot=null!==(e=t.remoteParentNotSampled)&&void 0!==e?e:new Uj,this.it=null!==(r=t.localParentSampled)&&void 0!==r?r:new Wj,this.st=null!==(o=t.localParentNotSampled)&&void 0!==o?o:new Uj}return t.prototype.shouldSample=function(t,n,e,r,o,i){var s=ro.getSpanContext(t);return s&&Rr(s)?s.isRemote?s.traceFlags&Qe.SAMPLED?this.rt.shouldSample(t,n,e,r,o,i):this.ot.shouldSample(t,n,e,r,o,i):s.traceFlags&Qe.SAMPLED?this.it.shouldSample(t,n,e,r,o,i):this.st.shouldSample(t,n,e,r,o,i):this.et.shouldSample(t,n,e,r,o,i)},t.prototype.toString=function(){return"ParentBased{root="+this.et.toString()+", remoteParentSampled="+this.rt.toString()+", remoteParentNotSampled="+this.ot.toString()+", localParentSampled="+this.it.toString()+", localParentNotSampled="+this.st.toString()+"}"},t}(),Hj=function(){function t(t){void 0===t&&(t=0),this.ct=t,this.ct=this.ut(t),this.ft=Math.floor(4294967295*this.ct)}return t.prototype.shouldSample=function(t,n){return{decision:vr(n)&&this.dt(n)<this.ft?Mj.RECORD_AND_SAMPLED:Mj.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this.ct+"}"},t.prototype.ut=function(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t},t.prototype.dt=function(t){for(var n=0,e=0;e<t.length/8;e++){var r=8*e;n=(n^parseInt(t.slice(r,r+8),16))>>>0}return n},t}(),Dj=mD(),jj=zH.AlwaysOn,xj=1;function kj(){return{sampler:Kj(Dj),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:mD().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:mD().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:mD().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:mD().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:mD().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:mD().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:mD().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:mD().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Kj(t){switch(void 0===t&&(t=mD()),t.OTEL_TRACES_SAMPLER){case zH.AlwaysOn:return new Wj;case zH.AlwaysOff:return new Uj;case zH.ParentBasedAlwaysOn:return new Yj({root:new Wj});case zH.ParentBasedAlwaysOff:return new Yj({root:new Uj});case zH.TraceIdRatio:return new Hj(Bj(t));case zH.ParentBasedTraceIdRatio:return new Yj({root:new Hj(Bj(t))});default:return Yr.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+jj+'".'),new Wj}}function Bj(t){if(void 0===t.OTEL_TRACES_SAMPLER_ARG||""===t.OTEL_TRACES_SAMPLER_ARG)return Yr.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+xj+"."),xj;var n=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(n)?(Yr.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+xj+"."),xj):n<0||n>1?(Yr.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+xj+"."),xj):n}var Fj=function(){function t(t,n){this.br=t,this.vr=!1,this.yr=[],this.Rr=0;var e=mD();this.Ar="number"==typeof(null==n?void 0:n.maxExportBatchSize)?n.maxExportBatchSize:e.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this.Or="number"==typeof(null==n?void 0:n.maxQueueSize)?n.maxQueueSize:e.OTEL_BSP_MAX_QUEUE_SIZE,this.gr="number"==typeof(null==n?void 0:n.scheduledDelayMillis)?n.scheduledDelayMillis:e.OTEL_BSP_SCHEDULE_DELAY,this.Nr="number"==typeof(null==n?void 0:n.exportTimeoutMillis)?n.exportTimeoutMillis:e.OTEL_BSP_EXPORT_TIMEOUT,this.Cr=new wj(this.Lr,this),this.Ar>this.Or&&(Yr.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this.Ar=this.Or)}return t.prototype.forceFlush=function(){return this.Cr.isCalled?this.Cr.promise:this.Ir()},t.prototype.onStart=function(t,n){},t.prototype.onEnd=function(t){this.Cr.isCalled||t.spanContext().traceFlags&Qe.SAMPLED&&this.wr(t)},t.prototype.shutdown=function(){return this.Cr.call()},t.prototype.Lr=function(){var t=this;return Promise.resolve().then((function(){return t.onShutdown()})).then((function(){return t.Ir()})).then((function(){return t.br.shutdown()}))},t.prototype.wr=function(t){if(this.yr.length>=this.Or)return 0===this.Rr&&Yr.debug("maxQueueSize reached, dropping spans"),void this.Rr++;this.Rr>0&&(Yr.warn("Dropped "+this.Rr+" spans because maxQueueSize reached"),this.Rr=0),this.yr.push(t),this.Mr()},t.prototype.Ir=function(){var t=this;return new Promise((function(n,e){for(var r=[],o=0,i=Math.ceil(t.yr.length/t.Ar);o<i;o++)r.push(t.Zr());Promise.all(r).then((function(){n()})).catch(e)}))},t.prototype.Zr=function(){var t=this;return this.Pr(),0===this.yr.length?Promise.resolve():new Promise((function(n,e){var r=setTimeout((function(){e(new Error("Timeout"))}),t.Nr);Wr.with(IH(Wr.active()),(function(){var o;t.yr.length<=t.Ar?(o=t.yr,t.yr=[]):o=t.yr.splice(0,t.Ar);for(var i=function(){return t.br.export(o,(function(t){var o;clearTimeout(r),t.code===LD.SUCCESS?n():e(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))},s=null,c=0,u=o.length;c<u;c++){var a=o[c];a.resource.asyncAttributesPending&&a.resource.waitForAsyncAttributes&&(null!=s||(s=[]),s.push(a.resource.waitForAsyncAttributes()))}null===s?i():Promise.all(s).then(i,(function(t){$H(t),e(t)}))}))}))},t.prototype.Mr=function(){var t=this;if(!this.vr){var n=function(){t.vr=!0,t.Zr().finally((function(){t.vr=!1,t.yr.length>0&&(t.Pr(),t.Mr())})).catch((function(n){t.vr=!1,$H(n)}))};if(this.yr.length>=this.Ar)return n();void 0===this.Vr&&(this.Vr=setTimeout((function(){return n()}),this.gr),CD(this.Vr))}},t.prototype.Pr=function(){void 0!==this.Vr&&(clearTimeout(this.Vr),this.Vr=void 0)},t}(),Jj=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zj=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Jj(n,t),n.prototype.onShutdown=function(){},n}(Fj),Qj=function(){this.generateTraceId=qj(16),this.generateSpanId=qj(8)},$j=Buffer.allocUnsafe(16);function qj(t){return function(){for(var n=0;n<t/4;n++)$j.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,4*n);for(n=0;n<t&&!($j[n]>0);n++)n===t-1&&($j[t-1]=1);return $j.toString("hex",0,t)}}var tx=function(){function t(t,n,e){this.Gr=e;var r=function(t){var n={sampler:Kj()},e=kj(),r=Object.assign({},e,n,t);return r.generalLimits=Object.assign({},e.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},e.spanLimits,t.spanLimits||{}),r}(n);this.Xr=r.sampler,this.Ur=r.generalLimits,this.pr=r.spanLimits,this.Wr=n.idGenerator||new Qj,this.resource=e.resource,this.instrumentationLibrary=t}return t.prototype.startSpan=function(t,n,e){var r,o,i;void 0===n&&(n={}),void 0===e&&(e=Wr.active()),n.root&&(e=ro.deleteSpan(e));var s=ro.getSpan(e);if(wH(e))return Yr.debug("Instrumentation suppressed, returning Noop Span"),ro.wrapSpanContext(lr);var c,u,a,l=null==s?void 0:s.spanContext(),f=this.Wr.generateSpanId();l&&ro.isSpanContextValid(l)?(c=l.traceId,u=l.traceState,a=l.spanId):c=this.Wr.generateTraceId();var d=null!==(r=n.kind)&&void 0!==r?r:Cr.INTERNAL,h=(null!==(o=n.links)&&void 0!==o?o:[]).map((function(t){return{context:t.context,attributes:kH(t.attributes)}})),p=kH(n.attributes),S=this.Xr.shouldSample(e,c,t,d,p,h);u=null!==(i=S.traceState)&&void 0!==i?i:u;var E={traceId:c,spanId:f,traceFlags:S.decision===Nr.RECORD_AND_SAMPLED?Qe.SAMPLED:Qe.NONE,traceState:u};if(S.decision===Nr.NOT_RECORD)return Yr.debug("Recording is off, propagating context in a non-recording span"),ro.wrapSpanContext(E);var m=kH(Object.assign(p,S.attributes));return new Xj(this,e,t,E,d,a,h,n.startTime,void 0,m)},t.prototype.startActiveSpan=function(t,n,e,r){var o,i,s;if(!(arguments.length<2)){2===arguments.length?s=n:3===arguments.length?(o=n,s=e):(o=n,i=e,s=r);var c=null!=i?i:Wr.active(),u=this.startSpan(t,o,c),a=ro.setSpan(c,u);return Wr.with(a,s,void 0,u)}},t.prototype.getGeneralLimits=function(){return this.Ur},t.prototype.getSpanLimits=function(){return this.pr},t.prototype.getActiveSpanProcessor=function(){return this.Gr.getActiveSpanProcessor()},t}();var nx,ex=function(){return ex=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},ex.apply(this,arguments)},rx=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},ox=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ix=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},sx=function(){function t(t,n){var e,r=this;this.pe=t,this.asyncAttributesPending=null!=n,this.Yr=null!==(e=this.pe)&&void 0!==e?e:{},this.Hr=null==n?void 0:n.then((function(t){return r.pe=Object.assign({},r.pe,t),r.asyncAttributesPending=!1,t}),(function(t){return Yr.debug("a resource's async attributes promise rejected: %s",t),r.asyncAttributesPending=!1,{}}))}return t.empty=function(){return t.EMPTY},t.default=function(){var n;return new t(((n={})[PG.SERVICE_NAME]="unknown_service:"+process.argv0,n[PG.TELEMETRY_SDK_LANGUAGE]=ND[PG.TELEMETRY_SDK_LANGUAGE],n[PG.TELEMETRY_SDK_NAME]=ND[PG.TELEMETRY_SDK_NAME],n[PG.TELEMETRY_SDK_VERSION]=ND[PG.TELEMETRY_SDK_VERSION],n))},Object.defineProperty(t.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&Yr.error("Accessing resource attributes before async attributes settled"),null!==(t=this.pe)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return rx(this,void 0,void 0,(function(){return ox(this,(function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this.Hr]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.merge=function(n){var e,r=this;if(!n)return this;var o=ex(ex({},this.Yr),null!==(e=n.Yr)&&void 0!==e?e:n.attributes);if(!this.Hr&&!n.Hr)return new t(o);var i=Promise.all([this.Hr,n.Hr]).then((function(t){var e,o=ix(t,2),i=o[0],s=o[1];return ex(ex(ex(ex({},r.Yr),i),null!==(e=n.Yr)&&void 0!==e?e:n.attributes),s)}));return new t(o,i)},t.EMPTY=new t({}),t}(),cx=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},ux=function(){function t(t){this.Dr=t}return t.prototype.forceFlush=function(){var t,n,e=[];try{for(var r=cx(this.Dr),o=r.next();!o.done;o=r.next()){var i=o.value;e.push(i.forceFlush())}}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return new Promise((function(t){Promise.all(e).then((function(){t()})).catch((function(n){$H(n||new Error("MultiSpanProcessor: forceFlush failed")),t()}))}))},t.prototype.onStart=function(t,n){var e,r;try{for(var o=cx(this.Dr),i=o.next();!i.done;i=o.next()){i.value.onStart(t,n)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.onEnd=function(t){var n,e;try{for(var r=cx(this.Dr),o=r.next();!o.done;o=r.next()){o.value.onEnd(t)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}},t.prototype.shutdown=function(){var t,n,e=[];try{for(var r=cx(this.Dr),o=r.next();!o.done;o=r.next()){var i=o.value;e.push(i.shutdown())}}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return new Promise((function(t,n){Promise.all(e).then((function(){t()}),n)}))},t}(),ax=function(){function t(){}return t.prototype.onStart=function(t,n){},t.prototype.onEnd=function(t){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}();!function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"}(nx||(nx={}));var lx=function(){function t(t){var n;void 0===t&&(t={}),this.jr=[],this.kr=new Map;var e=Ej({},kj(),function(t){var n,e,r,o,i,s,c,u,a,l,f,d,h=Object.assign({},t.spanLimits),p=ED();return h.attributeCountLimit=null!==(s=null!==(i=null!==(o=null!==(e=null===(n=t.spanLimits)||void 0===n?void 0:n.attributeCountLimit)&&void 0!==e?e:null===(r=t.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==o?o:p.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==i?i:p.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:uD,h.attributeValueLengthLimit=null!==(d=null!==(f=null!==(l=null!==(u=null===(c=t.spanLimits)||void 0===c?void 0:c.attributeValueLengthLimit)&&void 0!==u?u:null===(a=t.generalLimits)||void 0===a?void 0:a.attributeValueLengthLimit)&&void 0!==l?l:p.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==f?f:p.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:cD,Object.assign({},t,{spanLimits:h})}(t));this.resource=null!==(n=e.resource)&&void 0!==n?n:sx.empty(),this.resource=sx.default().merge(this.resource),this.Nt=Object.assign({},e,{resource:this.resource});var r=this.Kr();if(void 0!==r){var o=new zj(r);this.activeSpanProcessor=o}else this.activeSpanProcessor=new ax}return t.prototype.getTracer=function(t,n,e){var r=t+"@"+(n||"")+":"+((null==e?void 0:e.schemaUrl)||"");return this.kr.has(r)||this.kr.set(r,new tx({name:t,version:n,schemaUrl:null==e?void 0:e.schemaUrl},this.Nt,this)),this.kr.get(r)},t.prototype.addSpanProcessor=function(t){0===this.jr.length&&this.activeSpanProcessor.shutdown().catch((function(t){return Yr.error("Error while trying to shutdown current span processor",t)})),this.jr.push(t),this.activeSpanProcessor=new ux(this.jr)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(t){void 0===t&&(t={}),ro.setGlobalTracerProvider(this),void 0===t.propagator&&(t.propagator=this.Br()),t.contextManager&&Wr.setGlobalContextManager(t.contextManager),t.propagator&&to.setGlobalPropagator(t.propagator)},t.prototype.forceFlush=function(){var t=this.Nt.forceFlushTimeoutMillis,n=this.jr.map((function(n){return new Promise((function(e){var r,o=setTimeout((function(){e(new Error("Span processor did not completed within timeout period of "+t+" ms")),r=nx.timeout}),t);n.forceFlush().then((function(){clearTimeout(o),r!==nx.timeout&&(r=nx.resolved,e(r))})).catch((function(t){clearTimeout(o),r=nx.error,e(t)}))}))}));return new Promise((function(t,e){Promise.all(n).then((function(n){var r=n.filter((function(t){return t!==nx.resolved}));r.length>0?e(r):t()})).catch((function(t){return e([t])}))}))},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype.Fr=function(t){var n;return null===(n=this.constructor.Jr.get(t))||void 0===n?void 0:n()},t.prototype.zr=function(t){var n;return null===(n=this.constructor.Qr.get(t))||void 0===n?void 0:n()},t.prototype.Br=function(){var t=this,n=Array.from(new Set(mD().OTEL_PROPAGATORS)),e=n.map((function(n){var e=t.Fr(n);return e||Yr.warn('Propagator "'+n+'" requested through environment variable is unavailable.'),e})),r=e.reduce((function(t,n){return n&&t.push(n),t}),[]);return 0===r.length?void 0:1===n.length?r[0]:new HD({propagators:r})},t.prototype.Kr=function(){var t=mD().OTEL_TRACES_EXPORTER;if("none"!==t&&""!==t){var n=this.zr(t);return n||Yr.error('Exporter "'+t+'" requested through environment variable is unavailable.'),n}},t.Jr=new Map([["tracecontext",function(){return new $D}],["baggage",function(){return new HH}]]),t.Qr=new Map,t}(),fx=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},dx=function(){function t(){}return t.prototype.export=function(t,n){return this.$r(t,n)},t.prototype.shutdown=function(){return this.$r([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.qr=function(t){var n;return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:null===(n=t.spanContext().traceState)||void 0===n?void 0:n.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:GD(t.startTime),duration:GD(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},t.prototype.$r=function(t,n){var e,r;try{for(var o=fx(t),i=o.next();!i.done;i=o.next()){var s=i.value;console.dir(this.qr(s),{depth:3})}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}if(n)return n({code:LD.SUCCESS})},t}(),hx=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},px=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},Sx=function(){function t(){this.yr=[],this.no=!1}return t.prototype.export=function(t,n){var e;if(this.no)return n({code:LD.FAILED,error:new Error("Exporter has been stopped")});(e=this.yr).push.apply(e,px([],hx(t),!1)),setTimeout((function(){return n({code:LD.SUCCESS})}),0)},t.prototype.shutdown=function(){return this.no=!0,this.yr=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this.yr=[]},t.prototype.getFinishedSpans=function(){return this.yr},t}(),Ex=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},mx=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Tx=function(){function t(t){this.br=t,this.Cr=new wj(this.Lr,this),this.eo=new Set}return t.prototype.forceFlush=function(){return Ex(this,void 0,void 0,(function(){return mx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(Array.from(this.eo))];case 1:return t.sent(),this.br.forceFlush?[4,this.br.forceFlush()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.onStart=function(t,n){},t.prototype.onEnd=function(t){var n,e,r=this;if(!this.Cr.isCalled&&t.spanContext().traceFlags&Qe.SAMPLED){var o=function(){return Zj.bt(r.br,[t]).then((function(t){var n;t.code!==LD.SUCCESS&&$H(null!==(n=t.error)&&void 0!==n?n:new Error("SimpleSpanProcessor: span export failed (status "+t+")"))})).catch((function(t){$H(t)}))};if(t.resource.asyncAttributesPending){var i=null===(e=(n=t.resource).waitForAsyncAttributes)||void 0===e?void 0:e.call(n).then((function(){return null!=i&&r.eo.delete(i),o()}),(function(t){return $H(t)}));null!=i&&this.eo.add(i)}else o()}},t.prototype.shutdown=function(){return this.Cr.call()},t.prototype.Lr=function(){return this.br.shutdown()},t}(),_x=Object.freeze({__proto__:null,AlwaysOffSampler:Uj,AlwaysOnSampler:Wj,BasicTracerProvider:lx,BatchSpanProcessor:zj,ConsoleSpanExporter:dx,get ForceFlushState(){return nx},InMemorySpanExporter:Sx,NoopSpanProcessor:ax,ParentBasedSampler:Yj,RandomIdGenerator:Qj,get SamplingDecision(){return Mj},SimpleSpanProcessor:Tx,Span:Xj,TraceIdRatioBasedSampler:Hj,Tracer:tx}),bx=function(){function t(){}return t.prototype.emit=function(t){},t}(),vx=function(){function t(){}return t.prototype.getLogger=function(t,n,e){return new bx},t}(),yx=new vx,Rx="object"==typeof globalThis?globalThis:global,Ax=Symbol.for("io.opentelemetry.js.api.logs"),Ox=Rx;var gx=function(){function t(){}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalLoggerProvider=function(t){return Ox[Ax]?this.getLoggerProvider():(Ox[Ax]=(n=1,e=t,r=yx,function(t){return t===n?e:r}),t);var n,e,r},t.prototype.getLoggerProvider=function(){var t,n;return null!==(n=null===(t=Ox[Ax])||void 0===t?void 0:t.call(Ox,1))&&void 0!==n?n:yx},t.prototype.getLogger=function(t,n,e){return this.getLoggerProvider().getLogger(t,n,e)},t.prototype.disable=function(){delete Ox[Ax]},t}(),Nx=gx.getInstance();function Cx(t){void 0===t&&(t=[]);for(var n=[],e=0,r=t.length;e<r;e++){var o=t[e];if(Array.isArray(o)){var i=Cx(o);n=n.concat(i.instrumentations)}else"function"==typeof o?n.push(new o):o.instrumentationName&&n.push(o)}return{instrumentations:n}}function Lx(t){var n=Cx(t.instrumentations).instrumentations,e=t.tracerProvider||ro.getTracerProvider(),r=t.meterProvider||xr.getMeterProvider(),o=t.loggerProvider||Nx.getLoggerProvider();return function(t,n,e,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];n&&s.setTracerProvider(n),e&&s.setMeterProvider(e),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}}(n,e,r,o),function(){!function(t){t.forEach((function(t){return t.disable()}))}(n)}}function Ix(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wx=function(){return wx=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},wx.apply(this,arguments)},Mx=function(){function t(t,n,e){void 0===e&&(e={}),this.instrumentationName=t,this.instrumentationVersion=n,this.yt=yy.wrap,this.Rt=yy.unwrap,this.At=yy.massWrap,this.Ot=yy.massUnwrap,this.Nt=wx({enabled:!0},e),this.Ct=Yr.createComponentLogger({namespace:t}),this.Lt=ro.getTracer(t,n),this.It=xr.getMeter(t,n),this.wt=Nx.getLogger(t,n),this.Mt()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this.It=t.getMeter(this.instrumentationName,this.instrumentationVersion),this.Mt()},Object.defineProperty(t.prototype,"logger",{get:function(){return this.wt},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(t){this.wt=t.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var t,n=null!==(t=this.init())&&void 0!==t?t:[];return Array.isArray(n)?n:[n]},t.prototype.Mt=function(){},t.prototype.getConfig=function(){return this.Nt},t.prototype.setConfig=function(t){void 0===t&&(t={}),this.Nt=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this.Lt=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),t}(),Zx=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Px=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},Vx=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},Gx="/",Xx=function(){this.hooks=[],this.children=new Map},Ux=function(){function t(){this.en=new Xx,this.rn=0}return t.prototype.insert=function(t){var n,e,r=this.en;try{for(var o=Zx(t.moduleName.split(Gx)),i=o.next();!i.done;i=o.next()){var s=i.value,c=r.children.get(s);c||(c=new Xx,r.children.set(s,c)),r=c}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}r.hooks.push({hook:t,insertedId:this.rn++})},t.prototype.search=function(t,n){var e,r,o=void 0===n?{}:n,i=o.maintainInsertionOrder,s=o.fullOnly,c=this.en,u=[],a=!0;try{for(var l=Zx(t.split(Gx)),f=l.next();!f.done;f=l.next()){var d=f.value,h=c.children.get(d);if(!h){a=!1;break}s||u.push.apply(u,Vx([],Px(h.hooks),!1)),c=h}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s&&a&&u.push.apply(u,Vx([],Px(c.hooks),!1)),0===u.length?[]:1===u.length?[u[0].hook]:(i&&u.sort((function(t,n){return t.insertedId-n.insertedId})),u.map((function(t){return t.hook})))},t}(),Wx=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Yx=["afterEach","after","beforeEach","before","describe","it"].every((function(t){return"function"==typeof global[t]})),Hx=function(){function t(){this.sn=new Ux,this.cn()}return t.prototype.cn=function(){var t=this;new qR(null,{internals:!0},(function(n,e,r){var o,i,s,c=(s=e,C.sep!==Gx?s.split(C.sep).join(Gx):s),u=t.sn.search(c,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var a=Wx(u),l=a.next();!l.done;l=a.next()){n=(0,l.value.onRequire)(n,e,r)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n}))},t.prototype.register=function(t,n){var e={moduleName:t,onRequire:n};return this.sn.insert(e),e},t.getInstance=function(){var n;return Yx?new t:this.L=null!==(n=this.L)&&void 0!==n?n:new t},t}();var Dx={exports:{}},jx={};const xx=[],kx=new WeakMap,Kx=new Map,Bx=[],Fx={set:(t,n,e)=>kx.get(t)[n](e),defineProperty(t,n,e){if(!("value"in e))throw new Error("Getters/setters are not supported for exports property descriptors.");return kx.get(t)[n](e.value)}};jx.register=function(t,n,e,r){Kx.set(t,r),kx.set(n,e);const o=new Proxy(n,Fx);xx.forEach((n=>n(t,o))),Bx.push([t,o])},jx.importHooks=xx,jx.specifiers=Kx,jx.toHook=Bx;const Jx=n,zx=KR,{fileURLToPath:Qx}=c,{importHooks:$x,specifiers:qx,toHook:tk}=jx;function nk(t){$x.push(t),tk.forEach((([n,e])=>t(n,e)))}function ek(t){const n=$x.indexOf(t);n>-1&&$x.splice(n,1)}function rk(t,n,e,r){const o=t(n,e,r);o&&o!==n&&(n.default=o)}function ok(t,n,e){if(this instanceof ok==!1)return new ok(t,n,e);"function"==typeof t?(e=t,t=null,n=null):"function"==typeof n&&(e=n,n=null);const r=!!n&&!0===n.internals;this.un=(n,o)=>{const i=n;let s;if(n.startsWith("node:"))n=n.replace(/^node:/,"");else{if(n.startsWith("file://"))try{n=Qx(n)}catch(t){}const t=zx(n);t&&(n=t.name,s=t.basedir)}if(t){for(const c of t)if(c===n){if(s)if(r)n=n+Jx.sep+Jx.relative(s,Qx(i));else if(!s.endsWith(qx.get(i)))continue;rk(e,o,n,s)}}else rk(e,o,n,s)},nk(this.un)}ok.prototype.unhook=function(){ek(this.un)},Dx.exports=ok,Dx.exports.addHook=nk,Dx.exports.removeHook=ek;var ik=jt(Dx.exports),sk=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ck=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},uk=function(t){function n(n,r,o){void 0===o&&(o={});var i=t.call(this,n,r,o)||this;i.an=[],i.ln=Hx.getInstance(),i.fn=!1,i.yt=function(t,n,r){if(e.types.isProxy(t)){var o=yy.wrap(Object.assign({},t),n,r);return Object.defineProperty(t,n,{value:o})}return yy.wrap(t,n,r)},i.Rt=function(t,n){return e.types.isProxy(t)?Object.defineProperty(t,n,{value:t[n]}):yy.unwrap(t,n)},i.At=function(t,n,e){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.yt(t,n,e)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")},i.Ot=function(t,n){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.Rt(t,n)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")};var s=i.init();return s&&!Array.isArray(s)&&(s=[s]),i.dn=s||[],0===i.dn.length&&Yr.debug("No modules instrumentation has been defined for '"+i.instrumentationName+"@"+i.instrumentationVersion+"', nothing will be patched"),i.Nt.enabled&&i.enable(),i}return sk(n,t),n.prototype.hn=function(){var t=this;this.dn.forEach((function(n){var e=n.name;try{var r=require.resolve(e);require.cache[r]&&t.Ct.warn("Module "+e+" has been loaded before "+t.instrumentationName+" so it might not work, please initialize it before requiring "+e)}catch(t){}}))},n.prototype.pn=function(t){try{var n=Ix(C.join(t,"package.json")).version;return"string"==typeof n?n:void 0}catch(n){Yr.warn("Failed extracting version",t)}},n.prototype.Sn=function(t,n,e,r){var o,i=this;if(!r)return"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?t.patch(n):n;var s=this.pn(r);if(t.moduleVersion=s,t.name===e)return ak(t.supportedVersions,s,t.includePrerelease)&&"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?t.patch(n,t.moduleVersion):n;var c=null!==(o=t.files)&&void 0!==o?o:[],u=C.normalize(e);return c.filter((function(t){return t.name===u})).filter((function(n){return ak(n.supportedVersions,s,t.includePrerelease)})).reduce((function(n,e){return e.moduleExports=n,i.fn?e.patch(n,t.moduleVersion):n}),n)},n.prototype.enable=function(){var t,n,e,r,o,i,s=this;if(!this.fn)if(this.fn=!0,this.an.length>0)try{for(var c=ck(this.dn),u=c.next();!u.done;u=c.next()){var a=u.value;"function"==typeof a.patch&&a.moduleExports&&a.patch(a.moduleExports,a.moduleVersion);try{for(var l=(e=void 0,ck(a.files)),f=l.next();!f.done;f=l.next()){var d=f.value;d.moduleExports&&d.patch(d.moduleExports,a.moduleVersion)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else{this.hn();var h=function(t){var n=function(n,e,r){return s.Sn(t,n,e,r)},e=C.isAbsolute(t.name)?new qR([t.name],{internals:!0},n):p.ln.register(t.name,n);p.an.push(e);var r=new ik([t.name],{internals:!1},(function(n,e,r){return s.Sn(t,n,e,r)}));p.an.push(r)},p=this;try{for(var S=ck(this.dn),E=S.next();!E.done;E=S.next()){h(E.value)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}},n.prototype.disable=function(){var t,n,e,r;if(this.fn){this.fn=!1;try{for(var o=ck(this.dn),i=o.next();!i.done;i=o.next()){var s=i.value;"function"==typeof s.unpatch&&s.moduleExports&&s.unpatch(s.moduleExports,s.moduleVersion);try{for(var c=(e=void 0,ck(s.files)),u=c.next();!u.done;u=c.next()){var a=u.value;a.moduleExports&&a.unpatch(a.moduleExports,s.moduleVersion)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},n.prototype.isEnabled=function(){return this.fn},n}(Mx);function ak(t,n,e){return void 0===n?t.includes("*"):t.some((function(t){return ny.satisfies(n,t,{includePrerelease:e})}))}var lk=function(t,n,e,r,o){this.name=t,this.supportedVersions=n,this.patch=e,this.unpatch=r,this.files=o||[]},fk=function(t,e,r,o){this.supportedVersions=e,this.patch=r,this.unpatch=o,this.name=n.normalize(t)},dk=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},hk=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var pk=Object.freeze({__proto__:null,InstrumentationBase:uk,InstrumentationNodeModuleDefinition:lk,InstrumentationNodeModuleFile:fk,isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},registerInstrumentations:Lx,safeExecuteInTheMiddle:function(t,n,e){var r,o;try{o=t()}catch(t){r=t}finally{if(n(r,o),r&&!e)throw r;return o}},safeExecuteInTheMiddleAsync:function(t,n,e){return dk(this,void 0,void 0,(function(){var r,o,i;return hk(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,t()];case 1:return o=s.sent(),[3,4];case 2:return i=s.sent(),r=i,[3,4];case 3:if(n(r,o),r&&!e)throw r;return[2,o];case 4:return[2]}}))}))}});function Sk(t){const n=t;return!!n.attributes&&"object"==typeof n.attributes}function Ek(t){return!!t.name}function mk(t){return!!t.parentSpanId}function Tk(t){return function(t){return!!t.kind}(t)?t.kind:Cr.INTERNAL}const _k="sentry-trace",bk="baggage",vk="sentry.dsc",yk="sentry.parent_span_id",Rk="sentry.sampled_not_recording",Ak="sentry.url",Ok=Ne("sentry_scopes"),gk=Ne("sentry_fork_isolation_scope"),Nk=Ne("sentry_fork_set_scope"),Ck=Ne("sentry_fork_set_isolation_scope"),Lk="_scopeContext";function Ik(t){return t.getValue(Ok)}function wk(t,n){return t.setValue(Ok,n)}function Mk(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}function Zk(t){const{traceFlags:n,traceState:e}=t,r=!!e&&"1"===e.get(Rk);if(n===Qe.SAMPLED)return!0;if(r)return!1;const o=e?e.get(vk):void 0,i=o?gn(o):void 0;return"true"===Mk([i,"optionalAccess",t=>t.sampled])||"false"!==Mk([i,"optionalAccess",t=>t.sampled])&&void 0}function Pk(t){const n=Sk(t)?t.attributes:{},e=Ek(t)?t.name:"<unknown>",r=n["http.request.method"]||n[gC];if(r)return function({name:t,kind:n,attributes:e},r){const o=["http"];switch(n){case Cr.CLIENT:o.push("client");break;case Cr.SERVER:o.push("server")}const{urlPath:i,url:s,query:c,fragment:u,hasRoute:a}=function(t,n){const e=t[CC],r=t[NC],o=t[WC],i="string"==typeof r?ln(r):void 0,s=i?dn(i):void 0,c=i&&i.search?i.search:void 0,u=i&&i.hash?i.hash:void 0;if("string"==typeof o)return{urlPath:o,url:s,query:c,fragment:u,hasRoute:!0};if(n===Cr.SERVER&&"string"==typeof e)return{urlPath:fn(e),url:s,query:c,fragment:u,hasRoute:!1};if(i)return{urlPath:s,url:s,query:c,fragment:u,hasRoute:!1};if("string"==typeof e)return{urlPath:fn(e),url:s,query:c,fragment:u,hasRoute:!1};return{urlPath:void 0,url:s,query:c,fragment:u,hasRoute:!1}}(e,n);if(!i)return{op:o.join("."),description:t,source:"custom"};const l=`${r} ${i}`,f=a||"/"===i?"route":"url",d={};s&&(d.url=s);c&&(d["http.query"]=c);u&&(d["http.fragment"]=u);return{op:o.join("."),description:l,source:f,data:d}}({attributes:n,name:e,kind:Tk(t)},r);if(n[vN])return function({attributes:t,name:n}){const e=t[gN],r=e?e.toString():n;return{op:"db",description:r,source:"task"}}({attributes:n,name:e});if(n[LL])return{op:"rpc",description:e,source:"route"};if(n[aL])return{op:"message",description:e,source:"route"};const o=n[kN];return o?{op:o.toString(),description:e,source:"route"}:{op:void 0,description:e,source:"custom"}}function Vk(t){const n=DU();if(!n)return{};const e=function(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}([t.spanContext().traceState,"optionalAccess",t=>t.get,"call",t=>t(vk)]),r=e?gn(e):void 0;if(r)return r;const o=wW(t.spanContext().traceId,n),i=Sk(t)?t.attributes:{},s=i[BU];null!=s&&(o.sample_rate=`${s}`);const c=i[KU],{description:u}=Ek(t)?Pk(t):{description:""};"url"!==c&&u&&(o.transaction=u);const a=Zk(t.spanContext());return null!=a&&(o.sampled=String(a)),n.emit("createDsc",o),o}function Gk(){return ro.getActiveSpan()}const Xk=new Set;function Uk(t){Xk.add(t)}function Wk(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}function Yk(t){const n=t.spanContext(),{traceId:e,spanId:r,traceState:o}=n,i=o?o.get(vk):void 0,s=i?gn(i):void 0,c=o?o.get(yk):void 0;return{traceId:e,spanId:r,sampled:Zk(n),parentSpanId:c,dsc:s||Vk(SW(t))}}class Hk extends RH{constructor(){super(),Uk("SentryPropagator"),this.ro=new Jn(100)}inject(t,n,e){if(bH(t))return;const r=ro.getSpan(t),o=r&&function(t){const n=Wk([uW,"call",n=>n(t),"access",t=>t.data,"optionalAccess",t=>t[NC]]);if(n)return n;const e=Wk([t,"access",t=>t.spanContext,"call",t=>t(),"access",t=>t.traceState,"optionalAccess",t=>t.get,"call",t=>t(Ak)]);if(e)return e;return}(r),i=Wk([DU,"call",t=>t(),"optionalAccess",t=>t.getOptions,"call",t=>t(),"optionalAccess",t=>t.tracePropagationTargets]);if("string"==typeof o&&i&&!this.oo(i,o))return;const s=function(t){try{const n=t[bk];return Array.isArray(n)?n.join(","):n}catch(t){return}}(n);let c=to.getBaggage(t)||to.createBaggage({});const{dynamicSamplingContext:u,traceId:a,spanId:l,sampled:f}=function(t){const n=OW()?ro.getSpan(t):void 0,e=Wk([n,"optionalAccess",t=>t.spanContext,"call",t=>t(),"access",t=>t.isRemote]);if(n&&!e){const t=n.spanContext();return{dynamicSamplingContext:jk(Yk(n),t.traceId),traceId:t.traceId,spanId:t.spanId,sampled:Zk(t)}}const r=Wk([Ik,"call",n=>n(t),"optionalAccess",t=>t.scope])||XU(),o=r.getPropagationContext(),i=jk(o,o.traceId);return{dynamicSamplingContext:i,traceId:o.traceId,spanId:o.spanId,sampled:o.sampled}}(t);if(s){const t=Cn(s);t&&Object.entries(t).forEach((([t,n])=>{c=c.setEntry(t,{value:n})}))}u&&(c=Object.entries(u).reduce(((t,[n,e])=>e?t.setEntry(`${Rn}${n}`,{value:e}):t),c)),a&&"00000000000000000000000000000000"!==a&&e.set(n,_k,Mn(a,l,f)),super.inject(to.setBaggage(t,c),n,e)}extract(t,n,e){const r=e.get(n,_k),o=e.get(n,bk),i=r?Array.isArray(r)?r[0]:r:void 0,s=wn(i,o),c=xk(t,{sentryTrace:i,baggage:o}),u=Ik(c),a={scope:u?u.scope.clone():XU().clone(),isolationScope:u?u.isolationScope:UU()};return a.scope.setPropagationContext(s),wk(c,a)}fields(){return[_k,bk]}oo(t,n){if(void 0===t)return!0;const e=this.ro.get(n);if(void 0!==e)return e;const r=J(n,t);return this.ro.set(n,r),r}}function Dk({parentSpanId:t,dsc:n,sampled:e}){if(!t&&!n&&!1!==e)return;const r=n?Nn(n):void 0,o=t?(new CH).set(yk,t):new CH,i=r?o.set(vk,r):o;return!1===e?i.set(Rk,"1"):i}function jk(t,n){if(Wk([t,"optionalAccess",t=>t.dsc]))return t.dsc;const e=DU();return e?wW(n||t.traceId,e):void 0}function xk(t,{sentryTrace:n,baggage:e}){const r=wn(n,e),o=Dk({parentSpanId:r.parentSpanId,dsc:r.dsc,sampled:r.sampled}),i={traceId:r.traceId,spanId:r.parentSpanId||"",isRemote:!0,traceFlags:r.sampled?Qe.SAMPLED:Qe.NONE,traceState:o};return ro.setSpanContext(t,i)}function kk(t,n){const e=Jk(),{name:r}=t,o=$k(t.scope,t.forceTransaction),i=t.onlyIfParent&&!ro.getSpan(o)?_H(o):o,s=Qk(t);return e.startActiveSpan(r,s,i,(e=>(zk(e,t),NW((()=>n(e)),(()=>{void 0===uW(e).status&&e.setStatus({code:Lr.ERROR})}),(()=>e.end())))))}function Kk(t,n){const e=Jk(),{name:r}=t,o=$k(t.scope,t.forceTransaction),i=t.onlyIfParent&&!ro.getSpan(o)?_H(o):o,s=Qk(t);return e.startActiveSpan(r,s,i,(e=>(zk(e,t),NW((()=>n(e,(()=>e.end()))),(()=>{void 0===uW(e).status&&e.setStatus({code:Lr.ERROR})})))))}function Bk(t){const n=Jk(),{name:e}=t,r=$k(t.scope,t.forceTransaction),o=t.onlyIfParent&&!ro.getSpan(r)?_H(r):r,i=Qk(t),s=n.startSpan(e,i,o);return zk(s,t),s}function Fk(t,n){const e=t?ro.setSpan(Wr.active(),t):ro.deleteSpan(Wr.active());return Wr.with(e,(()=>n(XU())))}function Jk(){const t=DU();return t&&t.tracer||ro.getTracer("@sentry/opentelemetry",IY)}function zk(t,n){const{op:e}=n;e&&t.setAttribute(FU,e)}function Qk(t){const{startTime:n,attributes:e,kind:r}=t;var o;return{attributes:e,kind:r,startTime:"number"==typeof n?(o=n)<9999999999?1e3*o:o:n}}function $k(t,n){const e=function(t){if(t){const n=function(t){return t[Lk]}(t);if(n)return n}return Wr.active()}(t),r=function(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}([Ik,"call",t=>t(e),"optionalAccess",t=>t.scope]),o=ro.getSpan(e);if(!o){const t=DU();if(r&&t){const t=r.getPropagationContext(),n=Dk({parentSpanId:t.parentSpanId,dsc:void 0,sampled:t.sampled}),o={traceId:t.traceId,spanId:t.parentSpanId||t.spanId,isRemote:!0,traceFlags:t.sampled?Qe.SAMPLED:Qe.NONE,traceState:n};return ro.setSpanContext(e,o)}return e}if(!n)return e;const i=ro.deleteSpan(e),{spanId:s,traceId:c}=o.spanContext(),u=Zk(o.spanContext()),a=Dk({dsc:Vk(SW(o)),parentSpanId:s,sampled:u}),l={traceId:c,spanId:s,isRemote:!0,traceFlags:u?Qe.SAMPLED:Qe.NONE,traceState:a};return ro.setSpanContext(i,l)}function qk(t,n){return DW(t,(()=>function(t,n,e){const r=xk(t,n);return Wr.with(r,e)}(Wr.active(),t,n)))}function tK(t){const n=_H(Wr.active());return Wr.with(n,t)}function nK(){function t(){const t=Ik(Wr.active());return t||{scope:LU(),isolationScope:IU()}}function n(){return t().scope}function e(){return t().isolationScope}var r;r={withScope:function(t){const e=Wr.active();return Wr.with(e,(()=>t(n())))},withSetScope:function(t,n){const e=Wr.active();return Wr.with(e.setValue(Nk,t),(()=>n(t)))},withSetIsolationScope:function(t,n){const r=Wr.active();return Wr.with(r.setValue(Ck,t),(()=>n(e())))},withIsolationScope:function(t){const n=Wr.active();return Wr.with(n.setValue(gk,!0),(()=>t(e())))},getCurrentScope:n,getIsolationScope:e,startSpan:kk,startSpanManual:Kk,startInactiveSpan:Bk,getActiveSpan:Gk,withActiveSpan:Fk,suppressTracing:tK},vU(bU()).acs=r}function eK(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}const rK="sentry.parentIsRemote";function oK([t,n]){return t+n/1e9}function iK(t){return!0===t.attributes[rK]?void 0:t.parentSpanId}function sK(t,n){const e=n.spanContext().spanId,r=iK(n);if(!r)return void cK(t,{id:e,span:n,children:[]});const o=function(t,n){const e=t.get(n);if(e)return e;return cK(t,{id:n,children:[]})}(t,r),i=cK(t,{id:e,span:n,parentNode:o,children:[]});o.children.push(i)}function cK(t,n){const e=t.get(n.id);return e&&e.span?e:e&&!e.span?(e.span=n.span,e.parentNode=n.parentNode,e):(t.set(n.id,n),n)}const uK={1:"cancelled",2:"unknown_error",3:"invalid_argument",4:"deadline_exceeded",5:"not_found",6:"already_exists",7:"permission_denied",8:"resource_exhausted",9:"failed_precondition",10:"aborted",11:"out_of_range",12:"unimplemented",13:"internal_error",14:"unavailable",15:"data_loss",16:"unauthenticated"},aK=t=>Object.values(uK).includes(t);function lK(t){const n=Sk(t)?t.attributes:{},e=function(t){return!!t.status}(t)?t.status:void 0;if(e){if(e.code===Lr.OK)return{code:tW};if(e.code===Lr.ERROR)return void 0===e.message||aK(e.message)?{code:nW,message:e.message}:{code:nW,message:"unknown_error"}}const r=n[wC],o=n[wL],i="number"==typeof r?r:"string"==typeof r?parseInt(r):void 0;return i?eW(i):"string"==typeof o?{code:nW,message:uK[o]||"unknown_error"}:e&&e.code===Lr.UNSET?{code:tW}:{code:nW,message:"unknown_error"}}class fK{constructor(){this.yr=[]}export(t){this.yr.push(t),iK(t)?this.io():(this.so(),this.co=setTimeout((()=>{this.flush()}),1))}flush(){this.so();const t=function(t){const n=function(t){const n=new Map;for(const e of t)sK(n,e);return Array.from(n,(function([t,n]){return n}))}(t),e=new Set(n);return hK(n).forEach((t=>{e.delete(t);const n=t.span,r=function(t){const{op:n,description:e,data:r,origin:o="manual",source:i}=SK(t),s=AW(t),c=t.attributes[BU],u=_t({[KU]:i,[BU]:c,[FU]:n,[JU]:o,...r,...EK(t.attributes)}),{traceId:a,spanId:l}=t.spanContext(),f=t.parentSpanId,d=lK(t),h={contexts:{trace:_t({parent_span_id:f,span_id:l,trace_id:a,data:u,origin:o,op:n,status:lW(d)}),otel:{resource:t.resource.attributes}},spans:[],start_timestamp:oK(t.startTime),timestamp:oK(t.endTime),transaction:e,type:"transaction",sdkProcessingMetadata:{..._t({capturedSpanScope:s.scope,capturedSpanIsolationScope:s.isolationScope,sampleRate:c,dynamicSamplingContext:Vk(t)})},...i&&{transaction_info:{source:i}},le:kU(t)};return h}(n),o=r.spans||[];t.children.forEach((t=>{pK(t,o,e)})),r.spans=o;const i=GW(n.events);i&&(r.measurements=i),rY(r)})),Array.from(e).map((t=>t.span)).filter((t=>!!t))}(this.yr);this.io(t)}clear(){this.yr=[],this.so()}so(){this.co&&(clearTimeout(this.co),this.co=void 0)}io(t=this.yr){this.yr=t.filter((t=>{const n=function(t,n){const e=Date.now()/1e3-n;return oK(t.startTime)<e}(t,300);return!n}))}}function dK(t){return!!t.span&&!t.parentNode}function hK(t){return t.filter(dK)}function pK(t,n,e){e.delete(t);const r=t.span;if(!r)return void t.children.forEach((t=>{pK(t,n,e)}));const o=r.spanContext().spanId,i=r.spanContext().traceId,{attributes:s,startTime:c,endTime:u,parentSpanId:a}=r,{op:l,description:f,data:d,origin:h="manual"}=SK(r),p=_t({[JU]:h,[FU]:l,...EK(s),...d}),S=lK(r),E=_t({span_id:o,trace_id:i,data:p,description:f,parent_span_id:a,start_timestamp:oK(c),timestamp:oK(u)||void 0,status:lW(S),op:l,origin:h,le:kU(r),measurements:GW(r.events)});n.push(E),t.children.forEach((t=>{pK(t,n,e)}))}function SK(t){const{op:n,source:e,origin:r}=function(t){const n=t.attributes;return{origin:n[JU],op:n[FU],source:n[KU]}}(t),{op:o,description:i,source:s,data:c}=Pk(t);return{op:n||o,description:i,source:e||s,origin:r,data:{...c,...mK(t)}}}function EK(t){const n={...t};return delete n[BU],delete n[rK],n}function mK(t){const n=t.attributes,e={"otel.kind":Cr[t.kind]};if(n[wC]){const t=n[wC];e["http.response.status_code"]=t}const r=function(t){if(!Sk(t))return{};const n={url:t.attributes[NC],"http.method":t.attributes[gC]};!n["http.method"]&&n.url&&(n["http.method"]="GET");try{const e=t.attributes[NC];if("string"==typeof e){const t=ln(e);n.url=dn(t),t.search&&(n["http.query"]=t.search),t.hash&&(n["http.fragment"]=t.hash)}}catch(t){}return n}(t);return r.url&&(e.url=r.url),r["http.query"]&&(e["http.query"]=r["http.query"].slice(1)),r["http.fragment"]&&(e["http.fragment"]=r["http.fragment"].slice(1)),e}function TK(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}class _K{constructor(){Uk("SentrySpanProcessor"),this.br=new fK}async forceFlush(){this.br.flush()}async shutdown(){this.br.clear()}onStart(t,n){!function(t,n){const e=ro.getSpan(n);let r=Ik(n);e&&!e.spanContext().isRemote&&hW(e,t),e&&e.spanContext().isRemote&&t.setAttribute(rK,!0),n===we&&(r={scope:LU(),isolationScope:IU()}),r&&RW(t,r.scope,r.isolationScope),TK([DU(),"optionalAccess",t=>t.emit,"call",n=>n("spanStart",t)])}(t,n)}onEnd(t){!function(t){TK([DU(),"optionalAccess",t=>t.emit,"call",n=>n("spanEnd",t)])}(t),this.br.export(t)}}class bK{constructor(t){this.ee=t,Uk("SentrySampler")}shouldSample(t,n,e,r,o,i){const s=this.ee.getOptions(),c=ro.getSpan(t),u=Qn([c,"optionalAccess",t=>t.spanContext,"call",t=>t()]);let a=Qn([u,"optionalAccess",t=>t.traceState])||new CH;const l=o[NC];if(l&&"string"==typeof l&&(a=a.set(Ak,l)),!OW(s))return{decision:Mj.NOT_RECORD,traceState:a};if(r===Cr.CLIENT&&o[gC]&&(!c||Qn([u,"optionalAccess",t=>t.isRemote])))return{decision:Mj.NOT_RECORD,traceState:a};const f=c?function(t,n,e){const r=t.spanContext();if(Rr(r)&&r.traceId===n){if(r.isRemote){const n=function(t){const n=t.spanContext().traceId,e=Yk(t);return e&&n===e.traceId?e.sampled:void 0}(t);return n}return Zk(r)}return}(c,n):void 0,d={decision:!0};if(this.ee.emit("beforeSampling",{spanAttributes:o,spanName:e,parentSampled:f,parentContext:u},d),!d.decision)return{decision:Mj.NOT_RECORD,traceState:a};const[h,p]=PW(s,{name:e,attributes:o,transactionContext:{name:e,parentSampled:f},parentSampled:f}),S={[BU]:p},E=`${o[gC]}`.toUpperCase();return"OPTIONS"===E||"HEAD"===E?{decision:Mj.NOT_RECORD,attributes:S,traceState:a.set(Rk,"1")}:h?{decision:Mj.RECORD_AND_SAMPLED,attributes:S,traceState:a}:{decision:Mj.NOT_RECORD,attributes:S,traceState:a.set(Rk,"1")}}toString(){return"SentrySampler"}}function vK(...t){Lx({instrumentations:t})}function yK(t,n){t.setAttribute(JU,n)}function RK(t){const n=t.protocol||"",e=t.hostname||t.host||"";return`${n}//${e}${!t.port||80===t.port||443===t.port||/^(.*):(\d+)$/.test(e)?"":`:${t.port}`}${t.path?t.path:"/"}`}const AK="Http";let OK,gK={};const NK=Object.assign((function(){if(OK)return;const t=gK.uo||te.HttpInstrumentation;OK=new t({ignoreOutgoingRequestHook:t=>{const n=RK(t);if(!n)return!1;if(wY(n,DU()))return!0;const e=gK.ignoreOutgoingRequests;return!(!e||!e(n))},ignoreIncomingRequestHook:t=>{const n=RK(t),e=Qn([t,"access",t=>t.method,"optionalAccess",t=>t.toUpperCase,"call",t=>t()]);if("OPTIONS"===e||"HEAD"===e)return!0;const r=gK.ignoreIncomingRequests;return!(!r||!r(n))},requireParentforOutgoingSpans:!1,requireParentforIncomingSpans:!1,requestHook:(t,n)=>{if(yK(t,"auto.http.otel.http"),LK(n))return;const e=AW(t),r=(e.isolationScope||UU()).clone(),o=e.scope||XU();r.setSDKProcessingMetadata({request:n});const i=DU();i&&i.getOptions().autoSessionTracking&&r.setRequestSession({status:"ok"}),function(t){const n=Ik(Wr.active());n&&(n.isolationScope=t)}(r),RW(t,o,r);const s=`${(n.method||"GET").toUpperCase()} ${fn(n.url||"/")}`;r.setTransactionName(s)},responseHook:()=>{const t=DU();t&&t.getOptions().autoSessionTracking&&setImmediate((()=>{t.xe()}))},applyCustomAttributesOnSpan:(t,n,e)=>{(void 0===gK.breadcrumbs||gK.breadcrumbs)&&function(t,n){if(!LK(t))return;const e=function(t){try{const n=t.getHeader("host")||t.host,e=ln(new URL(t.path,`${t.protocol}//${n}`).toString()),r={url:dn(e),"http.method":t.method||"GET"};return e.search&&(r["http.query"]=e.search),e.hash&&(r["http.fragment"]=e.hash),r}catch(t){return{}}}(t);PY({category:"http",data:{status_code:n.statusCode,...e},type:"http"},{event:"response",request:t,response:n})}(n,e)}}),vK(OK)}),{id:AK}),CK=(t={})=>({name:AK,setupOnce(){gK=t,NK()}});function LK(t){return"outputData"in t&&"outputSize"in t&&!("client"in t)&&!("statusCode"in t)}const IK=function(t){const n=t.match(Bt)||[],e=parseInt(n[1],10),r=parseInt(n[2],10),o=parseInt(n[3],10);return{buildmetadata:n[5],major:isNaN(e)?void 0:e,minor:isNaN(r)?void 0:r,patch:isNaN(o)?void 0:o,prerelease:n[4]}}(process.versions.node),wK=IK.major,MK=(t={})=>{const n=void 0===t.breadcrumbs||t.breadcrumbs,e=t.ignoreOutgoingRequests;async function r(){if(!(wK<18))try{const t=await Promise.resolve().then((function(){return require("./index-B56lH8e6.js")})).then((function(t){return t.index})),{FetchInstrumentation:r}=t;class o extends r{onHeaders({request:t,response:e}){return n&&function(t,n){const e=function(t){try{const n=ln(new URL(t.path,t.origin).toString()),e={url:dn(n),"http.method":t.method||"GET"};return n.search&&(e["http.query"]=n.search),n.hash&&(e["http.fragment"]=n.hash),e}catch(t){return{}}}(t);PY({category:"http",data:{status_code:n.statusCode,...e},type:"http"},{event:"response",request:t,response:n})}(t,e),super.onHeaders({request:t,response:e})}}return new o({ignoreRequestHook:t=>{const n=t.origin;return e&&n&&e(n)},onRequest:({span:t})=>{!function(t){yK(t,"auto.http.otel.node_fetch")}(t)}})}catch(t){}}return{name:"NodeFetch",setupOnce(){r().then((t=>{t&&vK(t)}))}}};const ZK=()=>({name:"Console",setup(t){Zt((({args:n,level:e})=>{DU()===t&&PY({category:"console",level:bn(e),message:L.format.apply(void 0,n)},{input:[...n],level:e})}))}}),PK=a.promisify(f.readFile),VK=a.promisify(f.readdir),GK=(t={})=>{let n;const e={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0,...t};async function r(t){void 0===n&&(n=async function(){const t={};e.os&&(t.os=await async function(){const t=I.platform();switch(t){case"darwin":return async function(){const t={kernel_version:I.release(),name:"Mac OS X",version:"10."+(Number(I.release().split(".")[0])-4)};try{const n=await new Promise(((t,n)=>{l.execFile("/usr/bin/sw_vers",((e,r)=>{e?n(e):t(r)}))}));t.name=YK(/^ProductName:\s+(.*)$/m,n),t.version=YK(/^ProductVersion:\s+(.*)$/m,n),t.build=YK(/^BuildVersion:\s+(.*)$/m,n)}catch(t){}return t}();case"linux":return async function(){const t={kernel_version:I.release(),name:"Linux"};try{const n=await VK("/etc"),e=UK.find((t=>n.includes(t.name)));if(!e)return t;const r=h.join("/etc",e.name),o=(await PK(r,{encoding:"utf-8"})).toLowerCase(),{distros:i}=e;t.name=i.find((t=>o.indexOf(HK(t))>=0))||i[0];const s=HK(t.name);t.version=WK[s](o)}catch(t){}return t}();default:return{name:XK[t]||t,version:I.release()}}}());e.app&&(t.app=function(){const t=process.memoryUsage().rss,n={app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:t};if("function"==typeof process.availableMemory){const t=Qn([process,"access",t=>t.availableMemory,"optionalCall",t=>t()]);null!=t&&(n.free_memory=t)}return n}());e.device&&(t.device=function(t){const n={};let e;try{e=I.uptime&&I.uptime()}catch(t){}"number"==typeof e&&(n.boot_time=new Date(Date.now()-1e3*e).toISOString());n.arch=I.arch(),(!0===t||t.memory)&&(n.memory_size=I.totalmem(),n.free_memory=I.freemem());if(!0===t||t.cpu){const t=I.cpus();if(t&&t.length){const e=t[0];n.processor_count=t.length,n.cpu_description=e.model,n.processor_frequency=e.speed}}return n}(e.device));if(e.culture){const n=function(){try{if("string"!=typeof process.versions.icu)return;const t=new Date(9e8);if("enero"===new Intl.DateTimeFormat("es",{month:"long"}).format(t)){const t=Intl.DateTimeFormat().resolvedOptions();return{locale:t.locale,timezone:t.timeZone}}}catch(t){}return}();n&&(t.culture=n)}e.cloudResource&&(t.cloud_resource=process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0);return t}());const r=function(t){Qn([t,"optionalAccess",t=>t.app,"optionalAccess",t=>t.app_memory])&&(t.app.app_memory=process.memoryUsage().rss);if(Qn([t,"optionalAccess",t=>t.app,"optionalAccess",t=>t.free_memory])&&"function"==typeof process.availableMemory){const n=Qn([process,"access",t=>t.availableMemory,"optionalCall",t=>t()]);null!=n&&(t.app.free_memory=n)}Qn([t,"optionalAccess",t=>t.device,"optionalAccess",t=>t.free_memory])&&(t.device.free_memory=I.freemem());return t}(await n);return t.contexts={...t.contexts,app:{...r.app,...Qn([t,"access",t=>t.contexts,"optionalAccess",t=>t.app])},os:{...r.os,...Qn([t,"access",t=>t.contexts,"optionalAccess",t=>t.os])},device:{...r.device,...Qn([t,"access",t=>t.contexts,"optionalAccess",t=>t.device])},culture:{...r.culture,...Qn([t,"access",t=>t.contexts,"optionalAccess",t=>t.culture])},cloud_resource:{...r.cloud_resource,...Qn([t,"access",t=>t.contexts,"optionalAccess",t=>t.cloud_resource])}},t}return{name:"Context",processEvent:t=>r(t)}};const XK={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},UK=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],WK={alpine:t=>t,arch:t=>YK(/distrib_release=(.*)/,t),centos:t=>YK(/release ([^ ]+)/,t),debian:t=>t,fedora:t=>YK(/release (..)/,t),mint:t=>YK(/distrib_release=(.*)/,t),red:t=>YK(/release ([^ ]+)/,t),suse:t=>YK(/VERSION = (.*)\n/,t),ubuntu:t=>YK(/distrib_release=(.*)/,t)};function YK(t,n){const e=t.exec(n);return e?e[1]:void 0}function HK(t){return t.split(" ")[0].toLowerCase()}const DK=new Jn(100),jK=f.promises.readFile,xK=(t={})=>{const n=void 0!==t.frameContextLines?t.frameContextLines:7;return{name:"ContextLines",processEvent:t=>async function(t,n){const e={},r=[];if(n>0&&Qn([t,"access",t=>t.exception,"optionalAccess",t=>t.values]))for(const n of t.exception.values)if(Qn([n,"access",t=>t.stacktrace,"optionalAccess",t=>t.frames]))for(let t=n.stacktrace.frames.length-1;t>=0;t--){const o=n.stacktrace.frames[t];!o.filename||e[o.filename]||DK.get(o.filename)||(r.push(KK(o.filename)),e[o.filename]=1)}r.length>0&&await Promise.all(r);if(n>0&&Qn([t,"access",t=>t.exception,"optionalAccess",t=>t.values]))for(const e of t.exception.values)e.stacktrace&&e.stacktrace.frames&&await kK(e.stacktrace.frames,n);return t}(t,n)}};function kK(t,n){for(const e of t)if(e.filename&&void 0===e.context_line){const t=DK.get(e.filename);if(t)try{Ft(t,e,n)}catch(t){}}}async function KK(t){const n=DK.get(t);if(null===n)return null;if(void 0!==n)return n;let e=null;try{e=(await jK(t,"utf-8")).split("\n")}catch(t){}return DK.set(t,e),e}function BK(t){return void 0!==t&&(0===t.length||"?"===t||"<anonymous>"===t)}function FK(t,n){return t===n||BK(t)&&BK(n)}function JK(t){if(void 0!==t)return t.slice(-10).reduce(((t,n)=>`${t},${n.function},${n.lineno},${n.colno}`),"")}function zK(...t){ut.log("[LocalVariables]",...t)}const QK=(t={})=>{const n=new Jn(20);function e(t){const e=JK(Qn([t,"optionalAccess",t=>t.stacktrace,"optionalAccess",t=>t.frames]));if(void 0===e)return;const r=n.remove(e);if(void 0===r)return;const o=(Qn([t,"access",t=>t.stacktrace,"optionalAccess",t=>t.frames])||[]).filter((t=>"new Promise"!==t.function));for(let t=0;t<o.length;t++){const n=o.length-t-1;if(!o[n]||!r[t])break;void 0!==r[t].vars&&!1!==o[n].in_app&&FK(o[n].function,r[t].function)&&(o[n].vars=r[t].vars)}}return{name:"LocalVariablesAsync",setup(e){if(!e.getOptions().includeLocalVariables)return;const r={...t,debug:ut.isEnabled()};(async function(){const t=await import("inspector");t.url()||t.open(0)})().then((()=>{try{!function(t){const e=new S.Worker(new URL("data:application/javascript;base64,LyohIEBzZW50cnkvbm9kZSA4LjQuMCAoYjE4OGU2MWRhKSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQgKi8KaW1wb3J0e1Nlc3Npb24gYXMgZX1mcm9tIm5vZGU6aW5zcGVjdG9yL3Byb21pc2VzIjtpbXBvcnR7d29ya2VyRGF0YSBhcyBuLHBhcmVudFBvcnQgYXMgdH1mcm9tIm5vZGU6d29ya2VyX3RocmVhZHMiO2ltcG9ydHtwb3NpeCBhcyBvLHNlcCBhcyByfWZyb20ibm9kZTpwYXRoIjtjb25zdCBpPTUwLHM9Ij8iLGM9L1woZXJyb3I6ICguKilcKS8sYT0vY2FwdHVyZU1lc3NhZ2V8Y2FwdHVyZUV4Y2VwdGlvbi87Y29uc3QgdT0vXihcUys6XFx8XC8/KShbXHNcU10qPykoKD86XC57MSwyfXxbXi9cXF0rP3wpKFwuW14uL1xcXSp8KSkoPzpbL1xcXSopJC87ZnVuY3Rpb24gZihlKXtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IG49ZS5sZW5ndGg+MTAyND9gPHRydW5jYXRlZD4ke2Uuc2xpY2UoLTEwMjQpfWA6ZSx0PXUuZXhlYyhuKTtyZXR1cm4gdD90LnNsaWNlKDEpOltdfShlKSx0PW5bMF07bGV0IG89blsxXTtyZXR1cm4gdHx8bz8obyYmKG89by5zbGljZSgwLG8ubGVuZ3RoLTEpKSx0K28pOiIuIn1mdW5jdGlvbiBsKGUsbj0hMSl7cmV0dXJuIShufHxlJiYhZS5zdGFydHNXaXRoKCIvIikmJiFlLm1hdGNoKC9eW0EtWl06LykmJiFlLnN0YXJ0c1dpdGgoIi4iKSYmIWUubWF0Y2goL15bYS16QS1aXShbYS16QS1aMC05LlwtK10pKjpcL1wvLykpJiZ2b2lkIDAhPT1lJiYhZS5pbmNsdWRlcygibm9kZV9tb2R1bGVzLyIpfWZ1bmN0aW9uIGQoZSl7Y29uc3Qgbj0vXlxzKlstXXs0LH0kLyx0PS9hdCAoPzphc3luYyApPyg/OiguKz8pXHMrXCgpPyg/OiguKyk6KFxkKyk6KFxkKyk/fChbXildKykpXCk/LztyZXR1cm4gbz0+e2NvbnN0IHI9by5tYXRjaCh0KTtpZihyKXtsZXQgbix0LG8saSxjO2lmKHJbMV0pe289clsxXTtsZXQgZT1vLmxhc3RJbmRleE9mKCIuIik7aWYoIi4iPT09b1tlLTFdJiZlLS0sZT4wKXtuPW8uc2xpY2UoMCxlKSx0PW8uc2xpY2UoZSsxKTtjb25zdCByPW4uaW5kZXhPZigiLk1vZHVsZSIpO3I+MCYmKG89by5zbGljZShyKzEpLG49bi5zbGljZSgwLHIpKX1pPXZvaWQgMH10JiYoaT1uLGM9dCksIjxhbm9ueW1vdXM+Ij09PXQmJihjPXZvaWQgMCxvPXZvaWQgMCksdm9pZCAwPT09byYmKGM9Y3x8cyxvPWk/YCR7aX0uJHtjfWA6Yyk7bGV0IGE9clsyXSYmclsyXS5zdGFydHNXaXRoKCJmaWxlOi8vIik/clsyXS5zbGljZSg3KTpyWzJdO2NvbnN0IHU9Im5hdGl2ZSI9PT1yWzVdO3JldHVybiBhJiZhLm1hdGNoKC9cL1tBLVpdOi8pJiYoYT1hLnNsaWNlKDEpKSxhfHwhcls1XXx8dXx8KGE9cls1XSkse2ZpbGVuYW1lOmEsbW9kdWxlOmU/ZShhKTp2b2lkIDAsZnVuY3Rpb246byxsaW5lbm86cGFyc2VJbnQoclszXSwxMCl8fHZvaWQgMCxjb2xubzpwYXJzZUludChyWzRdLDEwKXx8dm9pZCAwLGluX2FwcDpsKGEsdSl9fWlmKG8ubWF0Y2gobikpcmV0dXJue2ZpbGVuYW1lOm99fX1mdW5jdGlvbiBwKGUpe3JldHVybiBlLnJlcGxhY2UoL15bQS1aXTovLCIiKS5yZXBsYWNlKC9cXC9nLCIvIil9Y29uc3QgZz1uLG09ZnVuY3Rpb24oLi4uZSl7Y29uc3Qgbj1lLnNvcnQoKChlLG4pPT5lWzBdLW5bMF0pKS5tYXAoKGU9PmVbMV0pKTtyZXR1cm4oZSx0PTAsbz0wKT0+e2NvbnN0IHI9W10sdT1lLnNwbGl0KCJcbiIpO2ZvcihsZXQgZT10O2U8dS5sZW5ndGg7ZSsrKXtjb25zdCB0PXVbZV07aWYodC5sZW5ndGg+MTAyNCljb250aW51ZTtjb25zdCBzPWMudGVzdCh0KT90LnJlcGxhY2UoYywiJDEiKTp0O2lmKCFzLm1hdGNoKC9cUypFcnJvcjogLykpe2Zvcihjb25zdCBlIG9mIG4pe2NvbnN0IG49ZShzKTtpZihuKXtyLnB1c2gobik7YnJlYWt9fWlmKHIubGVuZ3RoPj1pK28pYnJlYWt9fXJldHVybiBmdW5jdGlvbihlKXtpZighZS5sZW5ndGgpcmV0dXJuW107Y29uc3Qgbj1BcnJheS5mcm9tKGUpOy9zZW50cnlXcmFwcGVkLy50ZXN0KG5bbi5sZW5ndGgtMV0uZnVuY3Rpb258fCIiKSYmbi5wb3AoKTtuLnJldmVyc2UoKSxhLnRlc3QobltuLmxlbmd0aC0xXS5mdW5jdGlvbnx8IiIpJiYobi5wb3AoKSxhLnRlc3QobltuLmxlbmd0aC0xXS5mdW5jdGlvbnx8IiIpJiZuLnBvcCgpKTtyZXR1cm4gbi5zbGljZSgwLGkpLm1hcCgoZT0+KHsuLi5lLGZpbGVuYW1lOmUuZmlsZW5hbWV8fG5bbi5sZW5ndGgtMV0uZmlsZW5hbWUsZnVuY3Rpb246ZS5mdW5jdGlvbnx8c30pKSl9KHIuc2xpY2UobykpfX0oWzkwLGQoZnVuY3Rpb24oZT0ocHJvY2Vzcy5hcmd2WzFdP2YocHJvY2Vzcy5hcmd2WzFdKTpwcm9jZXNzLmN3ZCgpKSxuPSJcXCI9PT1yKXtjb25zdCB0PW4/cChlKTplO3JldHVybiBlPT57aWYoIWUpcmV0dXJuO2NvbnN0IHI9bj9wKGUpOmU7bGV0e2RpcjppLGJhc2U6cyxleHQ6Y309by5wYXJzZShyKTsiLmpzIiE9PWMmJiIubWpzIiE9PWMmJiIuY2pzIiE9PWN8fChzPXMuc2xpY2UoMCwtMSpjLmxlbmd0aCkpLGl8fChpPSIuIik7Y29uc3QgYT1pLmxhc3RJbmRleE9mKCIvbm9kZV9tb2R1bGVzIik7aWYoYT4tMSlyZXR1cm5gJHtpLnNsaWNlKGErMTQpLnJlcGxhY2UoL1wvL2csIi4iKX06JHtzfWA7aWYoaS5zdGFydHNXaXRoKHQpKXtsZXQgZT1pLnNsaWNlKHQubGVuZ3RoKzEpLnJlcGxhY2UoL1wvL2csIi4iKTtyZXR1cm4gZSYmKGUrPSI6IiksZSs9cyxlfXJldHVybiBzfX0oZy5iYXNlUGF0aCkpXSk7ZnVuY3Rpb24gYiguLi5lKXtnLmRlYnVnJiZjb25zb2xlLmxvZygiW0xvY2FsVmFyaWFibGVzIFdvcmtlcl0iLC4uLmUpfWFzeW5jIGZ1bmN0aW9uIHYoZSxuLHQsbyl7Y29uc3Qgcj1hd2FpdCBlLnBvc3QoIlJ1bnRpbWUuZ2V0UHJvcGVydGllcyIse29iamVjdElkOm4sb3duUHJvcGVydGllczohMH0pO29bdF09ci5yZXN1bHQuZmlsdGVyKChlPT4ibGVuZ3RoIiE9PWUubmFtZSYmIWlzTmFOKHBhcnNlSW50KGUubmFtZSwxMCkpKSkuc29ydCgoKGUsbik9PnBhcnNlSW50KGUubmFtZSwxMCktcGFyc2VJbnQobi5uYW1lLDEwKSkpLm1hcCgoZT0+ZS52YWx1ZT8udmFsdWUpKX1hc3luYyBmdW5jdGlvbiAkKGUsbix0LG8pe2NvbnN0IHI9YXdhaXQgZS5wb3N0KCJSdW50aW1lLmdldFByb3BlcnRpZXMiLHtvYmplY3RJZDpuLG93blByb3BlcnRpZXM6ITB9KTtvW3RdPXIucmVzdWx0Lm1hcCgoZT0+W2UubmFtZSxlLnZhbHVlPy52YWx1ZV0pKS5yZWR1Y2UoKChlLFtuLHRdKT0+KGVbbl09dCxlKSkse30pfWZ1bmN0aW9uIHcoZSxuKXtlLnZhbHVlJiYoInZhbHVlImluIGUudmFsdWU/dm9pZCAwPT09ZS52YWx1ZS52YWx1ZXx8bnVsbD09PWUudmFsdWUudmFsdWU/bltlLm5hbWVdPWA8JHtlLnZhbHVlLnZhbHVlfT5gOm5bZS5uYW1lXT1lLnZhbHVlLnZhbHVlOiJkZXNjcmlwdGlvbiJpbiBlLnZhbHVlJiYiZnVuY3Rpb24iIT09ZS52YWx1ZS50eXBlP25bZS5uYW1lXT1gPCR7ZS52YWx1ZS5kZXNjcmlwdGlvbn0+YDoidW5kZWZpbmVkIj09PWUudmFsdWUudHlwZSYmKG5bZS5uYW1lXT0iPHVuZGVmaW5lZD4iKSl9YXN5bmMgZnVuY3Rpb24geShlLG4pe2NvbnN0IHQ9YXdhaXQgZS5wb3N0KCJSdW50aW1lLmdldFByb3BlcnRpZXMiLHtvYmplY3RJZDpuLG93blByb3BlcnRpZXM6ITB9KSxvPXt9O2Zvcihjb25zdCBuIG9mIHQucmVzdWx0KWlmKG4/LnZhbHVlPy5vYmplY3RJZCYmIkFycmF5Ij09PW4/LnZhbHVlLmNsYXNzTmFtZSl7Y29uc3QgdD1uLnZhbHVlLm9iamVjdElkO2F3YWl0IHYoZSx0LG4ubmFtZSxvKX1lbHNlIGlmKG4/LnZhbHVlPy5vYmplY3RJZCYmIk9iamVjdCI9PT1uPy52YWx1ZT8uY2xhc3NOYW1lKXtjb25zdCB0PW4udmFsdWUub2JqZWN0SWQ7YXdhaXQgJChlLHQsbi5uYW1lLG8pfWVsc2Ugbj8udmFsdWUmJncobixvKTtyZXR1cm4gb31sZXQgaDsoYXN5bmMgZnVuY3Rpb24oKXtjb25zdCBuPW5ldyBlO24uY29ubmVjdFRvTWFpblRocmVhZCgpLGIoIkNvbm5lY3RlZCB0byBtYWluIHRocmVhZCIpO2xldCBvPSExO24ub24oIkRlYnVnZ2VyLnJlc3VtZWQiLCgoKT0+e289ITF9KSksbi5vbigiRGVidWdnZXIucGF1c2VkIiwoZT0+e289ITAsYXN5bmMgZnVuY3Rpb24oZSxuLHtyZWFzb246byxkYXRhOnIsY2FsbEZyYW1lczppfSl7aWYoImV4Y2VwdGlvbiIhPT1vJiYicHJvbWlzZVJlamVjdGlvbiIhPT1vKXJldHVybjtoPy4oKTtjb25zdCBzPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09bilyZXR1cm4gZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSlyZXR1cm4gZS5zbGljZSgtMTApLnJlZHVjZSgoKGUsbik9PmAke2V9LCR7bi5mdW5jdGlvbn0sJHtuLmxpbmVub30sJHtuLmNvbG5vfWApLCIiKX0oZShuLDEpKX0obixyPy5kZXNjcmlwdGlvbik7aWYobnVsbD09cylyZXR1cm47Y29uc3QgYz1bXTtmb3IobGV0IG49MDtuPGkubGVuZ3RoO24rKyl7Y29uc3R7c2NvcGVDaGFpbjp0LGZ1bmN0aW9uTmFtZTpvLHRoaXM6cn09aVtuXSxzPXQuZmluZCgoZT0+ImxvY2FsIj09PWUudHlwZSkpLGE9Imdsb2JhbCIhPT1yLmNsYXNzTmFtZSYmci5jbGFzc05hbWU/YCR7ci5jbGFzc05hbWV9LiR7b31gOm87aWYodm9pZCAwPT09cz8ub2JqZWN0Lm9iamVjdElkKWNbbl09e2Z1bmN0aW9uOmF9O2Vsc2V7Y29uc3QgdD1hd2FpdCB5KGUscy5vYmplY3Qub2JqZWN0SWQpO2Nbbl09e2Z1bmN0aW9uOmEsdmFyczp0fX19dD8ucG9zdE1lc3NhZ2Uoe2V4Y2VwdGlvbkhhc2g6cyxmcmFtZXM6Y30pfShuLG0sZS5wYXJhbXMpLnRoZW4oKCgpPT5vP24ucG9zdCgiRGVidWdnZXIucmVzdW1lIik6UHJvbWlzZS5yZXNvbHZlKCkpLChlPT57fSkpfSkpLGF3YWl0IG4ucG9zdCgiRGVidWdnZXIuZW5hYmxlIik7Y29uc3Qgcj0hMSE9PWcuY2FwdHVyZUFsbEV4Y2VwdGlvbnM7aWYoYXdhaXQgbi5wb3N0KCJEZWJ1Z2dlci5zZXRQYXVzZU9uRXhjZXB0aW9ucyIse3N0YXRlOnI/ImFsbCI6InVuY2F1Z2h0In0pLHIpe2NvbnN0IGU9Zy5tYXhFeGNlcHRpb25zUGVyU2Vjb25kfHw1MDtoPWZ1bmN0aW9uKGUsbix0KXtsZXQgbz0wLHI9NSxpPTA7cmV0dXJuIHNldEludGVydmFsKCgoKT0+ezA9PT1pP28+ZSYmKHIqPTIsdChyKSxyPjg2NDAwJiYocj04NjQwMCksaT1yKTooaS09MSwwPT09aSYmbigpKSxvPTB9KSwxZTMpLnVucmVmKCksKCk9PntvKz0xfX0oZSwoYXN5bmMoKT0+e2IoIlJhdGUtbGltaXQgbGlmdGVkLiIpLGF3YWl0IG4ucG9zdCgiRGVidWdnZXIuc2V0UGF1c2VPbkV4Y2VwdGlvbnMiLHtzdGF0ZToiYWxsIn0pfSksKGFzeW5jIGU9PntiKGBSYXRlLWxpbWl0IGV4Y2VlZGVkLiBEaXNhYmxpbmcgY2FwdHVyaW5nIG9mIGNhdWdodCBleGNlcHRpb25zIGZvciAke2V9IHNlY29uZHMuYCksYXdhaXQgbi5wb3N0KCJEZWJ1Z2dlci5zZXRQYXVzZU9uRXhjZXB0aW9ucyIse3N0YXRlOiJ1bmNhdWdodCJ9KX0pKX19KSgpLmNhdGNoKChlPT57YigiRmFpbGVkIHRvIHN0YXJ0IGRlYnVnZ2VyIixlKX0pKSxzZXRJbnRlcnZhbCgoKCk9Pnt9KSwxZTQpOw=="),{workerData:t,execArgv:[]});process.on("exit",(()=>{e.terminate()})),e.on("message",(({exceptionHash:t,frames:e})=>{n.set(t,e)})),e.once("error",(t=>{zK("Worker error",t)})),e.once("exit",(t=>{zK("Worker exit",t)})),e.unref()}(r)}catch(t){ut.error("Failed to start worker",t)}}),(t=>{ut.error("Failed to start inspector",t)}))},processEvent:t=>function(t){for(const n of Qn([t,"access",t=>t.exception,"optionalAccess",t=>t.values])||[])e(n);return t}(t)}};function $K(t){let n=[],e=!1;function r(r){n=[],e||(e=!0,t(r))}return n.push(r),{add:function(t){n.push(t)},next:function(t){const e=n.pop()||r;try{e(t)}catch(n){r(t)}}}}class qK{constructor(){this.$n=new E.Session}configureAndConnect(t,n){this.$n.connect(),this.$n.on("Debugger.paused",(n=>{t(n,(()=>{this.$n.post("Debugger.resume")}))})),this.$n.post("Debugger.enable"),this.$n.post("Debugger.setPauseOnExceptions",{state:n?"all":"uncaught"})}setPauseOnExceptions(t){this.$n.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}getLocalVariables(t,n){this.ao(t,(t=>{const{add:e,next:r}=$K(n);for(const n of t)if(Qn([n,"optionalAccess",t=>t.value,"optionalAccess",t=>t.objectId])&&"Array"===Qn([n,"optionalAccess",t=>t.value,"access",t=>t.className])){const t=n.value.objectId;e((e=>this.lo(t,n.name,e,r)))}else if(Qn([n,"optionalAccess",t=>t.value,"optionalAccess",t=>t.objectId])&&"Object"===Qn([n,"optionalAccess",t=>t.value,"optionalAccess",t=>t.className])){const t=n.value.objectId;e((e=>this.fo(t,n.name,e,r)))}else Qn([n,"optionalAccess",t=>t.value])&&e((t=>this.do(n,t,r)));r({})}))}ao(t,n){this.$n.post("Runtime.getProperties",{objectId:t,ownProperties:!0},((t,e)=>{n(t?[]:e.result)}))}lo(t,n,e,r){this.ao(t,(t=>{e[n]=t.filter((t=>"length"!==t.name&&!isNaN(parseInt(t.name,10)))).sort(((t,n)=>parseInt(t.name,10)-parseInt(n.name,10))).map((t=>Qn([t,"optionalAccess",t=>t.value,"optionalAccess",t=>t.value]))),r(e)}))}fo(t,n,e,r){this.ao(t,(t=>{e[n]=t.map((t=>[t.name,Qn([t,"optionalAccess",t=>t.value,"optionalAccess",t=>t.value])])).reduce(((t,[n,e])=>(t[n]=e,t)),{}),r(e)}))}do(t,n,e){t.value&&("value"in t.value?void 0===t.value.value||null===t.value.value?n[t.name]=`<${t.value.value}>`:n[t.name]=t.value.value:"description"in t.value&&"function"!==t.value.type?n[t.name]=`<${t.value.description}>`:"undefined"===t.value.type&&(n[t.name]="<undefined>")),e(n)}}const tB=(t={},n=function(){try{return new qK}catch(t){return}}())=>{const e=new Jn(20);let r,o=!1;function i(t,{params:{reason:o,data:i,callFrames:s}},c){if("exception"!==o&&"promiseRejection"!==o)return void c();Qn([r,"optionalCall",t=>t()]);const u=function(t,n){if(void 0!==n)return JK(t(n,1))}(t,Qn([i,"optionalAccess",t=>t.description]));if(null==u)return void c();const{add:a,next:l}=$K((t=>{e.set(u,t),c()}));for(let t=0;t<Math.min(s.length,5);t++){const{scopeChain:e,functionName:r,this:o}=s[t],i=e.find((t=>"local"===t.type)),c="global"!==o.className&&o.className?`${o.className}.${r}`:r;if(void 0===Qn([i,"optionalAccess",t=>t.object,"access",t=>t.objectId]))a((n=>{n[t]={function:c},l(n)}));else{const e=i.object.objectId;a((r=>Qn([n,"optionalAccess",t=>t.getLocalVariables,"call",n=>n(e,(n=>{r[t]={function:c,vars:n},l(r)}))])))}}l([])}function s(t){const n=JK(Qn([t,"optionalAccess",t=>t.stacktrace,"optionalAccess",t=>t.frames]));if(void 0===n)return;const r=e.remove(n);if(void 0===r)return;const o=(Qn([t,"access",t=>t.stacktrace,"optionalAccess",t=>t.frames])||[]).filter((t=>"new Promise"!==t.function));for(let t=0;t<o.length;t++){const n=o.length-t-1;if(!o[n]||!r[t])break;void 0!==r[t].vars&&!1!==o[n].in_app&&FK(o[n].function,r[t].function)&&(o[n].vars=r[t].vars)}}return{name:"LocalVariables",setupOnce(){const e=Qn([DU(),"optionalAccess",t=>t.getOptions,"call",t=>t()]);if(n&&Qn([e,"optionalAccess",t=>t.includeLocalVariables])){if(wK<18)return void ut.log("The `LocalVariables` integration is only supported on Node >= v18.");const s=!1!==t.captureAllExceptions;if(n.configureAndConnect(((t,n)=>i(e.stackParser,t,n)),s),s){const e=t.maxExceptionsPerSecond||50;r=function(t,n,e){let r=0,o=5,i=0;return setInterval((()=>{0===i?r>t&&(o*=2,e(o),o>86400&&(o=86400),i=o):(i-=1,0===i&&n()),r=0}),1e3).unref(),()=>{r+=1}}(e,(()=>{ut.log("Local variables rate-limit lifted."),Qn([n,"optionalAccess",t=>t.setPauseOnExceptions,"call",t=>t(!0)])}),(t=>{ut.log(`Local variables rate-limit exceeded. Disabling capturing of caught exceptions for ${t} seconds.`),Qn([n,"optionalAccess",t=>t.setPauseOnExceptions,"call",t=>t(!1)])}))}o=!0}},processEvent:t=>o?function(t){for(const n of Qn([t,"optionalAccess",t=>t.exception,"optionalAccess",t=>t.values])||[])s(n);return t}(t):t,ho:()=>e.size,po:()=>e.values()[0]}},nB=(t={})=>IK.major<19?tB(t):QK(t);let eB;const rB=()=>({name:"Modules",processEvent:t=>(t.modules={...t.modules,...iB()},t)});function oB(){const t=require.main&&require.main.paths||[],n=function(){try{return require.cache?Object.keys(require.cache):[]}catch(t){return[]}}(),e={},r={};return n.forEach((n=>{let o=n;const i=()=>{const n=o;if(o=h.dirname(n),!o||n===o||r[n])return;if(t.indexOf(o)<0)return i();const s=h.join(n,"package.json");if(r[n]=!0,!f.existsSync(s))return i();try{const t=JSON.parse(f.readFileSync(s,"utf8"));e[t.name]=t.version}catch(t){}};i()})),e}function iB(){return eB||(eB=oB()),eB}const sB=2e3;function cB(t){ct((()=>{console.error(t)}));const n=DU();if(void 0===n)return void global.process.exit(1);const e=n.getOptions(),r=e&&e.shutdownTimeout&&e.shutdownTimeout>0&&e.shutdownTimeout||sB;n.close(r).then((t=>{global.process.exit(1)}),(t=>{}))}const uB=(t={})=>{const n={exitEvenIfOtherHandlersAreRegistered:!1,...t};return{name:"OnUncaughtException",setup(t){global.process.on("uncaughtException",function(t,n){const e=2e3;let r,o=!1,i=!1,s=!1;const c=t.getOptions();return Object.assign((u=>{let a=cB;n.onFatalError?a=n.onFatalError:c.onFatalError&&(a=c.onFatalError);const l=0===global.process.listeners("uncaughtException").filter((t=>"domainUncaughtExceptionClear"!==t.name&&"sentry_tracingErrorCallback"!==t.tag&&!0!==t.So)).length,f=n.exitEvenIfOtherHandlersAreRegistered||l;o?f&&(s?cB(u):i||(i=!0,setTimeout((()=>{s||(s=!0,a(r,u))}),e))):(r=u,o=!0,DU()===t&&captureException(u,{originalException:u,captureContext:{level:"fatal"},mechanism:{handled:!1,type:"onuncaughtexception"}}),!s&&f&&(s=!0,a(u)))}),{So:!0})}(t,n))}}};const aB=(t={})=>{const n=t.mode||"warn";return{name:"OnUnhandledRejection",setup(t){global.process.on("unhandledRejection",function(t,n){return function(e,r){DU()===t&&(captureException(e,{originalException:r,captureContext:{extra:{unhandledPromiseRejection:!0}},mechanism:{handled:!1,type:"onunhandledrejection"}}),function(t,n){const e="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===n.mode?ct((()=>{console.warn(e),console.error(t&&t.stack?t.stack:t)})):"strict"===n.mode&&(ct((()=>{console.warn(e)})),cB(t))}(e,n))}}(t,{mode:n}))}}};const lB="LyohIEBzZW50cnkvbm9kZSA4LjQuMCAoYjE4OGU2MWRhKSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9nZXRzZW50cnkvc2VudHJ5LWphdmFzY3JpcHQgKi8KaW1wb3J0e3BhcmVudFBvcnQgYXMgdCx3b3JrZXJEYXRhIGFzIGV9ZnJvbSJub2RlOndvcmtlcl90aHJlYWRzIjtpbXBvcnR7U2Vzc2lvbiBhcyBufWZyb20iaW5zcGVjdG9yIjtpbXBvcnR7cG9zaXggYXMgcixzZXAgYXMgb31mcm9tIm5vZGU6cGF0aCI7aW1wb3J0KmFzIHMgZnJvbSJub2RlOmh0dHAiO2ltcG9ydCphcyBpIGZyb20ibm9kZTpodHRwcyI7aW1wb3J0e1JlYWRhYmxlIGFzIGN9ZnJvbSJub2RlOnN0cmVhbSI7aW1wb3J0e2NyZWF0ZUd6aXAgYXMgdX1mcm9tIm5vZGU6emxpYiI7aW1wb3J0KmFzIGEgZnJvbSJub2RlOm5ldCI7aW1wb3J0KmFzIGYgZnJvbSJub2RlOnRscyI7Y29uc3QgaD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIHAodCxlKXtyZXR1cm4gaC5jYWxsKHQpPT09YFtvYmplY3QgJHtlfV1gfWZ1bmN0aW9uIGwodCl7cmV0dXJuIHAodCwiT2JqZWN0Iil9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gQm9vbGVhbih0JiZ0LnRoZW4mJiJmdW5jdGlvbiI9PXR5cGVvZiB0LnRoZW4pfWZ1bmN0aW9uIG0odCxlKXt0cnl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfWNhdGNoKHQpe3JldHVybiExfX1jb25zdCBnPWdsb2JhbFRoaXM7ZnVuY3Rpb24geSh0LGUsbil7Y29uc3Qgcj1ufHxnLG89ci5fX1NFTlRSWV9fPXIuX19TRU5UUllfX3x8e307cmV0dXJuIG9bdF18fChvW3RdPWUoKSl9Y29uc3QgYj1nLHY9ODA7ZnVuY3Rpb24gXyh0LGUpe2NvbnN0IG49dCxyPVtdO2xldCBvLHMsaSxjLHU7aWYoIW58fCFuLnRhZ05hbWUpcmV0dXJuIiI7aWYoYi5IVE1MRWxlbWVudCYmbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZuLmRhdGFzZXQpe2lmKG4uZGF0YXNldC5zZW50cnlDb21wb25lbnQpcmV0dXJuIG4uZGF0YXNldC5zZW50cnlDb21wb25lbnQ7aWYobi5kYXRhc2V0LnNlbnRyeUVsZW1lbnQpcmV0dXJuIG4uZGF0YXNldC5zZW50cnlFbGVtZW50fXIucHVzaChuLnRhZ05hbWUudG9Mb3dlckNhc2UoKSk7Y29uc3QgYT1lJiZlLmxlbmd0aD9lLmZpbHRlcigodD0+bi5nZXRBdHRyaWJ1dGUodCkpKS5tYXAoKHQ9Plt0LG4uZ2V0QXR0cmlidXRlKHQpXSkpOm51bGw7aWYoYSYmYS5sZW5ndGgpYS5mb3JFYWNoKCh0PT57ci5wdXNoKGBbJHt0WzBdfT0iJHt0WzFdfSJdYCl9KSk7ZWxzZSBpZihuLmlkJiZyLnB1c2goYCMke24uaWR9YCksbz1uLmNsYXNzTmFtZSxvJiZwKG8sIlN0cmluZyIpKWZvcihzPW8uc3BsaXQoL1xzKy8pLHU9MDt1PHMubGVuZ3RoO3UrKylyLnB1c2goYC4ke3NbdV19YCk7Y29uc3QgZj1bImFyaWEtbGFiZWwiLCJ0eXBlIiwibmFtZSIsInRpdGxlIiwiYWx0Il07Zm9yKHU9MDt1PGYubGVuZ3RoO3UrKylpPWZbdV0sYz1uLmdldEF0dHJpYnV0ZShpKSxjJiZyLnB1c2goYFske2l9PSIke2N9Il1gKTtyZXR1cm4gci5qb2luKCIiKX1jb25zdCB3PSJ1bmRlZmluZWQiPT10eXBlb2YgX19TRU5UUllfREVCVUdfX3x8X19TRU5UUllfREVCVUdfXyxTPVsiZGVidWciLCJpbmZvIiwid2FybiIsImVycm9yIiwibG9nIiwiYXNzZXJ0IiwidHJhY2UiXSwkPXt9O2Z1bmN0aW9uIEUodCl7aWYoISgiY29uc29sZSJpbiBnKSlyZXR1cm4gdCgpO2NvbnN0IGU9Zy5jb25zb2xlLG49e30scj1PYmplY3Qua2V5cygkKTtyLmZvckVhY2goKHQ9Pntjb25zdCByPSRbdF07blt0XT1lW3RdLGVbdF09cn0pKTt0cnl7cmV0dXJuIHQoKX1maW5hbGx5e3IuZm9yRWFjaCgodD0+e2VbdF09blt0XX0pKX19Y29uc3QgeD1mdW5jdGlvbigpe2xldCB0PSExO2NvbnN0IGU9e2VuYWJsZTooKT0+e3Q9ITB9LGRpc2FibGU6KCk9Pnt0PSExfSxpc0VuYWJsZWQ6KCk9PnR9O3JldHVybiB3P1MuZm9yRWFjaCgobj0+e2Vbbl09KC4uLmUpPT57dCYmRSgoKCk9PntnLmNvbnNvbGVbbl0oYFNlbnRyeSBMb2dnZXIgWyR7bn1dOmAsLi4uZSl9KSl9fSkpOlMuZm9yRWFjaCgodD0+e2VbdF09KCk9Pnt9fSkpLGV9KCk7ZnVuY3Rpb24gTih0LGU9ITEpe2NvbnN0e2hvc3Q6bixwYXRoOnIscGFzczpvLHBvcnQ6cyxwcm9qZWN0SWQ6aSxwcm90b2NvbDpjLHB1YmxpY0tleTp1fT10O3JldHVybmAke2N9Oi8vJHt1fSR7ZSYmbz9gOiR7b31gOiIifUAke259JHtzP2A6JHtzfWA6IiJ9LyR7cj9gJHtyfS9gOnJ9JHtpfWB9Y2xhc3MgayBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsZT0id2FybiIpe3N1cGVyKHQpLHRoaXMubWVzc2FnZT10LHRoaXMubmFtZT1uZXcudGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLG5ldy50YXJnZXQucHJvdG90eXBlKSx0aGlzLmxvZ0xldmVsPWV9fWZ1bmN0aW9uIEModCl7aWYoZnVuY3Rpb24odCl7c3dpdGNoKGguY2FsbCh0KSl7Y2FzZSJbb2JqZWN0IEVycm9yXSI6Y2FzZSJbb2JqZWN0IEV4Y2VwdGlvbl0iOmNhc2UiW29iamVjdCBET01FeGNlcHRpb25dIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiBtKHQsRXJyb3IpfX0odCkpcmV0dXJue21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2ssLi4uVCh0KX07aWYoZT10LCJ1bmRlZmluZWQiIT10eXBlb2YgRXZlbnQmJm0oZSxFdmVudCkpe2NvbnN0IGU9e3R5cGU6dC50eXBlLHRhcmdldDpEKHQudGFyZ2V0KSxjdXJyZW50VGFyZ2V0OkQodC5jdXJyZW50VGFyZ2V0KSwuLi5UKHQpfTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEN1c3RvbUV2ZW50JiZtKHQsQ3VzdG9tRXZlbnQpJiYoZS5kZXRhaWw9dC5kZXRhaWwpLGV9cmV0dXJuIHQ7dmFyIGV9ZnVuY3Rpb24gRCh0KXt0cnl7cmV0dXJuIGU9dCwidW5kZWZpbmVkIiE9dHlwZW9mIEVsZW1lbnQmJm0oZSxFbGVtZW50KT9mdW5jdGlvbih0LGU9e30pe2lmKCF0KXJldHVybiI8dW5rbm93bj4iO3RyeXtsZXQgbj10O2NvbnN0IHI9NSxvPVtdO2xldCBzPTAsaT0wO2NvbnN0IGM9IiA+ICIsdT1jLmxlbmd0aDtsZXQgYTtjb25zdCBmPUFycmF5LmlzQXJyYXkoZSk/ZTplLmtleUF0dHJzLGg9IUFycmF5LmlzQXJyYXkoZSkmJmUubWF4U3RyaW5nTGVuZ3RofHx2O2Zvcig7biYmcysrPHImJihhPV8obixmKSwhKCJodG1sIj09PWF8fHM+MSYmaStvLmxlbmd0aCp1K2EubGVuZ3RoPj1oKSk7KW8ucHVzaChhKSxpKz1hLmxlbmd0aCxuPW4ucGFyZW50Tm9kZTtyZXR1cm4gby5yZXZlcnNlKCkuam9pbihjKX1jYXRjaCh0KXtyZXR1cm4iPHVua25vd24+In19KHQpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1jYXRjaCh0KXtyZXR1cm4iPHVua25vd24+In12YXIgZX1mdW5jdGlvbiBUKHQpe2lmKCJvYmplY3QiPT10eXBlb2YgdCYmbnVsbCE9PXQpe2NvbnN0IGU9e307Zm9yKGNvbnN0IG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9cmV0dXJue319ZnVuY3Rpb24gTyh0KXtyZXR1cm4gaih0LG5ldyBNYXApfWZ1bmN0aW9uIGoodCxlKXtpZihmdW5jdGlvbih0KXtpZighbCh0KSlyZXR1cm4hMTt0cnl7Y29uc3QgZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IubmFtZTtyZXR1cm4hZXx8Ik9iamVjdCI9PT1lfWNhdGNoKHQpe3JldHVybiEwfX0odCkpe2NvbnN0IG49ZS5nZXQodCk7aWYodm9pZCAwIT09bilyZXR1cm4gbjtjb25zdCByPXt9O2Uuc2V0KHQscik7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LmtleXModCkpdm9pZCAwIT09dFtuXSYmKHJbbl09aih0W25dLGUpKTtyZXR1cm4gcn1pZihBcnJheS5pc0FycmF5KHQpKXtjb25zdCBuPWUuZ2V0KHQpO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG47Y29uc3Qgcj1bXTtyZXR1cm4gZS5zZXQodCxyKSx0LmZvckVhY2goKHQ9PntyLnB1c2goaih0LGUpKX0pKSxyfXJldHVybiB0fWNvbnN0IFI9NTAsQT0iPyIsST0vY2FwdHVyZU1lc3NhZ2V8Y2FwdHVyZUV4Y2VwdGlvbi87Y29uc3QgUD0iPGFub255bW91cz4iO2NvbnN0IFU9MWUzO2Z1bmN0aW9uIE0oKXtyZXR1cm4gRGF0ZS5ub3coKS9VfWNvbnN0IEw9ZnVuY3Rpb24oKXtjb25zdHtwZXJmb3JtYW5jZTp0fT1nO2lmKCF0fHwhdC5ub3cpcmV0dXJuIE07Y29uc3QgZT1EYXRlLm5vdygpLXQubm93KCksbj1udWxsPT10LnRpbWVPcmlnaW4/ZTp0LnRpbWVPcmlnaW47cmV0dXJuKCk9PihuK3Qubm93KCkpL1V9KCk7ZnVuY3Rpb24gQigpe2NvbnN0IHQ9ZyxlPXQuY3J5cHRvfHx0Lm1zQ3J5cHRvO2xldCBuPSgpPT4xNipNYXRoLnJhbmRvbSgpO3RyeXtpZihlJiZlLnJhbmRvbVVVSUQpcmV0dXJuIGUucmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywiIik7ZSYmZS5nZXRSYW5kb21WYWx1ZXMmJihuPSgpPT57Y29uc3QgdD1uZXcgVWludDhBcnJheSgxKTtyZXR1cm4gZS5nZXRSYW5kb21WYWx1ZXModCksdFswXX0pfWNhdGNoKHQpe31yZXR1cm4oWzFlN10rMWUzKzRlMys4ZTMrMWUxMSkucmVwbGFjZSgvWzAxOF0vZywodD0+KHReKDE1Jm4oKSk+PnQvNCkudG9TdHJpbmcoMTYpKSl9ZnVuY3Rpb24gRyh0LGU9MTAwLG49MS8wKXt0cnl7cmV0dXJuIEooIiIsdCxlLG4pfWNhdGNoKHQpe3JldHVybntFUlJPUjpgKipub24tc2VyaWFsaXphYmxlKiogKCR7dH0pYH19fWZ1bmN0aW9uIEoodCxlLG49MS8wLHI9MS8wLG89ZnVuY3Rpb24oKXtjb25zdCB0PSJmdW5jdGlvbiI9PXR5cGVvZiBXZWFrU2V0LGU9dD9uZXcgV2Vha1NldDpbXTtyZXR1cm5bZnVuY3Rpb24obil7aWYodClyZXR1cm4hIWUuaGFzKG4pfHwoZS5hZGQobiksITEpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKWlmKGVbdF09PT1uKXJldHVybiEwO3JldHVybiBlLnB1c2gobiksITF9LGZ1bmN0aW9uKG4pe2lmKHQpZS5kZWxldGUobik7ZWxzZSBmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKylpZihlW3RdPT09bil7ZS5zcGxpY2UodCwxKTticmVha319XX0oKSl7Y29uc3RbcyxpXT1vO2lmKG51bGw9PWV8fFsibnVtYmVyIiwiYm9vbGVhbiIsInN0cmluZyJdLmluY2x1ZGVzKHR5cGVvZiBlKSYmIU51bWJlci5pc05hTihlKSlyZXR1cm4gZTtjb25zdCBjPWZ1bmN0aW9uKHQsZSl7dHJ5e2lmKCJkb21haW4iPT09dCYmZSYmIm9iamVjdCI9PXR5cGVvZiBlJiZlLnQpcmV0dXJuIltEb21haW5dIjtpZigiZG9tYWluRW1pdHRlciI9PT10KXJldHVybiJbRG9tYWluRW1pdHRlcl0iO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZlPT09Z2xvYmFsKXJldHVybiJbR2xvYmFsXSI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJmU9PT13aW5kb3cpcmV0dXJuIltXaW5kb3ddIjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50JiZlPT09ZG9jdW1lbnQpcmV0dXJuIltEb2N1bWVudF0iO2lmKCJvYmplY3QiPT10eXBlb2Yobj1lKSYmbnVsbCE9PW4mJihuLl9faXNWdWV8fG4ubykpcmV0dXJuIltWdWVWaWV3TW9kZWxdIjtpZihmdW5jdGlvbih0KXtyZXR1cm4gbCh0KSYmIm5hdGl2ZUV2ZW50ImluIHQmJiJwcmV2ZW50RGVmYXVsdCJpbiB0JiYic3RvcFByb3BhZ2F0aW9uImluIHR9KGUpKXJldHVybiJbU3ludGhldGljRXZlbnRdIjtpZigibnVtYmVyIj09dHlwZW9mIGUmJmUhPWUpcmV0dXJuIltOYU5dIjtpZigiZnVuY3Rpb24iPT10eXBlb2YgZSlyZXR1cm5gW0Z1bmN0aW9uOiAke2Z1bmN0aW9uKHQpe3RyeXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQubmFtZXx8UH1jYXRjaCh0KXtyZXR1cm4gUH19KGUpfV1gO2lmKCJzeW1ib2wiPT10eXBlb2YgZSlyZXR1cm5gWyR7U3RyaW5nKGUpfV1gO2lmKCJiaWdpbnQiPT10eXBlb2YgZSlyZXR1cm5gW0JpZ0ludDogJHtTdHJpbmcoZSl9XWA7Y29uc3Qgcj1mdW5jdGlvbih0KXtjb25zdCBlPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4gZT9lLmNvbnN0cnVjdG9yLm5hbWU6Im51bGwgcHJvdG90eXBlIn0oZSk7cmV0dXJuL15IVE1MKFx3KilFbGVtZW50JC8udGVzdChyKT9gW0hUTUxFbGVtZW50OiAke3J9XWA6YFtvYmplY3QgJHtyfV1gfWNhdGNoKHQpe3JldHVybmAqKm5vbi1zZXJpYWxpemFibGUqKiAoJHt0fSlgfXZhciBufSh0LGUpO2lmKCFjLnN0YXJ0c1dpdGgoIltvYmplY3QgIikpcmV0dXJuIGM7aWYoZS5fX3NlbnRyeV9za2lwX25vcm1hbGl6YXRpb25fXylyZXR1cm4gZTtjb25zdCB1PSJudW1iZXIiPT10eXBlb2YgZS5fX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX18/ZS5fX3NlbnRyeV9vdmVycmlkZV9ub3JtYWxpemF0aW9uX2RlcHRoX186bjtpZigwPT09dSlyZXR1cm4gYy5yZXBsYWNlKCJvYmplY3QgIiwiIik7aWYocyhlKSlyZXR1cm4iW0NpcmN1bGFyIH5dIjtjb25zdCBhPWU7aWYoYSYmImZ1bmN0aW9uIj09dHlwZW9mIGEudG9KU09OKXRyeXtyZXR1cm4gSigiIixhLnRvSlNPTigpLHUtMSxyLG8pfWNhdGNoKHQpe31jb25zdCBmPUFycmF5LmlzQXJyYXkoZSk/W106e307bGV0IGg9MDtjb25zdCBwPUMoZSk7Zm9yKGNvbnN0IHQgaW4gcCl7aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwLHQpKWNvbnRpbnVlO2lmKGg+PXIpe2ZbdF09IltNYXhQcm9wZXJ0aWVzIH5dIjticmVha31jb25zdCBlPXBbdF07Zlt0XT1KKHQsZSx1LTEscixvKSxoKyt9cmV0dXJuIGkoZSksZn1mdW5jdGlvbiB6KHQsZSl7Y29uc3Qgbj1lLnJlcGxhY2UoL1xcL2csIi8iKS5yZXBsYWNlKC9bfFxce30oKVtcXV4kKyo/Ll0vZywiXFwkJiIpO2xldCByPXQ7dHJ5e3I9ZGVjb2RlVVJJKHQpfWNhdGNoKHQpe31yZXR1cm4gci5yZXBsYWNlKC9cXC9nLCIvIikucmVwbGFjZSgvd2VicGFjazpcLz8vZywiIikucmVwbGFjZShuZXcgUmVnRXhwKGAoZmlsZTovLyk/Lyoke259LypgLCJpZyIpLCJhcHA6Ly8vIil9KCgpPT57Y29uc3R7cGVyZm9ybWFuY2U6dH09ZztpZighdHx8IXQubm93KXJldHVybjtjb25zdCBlPTM2ZTUsbj10Lm5vdygpLHI9RGF0ZS5ub3coKSxvPXQudGltZU9yaWdpbj9NYXRoLmFicyh0LnRpbWVPcmlnaW4rbi1yKTplLHM9bzxlLGk9dC50aW1pbmcmJnQudGltaW5nLm5hdmlnYXRpb25TdGFydCxjPSJudW1iZXIiPT10eXBlb2YgaT9NYXRoLmFicyhpK24tcik6ZTsoc3x8YzxlKSYmKG88PWMmJnQudGltZU9yaWdpbil9KSgpO2NvbnN0IEg9L14oXFMrOlxcfFwvPykoW1xzXFNdKj8pKCg/OlwuezEsMn18W14vXFxdKz98KShcLlteLi9cXF0qfCkpKD86Wy9cXF0qKSQvO2Z1bmN0aW9uIFcodCl7Y29uc3QgZT1mdW5jdGlvbih0KXtjb25zdCBlPXQubGVuZ3RoPjEwMjQ/YDx0cnVuY2F0ZWQ+JHt0LnNsaWNlKC0xMDI0KX1gOnQsbj1ILmV4ZWMoZSk7cmV0dXJuIG4/bi5zbGljZSgxKTpbXX0odCksbj1lWzBdO2xldCByPWVbMV07cmV0dXJuIG58fHI/KHImJihyPXIuc2xpY2UoMCxyLmxlbmd0aC0xKSksbityKToiLiJ9dmFyIFk7ZnVuY3Rpb24gcSh0KXtyZXR1cm4gbmV3IEYoKGU9PntlKHQpfSkpfSFmdW5jdGlvbih0KXt0W3QuUEVORElORz0wXT0iUEVORElORyI7dFt0LlJFU09MVkVEPTFdPSJSRVNPTFZFRCI7dFt0LlJFSkVDVEVEPTJdPSJSRUpFQ1RFRCJ9KFl8fChZPXt9KSk7Y2xhc3MgRntjb25zdHJ1Y3Rvcih0KXtGLnByb3RvdHlwZS5fX2luaXQuY2FsbCh0aGlzKSxGLnByb3RvdHlwZS5fX2luaXQyLmNhbGwodGhpcyksRi5wcm90b3R5cGUuX19pbml0My5jYWxsKHRoaXMpLEYucHJvdG90eXBlLl9faW5pdDQuY2FsbCh0aGlzKSx0aGlzLmk9WS5QRU5ESU5HLHRoaXMudT1bXTt0cnl7dCh0aGlzLmgsdGhpcy5wKX1jYXRjaCh0KXt0aGlzLnAodCl9fXRoZW4odCxlKXtyZXR1cm4gbmV3IEYoKChuLHIpPT57dGhpcy51LnB1c2goWyExLGU9PntpZih0KXRyeXtuKHQoZSkpfWNhdGNoKHQpe3IodCl9ZWxzZSBuKGUpfSx0PT57aWYoZSl0cnl7bihlKHQpKX1jYXRjaCh0KXtyKHQpfWVsc2Ugcih0KX1dKSx0aGlzLmwoKX0pKX1jYXRjaCh0KXtyZXR1cm4gdGhpcy50aGVuKCh0PT50KSx0KX1maW5hbGx5KHQpe3JldHVybiBuZXcgRigoKGUsbik9PntsZXQgcixvO3JldHVybiB0aGlzLnRoZW4oKGU9PntvPSExLHI9ZSx0JiZ0KCl9KSwoZT0+e289ITAscj1lLHQmJnQoKX0pKS50aGVuKCgoKT0+e28/bihyKTplKHIpfSkpfSkpfV9faW5pdCgpe3RoaXMuaD10PT57dGhpcy5tKFkuUkVTT0xWRUQsdCl9fV9faW5pdDIoKXt0aGlzLnA9dD0+e3RoaXMubShZLlJFSkVDVEVELHQpfX1fX2luaXQzKCl7dGhpcy5tPSh0LGUpPT57dGhpcy5pPT09WS5QRU5ESU5HJiYoZChlKT9lLnRoZW4odGhpcy5oLHRoaXMucCk6KHRoaXMuaT10LHRoaXMudj1lLHRoaXMubCgpKSl9fV9faW5pdDQoKXt0aGlzLmw9KCk9PntpZih0aGlzLmk9PT1ZLlBFTkRJTkcpcmV0dXJuO2NvbnN0IHQ9dGhpcy51LnNsaWNlKCk7dGhpcy51PVtdLHQuZm9yRWFjaCgodD0+e3RbMF18fCh0aGlzLmk9PT1ZLlJFU09MVkVEJiZ0WzFdKHRoaXMudiksdGhpcy5pPT09WS5SRUpFQ1RFRCYmdFsyXSh0aGlzLnYpLHRbMF09ITApfSkpfX19ZnVuY3Rpb24gSyh0KXtjb25zdCBlPVtdO2Z1bmN0aW9uIG4odCl7cmV0dXJuIGUuc3BsaWNlKGUuaW5kZXhPZih0KSwxKVswXX1yZXR1cm57JDplLGFkZDpmdW5jdGlvbihyKXtpZighKHZvaWQgMD09PXR8fGUubGVuZ3RoPHQpKXJldHVybiBvPW5ldyBrKCJOb3QgYWRkaW5nIFByb21pc2UgYmVjYXVzZSBidWZmZXIgbGltaXQgd2FzIHJlYWNoZWQuIiksbmV3IEYoKCh0LGUpPT57ZShvKX0pKTt2YXIgbztjb25zdCBzPXIoKTtyZXR1cm4tMT09PWUuaW5kZXhPZihzKSYmZS5wdXNoKHMpLHMudGhlbigoKCk9Pm4ocykpKS50aGVuKG51bGwsKCgpPT5uKHMpLnRoZW4obnVsbCwoKCk9Pnt9KSkpKSxzfSxkcmFpbjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEYoKChuLHIpPT57bGV0IG89ZS5sZW5ndGg7aWYoIW8pcmV0dXJuIG4oITApO2NvbnN0IHM9c2V0VGltZW91dCgoKCk9Pnt0JiZ0PjAmJm4oITEpfSksdCk7ZS5mb3JFYWNoKCh0PT57cSh0KS50aGVuKCgoKT0+ey0tb3x8KGNsZWFyVGltZW91dChzKSxuKCEwKSl9KSxyKX0pKX0pKX19fWZ1bmN0aW9uIFYodCxlPSExKXtyZXR1cm4hKGV8fHQmJiF0LnN0YXJ0c1dpdGgoIi8iKSYmIXQubWF0Y2goL15bQS1aXTovKSYmIXQuc3RhcnRzV2l0aCgiLiIpJiYhdC5tYXRjaCgvXlthLXpBLVpdKFthLXpBLVowLTkuXC0rXSkqOlwvXC8vKSkmJnZvaWQgMCE9PXQmJiF0LmluY2x1ZGVzKCJub2RlX21vZHVsZXMvIil9ZnVuY3Rpb24gWih0LGU9W10pe3JldHVyblt0LGVdfWZ1bmN0aW9uIFEodCxlKXtjb25zdCBuPXRbMV07Zm9yKGNvbnN0IHQgb2Ygbil7aWYoZSh0LHRbMF0udHlwZSkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gWCh0KXtyZXR1cm4gZy5fX1NFTlRSWV9fJiZnLl9fU0VOVFJZX18uZW5jb2RlUG9seWZpbGw/Zy5fX1NFTlRSWV9fLmVuY29kZVBvbHlmaWxsKHQpOihuZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KX1mdW5jdGlvbiB0dCh0KXtjb25zdFtlLG5dPXQ7bGV0IHI9SlNPTi5zdHJpbmdpZnkoZSk7ZnVuY3Rpb24gbyh0KXsic3RyaW5nIj09dHlwZW9mIHI/cj0ic3RyaW5nIj09dHlwZW9mIHQ/cit0OltYKHIpLHRdOnIucHVzaCgic3RyaW5nIj09dHlwZW9mIHQ/WCh0KTp0KX1mb3IoY29uc3QgdCBvZiBuKXtjb25zdFtlLG5dPXQ7aWYobyhgXG4ke0pTT04uc3RyaW5naWZ5KGUpfVxuYCksInN0cmluZyI9PXR5cGVvZiBufHxuIGluc3RhbmNlb2YgVWludDhBcnJheSlvKG4pO2Vsc2V7bGV0IHQ7dHJ5e3Q9SlNPTi5zdHJpbmdpZnkobil9Y2F0Y2goZSl7dD1KU09OLnN0cmluZ2lmeShHKG4pKX1vKHQpfX1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIHI/cjpmdW5jdGlvbih0KXtjb25zdCBlPXQucmVkdWNlKCgodCxlKT0+dCtlLmxlbmd0aCksMCksbj1uZXcgVWludDhBcnJheShlKTtsZXQgcj0wO2Zvcihjb25zdCBlIG9mIHQpbi5zZXQoZSxyKSxyKz1lLmxlbmd0aDtyZXR1cm4gbn0ocil9Y29uc3QgZXQ9e3Nlc3Npb246InNlc3Npb24iLHNlc3Npb25zOiJzZXNzaW9uIixhdHRhY2htZW50OiJhdHRhY2htZW50Iix0cmFuc2FjdGlvbjoidHJhbnNhY3Rpb24iLGV2ZW50OiJlcnJvciIsY2xpZW50X3JlcG9ydDoiaW50ZXJuYWwiLHVzZXJfcmVwb3J0OiJkZWZhdWx0Iixwcm9maWxlOiJwcm9maWxlIixyZXBsYXlfZXZlbnQ6InJlcGxheSIscmVwbGF5X3JlY29yZGluZzoicmVwbGF5IixjaGVja19pbjoibW9uaXRvciIsZmVlZGJhY2s6ImZlZWRiYWNrIixzcGFuOiJzcGFuIixzdGF0c2Q6Im1ldHJpY19idWNrZXQifTtmdW5jdGlvbiBudCh0KXtyZXR1cm4gZXRbdF19ZnVuY3Rpb24gcnQodCl7aWYoIXR8fCF0LnNkaylyZXR1cm47Y29uc3R7bmFtZTplLHZlcnNpb246bn09dC5zZGs7cmV0dXJue25hbWU6ZSx2ZXJzaW9uOm59fWNvbnN0IG90PTZlNDtmdW5jdGlvbiBzdCh0LHtzdGF0dXNDb2RlOmUsaGVhZGVyczpufSxyPURhdGUubm93KCkpe2NvbnN0IG89ey4uLnR9LHM9biYmblsieC1zZW50cnktcmF0ZS1saW1pdHMiXSxpPW4mJm5bInJldHJ5LWFmdGVyIl07aWYocylmb3IoY29uc3QgdCBvZiBzLnRyaW0oKS5zcGxpdCgiLCIpKXtjb25zdFtlLG4sLCxzXT10LnNwbGl0KCI6Iiw1KSxpPXBhcnNlSW50KGUsMTApLGM9MWUzKihpc05hTihpKT82MDppKTtpZihuKWZvcihjb25zdCB0IG9mIG4uc3BsaXQoIjsiKSkibWV0cmljX2J1Y2tldCI9PT10JiZzJiYhcy5zcGxpdCgiOyIpLmluY2x1ZGVzKCJjdXN0b20iKXx8KG9bdF09citjKTtlbHNlIG8uYWxsPXIrY31lbHNlIGk/by5hbGw9citmdW5jdGlvbih0LGU9RGF0ZS5ub3coKSl7Y29uc3Qgbj1wYXJzZUludChgJHt0fWAsMTApO2lmKCFpc05hTihuKSlyZXR1cm4gMWUzKm47Y29uc3Qgcj1EYXRlLnBhcnNlKGAke3R9YCk7cmV0dXJuIGlzTmFOKHIpP290OnItZX0oaSxyKTo0Mjk9PT1lJiYoby5hbGw9cis2ZTQpO3JldHVybiBvfWZ1bmN0aW9uIGl0KCl7cmV0dXJue3RyYWNlSWQ6QigpLHNwYW5JZDpCKCkuc3Vic3RyaW5nKDE2KX19Y29uc3QgY3Q9InVuZGVmaW5lZCI9PXR5cGVvZiBfX1NFTlRSWV9ERUJVR19ffHxfX1NFTlRSWV9ERUJVR19fO2Z1bmN0aW9uIHV0KCl7cmV0dXJuIGF0KGcpLGd9ZnVuY3Rpb24gYXQodCl7cmV0dXJuIHQuX19TRU5UUllfX3x8KHQuX19TRU5UUllfXz17ZXh0ZW5zaW9uczp7fX0pLHQuX19TRU5UUllfX31mdW5jdGlvbiBmdCh0KXtjb25zdCBlPUwoKSxuPXtzaWQ6QigpLGluaXQ6ITAsdGltZXN0YW1wOmUsc3RhcnRlZDplLGR1cmF0aW9uOjAsc3RhdHVzOiJvayIsZXJyb3JzOjAsaWdub3JlRHVyYXRpb246ITEsdG9KU09OOigpPT5mdW5jdGlvbih0KXtyZXR1cm4gTyh7c2lkOmAke3Quc2lkfWAsaW5pdDp0LmluaXQsc3RhcnRlZDpuZXcgRGF0ZSgxZTMqdC5zdGFydGVkKS50b0lTT1N0cmluZygpLHRpbWVzdGFtcDpuZXcgRGF0ZSgxZTMqdC50aW1lc3RhbXApLnRvSVNPU3RyaW5nKCksc3RhdHVzOnQuc3RhdHVzLGVycm9yczp0LmVycm9ycyxkaWQ6Im51bWJlciI9PXR5cGVvZiB0LmRpZHx8InN0cmluZyI9PXR5cGVvZiB0LmRpZD9gJHt0LmRpZH1gOnZvaWQgMCxkdXJhdGlvbjp0LmR1cmF0aW9uLGFibm9ybWFsX21lY2hhbmlzbTp0LmFibm9ybWFsX21lY2hhbmlzbSxhdHRyczp7cmVsZWFzZTp0LnJlbGVhc2UsZW52aXJvbm1lbnQ6dC5lbnZpcm9ubWVudCxpcF9hZGRyZXNzOnQuaXBBZGRyZXNzLHVzZXJfYWdlbnQ6dC51c2VyQWdlbnR9fSl9KG4pfTtyZXR1cm4gdCYmaHQobix0KSxufWZ1bmN0aW9uIGh0KHQsZT17fSl7aWYoZS51c2VyJiYoIXQuaXBBZGRyZXNzJiZlLnVzZXIuaXBfYWRkcmVzcyYmKHQuaXBBZGRyZXNzPWUudXNlci5pcF9hZGRyZXNzKSx0LmRpZHx8ZS5kaWR8fCh0LmRpZD1lLnVzZXIuaWR8fGUudXNlci5lbWFpbHx8ZS51c2VyLnVzZXJuYW1lKSksdC50aW1lc3RhbXA9ZS50aW1lc3RhbXB8fEwoKSxlLmFibm9ybWFsX21lY2hhbmlzbSYmKHQuYWJub3JtYWxfbWVjaGFuaXNtPWUuYWJub3JtYWxfbWVjaGFuaXNtKSxlLmlnbm9yZUR1cmF0aW9uJiYodC5pZ25vcmVEdXJhdGlvbj1lLmlnbm9yZUR1cmF0aW9uKSxlLnNpZCYmKHQuc2lkPTMyPT09ZS5zaWQubGVuZ3RoP2Uuc2lkOkIoKSksdm9pZCAwIT09ZS5pbml0JiYodC5pbml0PWUuaW5pdCksIXQuZGlkJiZlLmRpZCYmKHQuZGlkPWAke2UuZGlkfWApLCJudW1iZXIiPT10eXBlb2YgZS5zdGFydGVkJiYodC5zdGFydGVkPWUuc3RhcnRlZCksdC5pZ25vcmVEdXJhdGlvbil0LmR1cmF0aW9uPXZvaWQgMDtlbHNlIGlmKCJudW1iZXIiPT10eXBlb2YgZS5kdXJhdGlvbil0LmR1cmF0aW9uPWUuZHVyYXRpb247ZWxzZXtjb25zdCBlPXQudGltZXN0YW1wLXQuc3RhcnRlZDt0LmR1cmF0aW9uPWU+PTA/ZTowfWUucmVsZWFzZSYmKHQucmVsZWFzZT1lLnJlbGVhc2UpLGUuZW52aXJvbm1lbnQmJih0LmVudmlyb25tZW50PWUuZW52aXJvbm1lbnQpLCF0LmlwQWRkcmVzcyYmZS5pcEFkZHJlc3MmJih0LmlwQWRkcmVzcz1lLmlwQWRkcmVzcyksIXQudXNlckFnZW50JiZlLnVzZXJBZ2VudCYmKHQudXNlckFnZW50PWUudXNlckFnZW50KSwibnVtYmVyIj09dHlwZW9mIGUuZXJyb3JzJiYodC5lcnJvcnM9ZS5lcnJvcnMpLGUuc3RhdHVzJiYodC5zdGF0dXM9ZS5zdGF0dXMpfWNvbnN0IHB0PSJfc2VudHJ5U3BhbiI7ZnVuY3Rpb24gbHQodCxlKXtlP2Z1bmN0aW9uKHQsZSxuKXt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1jYXRjaChuKXt3JiZ4LmxvZyhgRmFpbGVkIHRvIGFkZCBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSAiJHtlfSIgdG8gb2JqZWN0YCx0KX19KHQscHQsZSk6ZGVsZXRlIHRbcHRdfWZ1bmN0aW9uIGR0KHQpe3JldHVybiB0W3B0XX1jbGFzcyBtdHtjb25zdHJ1Y3Rvcigpe3RoaXMuXz0hMSx0aGlzLlM9W10sdGhpcy5OPVtdLHRoaXMuaz1bXSx0aGlzLkM9W10sdGhpcy5EPXt9LHRoaXMuVD17fSx0aGlzLk89e30sdGhpcy5qPXt9LHRoaXMuUj17fSx0aGlzLkE9aXQoKX1jbG9uZSgpe2NvbnN0IHQ9bmV3IG10O3JldHVybiB0Lms9Wy4uLnRoaXMua10sdC5UPXsuLi50aGlzLlR9LHQuTz17Li4udGhpcy5PfSx0Lmo9ey4uLnRoaXMuan0sdC5EPXRoaXMuRCx0Lkk9dGhpcy5JLHQuUD10aGlzLlAsdC5VPXRoaXMuVSx0Lk09dGhpcy5NLHQuTj1bLi4udGhpcy5OXSx0Lkw9dGhpcy5MLHQuQz1bLi4udGhpcy5DXSx0LlI9ey4uLnRoaXMuUn0sdC5BPXsuLi50aGlzLkF9LHQuQj10aGlzLkIsdC5HPXRoaXMuRyxsdCh0LGR0KHRoaXMpKSx0fXNldENsaWVudCh0KXt0aGlzLkI9dH1zZXRMYXN0RXZlbnRJZCh0KXt0aGlzLkc9dH1nZXRDbGllbnQoKXtyZXR1cm4gdGhpcy5CfWxhc3RFdmVudElkKCl7cmV0dXJuIHRoaXMuR31hZGRTY29wZUxpc3RlbmVyKHQpe3RoaXMuUy5wdXNoKHQpfWFkZEV2ZW50UHJvY2Vzc29yKHQpe3JldHVybiB0aGlzLk4ucHVzaCh0KSx0aGlzfXNldFVzZXIodCl7cmV0dXJuIHRoaXMuRD10fHx7ZW1haWw6dm9pZCAwLGlkOnZvaWQgMCxpcF9hZGRyZXNzOnZvaWQgMCx1c2VybmFtZTp2b2lkIDB9LHRoaXMuUCYmaHQodGhpcy5QLHt1c2VyOnR9KSx0aGlzLkooKSx0aGlzfWdldFVzZXIoKXtyZXR1cm4gdGhpcy5EfWdldFJlcXVlc3RTZXNzaW9uKCl7cmV0dXJuIHRoaXMuTH1zZXRSZXF1ZXN0U2Vzc2lvbih0KXtyZXR1cm4gdGhpcy5MPXQsdGhpc31zZXRUYWdzKHQpe3JldHVybiB0aGlzLlQ9ey4uLnRoaXMuVCwuLi50fSx0aGlzLkooKSx0aGlzfXNldFRhZyh0LGUpe3JldHVybiB0aGlzLlQ9ey4uLnRoaXMuVCxbdF06ZX0sdGhpcy5KKCksdGhpc31zZXRFeHRyYXModCl7cmV0dXJuIHRoaXMuTz17Li4udGhpcy5PLC4uLnR9LHRoaXMuSigpLHRoaXN9c2V0RXh0cmEodCxlKXtyZXR1cm4gdGhpcy5PPXsuLi50aGlzLk8sW3RdOmV9LHRoaXMuSigpLHRoaXN9c2V0RmluZ2VycHJpbnQodCl7cmV0dXJuIHRoaXMuTT10LHRoaXMuSigpLHRoaXN9c2V0TGV2ZWwodCl7cmV0dXJuIHRoaXMuST10LHRoaXMuSigpLHRoaXN9c2V0VHJhbnNhY3Rpb25OYW1lKHQpe3JldHVybiB0aGlzLlU9dCx0aGlzLkooKSx0aGlzfXNldENvbnRleHQodCxlKXtyZXR1cm4gbnVsbD09PWU/ZGVsZXRlIHRoaXMualt0XTp0aGlzLmpbdF09ZSx0aGlzLkooKSx0aGlzfXNldFNlc3Npb24odCl7cmV0dXJuIHQ/dGhpcy5QPXQ6ZGVsZXRlIHRoaXMuUCx0aGlzLkooKSx0aGlzfWdldFNlc3Npb24oKXtyZXR1cm4gdGhpcy5QfXVwZGF0ZSh0KXtpZighdClyZXR1cm4gdGhpcztjb25zdCBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QodGhpcyk6dCxbbixyXT1lIGluc3RhbmNlb2YgZ3Q/W2UuZ2V0U2NvcGVEYXRhKCksZS5nZXRSZXF1ZXN0U2Vzc2lvbigpXTpsKGUpP1t0LHQucmVxdWVzdFNlc3Npb25dOltdLHt0YWdzOm8sZXh0cmE6cyx1c2VyOmksY29udGV4dHM6YyxsZXZlbDp1LGZpbmdlcnByaW50OmE9W10scHJvcGFnYXRpb25Db250ZXh0OmZ9PW58fHt9O3JldHVybiB0aGlzLlQ9ey4uLnRoaXMuVCwuLi5vfSx0aGlzLk89ey4uLnRoaXMuTywuLi5zfSx0aGlzLmo9ey4uLnRoaXMuaiwuLi5jfSxpJiZPYmplY3Qua2V5cyhpKS5sZW5ndGgmJih0aGlzLkQ9aSksdSYmKHRoaXMuST11KSxhLmxlbmd0aCYmKHRoaXMuTT1hKSxmJiYodGhpcy5BPWYpLHImJih0aGlzLkw9ciksdGhpc31jbGVhcigpe3JldHVybiB0aGlzLms9W10sdGhpcy5UPXt9LHRoaXMuTz17fSx0aGlzLkQ9e30sdGhpcy5qPXt9LHRoaXMuST12b2lkIDAsdGhpcy5VPXZvaWQgMCx0aGlzLk09dm9pZCAwLHRoaXMuTD12b2lkIDAsdGhpcy5QPXZvaWQgMCxsdCh0aGlzLHZvaWQgMCksdGhpcy5DPVtdLHRoaXMuQT1pdCgpLHRoaXMuSigpLHRoaXN9YWRkQnJlYWRjcnVtYih0LGUpe2NvbnN0IG49Im51bWJlciI9PXR5cGVvZiBlP2U6MTAwO2lmKG48PTApcmV0dXJuIHRoaXM7Y29uc3Qgcj17dGltZXN0YW1wOk0oKSwuLi50fSxvPXRoaXMuaztyZXR1cm4gby5wdXNoKHIpLHRoaXMuaz1vLmxlbmd0aD5uP28uc2xpY2UoLW4pOm8sdGhpcy5KKCksdGhpc31nZXRMYXN0QnJlYWRjcnVtYigpe3JldHVybiB0aGlzLmtbdGhpcy5rLmxlbmd0aC0xXX1jbGVhckJyZWFkY3J1bWJzKCl7cmV0dXJuIHRoaXMuaz1bXSx0aGlzLkooKSx0aGlzfWFkZEF0dGFjaG1lbnQodCl7cmV0dXJuIHRoaXMuQy5wdXNoKHQpLHRoaXN9Y2xlYXJBdHRhY2htZW50cygpe3JldHVybiB0aGlzLkM9W10sdGhpc31nZXRTY29wZURhdGEoKXtyZXR1cm57YnJlYWRjcnVtYnM6dGhpcy5rLGF0dGFjaG1lbnRzOnRoaXMuQyxjb250ZXh0czp0aGlzLmosdGFnczp0aGlzLlQsZXh0cmE6dGhpcy5PLHVzZXI6dGhpcy5ELGxldmVsOnRoaXMuSSxmaW5nZXJwcmludDp0aGlzLk18fFtdLGV2ZW50UHJvY2Vzc29yczp0aGlzLk4scHJvcGFnYXRpb25Db250ZXh0OnRoaXMuQSxzZGtQcm9jZXNzaW5nTWV0YWRhdGE6dGhpcy5SLHRyYW5zYWN0aW9uTmFtZTp0aGlzLlUsc3BhbjpkdCh0aGlzKX19c2V0U0RLUHJvY2Vzc2luZ01ldGFkYXRhKHQpe3JldHVybiB0aGlzLlI9ey4uLnRoaXMuUiwuLi50fSx0aGlzfXNldFByb3BhZ2F0aW9uQ29udGV4dCh0KXtyZXR1cm4gdGhpcy5BPXQsdGhpc31nZXRQcm9wYWdhdGlvbkNvbnRleHQoKXtyZXR1cm4gdGhpcy5BfWNhcHR1cmVFeGNlcHRpb24odCxlKXtjb25zdCBuPWUmJmUuZXZlbnRfaWQ/ZS5ldmVudF9pZDpCKCk7aWYoIXRoaXMuQilyZXR1cm4geC53YXJuKCJObyBjbGllbnQgY29uZmlndXJlZCBvbiBzY29wZSAtIHdpbGwgbm90IGNhcHR1cmUgZXhjZXB0aW9uISIpLG47Y29uc3Qgcj1uZXcgRXJyb3IoIlNlbnRyeSBzeW50aGV0aWNFeGNlcHRpb24iKTtyZXR1cm4gdGhpcy5CLmNhcHR1cmVFeGNlcHRpb24odCx7b3JpZ2luYWxFeGNlcHRpb246dCxzeW50aGV0aWNFeGNlcHRpb246ciwuLi5lLGV2ZW50X2lkOm59LHRoaXMpLG59Y2FwdHVyZU1lc3NhZ2UodCxlLG4pe2NvbnN0IHI9biYmbi5ldmVudF9pZD9uLmV2ZW50X2lkOkIoKTtpZighdGhpcy5CKXJldHVybiB4Lndhcm4oIk5vIGNsaWVudCBjb25maWd1cmVkIG9uIHNjb3BlIC0gd2lsbCBub3QgY2FwdHVyZSBtZXNzYWdlISIpLHI7Y29uc3Qgbz1uZXcgRXJyb3IodCk7cmV0dXJuIHRoaXMuQi5jYXB0dXJlTWVzc2FnZSh0LGUse29yaWdpbmFsRXhjZXB0aW9uOnQsc3ludGhldGljRXhjZXB0aW9uOm8sLi4ubixldmVudF9pZDpyfSx0aGlzKSxyfWNhcHR1cmVFdmVudCh0LGUpe2NvbnN0IG49ZSYmZS5ldmVudF9pZD9lLmV2ZW50X2lkOkIoKTtyZXR1cm4gdGhpcy5CPyh0aGlzLkIuY2FwdHVyZUV2ZW50KHQsey4uLmUsZXZlbnRfaWQ6bn0sdGhpcyksbik6KHgud2FybigiTm8gY2xpZW50IGNvbmZpZ3VyZWQgb24gc2NvcGUgLSB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50ISIpLG4pfUooKXt0aGlzLl98fCh0aGlzLl89ITAsdGhpcy5TLmZvckVhY2goKHQ9Pnt0KHRoaXMpfSkpLHRoaXMuXz0hMSl9fWNvbnN0IGd0PW10O2NsYXNzIHl0e2NvbnN0cnVjdG9yKHQsZSl7bGV0IG4scjtuPXR8fG5ldyBndCxyPWV8fG5ldyBndCx0aGlzLkg9W3tzY29wZTpufV0sdGhpcy5XPXJ9d2l0aFNjb3BlKHQpe2NvbnN0IGU9dGhpcy5ZKCk7bGV0IG47dHJ5e249dChlKX1jYXRjaCh0KXt0aHJvdyB0aGlzLnEoKSx0fXJldHVybiBkKG4pP24udGhlbigodD0+KHRoaXMucSgpLHQpKSwodD0+e3Rocm93IHRoaXMucSgpLHR9KSk6KHRoaXMucSgpLG4pfWdldENsaWVudCgpe3JldHVybiB0aGlzLmdldFN0YWNrVG9wKCkuY2xpZW50fWdldFNjb3BlKCl7cmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5zY29wZX1nZXRJc29sYXRpb25TY29wZSgpe3JldHVybiB0aGlzLld9Z2V0U3RhY2soKXtyZXR1cm4gdGhpcy5IfWdldFN0YWNrVG9wKCl7cmV0dXJuIHRoaXMuSFt0aGlzLkgubGVuZ3RoLTFdfVkoKXtjb25zdCB0PXRoaXMuZ2V0U2NvcGUoKS5jbG9uZSgpO3JldHVybiB0aGlzLmdldFN0YWNrKCkucHVzaCh7Y2xpZW50OnRoaXMuZ2V0Q2xpZW50KCksc2NvcGU6dH0pLHR9cSgpe3JldHVybiEodGhpcy5nZXRTdGFjaygpLmxlbmd0aDw9MSkmJiEhdGhpcy5nZXRTdGFjaygpLnBvcCgpfX1mdW5jdGlvbiBidCgpe2NvbnN0IHQ9YXQodXQoKSk7cmV0dXJuIHQuaHVifHwodC5odWI9bmV3IHl0KHkoImRlZmF1bHRDdXJyZW50U2NvcGUiLCgoKT0+bmV3IGd0KSkseSgiZGVmYXVsdElzb2xhdGlvblNjb3BlIiwoKCk9Pm5ldyBndCkpKSksdC5odWJ9ZnVuY3Rpb24gdnQodCl7cmV0dXJuIGJ0KCkud2l0aFNjb3BlKHQpfWZ1bmN0aW9uIF90KHQsZSl7Y29uc3Qgbj1idCgpO3JldHVybiBuLndpdGhTY29wZSgoKCk9PihuLmdldFN0YWNrVG9wKCkuc2NvcGU9dCxlKHQpKSkpfWZ1bmN0aW9uIHd0KHQpe3JldHVybiBidCgpLndpdGhTY29wZSgoKCk9PnQoYnQoKS5nZXRJc29sYXRpb25TY29wZSgpKSkpfWZ1bmN0aW9uIFN0KHQpe2NvbnN0IGU9YXQodCk7cmV0dXJuIGUuYWNzP2UuYWNzOnt3aXRoSXNvbGF0aW9uU2NvcGU6d3Qsd2l0aFNjb3BlOnZ0LHdpdGhTZXRTY29wZTpfdCx3aXRoU2V0SXNvbGF0aW9uU2NvcGU6KHQsZSk9Pnd0KGUpLGdldEN1cnJlbnRTY29wZTooKT0+YnQoKS5nZXRTY29wZSgpLGdldElzb2xhdGlvblNjb3BlOigpPT5idCgpLmdldElzb2xhdGlvblNjb3BlKCl9fWZ1bmN0aW9uICR0KCl7cmV0dXJuIFN0KHV0KCkpLmdldEN1cnJlbnRTY29wZSgpLmdldENsaWVudCgpfWNvbnN0IEV0PSJzZW50cnkuc291cmNlIix4dD0ic2VudHJ5LnNhbXBsZV9yYXRlIixOdD0ic2VudHJ5Lm9wIixrdD0ic2VudHJ5Lm9yaWdpbiIsQ3Q9MCxEdD0xLFR0PTE7ZnVuY3Rpb24gT3QodCl7Y29uc3R7c3BhbklkOmUsdHJhY2VJZDpufT10LnNwYW5Db250ZXh0KCkse3BhcmVudF9zcGFuX2lkOnJ9PUF0KHQpO3JldHVybiBPKHtwYXJlbnRfc3Bhbl9pZDpyLHNwYW5faWQ6ZSx0cmFjZV9pZDpufSl9ZnVuY3Rpb24ganQodCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0P1J0KHQpOkFycmF5LmlzQXJyYXkodCk/dFswXSt0WzFdLzFlOTp0IGluc3RhbmNlb2YgRGF0ZT9SdCh0LmdldFRpbWUoKSk6TCgpfWZ1bmN0aW9uIFJ0KHQpe3JldHVybiB0Pjk5OTk5OTk5OTk/dC8xZTM6dH1mdW5jdGlvbiBBdCh0KXtpZihmdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdC5nZXRTcGFuSlNPTn0odCkpcmV0dXJuIHQuZ2V0U3BhbkpTT04oKTt0cnl7Y29uc3R7c3BhbklkOmUsdHJhY2VJZDpufT10LnNwYW5Db250ZXh0KCk7aWYoZnVuY3Rpb24odCl7Y29uc3QgZT10O3JldHVybiEhKGUuYXR0cmlidXRlcyYmZS5zdGFydFRpbWUmJmUubmFtZSYmZS5lbmRUaW1lJiZlLnN0YXR1cyl9KHQpKXtjb25zdHthdHRyaWJ1dGVzOnIsc3RhcnRUaW1lOm8sbmFtZTpzLGVuZFRpbWU6aSxwYXJlbnRTcGFuSWQ6YyxzdGF0dXM6dX09dDtyZXR1cm4gTyh7c3Bhbl9pZDplLHRyYWNlX2lkOm4sZGF0YTpyLGRlc2NyaXB0aW9uOnMscGFyZW50X3NwYW5faWQ6YyxzdGFydF90aW1lc3RhbXA6anQobyksdGltZXN0YW1wOmp0KGkpfHx2b2lkIDAsc3RhdHVzOkl0KHUpLG9wOnJbTnRdLG9yaWdpbjpyW2t0XSxGOnZvaWQgMH0pfXJldHVybntzcGFuX2lkOmUsdHJhY2VfaWQ6bn19Y2F0Y2godCl7cmV0dXJue319fWZ1bmN0aW9uIEl0KHQpe2lmKHQmJnQuY29kZSE9PUN0KXJldHVybiB0LmNvZGU9PT1EdD8ib2siOnQubWVzc2FnZXx8InVua25vd25fZXJyb3IifWNvbnN0IFB0PSJfc2VudHJ5Um9vdFNwYW4iO2Z1bmN0aW9uIFV0KHQpe3JldHVybiB0W1B0XXx8dH1jb25zdCBNdD0icHJvZHVjdGlvbiIsTHQ9Il9mcm96ZW5Ec2MiO2Z1bmN0aW9uIEJ0KHQpe2NvbnN0IGU9JHQoKTtpZighZSlyZXR1cm57fTtjb25zdCBuPWZ1bmN0aW9uKHQsZSl7Y29uc3Qgbj1lLmdldE9wdGlvbnMoKSx7cHVibGljS2V5OnJ9PWUuZ2V0RHNuKCl8fHt9LG89Tyh7ZW52aXJvbm1lbnQ6bi5lbnZpcm9ubWVudHx8TXQscmVsZWFzZTpuLnJlbGVhc2UscHVibGljX2tleTpyLHRyYWNlX2lkOnR9KTtyZXR1cm4gZS5lbWl0KCJjcmVhdGVEc2MiLG8pLG99KEF0KHQpLnRyYWNlX2lkfHwiIixlKSxyPVV0KHQpO2lmKCFyKXJldHVybiBuO2NvbnN0IG89cltMdF07aWYobylyZXR1cm4gbztjb25zdCBzPUF0KHIpLGk9cy5kYXRhfHx7fSxjPWlbeHRdO251bGwhPWMmJihuLnNhbXBsZV9yYXRlPWAke2N9YCk7Y29uc3QgdT1pW0V0XTtyZXR1cm4gdSYmInVybCIhPT11JiYobi50cmFuc2FjdGlvbj1zLmRlc2NyaXB0aW9uKSxuLnNhbXBsZWQ9U3RyaW5nKGZ1bmN0aW9uKHQpe2NvbnN0e3RyYWNlRmxhZ3M6ZX09dC5zcGFuQ29udGV4dCgpO3JldHVybiBlPT09VHR9KHIpKSxlLmVtaXQoImNyZWF0ZURzYyIsbiksbn1mdW5jdGlvbiBHdCh0LGUsbixyKXtjb25zdCBvPXJ0KG4pLHM9dC50eXBlJiYicmVwbGF5X2V2ZW50IiE9PXQudHlwZT90LnR5cGU6ImV2ZW50IjshZnVuY3Rpb24odCxlKXtlJiYodC5zZGs9dC5zZGt8fHt9LHQuc2RrLm5hbWU9dC5zZGsubmFtZXx8ZS5uYW1lLHQuc2RrLnZlcnNpb249dC5zZGsudmVyc2lvbnx8ZS52ZXJzaW9uLHQuc2RrLmludGVncmF0aW9ucz1bLi4udC5zZGsuaW50ZWdyYXRpb25zfHxbXSwuLi5lLmludGVncmF0aW9uc3x8W11dLHQuc2RrLnBhY2thZ2VzPVsuLi50LnNkay5wYWNrYWdlc3x8W10sLi4uZS5wYWNrYWdlc3x8W11dKX0odCxuJiZuLnNkayk7Y29uc3QgaT1mdW5jdGlvbih0LGUsbixyKXtjb25zdCBvPXQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhJiZ0LnNka1Byb2Nlc3NpbmdNZXRhZGF0YS5keW5hbWljU2FtcGxpbmdDb250ZXh0O3JldHVybntldmVudF9pZDp0LmV2ZW50X2lkLHNlbnRfYXQ6KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLC4uLmUmJntzZGs6ZX0sLi4uISFuJiZyJiZ7ZHNuOk4ocil9LC4uLm8mJnt0cmFjZTpPKHsuLi5vfSl9fX0odCxvLHIsZSk7ZGVsZXRlIHQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhO3JldHVybiBaKGksW1t7dHlwZTpzfSx0XV0pfWNvbnN0IEp0PSJfX1NFTlRSWV9TVVBQUkVTU19UUkFDSU5HX18iO2Z1bmN0aW9uIHp0KHQpe2NvbnN0IGU9U3QodXQoKSk7cmV0dXJuIGUuc3VwcHJlc3NUcmFjaW5nP2Uuc3VwcHJlc3NUcmFjaW5nKHQpOmZ1bmN0aW9uKC4uLnQpe2NvbnN0IGU9U3QodXQoKSk7aWYoMj09PXQubGVuZ3RoKXtjb25zdFtuLHJdPXQ7cmV0dXJuIG4/ZS53aXRoU2V0U2NvcGUobixyKTplLndpdGhTY29wZShyKX1yZXR1cm4gZS53aXRoU2NvcGUodFswXSl9KChlPT4oZS5zZXRTREtQcm9jZXNzaW5nTWV0YWRhdGEoe1tKdF06ITB9KSx0KCkpKSl9ZnVuY3Rpb24gSHQodCxlKXtjb25zdHtmaW5nZXJwcmludDpuLHNwYW46cixicmVhZGNydW1iczpvLHNka1Byb2Nlc3NpbmdNZXRhZGF0YTpzfT1lOyFmdW5jdGlvbih0LGUpe2NvbnN0e2V4dHJhOm4sdGFnczpyLHVzZXI6byxjb250ZXh0czpzLGxldmVsOmksdHJhbnNhY3Rpb25OYW1lOmN9PWUsdT1PKG4pO3UmJk9iamVjdC5rZXlzKHUpLmxlbmd0aCYmKHQuZXh0cmE9ey4uLnUsLi4udC5leHRyYX0pO2NvbnN0IGE9TyhyKTthJiZPYmplY3Qua2V5cyhhKS5sZW5ndGgmJih0LnRhZ3M9ey4uLmEsLi4udC50YWdzfSk7Y29uc3QgZj1PKG8pO2YmJk9iamVjdC5rZXlzKGYpLmxlbmd0aCYmKHQudXNlcj17Li4uZiwuLi50LnVzZXJ9KTtjb25zdCBoPU8ocyk7aCYmT2JqZWN0LmtleXMoaCkubGVuZ3RoJiYodC5jb250ZXh0cz17Li4uaCwuLi50LmNvbnRleHRzfSk7aSYmKHQubGV2ZWw9aSk7YyYmInRyYW5zYWN0aW9uIiE9PXQudHlwZSYmKHQudHJhbnNhY3Rpb249Yyl9KHQsZSksciYmZnVuY3Rpb24odCxlKXt0LmNvbnRleHRzPXt0cmFjZTpPdChlKSwuLi50LmNvbnRleHRzfSx0LnNka1Byb2Nlc3NpbmdNZXRhZGF0YT17ZHluYW1pY1NhbXBsaW5nQ29udGV4dDpCdChlKSwuLi50LnNka1Byb2Nlc3NpbmdNZXRhZGF0YX07Y29uc3Qgbj1VdChlKSxyPUF0KG4pLmRlc2NyaXB0aW9uO3ImJiF0LnRyYW5zYWN0aW9uJiYidHJhbnNhY3Rpb24iPT09dC50eXBlJiYodC50cmFuc2FjdGlvbj1yKX0odCxyKSxmdW5jdGlvbih0LGUpe3QuZmluZ2VycHJpbnQ9dC5maW5nZXJwcmludD9mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90Olt0XX0odC5maW5nZXJwcmludCk6W10sZSYmKHQuZmluZ2VycHJpbnQ9dC5maW5nZXJwcmludC5jb25jYXQoZSkpO3QuZmluZ2VycHJpbnQmJiF0LmZpbmdlcnByaW50Lmxlbmd0aCYmZGVsZXRlIHQuZmluZ2VycHJpbnR9KHQsbiksZnVuY3Rpb24odCxlKXtjb25zdCBuPVsuLi50LmJyZWFkY3J1bWJzfHxbXSwuLi5lXTt0LmJyZWFkY3J1bWJzPW4ubGVuZ3RoP246dm9pZCAwfSh0LG8pLGZ1bmN0aW9uKHQsZSl7dC5zZGtQcm9jZXNzaW5nTWV0YWRhdGE9ey4uLnQuc2RrUHJvY2Vzc2luZ01ldGFkYXRhLC4uLmV9fSh0LHMpfWNvbnN0IFd0PSI3IjtmdW5jdGlvbiBZdCh0LGUpe3JldHVybiBuPXtzZW50cnlfa2V5OnQucHVibGljS2V5LHNlbnRyeV92ZXJzaW9uOld0LC4uLmUmJntzZW50cnlfY2xpZW50OmAke2UubmFtZX0vJHtlLnZlcnNpb259YH19LE9iamVjdC5rZXlzKG4pLm1hcCgodD0+YCR7ZW5jb2RlVVJJQ29tcG9uZW50KHQpfT0ke2VuY29kZVVSSUNvbXBvbmVudChuW3RdKX1gKSkuam9pbigiJiIpO3ZhciBufWNvbnN0IHF0PTY0O2Z1bmN0aW9uIEZ0KHQsZSxuPUsodC5idWZmZXJTaXplfHxxdCkpe2xldCByPXt9O3JldHVybntzZW5kOmZ1bmN0aW9uKG8pe2NvbnN0IHM9W107aWYoUShvLCgoZSxuKT0+e2NvbnN0IG89bnQobik7aWYoZnVuY3Rpb24odCxlLG49RGF0ZS5ub3coKSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZV18fHQuYWxsfHwwfSh0LGUpPm59KHIsbykpe2NvbnN0IHI9S3QoZSxuKTt0LnJlY29yZERyb3BwZWRFdmVudCgicmF0ZWxpbWl0X2JhY2tvZmYiLG8scil9ZWxzZSBzLnB1c2goZSl9KSksMD09PXMubGVuZ3RoKXJldHVybiBxKHt9KTtjb25zdCBpPVoob1swXSxzKSxjPWU9PntRKGksKChuLHIpPT57Y29uc3Qgbz1LdChuLHIpO3QucmVjb3JkRHJvcHBlZEV2ZW50KGUsbnQociksbyl9KSl9O3JldHVybiBuLmFkZCgoKCk9PmUoe2JvZHk6dHQoaSl9KS50aGVuKCh0PT4odm9pZCAwIT09dC5zdGF0dXNDb2RlJiYodC5zdGF0dXNDb2RlPDIwMHx8dC5zdGF0dXNDb2RlPj0zMDApJiZjdCYmeC53YXJuKGBTZW50cnkgcmVzcG9uZGVkIHdpdGggc3RhdHVzIGNvZGUgJHt0LnN0YXR1c0NvZGV9IHRvIHNlbnQgZXZlbnQuYCkscj1zdChyLHQpLHQpKSwodD0+e3Rocm93IGMoIm5ldHdvcmtfZXJyb3IiKSx0fSkpKSkudGhlbigodD0+dCksKHQ9PntpZih0IGluc3RhbmNlb2YgaylyZXR1cm4gY3QmJnguZXJyb3IoIlNraXBwZWQgc2VuZGluZyBldmVudCBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsLiIpLGMoInF1ZXVlX292ZXJmbG93IikscSh7fSk7dGhyb3cgdH0pKX0sZmx1c2g6dD0+bi5kcmFpbih0KX19ZnVuY3Rpb24gS3QodCxlKXtpZigiZXZlbnQiPT09ZXx8InRyYW5zYWN0aW9uIj09PWUpcmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dFsxXTp2b2lkIDB9Y29uc3QgVnQ9U3ltYm9sKCJBZ2VudEJhc2VJbnRlcm5hbFN0YXRlIik7Y2xhc3MgWnQgZXh0ZW5kcyBzLkFnZW50e1tWdF07b3B0aW9ucztrZWVwQWxpdmU7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpc1tWdF09e319aXNTZWN1cmVFbmRwb2ludCh0KXtpZih0KXtpZigiYm9vbGVhbiI9PXR5cGVvZiB0LnNlY3VyZUVuZHBvaW50KXJldHVybiB0LnNlY3VyZUVuZHBvaW50O2lmKCJzdHJpbmciPT10eXBlb2YgdC5wcm90b2NvbClyZXR1cm4iaHR0cHM6Ij09PXQucHJvdG9jb2x9Y29uc3R7c3RhY2s6ZX09bmV3IEVycm9yO3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmZS5zcGxpdCgiXG4iKS5zb21lKCh0PT4tMSE9PXQuaW5kZXhPZigiKGh0dHBzLmpzOiIpfHwtMSE9PXQuaW5kZXhPZigibm9kZTpodHRwczoiKSkpfWNyZWF0ZVNvY2tldCh0LGUsbil7Y29uc3Qgcj17Li4uZSxzZWN1cmVFbmRwb2ludDp0aGlzLmlzU2VjdXJlRW5kcG9pbnQoZSl9O1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oKCgpPT50aGlzLmNvbm5lY3QodCxyKSkpLnRoZW4oKG89PntpZihvIGluc3RhbmNlb2Ygcy5BZ2VudClyZXR1cm4gby5hZGRSZXF1ZXN0KHQscik7dGhpc1tWdF0uY3VycmVudFNvY2tldD1vLHN1cGVyLmNyZWF0ZVNvY2tldCh0LGUsbil9KSxuKX1jcmVhdGVDb25uZWN0aW9uKCl7Y29uc3QgdD10aGlzW1Z0XS5jdXJyZW50U29ja2V0O2lmKHRoaXNbVnRdLmN1cnJlbnRTb2NrZXQ9dm9pZCAwLCF0KXRocm93IG5ldyBFcnJvcigiTm8gc29ja2V0IHdhcyByZXR1cm5lZCBpbiB0aGUgYGNvbm5lY3QoKWAgZnVuY3Rpb24iKTtyZXR1cm4gdH1nZXQgZGVmYXVsdFBvcnQoKXtyZXR1cm4gdGhpc1tWdF0uZGVmYXVsdFBvcnQ/PygiaHR0cHM6Ij09PXRoaXMucHJvdG9jb2w/NDQzOjgwKX1zZXQgZGVmYXVsdFBvcnQodCl7dGhpc1tWdF0mJih0aGlzW1Z0XS5kZWZhdWx0UG9ydD10KX1nZXQgcHJvdG9jb2woKXtyZXR1cm4gdGhpc1tWdF0ucHJvdG9jb2w/Pyh0aGlzLmlzU2VjdXJlRW5kcG9pbnQoKT8iaHR0cHM6IjoiaHR0cDoiKX1zZXQgcHJvdG9jb2wodCl7dGhpc1tWdF0mJih0aGlzW1Z0XS5wcm90b2NvbD10KX19ZnVuY3Rpb24gUXQoLi4udCl7eC5sb2coIltodHRwcy1wcm94eS1hZ2VudDpwYXJzZS1wcm94eS1yZXNwb25zZV0iLC4uLnQpfWZ1bmN0aW9uIFh0KHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKGUsbik9PntsZXQgcj0wO2NvbnN0IG89W107ZnVuY3Rpb24gcygpe2NvbnN0IGM9dC5yZWFkKCk7Yz9mdW5jdGlvbihjKXtvLnB1c2goYykscis9Yy5sZW5ndGg7Y29uc3QgdT1CdWZmZXIuY29uY2F0KG8sciksYT11LmluZGV4T2YoIlxyXG5cclxuIik7aWYoLTE9PT1hKXJldHVybiBRdCgiaGF2ZSBub3QgcmVjZWl2ZWQgZW5kIG9mIEhUVFAgaGVhZGVycyB5ZXQuLi4iKSx2b2lkIHMoKTtjb25zdCBmPXUuc2xpY2UoMCxhKS50b1N0cmluZygiYXNjaWkiKS5zcGxpdCgiXHJcbiIpLGg9Zi5zaGlmdCgpO2lmKCFoKXJldHVybiB0LmRlc3Ryb3koKSxuKG5ldyBFcnJvcigiTm8gaGVhZGVyIHJlY2VpdmVkIGZyb20gcHJveHkgQ09OTkVDVCByZXNwb25zZSIpKTtjb25zdCBwPWguc3BsaXQoIiAiKSxsPStwWzFdLGQ9cC5zbGljZSgyKS5qb2luKCIgIiksbT17fTtmb3IoY29uc3QgZSBvZiBmKXtpZighZSljb250aW51ZTtjb25zdCByPWUuaW5kZXhPZigiOiIpO2lmKC0xPT09cilyZXR1cm4gdC5kZXN0cm95KCksbihuZXcgRXJyb3IoYEludmFsaWQgaGVhZGVyIGZyb20gcHJveHkgQ09OTkVDVCByZXNwb25zZTogIiR7ZX0iYCkpO2NvbnN0IG89ZS5zbGljZSgwLHIpLnRvTG93ZXJDYXNlKCkscz1lLnNsaWNlKHIrMSkudHJpbVN0YXJ0KCksaT1tW29dOyJzdHJpbmciPT10eXBlb2YgaT9tW29dPVtpLHNdOkFycmF5LmlzQXJyYXkoaSk/aS5wdXNoKHMpOm1bb109c31RdCgiZ290IHByb3h5IHNlcnZlciByZXNwb25zZTogJW8gJW8iLGgsbSksaSgpLGUoe2Nvbm5lY3Q6e3N0YXR1c0NvZGU6bCxzdGF0dXNUZXh0OmQsaGVhZGVyczptfSxidWZmZXJlZDp1fSl9KGMpOnQub25jZSgicmVhZGFibGUiLHMpfWZ1bmN0aW9uIGkoKXt0LnJlbW92ZUxpc3RlbmVyKCJlbmQiLGMpLHQucmVtb3ZlTGlzdGVuZXIoImVycm9yIix1KSx0LnJlbW92ZUxpc3RlbmVyKCJyZWFkYWJsZSIscyl9ZnVuY3Rpb24gYygpe2koKSxRdCgib25lbmQiKSxuKG5ldyBFcnJvcigiUHJveHkgY29ubmVjdGlvbiBlbmRlZCBiZWZvcmUgcmVjZWl2aW5nIENPTk5FQ1QgcmVzcG9uc2UiKSl9ZnVuY3Rpb24gdSh0KXtpKCksUXQoIm9uZXJyb3IgJW8iLHQpLG4odCl9dC5vbigiZXJyb3IiLHUpLHQub24oImVuZCIsYykscygpfSkpfWZ1bmN0aW9uIHRlKC4uLnQpe3gubG9nKCJbaHR0cHMtcHJveHktYWdlbnRdIiwuLi50KX1jbGFzcyBlZSBleHRlbmRzIFp0e3N0YXRpYyBwcm90b2NvbHM9WyJodHRwIiwiaHR0cHMiXTtwcm94eTtwcm94eUhlYWRlcnM7Y29ubmVjdE9wdHM7Y29uc3RydWN0b3IodCxlKXtzdXBlcihlKSx0aGlzLm9wdGlvbnM9e30sdGhpcy5wcm94eT0ic3RyaW5nIj09dHlwZW9mIHQ/bmV3IFVSTCh0KTp0LHRoaXMucHJveHlIZWFkZXJzPWU/LmhlYWRlcnM/P3t9LHRlKCJDcmVhdGluZyBuZXcgSHR0cHNQcm94eUFnZW50IGluc3RhbmNlOiAlbyIsdGhpcy5wcm94eS5ocmVmKTtjb25zdCBuPSh0aGlzLnByb3h5Lmhvc3RuYW1lfHx0aGlzLnByb3h5Lmhvc3QpLnJlcGxhY2UoL15cW3xcXSQvZywiIikscj10aGlzLnByb3h5LnBvcnQ/cGFyc2VJbnQodGhpcy5wcm94eS5wb3J0LDEwKToiaHR0cHM6Ij09PXRoaXMucHJveHkucHJvdG9jb2w/NDQzOjgwO3RoaXMuY29ubmVjdE9wdHM9e0FMUE5Qcm90b2NvbHM6WyJodHRwLzEuMSJdLC4uLmU/cmUoZSwiaGVhZGVycyIpOm51bGwsaG9zdDpuLHBvcnQ6cn19YXN5bmMgY29ubmVjdCh0LGUpe2NvbnN0e3Byb3h5Om59PXRoaXM7aWYoIWUuaG9zdCl0aHJvdyBuZXcgVHlwZUVycm9yKCdObyAiaG9zdCIgcHJvdmlkZWQnKTtsZXQgcjtpZigiaHR0cHM6Ij09PW4ucHJvdG9jb2wpe3RlKCJDcmVhdGluZyBgdGxzLlNvY2tldGA6ICVvIix0aGlzLmNvbm5lY3RPcHRzKTtjb25zdCB0PXRoaXMuY29ubmVjdE9wdHMuc2VydmVybmFtZXx8dGhpcy5jb25uZWN0T3B0cy5ob3N0O3I9Zi5jb25uZWN0KHsuLi50aGlzLmNvbm5lY3RPcHRzLHNlcnZlcm5hbWU6dCYmYS5pc0lQKHQpP3ZvaWQgMDp0fSl9ZWxzZSB0ZSgiQ3JlYXRpbmcgYG5ldC5Tb2NrZXRgOiAlbyIsdGhpcy5jb25uZWN0T3B0cykscj1hLmNvbm5lY3QodGhpcy5jb25uZWN0T3B0cyk7Y29uc3Qgbz0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5wcm94eUhlYWRlcnM/dGhpcy5wcm94eUhlYWRlcnMoKTp7Li4udGhpcy5wcm94eUhlYWRlcnN9LHM9YS5pc0lQdjYoZS5ob3N0KT9gWyR7ZS5ob3N0fV1gOmUuaG9zdDtsZXQgaT1gQ09OTkVDVCAke3N9OiR7ZS5wb3J0fSBIVFRQLzEuMVxyXG5gO2lmKG4udXNlcm5hbWV8fG4ucGFzc3dvcmQpe2NvbnN0IHQ9YCR7ZGVjb2RlVVJJQ29tcG9uZW50KG4udXNlcm5hbWUpfToke2RlY29kZVVSSUNvbXBvbmVudChuLnBhc3N3b3JkKX1gO29bIlByb3h5LUF1dGhvcml6YXRpb24iXT1gQmFzaWMgJHtCdWZmZXIuZnJvbSh0KS50b1N0cmluZygiYmFzZTY0Iil9YH1vLkhvc3Q9YCR7c306JHtlLnBvcnR9YCxvWyJQcm94eS1Db25uZWN0aW9uIl18fChvWyJQcm94eS1Db25uZWN0aW9uIl09dGhpcy5rZWVwQWxpdmU/IktlZXAtQWxpdmUiOiJjbG9zZSIpO2Zvcihjb25zdCB0IG9mIE9iamVjdC5rZXlzKG8pKWkrPWAke3R9OiAke29bdF19XHJcbmA7Y29uc3QgYz1YdChyKTtyLndyaXRlKGAke2l9XHJcbmApO2NvbnN0e2Nvbm5lY3Q6dSxidWZmZXJlZDpofT1hd2FpdCBjO2lmKHQuZW1pdCgicHJveHlDb25uZWN0Iix1KSx0aGlzLmVtaXQoInByb3h5Q29ubmVjdCIsdSx0KSwyMDA9PT11LnN0YXR1c0NvZGUpe2lmKHQub25jZSgic29ja2V0IixuZSksZS5zZWN1cmVFbmRwb2ludCl7dGUoIlVwZ3JhZGluZyBzb2NrZXQgY29ubmVjdGlvbiB0byBUTFMiKTtjb25zdCB0PWUuc2VydmVybmFtZXx8ZS5ob3N0O3JldHVybiBmLmNvbm5lY3Qoey4uLnJlKGUsImhvc3QiLCJwYXRoIiwicG9ydCIpLHNvY2tldDpyLHNlcnZlcm5hbWU6YS5pc0lQKHQpP3ZvaWQgMDp0fSl9cmV0dXJuIHJ9ci5kZXN0cm95KCk7Y29uc3QgcD1uZXcgYS5Tb2NrZXQoe3dyaXRhYmxlOiExfSk7cmV0dXJuIHAucmVhZGFibGU9ITAsdC5vbmNlKCJzb2NrZXQiLCh0PT57dGUoIlJlcGxheWluZyBwcm94eSBidWZmZXIgZm9yIGZhaWxlZCByZXF1ZXN0IiksdC5wdXNoKGgpLHQucHVzaChudWxsKX0pKSxwfX1mdW5jdGlvbiBuZSh0KXt0LnJlc3VtZSgpfWZ1bmN0aW9uIHJlKHQsLi4uZSl7Y29uc3Qgbj17fTtsZXQgcjtmb3IociBpbiB0KWUuaW5jbHVkZXMocil8fChuW3JdPXRbcl0pO3JldHVybiBufWNvbnN0IG9lPTMyNzY4O2Z1bmN0aW9uIHNlKHQpe3JldHVybiB0LnJlcGxhY2UoL15bQS1aXTovLCIiKS5yZXBsYWNlKC9cXC9nLCIvIil9Y29uc3QgaWU9ZTtsZXQgY2UsdWU9ITE7ZnVuY3Rpb24gYWUodCl7aWUuZGVidWcmJmNvbnNvbGUubG9nKGBbQU5SIFdvcmtlcl0gJHt0fWApfXZhciBmZSxoZSxwZTtjb25zdCBsZT1mdW5jdGlvbih0KXtsZXQgZTt0cnl7ZT1uZXcgVVJMKHQudXJsKX1jYXRjaChlKXtyZXR1cm4gRSgoKCk9Pntjb25zb2xlLndhcm4oIltAc2VudHJ5L25vZGVdOiBJbnZhbGlkIGRzbiBvciB0dW5uZWwgb3B0aW9uLCB3aWxsIG5vdCBzZW5kIGFueSBldmVudHMuIFRoZSB0dW5uZWwgb3B0aW9uIG11c3QgYmUgYSBmdWxsIFVSTCB3aGVuIHVzZWQuIil9KSksRnQodCwoKCk9PlByb21pc2UucmVzb2x2ZSh7fSkpKX1jb25zdCBuPSJodHRwczoiPT09ZS5wcm90b2NvbCxyPWZ1bmN0aW9uKHQsZSl7Y29uc3R7bm9fcHJveHk6bn09cHJvY2Vzcy5lbnY7cmV0dXJuIG4mJm4uc3BsaXQoIiwiKS5zb21lKChlPT50Lmhvc3QuZW5kc1dpdGgoZSl8fHQuaG9zdG5hbWUuZW5kc1dpdGgoZSkpKT92b2lkIDA6ZX0oZSx0LnByb3h5fHwobj9wcm9jZXNzLmVudi5odHRwc19wcm94eTp2b2lkIDApfHxwcm9jZXNzLmVudi5odHRwX3Byb3h5KSxvPW4/aTpzLGE9dm9pZCAwIT09dC5rZWVwQWxpdmUmJnQua2VlcEFsaXZlLGY9cj9uZXcgZWUocik6bmV3IG8uQWdlbnQoe2tlZXBBbGl2ZTphLG1heFNvY2tldHM6MzAsdGltZW91dDoyZTN9KTtyZXR1cm4genQoKCgpPT57Y29uc3QgZT1mdW5jdGlvbih0LGUsbil7Y29uc3R7aG9zdG5hbWU6cixwYXRobmFtZTpvLHBvcnQ6cyxwcm90b2NvbDppLHNlYXJjaDphfT1uZXcgVVJMKHQudXJsKTtyZXR1cm4gZnVuY3Rpb24oZil7cmV0dXJuIG5ldyBQcm9taXNlKCgoaCxwKT0+e2xldCBsPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYyh7cmVhZCgpe3RoaXMucHVzaCh0KSx0aGlzLnB1c2gobnVsbCl9fSl9KGYuYm9keSk7Y29uc3QgZD17Li4udC5oZWFkZXJzfTtmLmJvZHkubGVuZ3RoPm9lJiYoZFsiY29udGVudC1lbmNvZGluZyJdPSJnemlwIixsPWwucGlwZSh1KCkpKTtjb25zdCBtPWUucmVxdWVzdCh7bWV0aG9kOiJQT1NUIixhZ2VudDpuLGhlYWRlcnM6ZCxob3N0bmFtZTpyLHBhdGg6YCR7b30ke2F9YCxwb3J0OnMscHJvdG9jb2w6aSxjYTp0LmNhQ2VydHN9LCh0PT57dC5vbigiZGF0YSIsKCgpPT57fSkpLHQub24oImVuZCIsKCgpPT57fSkpLHQuc2V0RW5jb2RpbmcoInV0ZjgiKTtjb25zdCBlPXQuaGVhZGVyc1sicmV0cnktYWZ0ZXIiXT8/bnVsbCxuPXQuaGVhZGVyc1sieC1zZW50cnktcmF0ZS1saW1pdHMiXT8/bnVsbDtoKHtzdGF0dXNDb2RlOnQuc3RhdHVzQ29kZSxoZWFkZXJzOnsicmV0cnktYWZ0ZXIiOmUsIngtc2VudHJ5LXJhdGUtbGltaXRzIjpBcnJheS5pc0FycmF5KG4pP25bMF06bn19KX0pKTttLm9uKCJlcnJvciIscCksbC5waXBlKG0pfSkpfX0odCx0Lmh0dHBNb2R1bGU/P28sZik7cmV0dXJuIEZ0KHQsZSl9KSl9KHt1cmw6KGZlPWllLmRzbixoZT1pZS50dW5uZWwscGU9aWUuc2RrTWV0YWRhdGEuc2RrLGhlfHxgJHtmdW5jdGlvbih0KXtyZXR1cm5gJHtmdW5jdGlvbih0KXtjb25zdCBlPXQucHJvdG9jb2w/YCR7dC5wcm90b2NvbH06YDoiIixuPXQucG9ydD9gOiR7dC5wb3J0fWA6IiI7cmV0dXJuYCR7ZX0vLyR7dC5ob3N0fSR7bn0ke3QucGF0aD9gLyR7dC5wYXRofWA6IiJ9L2FwaS9gfSh0KX0ke3QucHJvamVjdElkfS9lbnZlbG9wZS9gfShmZSl9PyR7WXQoZmUscGUpfWApLHJlY29yZERyb3BwZWRFdmVudDooKT0+e319KTthc3luYyBmdW5jdGlvbiBkZSgpe2lmKGNlKXthZSgiU2VuZGluZyBhYm5vcm1hbCBzZXNzaW9uIiksaHQoY2Use3N0YXR1czoiYWJub3JtYWwiLGFibm9ybWFsX21lY2hhbmlzbToiYW5yX2ZvcmVncm91bmQifSk7Y29uc3QgZT1mdW5jdGlvbih0LGUsbixyKXtjb25zdCBvPXJ0KG4pO3JldHVybiBaKHtzZW50X2F0OihuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSwuLi5vJiZ7c2RrOm99LC4uLiEhciYmZSYme2RzbjpOKGUpfX0sWyJhZ2dyZWdhdGVzImluIHQ/W3t0eXBlOiJzZXNzaW9ucyJ9LHRdOlt7dHlwZToic2Vzc2lvbiJ9LHQudG9KU09OKCldXSl9KGNlLGllLmRzbixpZS5zZGtNZXRhZGF0YSxpZS50dW5uZWwpO2FlKEpTT04uc3RyaW5naWZ5KGUpKSxhd2FpdCBsZS5zZW5kKGUpO3RyeXt0Py5wb3N0TWVzc2FnZSgic2Vzc2lvbi1lbmRlZCIpfWNhdGNoKHQpe319fWZ1bmN0aW9uIG1lKHQpe2lmKCF0KXJldHVybjtjb25zdCBlPWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm5bXTtjb25zdCBlPUFycmF5LmZyb20odCk7cmV0dXJuL3NlbnRyeVdyYXBwZWQvLnRlc3QoZVtlLmxlbmd0aC0xXS5mdW5jdGlvbnx8IiIpJiZlLnBvcCgpLGUucmV2ZXJzZSgpLEkudGVzdChlW2UubGVuZ3RoLTFdLmZ1bmN0aW9ufHwiIikmJihlLnBvcCgpLEkudGVzdChlW2UubGVuZ3RoLTFdLmZ1bmN0aW9ufHwiIikmJmUucG9wKCkpLGUuc2xpY2UoMCxSKS5tYXAoKHQ9Pih7Li4udCxmaWxlbmFtZTp0LmZpbGVuYW1lfHxlW2UubGVuZ3RoLTFdLmZpbGVuYW1lLGZ1bmN0aW9uOnQuZnVuY3Rpb258fEF9KSkpfSh0KTtpZihpZS5hcHBSb290UGF0aClmb3IoY29uc3QgdCBvZiBlKXQuZmlsZW5hbWUmJih0LmZpbGVuYW1lPXoodC5maWxlbmFtZSxpZS5hcHBSb290UGF0aCkpO3JldHVybiBlfWFzeW5jIGZ1bmN0aW9uIGdlKHQsZSl7aWYodWUpcmV0dXJuO3VlPSEwLGF3YWl0IGRlKCksYWUoIlNlbmRpbmcgZXZlbnQiKTtjb25zdCBuPXtldmVudF9pZDpCKCksY29udGV4dHM6aWUuY29udGV4dHMscmVsZWFzZTppZS5yZWxlYXNlLGVudmlyb25tZW50OmllLmVudmlyb25tZW50LGRpc3Q6aWUuZGlzdCxwbGF0Zm9ybToibm9kZSIsbGV2ZWw6ImVycm9yIixleGNlcHRpb246e3ZhbHVlczpbe3R5cGU6IkFwcGxpY2F0aW9uTm90UmVzcG9uZGluZyIsdmFsdWU6YEFwcGxpY2F0aW9uIE5vdCBSZXNwb25kaW5nIGZvciBhdCBsZWFzdCAke2llLmFuclRocmVzaG9sZH0gbXNgLHN0YWNrdHJhY2U6e2ZyYW1lczptZSh0KX0sbWVjaGFuaXNtOnt0eXBlOiJBTlIifX1dfSx0YWdzOmllLnN0YXRpY1RhZ3N9O2UmJmZ1bmN0aW9uKHQsZSl7aWYoSHQodCxlKSwhdC5jb250ZXh0cz8udHJhY2Upe2NvbnN0e3RyYWNlSWQ6bixzcGFuSWQ6cixwYXJlbnRTcGFuSWQ6b309ZS5wcm9wYWdhdGlvbkNvbnRleHQ7dC5jb250ZXh0cz17dHJhY2U6e3RyYWNlX2lkOm4sc3Bhbl9pZDpyLHBhcmVudF9zcGFuX2lkOm99LC4uLnQuY29udGV4dHN9fX0obixlKTtjb25zdCByPUd0KG4saWUuZHNuLGllLnNka01ldGFkYXRhLGllLnR1bm5lbCk7YWUoSlNPTi5zdHJpbmdpZnkocikpLGF3YWl0IGxlLnNlbmQociksYXdhaXQgbGUuZmx1c2goMmUzKSxzZXRUaW1lb3V0KCgoKT0+e3Byb2Nlc3MuZXhpdCgwKX0pLDVlMyl9bGV0IHllO2lmKGFlKCJTdGFydGVkIiksaWUuY2FwdHVyZVN0YWNrVHJhY2Upe2FlKCJDb25uZWN0aW5nIHRvIGRlYnVnZ2VyIik7Y29uc3QgdD1uZXcgbjt0LmNvbm5lY3RUb01haW5UaHJlYWQoKSxhZSgiQ29ubmVjdGVkIHRvIGRlYnVnZ2VyIik7Y29uc3QgZT1uZXcgTWFwO3Qub24oIkRlYnVnZ2VyLnNjcmlwdFBhcnNlZCIsKHQ9PntlLnNldCh0LnBhcmFtcy5zY3JpcHRJZCx0LnBhcmFtcy51cmwpfSkpLHQub24oIkRlYnVnZ2VyLnBhdXNlZCIsKG49PntpZigib3RoZXIiPT09bi5wYXJhbXMucmVhc29uKXRyeXthZSgiRGVidWdnZXIgcGF1c2VkIik7Y29uc3Qgcz1bLi4ubi5wYXJhbXMuY2FsbEZyYW1lc10saT1pZS5hcHBSb290UGF0aD9mdW5jdGlvbih0PShwcm9jZXNzLmFyZ3ZbMV0/Vyhwcm9jZXNzLmFyZ3ZbMV0pOnByb2Nlc3MuY3dkKCkpLGU9IlxcIj09PW8pe2NvbnN0IG49ZT9zZSh0KTp0O3JldHVybiB0PT57aWYoIXQpcmV0dXJuO2NvbnN0IG89ZT9zZSh0KTp0O2xldHtkaXI6cyxiYXNlOmksZXh0OmN9PXIucGFyc2Uobyk7Ii5qcyIhPT1jJiYiLm1qcyIhPT1jJiYiLmNqcyIhPT1jfHwoaT1pLnNsaWNlKDAsLTEqYy5sZW5ndGgpKSxzfHwocz0iLiIpO2NvbnN0IHU9cy5sYXN0SW5kZXhPZigiL25vZGVfbW9kdWxlcyIpO2lmKHU+LTEpcmV0dXJuYCR7cy5zbGljZSh1KzE0KS5yZXBsYWNlKC9cLy9nLCIuIil9OiR7aX1gO2lmKHMuc3RhcnRzV2l0aChuKSl7bGV0IHQ9cy5zbGljZShuLmxlbmd0aCsxKS5yZXBsYWNlKC9cLy9nLCIuIik7cmV0dXJuIHQmJih0Kz0iOiIpLHQrPWksdH1yZXR1cm4gaX19KGllLmFwcFJvb3RQYXRoKTooKT0+e30sYz1zLm1hcCgodD0+ZnVuY3Rpb24odCxlLG4pe2NvbnN0IHI9ZT9lLnJlcGxhY2UoL15maWxlOlwvXC8vLCIiKTp2b2lkIDAsbz10LmxvY2F0aW9uLmNvbHVtbk51bWJlcj90LmxvY2F0aW9uLmNvbHVtbk51bWJlcisxOnZvaWQgMCxzPXQubG9jYXRpb24ubGluZU51bWJlcj90LmxvY2F0aW9uLmxpbmVOdW1iZXIrMTp2b2lkIDA7cmV0dXJuIE8oe2ZpbGVuYW1lOnIsbW9kdWxlOm4ociksZnVuY3Rpb246dC5mdW5jdGlvbk5hbWV8fEEsY29sbm86byxsaW5lbm86cyxpbl9hcHA6cj9WKHIpOnZvaWQgMH0pfSh0LGUuZ2V0KHQubG9jYXRpb24uc2NyaXB0SWQpLGkpKSksdT1zZXRUaW1lb3V0KCgoKT0+e2dlKGMpLnRoZW4obnVsbCwoKCk9PnthZSgiU2VuZGluZyBBTlIgZXZlbnQgZmFpbGVkLiIpfSkpfSksNWUzKTt0LnBvc3QoIlJ1bnRpbWUuZXZhbHVhdGUiLHtleHByZXNzaW9uOiJnbG9iYWwuX19TRU5UUllfR0VUX1NDT1BFU19fKCk7IixzaWxlbnQ6ITAscmV0dXJuQnlWYWx1ZTohMH0sKChlLG4pPT57ZSYmYWUoYEVycm9yIGV4ZWN1dGluZyBzY3JpcHQ6ICcke2UubWVzc2FnZX0nYCksY2xlYXJUaW1lb3V0KHUpO2NvbnN0IHI9biYmbi5yZXN1bHQ/bi5yZXN1bHQudmFsdWU6dm9pZCAwO3QucG9zdCgiRGVidWdnZXIucmVzdW1lIiksdC5wb3N0KCJEZWJ1Z2dlci5kaXNhYmxlIiksZ2UoYyxyKS50aGVuKG51bGwsKCgpPT57YWUoIlNlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZC4iKX0pKX0pKX1jYXRjaChlKXt0aHJvdyB0LnBvc3QoIkRlYnVnZ2VyLnJlc3VtZSIpLHQucG9zdCgiRGVidWdnZXIuZGlzYWJsZSIpLGV9fSkpLHllPSgpPT57dHJ5e3QucG9zdCgiRGVidWdnZXIuZW5hYmxlIiwoKCk9Pnt0LnBvc3QoIkRlYnVnZ2VyLnBhdXNlIil9KSl9Y2F0Y2godCl7fX19Y29uc3R7cG9sbDpiZX09ZnVuY3Rpb24odCxlLG4scil7Y29uc3Qgbz10KCk7bGV0IHM9ITEsaT0hMDtyZXR1cm4gc2V0SW50ZXJ2YWwoKCgpPT57Y29uc3QgdD1vLmdldFRpbWVNcygpOyExPT09cyYmdD5lK24mJihzPSEwLGkmJnIoKSksdDxlK24mJihzPSExKX0pLDIwKSx7cG9sbDooKT0+e28ucmVzZXQoKX0sZW5hYmxlZDp0PT57aT10fX19KChmdW5jdGlvbigpe2xldCB0PXByb2Nlc3MuaHJ0aW1lKCk7cmV0dXJue2dldFRpbWVNczooKT0+e2NvbnN0W2Usbl09cHJvY2Vzcy5ocnRpbWUodCk7cmV0dXJuIE1hdGguZmxvb3IoMWUzKmUrbi8xZTYpfSxyZXNldDooKT0+e3Q9cHJvY2Vzcy5ocnRpbWUoKX19fSksaWUucG9sbEludGVydmFsLGllLmFuclRocmVzaG9sZCwoZnVuY3Rpb24oKXthZSgiV2F0Y2hkb2cgdGltZW91dCIpLHllPyhhZSgiUGF1c2luZyBkZWJ1Z2dlciB0byBjYXB0dXJlIHN0YWNrIHRyYWNlIikseWUoKSk6KGFlKCJDYXB0dXJpbmcgZXZlbnQgd2l0aG91dCBhIHN0YWNrIHRyYWNlIiksZ2UoKS50aGVuKG51bGwsKCgpPT57YWUoIlNlbmRpbmcgQU5SIGV2ZW50IGZhaWxlZCBvbiB3YXRjaGRvZyB0aW1lb3V0LiIpfSkpKX0pKTt0Py5vbigibWVzc2FnZSIsKHQ9Pnt0LnNlc3Npb24mJihjZT1mdCh0LnNlc3Npb24pKSxiZSgpfSkpOw==";function fB(t,...n){ut.log(`[ANR] ${t}`,...n)}function dB(){const t=WU().getScopeData();return QW(t,UU().getScopeData()),QW(t,XU().getScopeData()),t.attachments=[],t.eventProcessors=[],t}const hB=(t={})=>{if(IK.major<16||16===IK.major&&IK.minor<17)throw new Error("ANR detection requires Node 16.17.0 or later");let n,e;return tt.__SENTRY_GET_SCOPES__=dB,{name:"Anr",startWorker:()=>{n||e&&(n=async function(t,n){const e=t.getDsn();if(!e)return()=>{};const r=await async function(t){let n={message:"ANR"};const e={};for(const r of t.getEventProcessors()){if(null===n)break;n=await r(n,e)}return Qn([n,"optionalAccess",t=>t.contexts])||{}}(t);$n([r,"access",t=>t.app,"optionalAccess",t=>delete t.app_memory]),$n([r,"access",t=>t.device,"optionalAccess",t=>delete t.free_memory]);const o=t.getOptions(),i=t.getSdkMetadata()||{};i.sdk&&(i.sdk.integrations=o.integrations.map((t=>t.name)));const s={debug:ut.isEnabled(),dsn:e,tunnel:o.tunnel,environment:o.environment||"production",release:o.release,dist:o.dist,sdkMetadata:i,appRootPath:n.appRootPath,pollInterval:n.pollInterval||50,anrThreshold:n.anrThreshold||5e3,captureStackTrace:!!n.captureStackTrace,staticTags:n.staticTags||{},contexts:r};s.captureStackTrace&&(w.url()||w.open(0));const c=new S.Worker(new URL(`data:application/javascript;base64,${lB}`),{workerData:s,execArgv:[]});process.on("exit",(()=>{c.terminate()}));const u=setInterval((()=>{try{const t=XU().getSession(),n=t?{...t,toJSON:void 0}:void 0;c.postMessage({session:n})}catch(t){}}),s.pollInterval);return u.unref(),c.on("message",(t=>{"session-ended"===t&&(fB("ANR event sent from ANR worker. Clearing session in this thread."),XU().setSession(void 0))})),c.once("error",(t=>{clearInterval(u),fB("ANR worker error",t)})),c.once("exit",(t=>{clearInterval(u),fB("ANR worker exit",t)})),c.unref(),()=>{c.terminate(),clearInterval(u)}}(e,t))},stopWorker:()=>{n&&n.then((t=>{t(),n=void 0}))},setup(t){e=t,setImmediate((()=>this.startWorker()))}}};var pB={},SB={},EB=xt(Pj),mB={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressLayerType=void 0,function(t){t.ROUTER="router",t.MIDDLEWARE="middleware",t.REQUEST_HANDLER="request_handler"}(t.ExpressLayerType||(t.ExpressLayerType={}))}(mB);var TB={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.EXPRESS_TYPE="express.type",t.EXPRESS_NAME="express.name"}(t.AttributeNames||(t.AttributeNames={}))}(TB);var _B={},bB={};Object.defineProperty(bB,"__esModule",{value:!0}),bB.Eo=bB.kLayerPatched=void 0,bB.kLayerPatched=Symbol("express-layer-patched"),bB.Eo="__ot_middlewares",Object.defineProperty(_B,"__esModule",{value:!0}),_B.asErrorAndMessage=_B.isLayerIgnored=_B.getLayerMetadata=_B.storeLayerPath=void 0;const vB=mB,yB=TB,RB=bB;_B.storeLayerPath=(t,n)=>{!1===Array.isArray(t[RB.Eo])&&Object.defineProperty(t,RB.Eo,{enumerable:!1,value:[]}),void 0!==n&&t[RB.Eo].push(n)};_B.getLayerMetadata=(t,n)=>"router"===t.name?{attributes:{[yB.AttributeNames.EXPRESS_NAME]:n,[yB.AttributeNames.EXPRESS_TYPE]:vB.ExpressLayerType.ROUTER},name:`router - ${n}`}:"bound dispatch"===t.name?{attributes:{[yB.AttributeNames.EXPRESS_NAME]:null!=n?n:"request handler",[yB.AttributeNames.EXPRESS_TYPE]:vB.ExpressLayerType.REQUEST_HANDLER},name:"request handler"+(t.path?` - ${n}`:"")}:{attributes:{[yB.AttributeNames.EXPRESS_NAME]:t.name,[yB.AttributeNames.EXPRESS_TYPE]:vB.ExpressLayerType.MIDDLEWARE},name:`middleware - ${t.name}`};const AB=(t,n)=>{if("string"==typeof n)return n===t;if(n instanceof RegExp)return n.test(t);if("function"==typeof n)return n(t);throw new TypeError("Pattern is in unsupported datatype")};_B.isLayerIgnored=(t,n,e)=>{var r;if(Array.isArray(null==e?void 0:e.ignoreLayersType)&&(null===(r=null==e?void 0:e.ignoreLayersType)||void 0===r?void 0:r.includes(n)))return!0;if(!1===Array.isArray(null==e?void 0:e.ignoreLayers))return!1;try{for(const n of e.ignoreLayers)if(AB(t,n))return!0}catch(t){}return!1};_B.asErrorAndMessage=t=>t instanceof Error?[t,t.message]:[String(t),String(t)];var OB={};function gB(t){void 0===t&&(t=[]);for(var n=[],e=0,r=t.length;e<r;e++){var o=t[e];if(Array.isArray(o)){var i=gB(o);n=n.concat(i.instrumentations)}else"function"==typeof o?n.push(new o):o.instrumentationName&&n.push(o)}return{instrumentations:n}}Object.defineProperty(OB,"__esModule",{value:!0}),OB.VERSION=void 0,OB.VERSION="0.35.0";var NB=function(){return NB=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},NB.apply(this,arguments)},CB=function(){function t(t,n,e){void 0===e&&(e={}),this.instrumentationName=t,this.instrumentationVersion=n,this.yt=yy.wrap,this.Rt=yy.unwrap,this.At=yy.massWrap,this.Ot=yy.massUnwrap,this.Nt=NB({enabled:!0},e),this.Ct=Yr.createComponentLogger({namespace:t}),this.Lt=ro.getTracer(t,n),this.It=xr.getMeter(t,n),this.Mt()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this.It=t.getMeter(this.instrumentationName,this.instrumentationVersion),this.Mt()},t.prototype.Mt=function(){},t.prototype.getConfig=function(){return this.Nt},t.prototype.setConfig=function(t){void 0===t&&(t={}),this.Nt=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this.Lt=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),t}(),LB=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},IB=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},wB=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},MB="/",ZB=function(){this.hooks=[],this.children=new Map},PB=function(){function t(){this.en=new ZB,this.rn=0}return t.prototype.insert=function(t){var n,e,r=this.en;try{for(var o=LB(t.moduleName.split(MB)),i=o.next();!i.done;i=o.next()){var s=i.value,c=r.children.get(s);c||(c=new ZB,r.children.set(s,c)),r=c}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}r.hooks.push({hook:t,insertedId:this.rn++})},t.prototype.search=function(t,n){var e,r,o=void 0===n?{}:n,i=o.maintainInsertionOrder,s=o.fullOnly,c=this.en,u=[],a=!0;try{for(var l=LB(t.split(MB)),f=l.next();!f.done;f=l.next()){var d=f.value,h=c.children.get(d);if(!h){a=!1;break}s||u.push.apply(u,wB([],IB(h.hooks),!1)),c=h}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s&&a&&u.push.apply(u,wB([],IB(c.hooks),!1)),0===u.length?[]:1===u.length?[u[0].hook]:(i&&u.sort((function(t,n){return t.insertedId-n.insertedId})),u.map((function(t){return t.hook})))},t}(),VB=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},GB=["afterEach","after","beforeEach","before","describe","it"].every((function(t){return"function"==typeof global[t]})),XB=function(){function t(){this.sn=new PB,this.cn()}return t.prototype.cn=function(){var t=this;new qR(null,{internals:!0},(function(n,e,r){var o,i,s,c=(s=e,C.sep!==MB?s.split(C.sep).join(MB):s),u=t.sn.search(c,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var a=VB(u),l=a.next();!l.done;l=a.next()){n=(0,l.value.onRequire)(n,e,r)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n}))},t.prototype.register=function(t,n){var e={moduleName:t,onRequire:n};return this.sn.insert(e),e},t.getInstance=function(){var n;return GB?new t:this.L=null!==(n=this.L)&&void 0!==n?n:new t},t}();var UB=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),WB=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},YB=function(t){function n(n,r,o){void 0===o&&(o={});var i=t.call(this,n,r,o)||this;i.an=[],i.ln=XB.getInstance(),i.fn=!1,i.yt=function(t,n,r){if(e.types.isProxy(t)){var o=yy.wrap(Object.assign({},t),n,r);return Object.defineProperty(t,n,{value:o})}return yy.wrap(t,n,r)},i.Rt=function(t,n){return e.types.isProxy(t)?Object.defineProperty(t,n,{value:t[n]}):yy.unwrap(t,n)},i.At=function(t,n,e){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.yt(t,n,e)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")},i.Ot=function(t,n){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.Rt(t,n)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")};var s=i.init();return s&&!Array.isArray(s)&&(s=[s]),i.dn=s||[],0===i.dn.length&&Yr.debug("No modules instrumentation has been defined for '"+i.instrumentationName+"@"+i.instrumentationVersion+"', nothing will be patched"),i.Nt.enabled&&i.enable(),i}return UB(n,t),n.prototype.hn=function(){var t=this;this.dn.forEach((function(n){var e=n.name;try{var r=require.resolve(e);require.cache[r]&&t.Ct.warn("Module "+e+" has been loaded before "+t.instrumentationName+" so it might not work, please initialize it before requiring "+e)}catch(t){}}))},n.prototype.pn=function(t){try{var n=Ix(C.join(t,"package.json")).version;return"string"==typeof n?n:void 0}catch(n){Yr.warn("Failed extracting version",t)}},n.prototype.Sn=function(t,n,e,r){var o,i=this;if(!r)return"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?t.patch(n):n;var s=this.pn(r);return t.moduleVersion=s,t.name===e?HB(t.supportedVersions,s,t.includePrerelease)&&"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?t.patch(n,t.moduleVersion):n:(null!==(o=t.files)&&void 0!==o?o:[]).filter((function(t){return t.name===e})).filter((function(n){return HB(n.supportedVersions,s,t.includePrerelease)})).reduce((function(n,e){return e.moduleExports=n,i.fn?e.patch(n,t.moduleVersion):n}),n)},n.prototype.enable=function(){var t,n,e,r,o,i,s=this;if(!this.fn)if(this.fn=!0,this.an.length>0)try{for(var c=WB(this.dn),u=c.next();!u.done;u=c.next()){var a=u.value;"function"==typeof a.patch&&a.moduleExports&&a.patch(a.moduleExports,a.moduleVersion);try{for(var l=(e=void 0,WB(a.files)),f=l.next();!f.done;f=l.next()){var d=f.value;d.moduleExports&&d.patch(d.moduleExports,a.moduleVersion)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else{this.hn();var h=function(t){var n=function(n,e,r){return s.Sn(t,n,e,r)},e=C.isAbsolute(t.name)?new qR([t.name],{internals:!0},n):p.ln.register(t.name,n);p.an.push(e);var r=new ik([t.name],{internals:!1},(function(n,e,r){return s.Sn(t,n,e,r)}));p.an.push(r)},p=this;try{for(var S=WB(this.dn),E=S.next();!E.done;E=S.next()){h(E.value)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}},n.prototype.disable=function(){var t,n,e,r;if(this.fn){this.fn=!1;try{for(var o=WB(this.dn),i=o.next();!i.done;i=o.next()){var s=i.value;"function"==typeof s.unpatch&&s.moduleExports&&s.unpatch(s.moduleExports,s.moduleVersion);try{for(var c=(e=void 0,WB(s.files)),u=c.next();!u.done;u=c.next()){var a=u.value;a.moduleExports&&a.unpatch(a.moduleExports,s.moduleVersion)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},n.prototype.isEnabled=function(){return this.fn},n}(CB);function HB(t,n,e){return void 0===n?t.includes("*"):t.some((function(t){return ny.satisfies(n,t,{includePrerelease:e})}))}var DB=function(t,n,e,r,o){this.name=t,this.supportedVersions=n,this.patch=e,this.unpatch=r,this.files=o||[]},jB=function(t,e,r,o){this.supportedVersions=e,this.patch=r,this.unpatch=o,this.name=n.normalize(t)},xB=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},kB=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var KB=Object.freeze({__proto__:null,InstrumentationBase:YB,InstrumentationNodeModuleDefinition:DB,InstrumentationNodeModuleFile:jB,isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},registerInstrumentations:function(t){var n=gB(t.instrumentations).instrumentations,e=t.tracerProvider||ro.getTracerProvider(),r=t.meterProvider||xr.getMeterProvider();return function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];n&&i.setTracerProvider(n),e&&i.setMeterProvider(e),i.getConfig().enabled||i.enable()}}(n,e,r),function(){!function(t){t.forEach((function(t){return t.disable()}))}(n)}},safeExecuteInTheMiddle:function(t,n,e){var r,o;try{o=t()}catch(t){r=t}finally{if(n(r,o),r&&!e)throw r;return o}},safeExecuteInTheMiddleAsync:function(t,n,e){return xB(this,void 0,void 0,(function(){var r,o,i;return kB(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,t()];case 1:return o=s.sent(),[3,4];case 2:return i=s.sent(),r=i,[3,4];case 3:if(n(r,o),r&&!e)throw r;return[2,o];case 4:return[2]}}))}))}}),BB=xt(KB),FB=xt(_U);Object.defineProperty(SB,"__esModule",{value:!0}),SB.ExpressInstrumentation=void 0;const JB=EB,zB=io,QB=mB,$B=TB,qB=_B,tF=OB,nF=BB,eF=FB,rF=bB;class oF extends nF.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-express",tF.VERSION,Object.assign({},t))}setConfig(t={}){this.Nt=Object.assign({},t)}getConfig(){return this.Nt}init(){return[new nF.InstrumentationNodeModuleDefinition("express",["^4.0.0"],((t,n)=>{zB.diag.debug(`Applying patch for express@${n}`);const e=t.Router;return(0,nF.isWrapped)(e.route)&&this.Rt(e,"route"),this.yt(e,"route",this.mo()),(0,nF.isWrapped)(e.use)&&this.Rt(e,"use"),this.yt(e,"use",this.To()),(0,nF.isWrapped)(t.application.use)&&this.Rt(t.application,"use"),this.yt(t.application,"use",this._o()),t}),((t,n)=>{if(void 0===t)return;zB.diag.debug(`Removing patch for express@${n}`);const e=t.Router;this.Rt(e,"route"),this.Rt(e,"use"),this.Rt(t.application,"use")}))]}mo(){const t=this;return function(n){return function(...e){const r=n.apply(this,e),o=this.stack[this.stack.length-1];return t.bo(o,"string"==typeof e[0]?e[0]:void 0),r}}}To(){const t=this;return function(n){return function(...e){const r=n.apply(this,e),o=this.stack[this.stack.length-1];return t.bo(o,"string"==typeof e[0]?e[0]:void 0),r}}}_o(){const t=this;return function(n){return function(...e){const r=n.apply(this,e),o=this.vo.stack[this.vo.stack.length-1];return t.bo.call(t,o,"string"==typeof e[0]?e[0]:void 0),r}}}bo(t,n){const e=this;!0!==t[rF.kLayerPatched]&&(t[rF.kLayerPatched]=!0,this.yt(t,"handle",(r=>4===r.length?r:function(o,i){(0,qB.storeLayerPath)(o,n);const s=o[rF.Eo].filter((t=>"/"!==t&&"/*"!==t)).join(""),c={[eF.SemanticAttributes.HTTP_ROUTE]:s.length>0?s:"/"},u=(0,qB.getLayerMetadata)(t,n),a=u.attributes[$B.AttributeNames.EXPRESS_TYPE],l=(0,JB.getRPCMetadata)(zB.context.active());if((null==l?void 0:l.type)===JB.RPCType.HTTP&&(l.route=s||"/"),(0,qB.isLayerIgnored)(u.name,a,e.Nt))return a===QB.ExpressLayerType.MIDDLEWARE&&o[rF.Eo].pop(),r.apply(this,arguments);if(void 0===zB.trace.getSpan(zB.context.active()))return r.apply(this,arguments);const f=e.yo({request:o,layerType:a,route:s},u.name),d=e.tracer.startSpan(f,{attributes:Object.assign(c,u.attributes)});e.getConfig().requestHook&&(0,nF.safeExecuteInTheMiddle)((()=>e.getConfig().requestHook(d,{request:o,layerType:a,route:s})),(t=>{t&&zB.diag.error("express instrumentation: request hook failed",t)}),!0);let h=!1;u.attributes[$B.AttributeNames.EXPRESS_TYPE]!==QB.ExpressLayerType.MIDDLEWARE&&(d.end(),h=!0);const p=()=>{!1===h&&(h=!0,d.end())},S=Array.from(arguments),E=S.findIndex((t=>"function"==typeof t));E>=0&&(arguments[E]=function(){var t;const n=arguments[0],e=![void 0,null,"route","router"].includes(n);if(!h&&e){const[t,e]=(0,qB.asErrorAndMessage)(n);d.recordException(t),d.setStatus({code:zB.SpanStatusCode.ERROR,message:e})}!1===h&&(h=!0,null===(t=o.res)||void 0===t||t.removeListener("finish",p),d.end()),o.route&&e||o[rF.Eo].pop();return S[E].apply(this,arguments)});try{return r.apply(this,arguments)}catch(t){const[n,e]=(0,qB.asErrorAndMessage)(t);throw d.recordException(n),d.setStatus({code:zB.SpanStatusCode.ERROR,message:e}),t}finally{h||i.once("finish",p)}})))}yo(t,n){var e;const r=this.getConfig().spanNameHook;if(!(r instanceof Function))return n;try{return null!==(e=r(t,n))&&void 0!==e?e:n}catch(t){return zB.diag.error("express instrumentation: error calling span name rewrite hook",t),n}}}SB.ExpressInstrumentation=oF;var iF={};Object.defineProperty(iF,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(SB,t),e(mB,t),e(TB,t),e(iF,t)}(pB);const sF={};function cF(t,n){return Object.assign((e=>{if(sF[t])return void(e&&sF[t].setConfig(e));const r=n(e);sF[t]=r,vK(r)}),{id:t})}function uF(){return void 0!==Ix}function aF(t,n){!function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped}(t)&&function(){const t=DU();return!!t&&!1!==t.getOptions().enabled&&!!t.getTransport()}()&&OW()&&ct((()=>{uF()?console.warn(`[Sentry] ${n} is not instrumented. This is likely because you required/imported ${n} before calling \`Sentry.init()\`.`):console.warn(`[Sentry] ${n} is not instrumented. Please make sure to initialize Sentry in a separate file that you \`--import\` when running node, see: https://docs.sentry.io/platforms/javascript/guides/${n}/install/esm/.`)}))}const lF="Express",fF=cF(lF,(()=>new pB.ExpressInstrumentation({requestHook(t){yK(t,"auto.http.otel.express");const n=uW(t).data||{},e=n["express.type"];e&&t.setAttribute(FU,`${e}.express`);const r=n["express.name"];"string"==typeof r&&t.updateName(r)},spanNameHook(t,n){if(UU()===IU())return n;if("request_handler"===t.layerType){const n=t.request,e=n.method?n.method.toUpperCase():"GET";UU().setTransactionName(`${e} ${t.route}`)}return n}}))),dF=()=>({name:lF,setupOnce(){fF()}});function hF(t){return function(n,e,r,o){if((Qn([t,"optionalAccess",t=>t.shouldHandleError])||pF)(n)){const t=DU();if(t&&t.getOptions().autoSessionTracking){if(void 0!==t.De){const t=UU().getRequestSession();t&&void 0!==t.status&&(t.status="crashed")}}const e=captureException(n,{mechanism:{type:"middleware",handled:!1}});return r.sentry=e,void o(n)}o(n)}}function pF(t){const n=function(t){const n=t.status||t.statusCode||t.status_code||t.output&&t.output.statusCode;return n?parseInt(n,10):500}(t);return n>=500}var SF={},EF={};!function(t){var n,e;Object.defineProperty(t,"__esModule",{value:!0}),t.FastifyNames=t.FastifyTypes=t.AttributeNames=void 0,function(t){t.FASTIFY_NAME="fastify.name",t.FASTIFY_TYPE="fastify.type",t.HOOK_NAME="hook.name",t.PLUGIN_NAME="plugin.name"}(t.AttributeNames||(t.AttributeNames={})),(n=t.FastifyTypes||(t.FastifyTypes={})).MIDDLEWARE="middleware",n.REQUEST_HANDLER="request_handler",(e=t.FastifyNames||(t.FastifyNames={})).MIDDLEWARE="middleware",e.REQUEST_HANDLER="request handler"}(EF);var mF={};Object.defineProperty(mF,"__esModule",{value:!0});var TF={},_F=xt(pk),bF={};Object.defineProperty(bF,"__esModule",{value:!0}),bF.hooksNamesToWrap=bF.spanRequestSymbol=void 0,bF.spanRequestSymbol=Symbol("opentelemetry.instrumentation.fastify.request_active_span"),bF.hooksNamesToWrap=new Set(["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError"]);var vF={};Object.defineProperty(vF,"__esModule",{value:!0}),vF.safeExecuteInTheMiddleMaybePromise=vF.endSpan=vF.startSpan=void 0;const yF=io,RF=bF;function AF(t){var n;return"object"==typeof t&&t&&"function"==typeof(null===(n=Object.getOwnPropertyDescriptor(t,"then"))||void 0===n?void 0:n.value)||!1}vF.startSpan=function(t,n,e,r={}){const o=n.startSpan(e,{attributes:r}),i=t[RF.spanRequestSymbol]||[];return i.push(o),Object.defineProperty(t,RF.spanRequestSymbol,{enumerable:!1,configurable:!0,value:i}),o},vF.endSpan=function(t,n){const e=t[RF.spanRequestSymbol]||[];e.length&&(e.forEach((t=>{n&&(t.setStatus({code:yF.SpanStatusCode.ERROR,message:n.message}),t.recordException(n)),t.end()})),delete t[RF.spanRequestSymbol])},vF.safeExecuteInTheMiddleMaybePromise=function(t,n,e){let r,o;try{o=t(),AF(o)&&o.then((t=>n(void 0,t)),(t=>n(t)))}catch(t){r=t}finally{if(!AF(o)&&(n(r,o),r&&!e))throw r;return o}};var OF={};Object.defineProperty(OF,"__esModule",{value:!0}),OF.VERSION=void 0,OF.VERSION="0.35.0",function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FastifyInstrumentation=t.ANONYMOUS_NAME=void 0;const n=io,e=EB,r=_F,o=FB,i=bF,s=EF,c=vF,u=OF;t.ANONYMOUS_NAME="anonymous";class a extends r.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-fastify",u.VERSION,Object.assign({},t))}setConfig(t={}){this.Nt=Object.assign({},t)}getConfig(){return this.Nt}init(){return[new r.InstrumentationNodeModuleDefinition("fastify",["^3.0.0","^4.0.0"],((t,n)=>(this.Ct.debug(`Applying patch for fastify@${n}`),this.Ro(t))))]}Ao(){const t=this;return function(r,o,i){if(!t.isEnabled())return i();t.yt(o,"send",t.Oo());const s=r,c=(0,e.getRPCMetadata)(n.context.active()),u=s.routeOptions?s.routeOptions.url:r.routerPath;u&&(null==c?void 0:c.type)===e.RPCType.HTTP&&(c.route=u),i()}}No(e,r,o,i){const u=this;return this.Ct.debug("Patching fastify route.handler function"),function(...a){if(!u.isEnabled())return o.apply(this,a);const l=o.name||e||t.ANONYMOUS_NAME,f=`${s.FastifyNames.MIDDLEWARE} - ${l}`,d=a[1],h=(0,c.startSpan)(d,u.tracer,f,{[s.AttributeNames.FASTIFY_TYPE]:s.FastifyTypes.MIDDLEWARE,[s.AttributeNames.PLUGIN_NAME]:e,[s.AttributeNames.HOOK_NAME]:r}),p=i&&a[a.length-1];return p&&(a[a.length-1]=function(...t){(0,c.endSpan)(d),p.apply(this,t)}),n.context.with(n.trace.setSpan(n.context.active(),h),(()=>(0,c.safeExecuteInTheMiddleMaybePromise)((()=>o.apply(this,a)),(t=>{t instanceof Error&&(h.setStatus({code:n.SpanStatusCode.ERROR,message:t.message}),h.recordException(t)),i||(0,c.endSpan)(d)}))))}}Co(){const t=this;return this.Ct.debug("Patching fastify server.addHook function"),function(n){return function(...e){const r=e[0],o=e[1],s=this.pluginName;if(!i.hooksNamesToWrap.has(r))return n.apply(this,e);const c="function"==typeof e[e.length-1]&&"AsyncFunction"!==o.constructor.name;return n.apply(this,[r,t.No(s,r,o,c)])}}}Ro(t){const n=this;function e(...e){const r=t.fastify.apply(this,e);return r.addHook("onRequest",n.Ao()),r.addHook("preHandler",n.Lo()),n.yt(r,"addHook",n.Co()),r}return this.Ct.debug("Patching fastify constructor function"),e.fastify=e,e.default=e,e}Oo(){const t=this;return this.Ct.debug("Patching fastify reply.send function"),function(n){return function(...e){const o=e[0];return t.isEnabled()?(0,r.safeExecuteInTheMiddle)((()=>n.apply(this,e)),(t=>{!t&&o instanceof Error&&(t=o),(0,c.endSpan)(this,t)})):n.apply(this,e)}}}Lo(){const e=this;return this.Ct.debug("Patching fastify preHandler function"),function(i,u,a){var l,f;if(!e.isEnabled())return a();const d=i,h=(null===(l=d.routeOptions)||void 0===l?void 0:l.handler)||(null===(f=d.context)||void 0===f?void 0:f.handler),p=(null==h?void 0:h.name.startsWith("bound "))?h.name.substr(6):null==h?void 0:h.name,S=`${s.FastifyNames.REQUEST_HANDLER} - ${p||this.pluginName||t.ANONYMOUS_NAME}`,E={[s.AttributeNames.PLUGIN_NAME]:this.pluginName,[s.AttributeNames.FASTIFY_TYPE]:s.FastifyTypes.REQUEST_HANDLER,[o.SemanticAttributes.HTTP_ROUTE]:d.routeOptions?d.routeOptions.url:i.routerPath};p&&(E[s.AttributeNames.FASTIFY_NAME]=p);const m=(0,c.startSpan)(u,e.tracer,S,E);return e.getConfig().requestHook&&(0,r.safeExecuteInTheMiddle)((()=>e.getConfig().requestHook(m,{request:i})),(t=>{t&&e.Ct.error("request hook failed",t)}),!0),n.context.with(n.trace.setSpan(n.context.active(),m),(()=>{a()}))}}}t.FastifyInstrumentation=a}(TF),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(EF,t),e(mF,t),e(TF,t)}(SF);const gF="Fastify",NF=cF(gF,(()=>new SF.FastifyInstrumentation({requestHook(t){!function(t){const n=uW(t).data||{},e=n["fastify.type"];if(n[FU]||!e)return;t.setAttributes({[JU]:"auto.http.otel.fastify",[FU]:`${e}.fastify`});const r=n["fastify.name"]||n["plugin.name"]||n["hook.name"];"string"==typeof r&&t.updateName(r.replace(/^fastify -> /,""))}(t)}}))),CF=()=>({name:gF,setupOnce(){NF()}});var LF={},IF={},wF={};!function(t){var n,e;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanNames=t.TokenKind=t.AllowedOperationTypes=void 0,(n=t.AllowedOperationTypes||(t.AllowedOperationTypes={})).QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription",(e=t.TokenKind||(t.TokenKind={})).SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment",function(t){t.EXECUTE="graphql.execute",t.PARSE="graphql.parse",t.RESOLVE="graphql.resolve",t.VALIDATE="graphql.validate",t.SCHEMA_VALIDATE="graphql.validateSchema",t.SCHEMA_PARSE="graphql.parseSchema"}(t.SpanNames||(t.SpanNames={}))}(wF);var MF={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.SOURCE="graphql.source",t.FIELD_NAME="graphql.field.name",t.FIELD_PATH="graphql.field.path",t.FIELD_TYPE="graphql.field.type",t.OPERATION_TYPE="graphql.operation.type",t.OPERATION_NAME="graphql.operation.name",t.VARIABLES="graphql.variables.",t.ERROR_VALIDATION_NAME="graphql.validation.error"}(t.AttributeNames||(t.AttributeNames={}))}(MF);var ZF={};Object.defineProperty(ZF,"__esModule",{value:!0}),ZF.OTEL_GRAPHQL_DATA_SYMBOL=ZF.OTEL_PATCHED_SYMBOL=void 0,ZF.OTEL_PATCHED_SYMBOL=Symbol.for("opentelemetry.patched"),ZF.OTEL_GRAPHQL_DATA_SYMBOL=Symbol.for("opentelemetry.graphql_data");var PF={};Object.defineProperty(PF,"__esModule",{value:!0}),PF.OPERATION_NOT_SUPPORTED=void 0,PF.OPERATION_NOT_SUPPORTED="Operation$operationName$not supported";var VF={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapFieldResolver=t.wrapFields=t.getSourceFromLocation=t.getOperation=t.endSpan=t.addSpanSource=t.addInputVariableAttributes=t.isPromise=void 0;const n=io,e=wF,r=MF,o=ZF,i=Object.values(e.AllowedOperationTypes);t.isPromise=t=>"function"==typeof(null==t?void 0:t.then);const s=t=>"object"==typeof t&&null!==t;function c(t,n,e){Array.isArray(e)?e.forEach(((e,r)=>{c(t,`${n}.${r}`,e)})):e instanceof Object?Object.entries(e).forEach((([e,r])=>{c(t,`${n}.${e}`,r)})):t.setAttribute(`${r.AttributeNames.VARIABLES}${String(n)}`,e)}function u(t,n,e,o,i){const s=E(n,e,o,i);t.setAttribute(r.AttributeNames.SOURCE,s)}function a(t,n,e,r,i){let s=f(e,i),c=!1;if(!s){c=!0;const u=d(e,i);s={parent:u,span:l(t,n,e,r,i,u.span),error:null},function(t,n,e){t[o.OTEL_GRAPHQL_DATA_SYMBOL].fields[n.join(".")]=e}(e,i,s)}return{spanAdded:c,field:s}}function l(t,i,s,c,a,l){var f,d;const h={[r.AttributeNames.FIELD_NAME]:c.fieldName,[r.AttributeNames.FIELD_PATH]:a.join("."),[r.AttributeNames.FIELD_TYPE]:c.returnType.toString()},p=t.startSpan(`${e.SpanNames.RESOLVE} ${h[r.AttributeNames.FIELD_PATH]}`,{attributes:h},l?n.trace.setSpan(n.context.active(),l):void 0),S=s[o.OTEL_GRAPHQL_DATA_SYMBOL].source,E=c.fieldNodes.find((t=>"Field"===t.kind));return E&&u(p,S.loc,i().allowValues,null===(f=E.loc)||void 0===f?void 0:f.start,null===(d=E.loc)||void 0===d?void 0:d.end),p}function f(t,n){return t[o.OTEL_GRAPHQL_DATA_SYMBOL].fields[n.join(".")]}function d(t,n){for(let e=n.length-1;e>0;e--){const r=f(t,n.slice(0,e));if(r)return r}return{span:t[o.OTEL_GRAPHQL_DATA_SYMBOL].span}}function h(t){return p(" ",t)}function p(t,n){let e="";for(let r=0;r<n;r++)e+=t;return e}t.addInputVariableAttributes=function(t,n){Object.entries(n).forEach((([n,e])=>{c(t,n,e)}))},t.addSpanSource=u,t.endSpan=function(t,n){n&&t.recordException(n),t.end()},t.getOperation=function(t,n){if(t&&Array.isArray(t.definitions))return n?t.definitions.filter((t=>{var n;return-1!==i.indexOf(null===(n=t)||void 0===n?void 0:n.operation)})).find((t=>{var e,r;return n===(null===(r=null===(e=t)||void 0===e?void 0:e.name)||void 0===r?void 0:r.value)})):t.definitions.find((t=>{var n;return-1!==i.indexOf(null===(n=t)||void 0===n?void 0:n.operation)}))};const S=[e.TokenKind.FLOAT,e.TokenKind.STRING,e.TokenKind.INT,e.TokenKind.BLOCK_STRING];function E(t,n=!1,r,o){var i,s;let c="";if(null==t?void 0:t.startToken){const u="number"==typeof r?r:t.start,a="number"==typeof o?o:t.end;let l=t.startToken.next,f=1;for(;l;){if(l.start<u){l=l.next,f=null==l?void 0:l.line;continue}if(l.end>a){l=l.next,f=null==l?void 0:l.line;continue}let t=l.value||l.kind,r="";!n&&S.indexOf(l.kind)>=0&&(t="*"),l.kind===e.TokenKind.STRING&&(t=`"${t}"`),l.kind===e.TokenKind.EOF&&(t=""),l.line>f?(c+=p("\n",l.line-f),f=l.line,r=h(l.column-1)):l.line===(null===(i=l.prev)||void 0===i?void 0:i.line)&&(r=h(l.start-((null===(s=l.prev)||void 0===s?void 0:s.end)||0))),c+=r+t,l&&(l=l.next)}}return c}t.getSourceFromLocation=E,t.wrapFields=function t(n,e,r){if(!n||"function"!=typeof n.getFields||n[o.OTEL_PATCHED_SYMBOL])return;const i=n.getFields();n[o.OTEL_PATCHED_SYMBOL]=!0,Object.keys(i).forEach((n=>{const o=i[n];if(o&&(o.resolve&&(o.resolve=_(e,r,o.resolve)),o.type)){let n=o.type;for(;n.ofType;)n=n.ofType;t(n,e,r)}}))};const m=(t,e,r)=>{r&&(t.recordException(e),t.setStatus({code:n.SpanStatusCode.ERROR,message:e.message}),t.end())},T=(t,n)=>{n&&t.end()};function _(e,r,i,c=!1){if(u[o.OTEL_PATCHED_SYMBOL]||"function"!=typeof i)return i;function u(u,l,f,h){if(!i)return;const p=r();if(p.ignoreTrivialResolveSpans&&c&&(s(u)||"function"==typeof u)){if("function"!=typeof u[h.fieldName])return i.call(this,u,l,f,h)}if(!f[o.OTEL_GRAPHQL_DATA_SYMBOL])return i.call(this,u,l,f,h);const S=function(t,n){const e=[];let r=n;for(;r;){let n=r.key;t&&"number"==typeof n&&(n="*"),e.push(String(n)),r=r.prev}return e.reverse()}(p.mergeItems,h&&h.path),E=S.filter((t=>"string"==typeof t)).length;let _,b=!1;if(p.depth>=0&&p.depth<E)_=d(f,S);else{const t=a(e,r,f,h,S);_=t.field,b=t.spanAdded}return n.context.with(n.trace.setSpan(n.context.active(),_.span),(()=>{try{const n=i.call(this,u,l,f,h);return(0,t.isPromise)(n)?n.then((t=>(T(_.span,b),t)),(t=>{throw m(_.span,t,b),t})):(T(_.span,b),n)}catch(t){throw m(_.span,t,b),t}}))}return u[o.OTEL_PATCHED_SYMBOL]=!0,u}t.wrapFieldResolver=_}(VF);var GF={};Object.defineProperty(GF,"__esModule",{value:!0}),GF.VERSION=void 0,GF.VERSION="0.39.0",Object.defineProperty(IF,"__esModule",{value:!0}),IF.GraphQLInstrumentation=void 0;const XF=io,UF=_F,WF=wF,YF=MF,HF=ZF,DF=PF,jF=VF,xF=GF,kF={mergeItems:!1,depth:-1,allowValues:!1,ignoreResolveSpans:!1},KF=[">=14 <17"];class BF extends UF.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-graphql",xF.VERSION,Object.assign({},kF,t))}vn(){return this.Nt}setConfig(t={}){this.Nt=Object.assign({},kF,t)}init(){const t=new UF.InstrumentationNodeModuleDefinition("graphql",KF);return t.files.push(this.Io()),t.files.push(this.wo()),t.files.push(this.Mo()),t}Io(){return new UF.InstrumentationNodeModuleFile("graphql/execution/execute.js",KF,((t,n)=>(this.Ct.debug(`Applying patch for graphql@${n} execute`),(0,UF.isWrapped)(t.execute)&&this.Rt(t,"execute"),this.yt(t,"execute",this.Zo(t.defaultFieldResolver)),t)),((t,n)=>{t&&(this.Ct.debug(`Removing patch for graphql@${n} execute`),this.Rt(t,"execute"))}))}wo(){return new UF.InstrumentationNodeModuleFile("graphql/language/parser.js",KF,((t,n)=>(this.Ct.debug(`Applying patch for graphql@${n} parse`),(0,UF.isWrapped)(t.parse)&&this.Rt(t,"parse"),this.yt(t,"parse",this.Po()),t)),((t,n)=>{t&&(this.Ct.debug(`Removing patch for graphql@${n} parse`),this.Rt(t,"parse"))}))}Mo(){return new UF.InstrumentationNodeModuleFile("graphql/validation/validate.js",KF,((t,n)=>(this.Ct.debug(`Applying patch for graphql@${n} validate`),(0,UF.isWrapped)(t.validate)&&this.Rt(t,"validate"),this.yt(t,"validate",this.Vo()),t)),((t,n)=>{t&&(this.Ct.debug(`Removing patch for graphql@${n} validate`),this.Rt(t,"validate"))}))}Zo(t){const n=this;return function(e){return function(){let r;if(arguments.length>=2){const e=arguments;r=n.Go(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],t)}else{const e=arguments[0];r=n.Go(e.schema,e.document,e.rootValue,e.contextValue,e.variableValues,e.operationName,e.fieldResolver,e.typeResolver,t)}const o=(0,jF.getOperation)(r.document,r.operationName),i=n.Xo(o,r);return r.contextValue[HF.OTEL_GRAPHQL_DATA_SYMBOL]={source:r.document?r.document||r.document[HF.OTEL_GRAPHQL_DATA_SYMBOL]:void 0,span:i,fields:{}},XF.context.with(XF.trace.setSpan(XF.context.active(),i),(()=>(0,UF.safeExecuteInTheMiddle)((()=>e.apply(this,[r])),((t,e)=>{n.Uo(i,t,e)}))))}}}Uo(t,n,e){const r=this.vn();if(void 0===e||n)(0,jF.endSpan)(t,n);else if((0,jF.isPromise)(e))e.then((n=>{"function"==typeof r.responseHook?this.Wo(t,n):(0,jF.endSpan)(t)}),(n=>{(0,jF.endSpan)(t,n)}));else{if("function"!=typeof r.responseHook)return void(0,jF.endSpan)(t);this.Wo(t,e)}}Wo(t,n){const e=this.vn();(0,UF.safeExecuteInTheMiddle)((()=>{e.responseHook(t,n)}),(n=>{n&&this.Ct.error("Error running response hook",n),(0,jF.endSpan)(t,void 0)}),!0)}Po(){const t=this;return function(n){return function(e,r){return t.W(this,n,e,r)}}}Vo(){const t=this;return function(n){return function(e,r,o,i,s){return t.Yo(this,n,e,r,o,s,i)}}}W(t,n,e,r){const o=this.vn(),i=this.tracer.startSpan(WF.SpanNames.PARSE);return XF.context.with(XF.trace.setSpan(XF.context.active(),i),(()=>(0,UF.safeExecuteInTheMiddle)((()=>n.call(t,e,r)),((t,n)=>{if(n){(0,jF.getOperation)(n)?n.loc&&(0,jF.addSpanSource)(i,n.loc,o.allowValues):i.updateName(WF.SpanNames.SCHEMA_PARSE)}(0,jF.endSpan)(i,t)}))))}Yo(t,n,e,r,o,i,s){const c=this.tracer.startSpan(WF.SpanNames.VALIDATE,{});return XF.context.with(XF.trace.setSpan(XF.context.active(),c),(()=>(0,UF.safeExecuteInTheMiddle)((()=>n.call(t,e,r,o,s,i)),((t,n)=>{r.loc||c.updateName(WF.SpanNames.SCHEMA_VALIDATE),n&&n.length&&c.recordException({name:YF.AttributeNames.ERROR_VALIDATION_NAME,message:JSON.stringify(n)}),(0,jF.endSpan)(c,t)}))))}Xo(t,n){var e;const r=this.vn(),o=this.tracer.startSpan(WF.SpanNames.EXECUTE,{});if(t){const{operation:n,name:e}=t;o.setAttribute(YF.AttributeNames.OPERATION_TYPE,n);const r=null==e?void 0:e.value;r?(o.setAttribute(YF.AttributeNames.OPERATION_NAME,r),o.updateName(`${n} ${r}`)):o.updateName(n)}else{let t=" ";n.operationName&&(t=` "${n.operationName}" `),t=DF.OPERATION_NOT_SUPPORTED.replace("$operationName$",t),o.setAttribute(YF.AttributeNames.OPERATION_NAME,t)}return(null===(e=n.document)||void 0===e?void 0:e.loc)&&(0,jF.addSpanSource)(o,n.document.loc,r.allowValues),n.variableValues&&r.allowValues&&(0,jF.addInputVariableAttributes)(o,n.variableValues),o}Go(t,n,e,r,o,i,s,c,u){if(r||(r={}),r[HF.OTEL_GRAPHQL_DATA_SYMBOL]||this.vn().ignoreResolveSpans)return{schema:t,document:n,rootValue:e,contextValue:r,variableValues:o,operationName:i,fieldResolver:s,typeResolver:c};const a=null==s,l=null!=s?s:u;return s=(0,jF.wrapFieldResolver)(this.tracer,this.vn.bind(this),l,a),t&&((0,jF.wrapFields)(t.getQueryType(),this.tracer,this.vn.bind(this)),(0,jF.wrapFields)(t.getMutationType(),this.tracer,this.vn.bind(this))),{schema:t,document:n,rootValue:e,contextValue:r,variableValues:o,operationName:i,fieldResolver:s,typeResolver:c}}}IF.GraphQLInstrumentation=BF;var FF={};Object.defineProperty(FF,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(IF,t),e(FF,t)}(LF);const JF="Graphql",zF=cF(JF,((t={})=>{const n={ignoreResolveSpans:!0,ignoreTrivialResolveSpans:!0,...t};return new LF.GraphQLInstrumentation({...n,responseHook(t){yK(t,"auto.graphql.otel.graphql")}})})),QF=(t={})=>({name:JF,setupOnce(){zF(t)}});var $F={},qF={};function tJ(t){void 0===t&&(t=[]);for(var n=[],e=0,r=t.length;e<r;e++){var o=t[e];if(Array.isArray(o)){var i=tJ(o);n=n.concat(i.instrumentations)}else"function"==typeof o?n.push(new o):o.instrumentationName&&n.push(o)}return{instrumentations:n}}var nJ=function(){return nJ=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},nJ.apply(this,arguments)},eJ=function(){function t(t,n,e){void 0===e&&(e={}),this.instrumentationName=t,this.instrumentationVersion=n,this.yt=yy.wrap,this.Rt=yy.unwrap,this.At=yy.massWrap,this.Ot=yy.massUnwrap,this.Nt=nJ({enabled:!0},e),this.Ct=Yr.createComponentLogger({namespace:t}),this.Lt=ro.getTracer(t,n),this.It=xr.getMeter(t,n),this.Mt()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this.It=t.getMeter(this.instrumentationName,this.instrumentationVersion),this.Mt()},t.prototype.Mt=function(){},t.prototype.getConfig=function(){return this.Nt},t.prototype.setConfig=function(t){void 0===t&&(t={}),this.Nt=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this.Lt=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),t}(),rJ=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},oJ=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},iJ=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},sJ="/",cJ=function(){this.hooks=[],this.children=new Map},uJ=function(){function t(){this.en=new cJ,this.rn=0}return t.prototype.insert=function(t){var n,e,r=this.en;try{for(var o=rJ(t.moduleName.split(sJ)),i=o.next();!i.done;i=o.next()){var s=i.value,c=r.children.get(s);c||(c=new cJ,r.children.set(s,c)),r=c}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}r.hooks.push({hook:t,insertedId:this.rn++})},t.prototype.search=function(t,n){var e,r,o=void 0===n?{}:n,i=o.maintainInsertionOrder,s=o.fullOnly,c=this.en,u=[],a=!0;try{for(var l=rJ(t.split(sJ)),f=l.next();!f.done;f=l.next()){var d=f.value,h=c.children.get(d);if(!h){a=!1;break}s||u.push.apply(u,iJ([],oJ(h.hooks),!1)),c=h}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s&&a&&u.push.apply(u,iJ([],oJ(c.hooks),!1)),0===u.length?[]:1===u.length?[u[0].hook]:(i&&u.sort((function(t,n){return t.insertedId-n.insertedId})),u.map((function(t){return t.hook})))},t}(),aJ=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},lJ=["afterEach","after","beforeEach","before","describe","it"].every((function(t){return"function"==typeof global[t]})),fJ=function(){function t(){this.sn=new uJ,this.cn()}return t.prototype.cn=function(){var t=this;new qR(null,{internals:!0},(function(n,e,r){var o,i,s,c=(s=e,C.sep!==sJ?s.split(C.sep).join(sJ):s),u=t.sn.search(c,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var a=aJ(u),l=a.next();!l.done;l=a.next()){n=(0,l.value.onRequire)(n,e,r)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n}))},t.prototype.register=function(t,n){var e={moduleName:t,onRequire:n};return this.sn.insert(e),e},t.getInstance=function(){var n;return lJ?new t:this.L=null!==(n=this.L)&&void 0!==n?n:new t},t}();var dJ=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hJ=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},pJ=function(t){function n(n,r,o){void 0===o&&(o={});var i=t.call(this,n,r,o)||this;i.an=[],i.ln=fJ.getInstance(),i.fn=!1,i.yt=function(t,n,r){if(e.types.isProxy(t)){var o=yy.wrap(Object.assign({},t),n,r);return Object.defineProperty(t,n,{value:o})}return yy.wrap(t,n,r)},i.Rt=function(t,n){return e.types.isProxy(t)?Object.defineProperty(t,n,{value:t[n]}):yy.unwrap(t,n)},i.At=function(t,n,e){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.yt(t,n,e)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")},i.Ot=function(t,n){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.Rt(t,n)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")};var s=i.init();return s&&!Array.isArray(s)&&(s=[s]),i.dn=s||[],0===i.dn.length&&Yr.debug("No modules instrumentation has been defined for '"+i.instrumentationName+"@"+i.instrumentationVersion+"', nothing will be patched"),i.Nt.enabled&&i.enable(),i}return dJ(n,t),n.prototype.hn=function(){var t=this;this.dn.forEach((function(n){var e=n.name;try{var r=require.resolve(e);require.cache[r]&&t.Ct.warn("Module "+e+" has been loaded before "+t.instrumentationName+" so it might not work, please initialize it before requiring "+e)}catch(t){}}))},n.prototype.pn=function(t){try{var n=Ix(C.join(t,"package.json")).version;return"string"==typeof n?n:void 0}catch(n){Yr.warn("Failed extracting version",t)}},n.prototype.Sn=function(t,n,e,r){var o,i=this;if(!r)return"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?t.patch(n):n;var s=this.pn(r);return t.moduleVersion=s,t.name===e?SJ(t.supportedVersions,s,t.includePrerelease)&&"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?t.patch(n,t.moduleVersion):n:(null!==(o=t.files)&&void 0!==o?o:[]).filter((function(t){return t.name===e})).filter((function(n){return SJ(n.supportedVersions,s,t.includePrerelease)})).reduce((function(n,e){return e.moduleExports=n,i.fn?e.patch(n,t.moduleVersion):n}),n)},n.prototype.enable=function(){var t,n,e,r,o,i,s=this;if(!this.fn)if(this.fn=!0,this.an.length>0)try{for(var c=hJ(this.dn),u=c.next();!u.done;u=c.next()){var a=u.value;"function"==typeof a.patch&&a.moduleExports&&a.patch(a.moduleExports,a.moduleVersion);try{for(var l=(e=void 0,hJ(a.files)),f=l.next();!f.done;f=l.next()){var d=f.value;d.moduleExports&&d.patch(d.moduleExports,a.moduleVersion)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else{this.hn();var h=function(t){var n=function(n,e,r){return s.Sn(t,n,e,r)},e=C.isAbsolute(t.name)?new qR([t.name],{internals:!0},n):p.ln.register(t.name,n);p.an.push(e);var r=new ik([t.name],{internals:!1},(function(n,e,r){return s.Sn(t,n,e,r)}));p.an.push(r)},p=this;try{for(var S=hJ(this.dn),E=S.next();!E.done;E=S.next()){h(E.value)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}},n.prototype.disable=function(){var t,n,e,r;if(this.fn){this.fn=!1;try{for(var o=hJ(this.dn),i=o.next();!i.done;i=o.next()){var s=i.value;"function"==typeof s.unpatch&&s.moduleExports&&s.unpatch(s.moduleExports,s.moduleVersion);try{for(var c=(e=void 0,hJ(s.files)),u=c.next();!u.done;u=c.next()){var a=u.value;a.moduleExports&&a.unpatch(a.moduleExports,s.moduleVersion)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},n.prototype.isEnabled=function(){return this.fn},n}(eJ);function SJ(t,n,e){return void 0===n?t.includes("*"):t.some((function(t){return ny.satisfies(n,t,{includePrerelease:e})}))}var EJ=function(t,n,e,r,o){this.name=t,this.supportedVersions=n,this.patch=e,this.unpatch=r,this.files=o||[]},mJ=function(t,e,r,o){this.supportedVersions=e,this.patch=r,this.unpatch=o,this.name=n.normalize(t)},TJ=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},_J=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var bJ=Object.freeze({__proto__:null,InstrumentationBase:pJ,InstrumentationNodeModuleDefinition:EJ,InstrumentationNodeModuleFile:mJ,isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},registerInstrumentations:function(t){var n=tJ(t.instrumentations).instrumentations,e=t.tracerProvider||ro.getTracerProvider(),r=t.meterProvider||xr.getMeterProvider();return function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];n&&i.setTracerProvider(n),e&&i.setMeterProvider(e),i.getConfig().enabled||i.enable()}}(n,e,r),function(){!function(t){t.forEach((function(t){return t.disable()}))}(n)}},safeExecuteInTheMiddle:function(t,n,e){var r,o;try{o=t()}catch(t){r=t}finally{if(n(r,o),r&&!e)throw r;return o}},safeExecuteInTheMiddleAsync:function(t,n,e){return TJ(this,void 0,void 0,(function(){var r,o,i;return _J(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,t()];case 1:return o=s.sent(),[3,4];case 2:return i=s.sent(),r=i,[3,4];case 3:if(n(r,o),r&&!e)throw r;return[2,o];case 4:return[2]}}))}))}}),vJ=xt(bJ),yJ={};!function(t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MongodbCommandType=void 0,(n=t.MongodbCommandType||(t.MongodbCommandType={})).CREATE_INDEXES="createIndexes",n.FIND_AND_MODIFY="findAndModify",n.IS_MASTER="isMaster",n.COUNT="count",n.UNKNOWN="unknown"}(yJ);var RJ={};Object.defineProperty(RJ,"__esModule",{value:!0}),RJ.VERSION=void 0,RJ.VERSION="0.39.0",Object.defineProperty(qF,"__esModule",{value:!0}),qF.MongoDBInstrumentation=void 0;const AJ=io,OJ=vJ,gJ=FB,NJ=yJ,CJ=RJ;class LJ extends OJ.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-mongodb",CJ.VERSION,t),this.Nt=t}Mt(){this.Ho=this.meter.createUpDownCounter("db.client.connections.usage",{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"})}init(){const{v3PatchConnection:t,v3UnpatchConnection:n}=this.Do(),{v4PatchConnect:e,v4UnpatchConnect:r}=this.jo(),{v4PatchConnection:o,v4UnpatchConnection:i}=this.xo(),{v4PatchConnectionPool:s,v4UnpatchConnectionPool:c}=this.ko(),{v4PatchSessions:u,v4UnpatchSessions:a}=this.Ko();return[new OJ.InstrumentationNodeModuleDefinition("mongodb",[">=3.3 <4"],void 0,void 0,[new OJ.InstrumentationNodeModuleFile("mongodb/lib/core/wireprotocol/index.js",[">=3.3 <4"],t,n)]),new OJ.InstrumentationNodeModuleDefinition("mongodb",["4.*","5.*","6.*"],void 0,void 0,[new OJ.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection.js",["4.*","5.*","6.*"],o,i),new OJ.InstrumentationNodeModuleFile("mongodb/lib/cmap/connection_pool.js",["4.*","5.*","6.*"],s,c),new OJ.InstrumentationNodeModuleFile("mongodb/lib/cmap/connect.js",["4.*","5.*","6.*"],e,r),new OJ.InstrumentationNodeModuleFile("mongodb/lib/sessions.js",["4.*","5.*","6.*"],u,a)])]}Do(){return{v3PatchConnection:(t,n)=>(AJ.diag.debug(`Applying patch for mongodb@${n}`),(0,OJ.isWrapped)(t.insert)&&this.Rt(t,"insert"),this.yt(t,"insert",this.Bo("insert")),(0,OJ.isWrapped)(t.remove)&&this.Rt(t,"remove"),this.yt(t,"remove",this.Bo("remove")),(0,OJ.isWrapped)(t.update)&&this.Rt(t,"update"),this.yt(t,"update",this.Bo("update")),(0,OJ.isWrapped)(t.command)&&this.Rt(t,"command"),this.yt(t,"command",this.Fo()),(0,OJ.isWrapped)(t.query)&&this.Rt(t,"query"),this.yt(t,"query",this.Jo()),(0,OJ.isWrapped)(t.getMore)&&this.Rt(t,"getMore"),this.yt(t,"getMore",this.zo()),t),v3UnpatchConnection:(t,n)=>{void 0!==t&&(AJ.diag.debug(`Removing internal patch for mongodb@${n}`),this.Rt(t,"insert"),this.Rt(t,"remove"),this.Rt(t,"update"),this.Rt(t,"command"),this.Rt(t,"query"),this.Rt(t,"getMore"))}}}Ko(){return{v4PatchSessions:(t,n)=>(AJ.diag.debug(`Applying patch for mongodb@${n}`),(0,OJ.isWrapped)(t.acquire)&&this.Rt(t,"acquire"),this.yt(t.ServerSessionPool.prototype,"acquire",this.Qo()),(0,OJ.isWrapped)(t.release)&&this.Rt(t,"release"),this.yt(t.ServerSessionPool.prototype,"release",this.$o()),t),v4UnpatchSessions:(t,n)=>{AJ.diag.debug(`Removing internal patch for mongodb@${n}`),void 0!==t&&((0,OJ.isWrapped)(t.acquire)&&this.Rt(t,"acquire"),(0,OJ.isWrapped)(t.release)&&this.Rt(t,"release"))}}}Qo(){const t=this;return n=>function(){const e=this.sessions.length,r=n.call(this),o=this.sessions.length;return e===o?t.Ho.add(1,{state:"used","pool.name":t.qo}):e-1===o&&(t.Ho.add(-1,{state:"idle","pool.name":t.qo}),t.Ho.add(1,{state:"used","pool.name":t.qo})),r}}$o(){const t=this;return n=>function(e){const r=n.call(this,e);return t.Ho.add(-1,{state:"used","pool.name":t.qo}),t.Ho.add(1,{state:"idle","pool.name":t.qo}),r}}ko(){return{v4PatchConnectionPool:(t,n)=>{AJ.diag.debug(`Applying patch for mongodb@${n}`);const e=t.ConnectionPool.prototype;return(0,OJ.isWrapped)(e.checkOut)&&this.Rt(e,"checkOut"),this.yt(e,"checkOut",this.ti()),t},v4UnpatchConnectionPool:(t,n)=>{AJ.diag.debug(`Removing internal patch for mongodb@${n}`),void 0!==t&&this.Rt(t.ConnectionPool.prototype,"checkOut")}}}jo(){return{v4PatchConnect:(t,n)=>(AJ.diag.debug(`Applying patch for mongodb@${n}`),(0,OJ.isWrapped)(t.connect)&&this.Rt(t,"connect"),this.yt(t,"connect",this.ni()),t),v4UnpatchConnect:(t,n)=>{AJ.diag.debug(`Removing internal patch for mongodb@${n}`),void 0!==t&&this.Rt(t,"connect")}}}ti(){return t=>function(n){const e=AJ.context.bind(AJ.context.active(),n);return t.call(this,e)}}ni(){const t=this;return n=>function(e,r){return n.call(this,e,(function(n,o){!n&&o?(t.setPoolName(e),r(n,o)):r(n,o)}))}}xo(){return{v4PatchConnection:(t,n)=>(AJ.diag.debug(`Applying patch for mongodb@${n}`),(0,OJ.isWrapped)(t.Connection.prototype.command)&&this.Rt(t.Connection.prototype,"command"),this.yt(t.Connection.prototype,"command",this.ei()),t),v4UnpatchConnection:(t,n)=>{void 0!==t&&(AJ.diag.debug(`Removing internal patch for mongodb@${n}`),this.Rt(t.Connection.prototype,"command"))}}}Bo(t){const n=this;return e=>function(r,o,i,s,c){const u="function"==typeof s?s:c;if(!AJ.trace.getSpan(AJ.context.active())||"function"!=typeof u||"object"!=typeof i)return"function"==typeof s?e.call(this,r,o,i,s):e.call(this,r,o,i,s,c);const a=n.tracer.startSpan(`mongodb.${t}`,{kind:AJ.SpanKind.CLIENT});n.ri(a,o,r,i[0],t);const l=n.oi(a,u);return"function"==typeof s?e.call(this,r,o,i,l):e.call(this,r,o,i,s,l)}}Fo(){const t=this;return n=>function(e,r,o,i,s){const c="function"==typeof i?i:s;if(!AJ.trace.getSpan(AJ.context.active())||"function"!=typeof c||"object"!=typeof o)return"function"==typeof i?n.call(this,e,r,o,i):n.call(this,e,r,o,i,s);const u=LJ.ii(o),a=u===NJ.MongodbCommandType.UNKNOWN?"command":u,l=t.tracer.startSpan(`mongodb.${a}`,{kind:AJ.SpanKind.CLIENT}),f=u===NJ.MongodbCommandType.UNKNOWN?void 0:u;t.ri(l,r,e,o,f);const d=t.oi(l,c);return"function"==typeof i?n.call(this,e,r,o,d):n.call(this,e,r,o,i,d)}}ei(){const t=this;return n=>function(e,r,o,i){const s=AJ.trace.getSpan(AJ.context.active()),c=i,u=Object.keys(r)[0];if("function"!=typeof c||"object"!=typeof r||r.ismaster||r.hello)return n.call(this,e,r,o,i);if(s){const i=t.tracer.startSpan(`mongodb.${u}`,{kind:AJ.SpanKind.CLIENT});t.si(i,this,e,r,u);const s=t.oi(i,c,this.id,u);return n.call(this,e,r,o,s)}{const i=t.oi(void 0,c,this.id,u);return n.call(this,e,r,o,i)}}}Jo(){const t=this;return n=>function(e,r,o,i,s,c){const u="function"==typeof s?s:c;if(!AJ.trace.getSpan(AJ.context.active())||"function"!=typeof u||"object"!=typeof o)return"function"==typeof s?n.call(this,e,r,o,i,s):n.call(this,e,r,o,i,s,c);const a=t.tracer.startSpan("mongodb.find",{kind:AJ.SpanKind.CLIENT});t.ri(a,r,e,o,"find");const l=t.oi(a,u);return"function"==typeof s?n.call(this,e,r,o,i,l):n.call(this,e,r,o,i,s,l)}}zo(){const t=this;return n=>function(e,r,o,i,s,c){const u="function"==typeof s?s:c;if(!AJ.trace.getSpan(AJ.context.active())||"function"!=typeof u)return"function"==typeof s?n.call(this,e,r,o,i,s):n.call(this,e,r,o,i,s,c);const a=t.tracer.startSpan("mongodb.getMore",{kind:AJ.SpanKind.CLIENT});t.ri(a,r,e,o.cmd,"getMore");const l=t.oi(a,u);return"function"==typeof s?n.call(this,e,r,o,i,l):n.call(this,e,r,o,i,s,l)}}static ii(t){return void 0!==t.createIndexes?NJ.MongodbCommandType.CREATE_INDEXES:void 0!==t.findandmodify?NJ.MongodbCommandType.FIND_AND_MODIFY:void 0!==t.ismaster?NJ.MongodbCommandType.IS_MASTER:void 0!==t.count?NJ.MongodbCommandType.COUNT:NJ.MongodbCommandType.UNKNOWN}si(t,n,e,r,o){let i,s,c;if(n){const t="string"==typeof n.address?n.address.split(":"):"";2===t.length&&(i=t[0],s=t[1])}c=(null==r?void 0:r.documents)&&r.documents[0]?r.documents[0]:(null==r?void 0:r.cursors)?r.cursors:r,this.ci(t,e.db,e.collection,i,s,c,o)}ri(t,n,e,r,o){var i,s,c,u,a,l,f,d;let h,p;if(e&&e.s&&(h=null!==(s=null===(i=e.s.options)||void 0===i?void 0:i.host)&&void 0!==s?s:e.s.host,p=null===(a=null!==(u=null===(c=e.s.options)||void 0===c?void 0:c.port)&&void 0!==u?u:e.s.port)||void 0===a?void 0:a.toString(),null==h||null==p)){const t=null===(l=e.description)||void 0===l?void 0:l.address;if(t){const n=t.split(":");h=n[0],p=n[1]}}const[S,E]=n.toString().split("."),m=null!==(d=null!==(f=null==r?void 0:r.query)&&void 0!==f?f:null==r?void 0:r.q)&&void 0!==d?d:r;this.ci(t,S,E,h,p,m,o)}ci(t,n,e,r,o,i,s){if(t.setAttributes({[gJ.SemanticAttributes.DB_SYSTEM]:gJ.DbSystemValues.MONGODB,[gJ.SemanticAttributes.DB_NAME]:n,[gJ.SemanticAttributes.DB_MONGODB_COLLECTION]:e,[gJ.SemanticAttributes.DB_OPERATION]:s,[gJ.SemanticAttributes.DB_CONNECTION_STRING]:`mongodb://${r}:${o}/${n}`}),r&&o&&t.setAttributes({[gJ.SemanticAttributes.NET_PEER_NAME]:r,[gJ.SemanticAttributes.NET_PEER_PORT]:o}),!i)return;const c="function"==typeof this.Nt.dbStatementSerializer?this.Nt.dbStatementSerializer:this.ui.bind(this);(0,OJ.safeExecuteInTheMiddle)((()=>{const n=c(i);t.setAttribute(gJ.SemanticAttributes.DB_STATEMENT,n)}),(t=>{t&&this.Ct.error("Error running dbStatementSerializer hook",t)}),!0)}ui(t){var n;const e=!!(null===(n=this.Nt)||void 0===n?void 0:n.enhancedDatabaseReporting)?t:Object.keys(t).reduce(((t,n)=>(t[n]="?",t)),{});return JSON.stringify(e)}Uo(t,n){const e=this.getConfig();"function"==typeof e.responseHook&&(0,OJ.safeExecuteInTheMiddle)((()=>{e.responseHook(t,{data:n})}),(t=>{t&&this.Ct.error("Error running response hook",t)}),!0)}oi(t,n,e,r){const o=AJ.context.active(),i=this;return function(...e){const s=e[0];if(t){if(s instanceof Error)null==t||t.setStatus({code:AJ.SpanStatusCode.ERROR,message:s.message});else{const n=e[1];i.Uo(t,n)}t.end()}return AJ.context.with(o,(()=>("endSessions"===r&&i.Ho.add(-1,{state:"idle","pool.name":i.qo}),n.apply(this,e))))}}setPoolName(t){var n,e;const r=`mongodb://${null===(n=t.hostAddress)||void 0===n?void 0:n.host}:${null===(e=t.hostAddress)||void 0===e?void 0:e.port}/${t.dbName}`;this.qo=r}}qF.MongoDBInstrumentation=LJ;var IJ={};!function(t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MongodbCommandType=void 0,(n=t.MongodbCommandType||(t.MongodbCommandType={})).CREATE_INDEXES="createIndexes",n.FIND_AND_MODIFY="findAndModify",n.IS_MASTER="isMaster",n.COUNT="count",n.UNKNOWN="unknown"}(IJ),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(qF,t),e(IJ,t)}($F);const wJ="Mongo",MJ=cF(wJ,(()=>new $F.MongoDBInstrumentation({responseHook(t){yK(t,"auto.db.otel.mongo")}}))),ZJ=()=>({name:wJ,setupOnce(){MJ()}});var PJ={},VJ={},GJ={};Object.defineProperty(GJ,"__esModule",{value:!0}),GJ.handleCallbackResponse=GJ.handlePromiseResponse=GJ.getAttributesFromCollection=void 0;const XJ=io,UJ=_F,WJ=FB;function YJ(t,n={}){t.recordException(n),t.setStatus({code:XJ.SpanStatusCode.ERROR,message:`${n.message} ${n.code?`\nMongoose Error Code: ${n.code}`:""}`})}function HJ(t,n,e,r=void 0){e&&(0,UJ.safeExecuteInTheMiddle)((()=>e(t,{moduleVersion:r,response:n})),(t=>{t&&XJ.diag.error("mongoose instrumentation: responseHook error",t)}),!0)}GJ.getAttributesFromCollection=function(t){return{[WJ.SemanticAttributes.DB_MONGODB_COLLECTION]:t.name,[WJ.SemanticAttributes.DB_NAME]:t.conn.name,[WJ.SemanticAttributes.DB_USER]:t.conn.user,[WJ.SemanticAttributes.NET_PEER_NAME]:t.conn.host,[WJ.SemanticAttributes.NET_PEER_PORT]:t.conn.port}},GJ.handlePromiseResponse=function(t,n,e,r=void 0){return t instanceof Promise?t.then((t=>(HJ(n,t,e,r),t))).catch((t=>{throw YJ(n,t),t})).finally((()=>n.end())):(HJ(n,t,e,r),n.end(),t)},GJ.handleCallbackResponse=function(t,n,e,r,o,i=void 0){return n.apply(e,[(n,e)=>(n?YJ(r,n):HJ(r,e,o,i),r.end(),t(n,e))])};var DJ={};Object.defineProperty(DJ,"__esModule",{value:!0}),DJ.VERSION=void 0,DJ.VERSION="0.37.0",function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MongooseInstrumentation=t.ai=void 0;const n=io,e=EB,r=GJ,o=_F,i=DJ,s=FB,c=["remove","deleteOne","deleteMany","find","findOne","estimatedDocumentCount","countDocuments","count","distinct","where","$where","findOneAndUpdate","findOneAndDelete","findOneAndReplace","findOneAndRemove"];t.ai=Symbol("stored-parent-span");class u extends o.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-mongoose",i.VERSION,Object.assign({},t))}setConfig(t={}){this.Nt=Object.assign({},t)}init(){return new o.InstrumentationNodeModuleDefinition("mongoose",[">=5.9.7 <7"],this.patch.bind(this),this.unpatch.bind(this))}patch(t,n){return this.yt(t.Model.prototype,"save",this.patchOnModelMethods("save",n)),t.Model.prototype.$save=t.Model.prototype.save,this.yt(t.Model.prototype,"remove",this.patchOnModelMethods("remove",n)),this.yt(t.Query.prototype,"exec",this.patchQueryExec(n)),this.yt(t.Aggregate.prototype,"exec",this.patchAggregateExec(n)),c.forEach((n=>{this.yt(t.Query.prototype,n,this.patchAndCaptureSpanContext(n))})),this.yt(t.Model,"aggregate",this.patchModelAggregate()),t}unpatch(t){this.Ct.debug("mongoose instrumentation: unpatch mongoose"),this.Rt(t.Model.prototype,"save"),t.Model.prototype.$save=t.Model.prototype.save,this.Rt(t.Model.prototype,"remove"),this.Rt(t.Query.prototype,"exec"),this.Rt(t.Aggregate.prototype,"exec"),c.forEach((n=>{this.Rt(t.Query.prototype,n)})),this.Rt(t.Model,"aggregate")}patchAggregateExec(e){const r=this;return this.Ct.debug("patched mongoose Aggregate exec function"),o=>function(i){var c;if(r.Nt.requireParentSpan&&void 0===n.trace.getSpan(n.context.active()))return o.apply(this,arguments);const u=this[t.ai],a={};r.Nt.dbStatementSerializer&&(a[s.SemanticAttributes.DB_STATEMENT]=r.Nt.dbStatementSerializer("aggregate",{options:this.options,aggregatePipeline:this.li}));const l=r.fi(this.di.collection,null===(c=this.di)||void 0===c?void 0:c.modelName,"aggregate",a,u);return r.hi(l,o,this,arguments,i,e)}}patchQueryExec(e){const r=this;return this.Ct.debug("patched mongoose Query exec function"),o=>function(i){if(r.Nt.requireParentSpan&&void 0===n.trace.getSpan(n.context.active()))return o.apply(this,arguments);const c=this[t.ai],u={};r.Nt.dbStatementSerializer&&(u[s.SemanticAttributes.DB_STATEMENT]=r.Nt.dbStatementSerializer(this.op,{condition:this.pi,updates:this.Si,options:this.options,fields:this.nt}));const a=r.fi(this.mongooseCollection,this.model.modelName,this.op,u,c);return r.hi(a,o,this,arguments,i,e)}}patchOnModelMethods(t,e){const r=this;return this.Ct.debug(`patching mongoose Model '${t}' operation`),o=>function(i,c){if(r.Nt.requireParentSpan&&void 0===n.trace.getSpan(n.context.active()))return o.apply(this,arguments);const u={document:this};!i||i instanceof Function||(u.options=i);const a={};r.Nt.dbStatementSerializer&&(a[s.SemanticAttributes.DB_STATEMENT]=r.Nt.dbStatementSerializer(t,u));const l=r.fi(this.constructor.collection,this.constructor.modelName,t,a);return i instanceof Function&&(c=i,i=void 0),r.hi(l,o,this,arguments,c,e)}}patchModelAggregate(){const e=this;return this.Ct.debug("patched mongoose model aggregate function"),r=>function(){const o=n.trace.getSpan(n.context.active()),i=e.Ei((()=>r.apply(this,arguments)));return i&&(i[t.ai]=o),i}}patchAndCaptureSpanContext(e){const r=this;return this.Ct.debug(`patching mongoose query ${e} function`),e=>function(){return this[t.ai]=n.trace.getSpan(n.context.active()),r.Ei((()=>e.apply(this,arguments)))}}fi(t,e,o,i,c){return this.tracer.startSpan(`mongoose.${e}.${o}`,{kind:n.SpanKind.CLIENT,attributes:Object.assign(Object.assign(Object.assign({},i),(0,r.getAttributesFromCollection)(t)),{[s.SemanticAttributes.DB_OPERATION]:o,[s.SemanticAttributes.DB_SYSTEM]:"mongoose"})},c?n.trace.setSpan(n.context.active(),c):void 0)}hi(t,n,e,o,i,s=void 0){const c=this;if(i instanceof Function)return c.Ei((()=>(0,r.handleCallbackResponse)(i,n,e,t,c.Nt.responseHook,s)));{const i=c.Ei((()=>n.apply(e,o)));return(0,r.handlePromiseResponse)(i,t,c.Nt.responseHook,s)}}Ei(t){var r;return(null===(r=this.Nt)||void 0===r?void 0:r.suppressInternalInstrumentation)?n.context.with((0,e.suppressTracing)(n.context.active()),t):t()}}t.MongooseInstrumentation=u}(VJ);var jJ={};Object.defineProperty(jJ,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(VJ,t),e(jJ,t)}(PJ);const xJ="Mongoose",kJ=cF(xJ,(()=>new PJ.MongooseInstrumentation({responseHook(t){yK(t,"auto.db.otel.mongoose")}}))),KJ=()=>({name:xJ,setupOnce(){kJ()}});var BJ={},FJ={},JJ={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.MYSQL_VALUES="db.mysql.values"}(t.AttributeNames||(t.AttributeNames={}))}(JJ);var zJ={};Object.defineProperty(zJ,"__esModule",{value:!0}),zJ.getPoolName=zJ.arrayStringifyHelper=zJ.getSpanName=zJ.getDbValues=zJ.getDbStatement=zJ.getConnectionAttributes=void 0;const QJ=FB;function $J(t,n,e){let r=`jdbc:mysql://${t||"localhost"}`;return"number"==typeof n&&(r+=`:${n}`),"string"==typeof e&&(r+=`/${e}`),r}function qJ(t){return t?`[${t.toString()}]`:""}zJ.getConnectionAttributes=function(t){const{host:n,port:e,database:r,user:o}=function(t){const{host:n,port:e,database:r,user:o}=t&&t.connectionConfig||t||{};return{host:n,port:e,database:r,user:o}}(t),i=parseInt(e,10);return isNaN(i)?{[QJ.SemanticAttributes.NET_PEER_NAME]:n,[QJ.SemanticAttributes.DB_CONNECTION_STRING]:$J(n,e,r),[QJ.SemanticAttributes.DB_NAME]:r,[QJ.SemanticAttributes.DB_USER]:o}:{[QJ.SemanticAttributes.NET_PEER_NAME]:n,[QJ.SemanticAttributes.NET_PEER_PORT]:i,[QJ.SemanticAttributes.DB_CONNECTION_STRING]:$J(n,e,r),[QJ.SemanticAttributes.DB_NAME]:r,[QJ.SemanticAttributes.DB_USER]:o}},zJ.getDbStatement=function(t){return"string"==typeof t?t:t.sql},zJ.getDbValues=function(t,n){return qJ("string"==typeof t?n:n||t.values)},zJ.getSpanName=function(t){return"object"==typeof t?t.sql:t.split(" ")[0]},zJ.arrayStringifyHelper=qJ,zJ.getPoolName=function(t){const n=t.config.connectionConfig;let e="";return e+=n.host?`host: '${n.host}', `:"",e+=n.port?`port: ${n.port}, `:"",e+=n.database?`database: '${n.database}', `:"",e+=n.user?`user: '${n.user}'`:"",n.user||(e=e.substring(0,e.length-2)),e.trim()};var tz={};Object.defineProperty(tz,"__esModule",{value:!0}),tz.VERSION=void 0,tz.VERSION="0.37.0",Object.defineProperty(FJ,"__esModule",{value:!0}),FJ.MySQLInstrumentation=void 0;const nz=io,ez=_F,rz=FB,oz=JJ,iz=zJ,sz=tz;class cz extends ez.InstrumentationBase{constructor(t){super("@opentelemetry/instrumentation-mysql",sz.VERSION,t),this.mi()}setMeterProvider(t){super.setMeterProvider(t),this.mi()}mi(){this.Ho=this.meter.createUpDownCounter("db.client.connections.usage",{description:"The number of connections that are currently in state described by the state attribute.",unit:"{connection}"})}init(){return[new ez.InstrumentationNodeModuleDefinition("mysql",["2.*"],((t,n)=>(nz.diag.debug(`Patching mysql@${n}`),nz.diag.debug("Patching mysql.createConnection"),(0,ez.isWrapped)(t.createConnection)&&this.Rt(t,"createConnection"),this.yt(t,"createConnection",this.Ti()),nz.diag.debug("Patching mysql.createPool"),(0,ez.isWrapped)(t.createPool)&&this.Rt(t,"createPool"),this.yt(t,"createPool",this._i()),nz.diag.debug("Patching mysql.createPoolCluster"),(0,ez.isWrapped)(t.createPoolCluster)&&this.Rt(t,"createPoolCluster"),this.yt(t,"createPoolCluster",this.bi()),t)),(t=>{void 0!==t&&(this.Rt(t,"createConnection"),this.Rt(t,"createPool"),this.Rt(t,"createPoolCluster"))}))]}Ti(){return t=>{const n=this;return nz.diag.debug("MySQLInstrumentation#patch: patched mysql createConnection"),function(e){const r=t(...arguments);return n.yt(r,"query",n.vi(r)),r}}}_i(){return t=>{const n=this;return nz.diag.debug("MySQLInstrumentation#patch: patched mysql createPool"),function(e){const r=t(...arguments);return n.yt(r,"query",n.vi(r)),n.yt(r,"getConnection",n.yi(r)),n.yt(r,"end",n.Ri(r)),n.Ai(r,n,""),r}}}Ri(t){return n=>{const e=this;return nz.diag.debug("MySQLInstrumentation#patch: patched mysql pool end"),function(r){const o=t.Oi.length,i=t.gi.length,s=o-i,c=(0,iz.getPoolName)(t);e.Ho.add(-s,{state:"used",name:c}),e.Ho.add(-i,{state:"idle",name:c}),n.apply(t,arguments)}}}bi(){return t=>{const n=this;return nz.diag.debug("MySQLInstrumentation#patch: patched mysql createPoolCluster"),function(e){const r=t(...arguments);return n.yt(r,"getConnection",n.yi(r)),n.yt(r,"add",n.Ni(r)),r}}}Ni(t){return n=>{const e=this;return nz.diag.debug("MySQLInstrumentation#patch: patched mysql pool cluster add"),function(r,o){if(!e.fn)return e.Rt(t,"add"),n.apply(t,arguments);n.apply(t,arguments);const i=t.Ci;if(i){const n=i["object"==typeof r?"CLUSTER::"+t.Li:String(r)].pool;e.Ai(n,e,r)}}}}yi(t){return n=>{const e=this;return nz.diag.debug("MySQLInstrumentation#patch: patched mysql pool getConnection"),function(r,o,i){if(!e.fn)return e.Rt(t,"getConnection"),n.apply(t,arguments);if(1===arguments.length&&"function"==typeof r){const o=e.Ii(r);return n.call(t,o)}if(2===arguments.length&&"function"==typeof o){const i=e.Ii(o);return n.call(t,r,i)}if(3===arguments.length&&"function"==typeof i){const s=e.Ii(i);return n.call(t,r,o,s)}return n.apply(t,arguments)}}}Ii(t){const n=this,e=nz.context.active();return function(r,o){o&&((0,ez.isWrapped)(o.query)||n.yt(o,"query",n.vi(o))),"function"==typeof t&&nz.context.with(e,t,this,r,o)}}vi(t){return n=>{const e=this;return nz.diag.debug("MySQLInstrumentation: patched mysql query"),function(r,o,i){if(!e.fn)return e.Rt(t,"query"),n.apply(t,arguments);const s=e.tracer.startSpan((0,iz.getSpanName)(r),{kind:nz.SpanKind.CLIENT,attributes:Object.assign(Object.assign({},cz.COMMON_ATTRIBUTES),(0,iz.getConnectionAttributes)(t.config))});s.setAttribute(rz.SemanticAttributes.DB_STATEMENT,(0,iz.getDbStatement)(r));if(e.getConfig().enhancedDatabaseReporting){let t;Array.isArray(o)?t=o:arguments[2]&&(t=[o]),s.setAttribute(oz.AttributeNames.MYSQL_VALUES,(0,iz.getDbValues)(r,t))}const c=Array.from(arguments).findIndex((t=>"function"==typeof t)),u=nz.context.active();if(-1===c){const e=nz.context.with(nz.trace.setSpan(nz.context.active(),s),(()=>n.apply(t,arguments)));return nz.context.bind(u,e),e.on("error",(t=>s.setStatus({code:nz.SpanStatusCode.ERROR,message:t.message}))).on("end",(()=>{s.end()}))}return e.yt(arguments,c,e.wi(s,u)),nz.context.with(nz.trace.setSpan(nz.context.active(),s),(()=>n.apply(t,arguments)))}}}wi(t,n){return e=>function(r,o,i){return r&&t.setStatus({code:nz.SpanStatusCode.ERROR,message:r.message}),t.end(),nz.context.with(n,(()=>e(...arguments)))}}Ai(t,n,e){const r=e||(0,iz.getPoolName)(t);t.on("connection",(t=>{n.Ho.add(1,{state:"idle",name:r})})),t.on("acquire",(t=>{n.Ho.add(-1,{state:"idle",name:r}),n.Ho.add(1,{state:"used",name:r})})),t.on("release",(t=>{n.Ho.add(-1,{state:"used",name:r}),n.Ho.add(1,{state:"idle",name:r})}))}}FJ.MySQLInstrumentation=cz,cz.COMMON_ATTRIBUTES={[rz.SemanticAttributes.DB_SYSTEM]:rz.DbSystemValues.MYSQL};var uz={};Object.defineProperty(uz,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(FJ,t),e(uz,t)}(BJ);const az="Mysql",lz=cF(az,(()=>new BJ.MySQLInstrumentation({}))),fz=()=>({name:az,setupOnce(){lz()}});var dz={},hz={},pz={};Object.defineProperty(pz,"__esModule",{value:!0}),pz.addSqlCommenterComment=void 0;const Sz=io,Ez=EB;pz.addSqlCommenterComment=function(t,n){if("string"!=typeof n||0===n.length)return n;if(function(t){const n=t.indexOf("--");return n>=0||!(t.indexOf("/*")<0)&&n<t.indexOf("*/")}(n))return n;const e=new Ez.W3CTraceContextPropagator,r={};e.inject(Sz.trace.setSpan(Sz.ROOT_CONTEXT,t),r,Sz.defaultTextMapSetter);const o=Object.keys(r).sort();return 0===o.length?n:`${n} /*${o.map((t=>`${t}='${encodeURIComponent(r[t]).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))}'`)).join(",")}*/`};var mz={};Object.defineProperty(mz,"__esModule",{value:!0}),mz.once=mz.getSpanName=mz.getDbStatement=mz.getConnectionAttributes=void 0;const Tz=FB;function _z(t,n,e){let r=`jdbc:mysql://${t||"localhost"}`;return"number"==typeof n&&(r+=`:${n}`),"string"==typeof e&&(r+=`/${e}`),r}mz.getConnectionAttributes=function(t){const{host:n,port:e,database:r,user:o}=function(t){const{host:n,port:e,database:r,user:o}=t&&t.connectionConfig||t||{};return{host:n,port:e,database:r,user:o}}(t),i=parseInt(e,10);return isNaN(i)?{[Tz.SemanticAttributes.NET_PEER_NAME]:n,[Tz.SemanticAttributes.DB_CONNECTION_STRING]:_z(n,e,r),[Tz.SemanticAttributes.DB_NAME]:r,[Tz.SemanticAttributes.DB_USER]:o}:{[Tz.SemanticAttributes.NET_PEER_NAME]:n,[Tz.SemanticAttributes.NET_PEER_PORT]:i,[Tz.SemanticAttributes.DB_CONNECTION_STRING]:_z(n,e,r),[Tz.SemanticAttributes.DB_NAME]:r,[Tz.SemanticAttributes.DB_USER]:o}},mz.getDbStatement=function(t,n,e){return"string"==typeof t?e?n(t,e):t:e||t.values?n(t.sql,e||t.values):t.sql},mz.getSpanName=function(t){var n;const e="object"==typeof t?t.sql:t;return null===(n=null==e?void 0:e.split(" "))||void 0===n?void 0:n[0]};mz.once=t=>{let n=!1;return(...e)=>{if(!n)return n=!0,t(...e)}};var bz={};Object.defineProperty(bz,"__esModule",{value:!0}),bz.VERSION=void 0,bz.VERSION="0.37.0",Object.defineProperty(hz,"__esModule",{value:!0}),hz.MySQL2Instrumentation=void 0;const vz=io,yz=_F,Rz=FB,Az=pz,Oz=mz,gz=bz;class Nz extends yz.InstrumentationBase{constructor(t){super("@opentelemetry/instrumentation-mysql2",gz.VERSION,t)}init(){return[new yz.InstrumentationNodeModuleDefinition("mysql2",[">= 1.4.2 < 4.0"],((t,n)=>{vz.diag.debug(`Patching mysql2@${n}`);const e=t.Connection.prototype;return vz.diag.debug("Patching Connection.prototype.query"),(0,yz.isWrapped)(e.query)&&this.Rt(e,"query"),this.yt(e,"query",this.vi(t.format,!1)),(0,yz.isWrapped)(e.execute)&&this.Rt(e,"execute"),this.yt(e,"execute",this.vi(t.format,!0)),t}),(t=>{if(void 0===t)return;const n=t.Connection.prototype;this.Rt(n,"query"),this.Rt(n,"execute")}))]}vi(t,n){return e=>{const r=this;return vz.diag.debug("MySQL2Instrumentation: patched mysql query/execute"),function(o,i,s){const c=r.Nt;let u;Array.isArray(i)?u=i:arguments[2]&&(u=[i]);const a=r.tracer.startSpan((0,Oz.getSpanName)(o),{kind:vz.SpanKind.CLIENT,attributes:Object.assign(Object.assign(Object.assign({},Nz.COMMON_ATTRIBUTES),(0,Oz.getConnectionAttributes)(this.config)),{[Rz.SemanticAttributes.DB_STATEMENT]:(0,Oz.getDbStatement)(o,t,u)})});!n&&c.addSqlCommenterCommentToQueries&&(arguments[0]=o="string"==typeof o?(0,Az.addSqlCommenterComment)(a,o):Object.assign(o,{sql:(0,Az.addSqlCommenterComment)(a,o.sql)}));const l=(0,Oz.once)(((t,n)=>{t?a.setStatus({code:vz.SpanStatusCode.ERROR,message:t.message}):"function"==typeof c.responseHook&&(0,yz.safeExecuteInTheMiddle)((()=>{c.responseHook(a,{queryResults:n})}),(t=>{t&&r.Ct.warn("Failed executing responseHook",t)}),!0),a.end()}));if(1===arguments.length){"function"==typeof o.onResult&&r.yt(o,"onResult",r.wi(l));const t=e.apply(this,arguments);return t.once("error",(t=>{l(t)})).once("result",(t=>{l(void 0,t)})),t}return"function"==typeof arguments[1]?r.yt(arguments,1,r.wi(l)):"function"==typeof arguments[2]&&r.yt(arguments,2,r.wi(l)),e.apply(this,arguments)}}}wi(t){return n=>function(e,r,o){return t(e,r),n(...arguments)}}}hz.MySQL2Instrumentation=Nz,Nz.COMMON_ATTRIBUTES={[Rz.SemanticAttributes.DB_SYSTEM]:Rz.DbSystemValues.MYSQL};var Cz={};Object.defineProperty(Cz,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0});const r=hz;e(hz,t),t.default=r.MySQL2Instrumentation,e(Cz,t)}(dz);const Lz="Mysql2",Iz=cF(Lz,(()=>new dz.MySQL2Instrumentation({responseHook(t){yK(t,"auto.db.otel.mysql2")}}))),wz=()=>({name:Lz,setupOnce(){Iz()}});var Mz={},Zz={},Pz=function(){function t(){}return t.prototype.emit=function(t){},t}(),Vz=function(){function t(){}return t.prototype.getLogger=function(t,n,e){return new Pz},t}(),Gz=new Vz,Xz="object"==typeof globalThis?globalThis:global,Uz=Symbol.for("io.opentelemetry.js.api.logs"),Wz=Xz;var Yz=function(){function t(){}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalLoggerProvider=function(t){return Wz[Uz]?this.getLoggerProvider():(Wz[Uz]=(n=1,e=t,r=Gz,function(t){return t===n?e:r}),t);var n,e,r},t.prototype.getLoggerProvider=function(){var t,n;return null!==(n=null===(t=Wz[Uz])||void 0===t?void 0:t.call(Wz,1))&&void 0!==n?n:Gz},t.prototype.getLogger=function(t,n,e){return this.getLoggerProvider().getLogger(t,n,e)},t.prototype.disable=function(){delete Wz[Uz]},t}(),Hz=Yz.getInstance();function Dz(t){void 0===t&&(t=[]);for(var n=[],e=0,r=t.length;e<r;e++){var o=t[e];if(Array.isArray(o)){var i=Dz(o);n=n.concat(i.instrumentations)}else"function"==typeof o?n.push(new o):o.instrumentationName&&n.push(o)}return{instrumentations:n}}var jz=function(){return jz=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},jz.apply(this,arguments)},xz=function(){function t(t,n,e){void 0===e&&(e={}),this.instrumentationName=t,this.instrumentationVersion=n,this.yt=yy.wrap,this.Rt=yy.unwrap,this.At=yy.massWrap,this.Ot=yy.massUnwrap,this.Nt=jz({enabled:!0},e),this.Ct=Yr.createComponentLogger({namespace:t}),this.Lt=ro.getTracer(t,n),this.It=xr.getMeter(t,n),this.wt=Hz.getLogger(t,n),this.Mt()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this.It=t.getMeter(this.instrumentationName,this.instrumentationVersion),this.Mt()},Object.defineProperty(t.prototype,"logger",{get:function(){return this.wt},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(t){this.wt=t.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var t,n=null!==(t=this.init())&&void 0!==t?t:[];return Array.isArray(n)?n:[n]},t.prototype.Mt=function(){},t.prototype.getConfig=function(){return this.Nt},t.prototype.setConfig=function(t){void 0===t&&(t={}),this.Nt=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this.Lt=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),t}(),kz=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Kz=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},Bz=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},Fz="/",Jz=function(){this.hooks=[],this.children=new Map},zz=function(){function t(){this.en=new Jz,this.rn=0}return t.prototype.insert=function(t){var n,e,r=this.en;try{for(var o=kz(t.moduleName.split(Fz)),i=o.next();!i.done;i=o.next()){var s=i.value,c=r.children.get(s);c||(c=new Jz,r.children.set(s,c)),r=c}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}r.hooks.push({hook:t,insertedId:this.rn++})},t.prototype.search=function(t,n){var e,r,o=void 0===n?{}:n,i=o.maintainInsertionOrder,s=o.fullOnly,c=this.en,u=[],a=!0;try{for(var l=kz(t.split(Fz)),f=l.next();!f.done;f=l.next()){var d=f.value,h=c.children.get(d);if(!h){a=!1;break}s||u.push.apply(u,Bz([],Kz(h.hooks),!1)),c=h}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s&&a&&u.push.apply(u,Bz([],Kz(c.hooks),!1)),0===u.length?[]:1===u.length?[u[0].hook]:(i&&u.sort((function(t,n){return t.insertedId-n.insertedId})),u.map((function(t){return t.hook})))},t}(),Qz=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},$z=["afterEach","after","beforeEach","before","describe","it"].every((function(t){return"function"==typeof global[t]})),qz=function(){function t(){this.sn=new zz,this.cn()}return t.prototype.cn=function(){var t=this;new qR(null,{internals:!0},(function(n,e,r){var o,i,s,c=(s=e,C.sep!==Fz?s.split(C.sep).join(Fz):s),u=t.sn.search(c,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var a=Qz(u),l=a.next();!l.done;l=a.next()){n=(0,l.value.onRequire)(n,e,r)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n}))},t.prototype.register=function(t,n){var e={moduleName:t,onRequire:n};return this.sn.insert(e),e},t.getInstance=function(){var n;return $z?new t:this.L=null!==(n=this.L)&&void 0!==n?n:new t},t}();var tQ=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nQ=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},eQ=function(t){function n(n,r,o){void 0===o&&(o={});var i=t.call(this,n,r,o)||this;i.an=[],i.ln=qz.getInstance(),i.fn=!1,i.yt=function(t,n,r){if(e.types.isProxy(t)){var o=yy.wrap(Object.assign({},t),n,r);return Object.defineProperty(t,n,{value:o})}return yy.wrap(t,n,r)},i.Rt=function(t,n){return e.types.isProxy(t)?Object.defineProperty(t,n,{value:t[n]}):yy.unwrap(t,n)},i.At=function(t,n,e){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.yt(t,n,e)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")},i.Ot=function(t,n){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.Rt(t,n)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")};var s=i.init();return s&&!Array.isArray(s)&&(s=[s]),i.dn=s||[],0===i.dn.length&&Yr.debug("No modules instrumentation has been defined for '"+i.instrumentationName+"@"+i.instrumentationVersion+"', nothing will be patched"),i.Nt.enabled&&i.enable(),i}return tQ(n,t),n.prototype.hn=function(){var t=this;this.dn.forEach((function(n){var e=n.name;try{var r=require.resolve(e);require.cache[r]&&t.Ct.warn("Module "+e+" has been loaded before "+t.instrumentationName+" so it might not work, please initialize it before requiring "+e)}catch(t){}}))},n.prototype.pn=function(t){try{var n=o.readFileSync(C.join(t,"package.json"),{encoding:"utf8"}),e=JSON.parse(n).version;return"string"==typeof e?e:void 0}catch(n){Yr.warn("Failed extracting version",t)}},n.prototype.Sn=function(t,n,e,r){var o,i=this;if(!r)return"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?(this.Ct.debug("Applying instrumentation patch for nodejs core module on require hook",{module:t.name}),t.patch(n)):n;var s=this.pn(r);if(t.moduleVersion=s,t.name===e)return rQ(t.supportedVersions,s,t.includePrerelease)&&"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?(this.Ct.debug("Applying instrumentation patch for module on require hook",{module:t.name,version:t.moduleVersion,baseDir:r}),t.patch(n,t.moduleVersion)):n;var c=null!==(o=t.files)&&void 0!==o?o:[],u=C.normalize(e);return c.filter((function(t){return t.name===u})).filter((function(n){return rQ(n.supportedVersions,s,t.includePrerelease)})).reduce((function(n,e){return e.moduleExports=n,i.fn?(i.Ct.debug("Applying instrumentation patch for nodejs module file on require hook",{module:t.name,version:t.moduleVersion,fileName:e.name,baseDir:r}),e.patch(n,t.moduleVersion)):n}),n)},n.prototype.enable=function(){var t,n,e,r,o,i,s=this;if(!this.fn)if(this.fn=!0,this.an.length>0)try{for(var c=nQ(this.dn),u=c.next();!u.done;u=c.next()){var a=u.value;"function"==typeof a.patch&&a.moduleExports&&(this.Ct.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:a.name,version:a.moduleVersion}),a.patch(a.moduleExports,a.moduleVersion));try{for(var l=(e=void 0,nQ(a.files)),f=l.next();!f.done;f=l.next()){var d=f.value;d.moduleExports&&(this.Ct.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:a.name,version:a.moduleVersion,fileName:d.name}),d.patch(d.moduleExports,a.moduleVersion))}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else{this.hn();var h=function(t){var n=function(n,e,r){return s.Sn(t,n,e,r)},e=C.isAbsolute(t.name)?new qR([t.name],{internals:!0},n):p.ln.register(t.name,n);p.an.push(e);var r=new ik([t.name],{internals:!1},(function(n,e,r){return s.Sn(t,n,e,r)}));p.an.push(r)},p=this;try{for(var S=nQ(this.dn),E=S.next();!E.done;E=S.next()){h(E.value)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}},n.prototype.disable=function(){var t,n,e,r;if(this.fn){this.fn=!1;try{for(var o=nQ(this.dn),i=o.next();!i.done;i=o.next()){var s=i.value;"function"==typeof s.unpatch&&s.moduleExports&&(this.Ct.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:s.name,version:s.moduleVersion}),s.unpatch(s.moduleExports,s.moduleVersion));try{for(var c=(e=void 0,nQ(s.files)),u=c.next();!u.done;u=c.next()){var a=u.value;a.moduleExports&&(this.Ct.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:s.name,version:s.moduleVersion,fileName:a.name}),a.unpatch(a.moduleExports,s.moduleVersion))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},n.prototype.isEnabled=function(){return this.fn},n}(xz);function rQ(t,n,e){return void 0===n?t.includes("*"):t.some((function(t){return ny.satisfies(n,t,{includePrerelease:e})}))}var oQ=function(t,n,e,r,o){this.name=t,this.supportedVersions=n,this.patch=e,this.unpatch=r,this.files=o||[]},iQ=function(t,e,r,o){this.supportedVersions=e,this.patch=r,this.unpatch=o,this.name=n.normalize(t)},sQ=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},cQ=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var uQ=Object.freeze({__proto__:null,InstrumentationBase:eQ,InstrumentationNodeModuleDefinition:oQ,InstrumentationNodeModuleFile:iQ,isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},registerInstrumentations:function(t){var n=Dz(t.instrumentations).instrumentations,e=t.tracerProvider||ro.getTracerProvider(),r=t.meterProvider||xr.getMeterProvider(),o=t.loggerProvider||Hz.getLoggerProvider();return function(t,n,e,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];n&&s.setTracerProvider(n),e&&s.setMeterProvider(e),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}}(n,e,r,o),function(){!function(t){t.forEach((function(t){return t.disable()}))}(n)}},safeExecuteInTheMiddle:function(t,n,e){var r,o;try{o=t()}catch(t){r=t}finally{if(n(r,o),r&&!e)throw r;return o}},safeExecuteInTheMiddleAsync:function(t,n,e){return sQ(this,void 0,void 0,(function(){var r,o,i;return cQ(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,t()];case 1:return o=s.sent(),[3,4];case 2:return i=s.sent(),r=i,[3,4];case 3:if(n(r,o),r&&!e)throw r;return[2,o];case 4:return[2]}}))}))}}),aQ=xt(uQ),lQ={};Object.defineProperty(lQ,"__esModule",{value:!0}),lQ.endSpan=void 0;const fQ=io;lQ.endSpan=(t,n)=>{n&&(t.recordException(n),t.setStatus({code:fQ.SpanStatusCode.ERROR,message:n.message})),t.end()};var dQ={};Object.defineProperty(dQ,"__esModule",{value:!0}),dQ.defaultDbStatementSerializer=void 0;const hQ=[{regex:/^ECHO/i,args:0},{regex:/^(LPUSH|MSET|PFA|PUBLISH|RPUSH|SADD|SET|SPUBLISH|XADD|ZADD)/i,args:1},{regex:/^(HSET|HMSET|LSET|LINSERT)/i,args:2},{regex:/^(ACL|BIT|B[LRZ]|CLIENT|CLUSTER|CONFIG|COMMAND|DECR|DEL|EVAL|EX|FUNCTION|GEO|GET|HINCR|HMGET|HSCAN|INCR|L[TRLM]|MEMORY|P[EFISTU]|RPOP|S[CDIMORSU]|XACK|X[CDGILPRT]|Z[CDILMPRS])/i,args:-1}];dQ.defaultDbStatementSerializer=(t,n)=>{var e,r;if(Array.isArray(n)&&n.length){const o=null!==(r=null===(e=hQ.find((({regex:n})=>n.test(t))))||void 0===e?void 0:e.args)&&void 0!==r?r:0,i=o>=0?n.slice(0,o):n;return n.length>i.length&&i.push(`[${n.length-o} other arguments]`),`${t} ${i.join(" ")}`}return t};var pQ={};Object.defineProperty(pQ,"__esModule",{value:!0}),pQ.VERSION=void 0,pQ.VERSION="0.40.0",Object.defineProperty(Zz,"__esModule",{value:!0}),Zz.IORedisInstrumentation=void 0;const SQ=io,EQ=aQ,mQ=FB,TQ=aQ,_Q=lQ,bQ=dQ,vQ=pQ,yQ={requireParentSpan:!0};class RQ extends EQ.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-ioredis",vQ.VERSION,Object.assign({},yQ,t))}init(){return[new EQ.InstrumentationNodeModuleDefinition("ioredis",[">1","<6"],((t,n)=>{const e="Module"===t[Symbol.toStringTag]?t.default:t;return(0,EQ.isWrapped)(e.prototype.sendCommand)&&this.Rt(e.prototype,"sendCommand"),this.yt(e.prototype,"sendCommand",this.Mi(n)),(0,EQ.isWrapped)(e.prototype.connect)&&this.Rt(e.prototype,"connect"),this.yt(e.prototype,"connect",this.Zi()),t}),(t=>{if(void 0===t)return;const n="Module"===t[Symbol.toStringTag]?t.default:t;this.Rt(n.prototype,"sendCommand"),this.Rt(n.prototype,"connect")}))]}Mi(t){return n=>this.Pi(n,t)}Zi(){return t=>this.Vi(t)}Pi(t,n){const e=this;return function(r){if(arguments.length<1||"object"!=typeof r)return t.apply(this,arguments);const o=e.getConfig(),i=(null==o?void 0:o.dbStatementSerializer)||bQ.defaultDbStatementSerializer,s=void 0===SQ.trace.getSpan(SQ.context.active());if(!0===(null==o?void 0:o.requireParentSpan)&&s)return t.apply(this,arguments);const c=e.tracer.startSpan(r.name,{kind:SQ.SpanKind.CLIENT,attributes:{[mQ.SemanticAttributes.DB_SYSTEM]:mQ.DbSystemValues.REDIS,[mQ.SemanticAttributes.DB_STATEMENT]:i(r.name,r.args)}});(null==o?void 0:o.requestHook)&&(0,TQ.safeExecuteInTheMiddle)((()=>null==o?void 0:o.requestHook(c,{moduleVersion:n,cmdName:r.name,cmdArgs:r.args})),(t=>{t&&SQ.diag.error("ioredis instrumentation: request hook failed",t)}),!0);const{host:u,port:a}=this.options;c.setAttributes({[mQ.SemanticAttributes.NET_PEER_NAME]:u,[mQ.SemanticAttributes.NET_PEER_PORT]:a,[mQ.SemanticAttributes.DB_CONNECTION_STRING]:`redis://${u}:${a}`});try{const n=t.apply(this,arguments),e=r.resolve;r.resolve=function(t){(0,TQ.safeExecuteInTheMiddle)((()=>{var n;return null===(n=null==o?void 0:o.responseHook)||void 0===n?void 0:n.call(o,c,r.name,r.args,t)}),(t=>{t&&SQ.diag.error("ioredis instrumentation: response hook failed",t)}),!0),(0,_Q.endSpan)(c,null),e(t)};const i=r.reject;return r.reject=function(t){(0,_Q.endSpan)(c,t),i(t)},n}catch(t){throw(0,_Q.endSpan)(c,t),t}}}Vi(t){const n=this;return function(){const e=n.getConfig(),r=void 0===SQ.trace.getSpan(SQ.context.active());if(!0===(null==e?void 0:e.requireParentSpan)&&r)return t.apply(this,arguments);const o=n.tracer.startSpan("connect",{kind:SQ.SpanKind.CLIENT,attributes:{[mQ.SemanticAttributes.DB_SYSTEM]:mQ.DbSystemValues.REDIS,[mQ.SemanticAttributes.DB_STATEMENT]:"connect"}}),{host:i,port:s}=this.options;o.setAttributes({[mQ.SemanticAttributes.NET_PEER_NAME]:i,[mQ.SemanticAttributes.NET_PEER_PORT]:s,[mQ.SemanticAttributes.DB_CONNECTION_STRING]:`redis://${i}:${s}`});try{const n=t.apply(this,arguments);return(0,_Q.endSpan)(o,null),n}catch(t){throw(0,_Q.endSpan)(o,t),t}}}}Zz.IORedisInstrumentation=RQ;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(Zz,t),e(AQ,t)}(Mz);const OQ="Redis";let gQ={};const NQ=cF(OQ,(()=>new Mz.IORedisInstrumentation({responseHook:(t,n,e,r)=>{const o=e[0];if(t.setAttribute(JU,"auto.db.otel.redis"),!Qn([gQ,"optionalAccess",t=>t.cachePrefixes])||!function(t,n,e){return("get"===t||"set"===t)&&"string"==typeof n&&function(t,n){return n.some((n=>t.startsWith(n)))}(n,e)}(n,o,gQ.cachePrefixes))return;const i=Qn([uW,"call",n=>n(t),"access",t=>t.data,"optionalAccess",t=>t["net.peer.name"]]),s=Qn([uW,"call",n=>n(t),"access",t=>t.data,"optionalAccess",t=>t["net.peer.port"]]);s&&i&&t.setAttributes({"network.peer.address":i,"network.peer.port":s});const c=function(t){try{return Buffer.isBuffer(t)?t.byteLength:"string"==typeof t?t.length:"number"==typeof t?t.toString().length:null==t?0:JSON.stringify(t).length}catch(t){return}}(r);if(c&&t.setAttribute("cache.item_size",c),"string"==typeof o)switch(n){case"get":t.setAttributes({[FU]:"cache.get_item",[$U]:o}),void 0!==c&&t.setAttribute("cache.hit",c>0);break;case"set":t.setAttributes({[FU]:"cache.put",[$U]:o})}}}))),CQ=(t={})=>({name:OQ,setupOnce(){gQ=t,NQ()}});var LQ={},IQ={},wQ={};Object.defineProperty(wQ,"__esModule",{value:!0}),wQ.VERSION=void 0,wQ.VERSION="0.36.0";var MQ={},ZQ={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.VERSION="nestjs.version",t.TYPE="nestjs.type",t.MODULE="nestjs.module",t.CONTROLLER="nestjs.controller",t.CALLBACK="nestjs.callback",t.PIPES="nestjs.pipes",t.INTERCEPTORS="nestjs.interceptors",t.GUARDS="nestjs.guards"}(t.AttributeNames||(t.AttributeNames={}))}(ZQ);var PQ={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NestType=void 0,function(t){t.APP_CREATION="app_creation",t.REQUEST_CONTEXT="request_context",t.REQUEST_HANDLER="handler"}(t.NestType||(t.NestType={}))}(PQ),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NestType=t.AttributeNames=void 0;var n=ZQ;Object.defineProperty(t,"AttributeNames",{enumerable:!0,get:function(){return n.AttributeNames}});var e=PQ;Object.defineProperty(t,"NestType",{enumerable:!0,get:function(){return e.NestType}})}(MQ),Object.defineProperty(IQ,"__esModule",{value:!0}),IQ.Instrumentation=void 0;const VQ=io,GQ=_F,XQ=FB,UQ=wQ,WQ=MQ;class YQ extends GQ.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-nestjs-core",UQ.VERSION)}init(){const t=new GQ.InstrumentationNodeModuleDefinition(YQ.COMPONENT,[">=4.0.0"],((t,n)=>(this.Ct.debug(`Patching ${YQ.COMPONENT}@${n}`),t)),((t,n)=>{this.Ct.debug(`Unpatching ${YQ.COMPONENT}@${n}`)}));return t.files.push(this.getNestFactoryFileInstrumentation([">=4.0.0"]),this.getRouterExecutionContextFileInstrumentation([">=4.0.0"])),t}getNestFactoryFileInstrumentation(t){return new GQ.InstrumentationNodeModuleFile("@nestjs/core/nest-factory.js",t,((t,n)=>(this.ensureWrapped(n,t.NestFactoryStatic.prototype,"create",function(t,n){return function(e){return function(r){const o=t.startSpan("Create Nest App",{attributes:Object.assign(Object.assign({},YQ.COMMON_ATTRIBUTES),{[WQ.AttributeNames.TYPE]:WQ.NestType.APP_CREATION,[WQ.AttributeNames.VERSION]:n,[WQ.AttributeNames.MODULE]:r.name})}),i=VQ.trace.setSpan(VQ.context.active(),o);return VQ.context.with(i,(async()=>{try{return await e.apply(this,arguments)}catch(t){throw HQ(o,t)}finally{o.end()}}))}}}(this.tracer,n)),t)),(t=>{this.Rt(t.NestFactoryStatic.prototype,"create")}))}getRouterExecutionContextFileInstrumentation(t){return new GQ.InstrumentationNodeModuleFile("@nestjs/core/router/router-execution-context.js",t,((t,n)=>(this.ensureWrapped(n,t.RouterExecutionContext.prototype,"create",function(t,n){return function(e){return function(r,o){arguments[1]=function(t,n,e){const r=function(){const r=t.startSpan(e.name||"anonymous nest handler",{attributes:Object.assign(Object.assign({},YQ.COMMON_ATTRIBUTES),{[WQ.AttributeNames.VERSION]:n,[WQ.AttributeNames.TYPE]:WQ.NestType.REQUEST_HANDLER,[WQ.AttributeNames.CALLBACK]:e.name})}),o=VQ.trace.setSpan(VQ.context.active(),r);return VQ.context.with(o,(async()=>{try{return await e.apply(this,arguments)}catch(t){throw HQ(r,t)}finally{r.end()}}))};e.name&&Object.defineProperty(r,"name",{value:e.name});return Reflect.getMetadataKeys(e).forEach((t=>{Reflect.defineMetadata(t,Reflect.getMetadata(t,e),r)})),r}(t,n,o);const i=e.apply(this,arguments);return function(e,s,c){var u,a;const l=o.name,f=r.constructor&&r.constructor.name?r.constructor.name:"UnnamedInstance",d=l?`${f}.${l}`:f,h=t.startSpan(d,{attributes:Object.assign(Object.assign({},YQ.COMMON_ATTRIBUTES),{[WQ.AttributeNames.VERSION]:n,[WQ.AttributeNames.TYPE]:WQ.NestType.REQUEST_CONTEXT,[XQ.SemanticAttributes.HTTP_METHOD]:e.method,[XQ.SemanticAttributes.HTTP_URL]:e.originalUrl||e.url,[XQ.SemanticAttributes.HTTP_ROUTE]:(null===(u=e.route)||void 0===u?void 0:u.path)||(null===(a=e.routeOptions)||void 0===a?void 0:a.url)||e.routerPath,[WQ.AttributeNames.CONTROLLER]:f,[WQ.AttributeNames.CALLBACK]:l})}),p=VQ.trace.setSpan(VQ.context.active(),h);return VQ.context.with(p,(async()=>{try{return await i.apply(this,arguments)}catch(t){throw HQ(h,t)}finally{h.end()}}))}}}}(this.tracer,n)),t)),(t=>{this.Rt(t.RouterExecutionContext.prototype,"create")}))}ensureWrapped(t,n,e,r){this.Ct.debug(`Applying ${e} patch for ${YQ.COMPONENT}@${t}`),(0,GQ.isWrapped)(n[e])&&this.Rt(n,e),this.yt(n,e,r)}}IQ.Instrumentation=YQ,YQ.COMPONENT="@nestjs/core",YQ.COMMON_ATTRIBUTES={component:YQ.COMPONENT};const HQ=(t,n)=>(t.recordException(n),t.setStatus({code:VQ.SpanStatusCode.ERROR,message:n.message}),n);!function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.NestInstrumentation=void 0;const r=IQ;Object.defineProperty(t,"NestInstrumentation",{enumerable:!0,get:function(){return r.Instrumentation}}),e(IQ,t),e(ZQ,t)}(LQ);const DQ="Nest",jQ=cF(DQ,(()=>new LQ.NestInstrumentation)),xQ=()=>({name:DQ,setupOnce(){jQ()}});var kQ={},KQ={},BQ={},FQ={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.PG_VALUES="db.postgresql.values",t.PG_PLAN="db.postgresql.plan",t.IDLE_TIMEOUT_MILLIS="db.postgresql.idle.timeout.millis",t.MAX_CLIENT="db.postgresql.max.client"}(t.AttributeNames||(t.AttributeNames={}))}(FQ);var JQ={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpanNames=void 0,function(t){t.QUERY_PREFIX="pg.query",t.CONNECT="pg.connect",t.POOL_CONNECT="pg-pool.connect"}(t.SpanNames||(t.SpanNames={}))}(JQ),Object.defineProperty(BQ,"__esModule",{value:!0}),BQ.isObjectWithTextString=BQ.getErrorMessage=BQ.patchClientConnectCallback=BQ.patchCallbackPGPool=BQ.patchCallback=BQ.handleExecutionResult=BQ.handleConfigQuery=BQ.shouldSkipInstrumentation=BQ.getSemanticAttributesFromPool=BQ.getSemanticAttributesFromConnection=BQ.getConnectionString=BQ.getQuerySpanName=void 0;const zQ=io,QQ=FQ,$Q=FB,qQ=_F,t$=JQ;function n$(t,n){if(!n)return t$.SpanNames.QUERY_PREFIX;const e="string"==typeof n.name&&n.name?n.name:function(t){const n=t.split(" ")[0].toUpperCase();return n.endsWith(";")?n.slice(0,-1):n}(n.text);return`${t$.SpanNames.QUERY_PREFIX}:${e}${t?` ${t}`:""}`}function e$(t){return`postgresql://${t.host||"localhost"}:${t.port||5432}/${t.database||""}`}function r$(t){if(Number.isInteger(t))return t}function o$(t){return{[$Q.SEMATTRS_DB_SYSTEM]:$Q.DBSYSTEMVALUES_POSTGRESQL,[$Q.SEMATTRS_DB_NAME]:t.database,[$Q.SEMATTRS_DB_CONNECTION_STRING]:e$(t),[$Q.SEMATTRS_NET_PEER_NAME]:t.host,[$Q.SEMATTRS_NET_PEER_PORT]:r$(t.port),[$Q.SEMATTRS_DB_USER]:t.user}}function i$(t,n,e){"function"==typeof t.responseHook&&(0,qQ.safeExecuteInTheMiddle)((()=>{t.responseHook(n,{data:e})}),(t=>{t&&zQ.diag.error("Error running response hook",t)}),!0)}BQ.getQuerySpanName=n$,BQ.getConnectionString=e$,BQ.getSemanticAttributesFromConnection=o$,BQ.getSemanticAttributesFromPool=function(t){return{[$Q.SEMATTRS_DB_SYSTEM]:$Q.DBSYSTEMVALUES_POSTGRESQL,[$Q.SEMATTRS_DB_NAME]:t.database,[$Q.SEMATTRS_DB_CONNECTION_STRING]:e$(t),[$Q.SEMATTRS_NET_PEER_NAME]:t.host,[$Q.SEMATTRS_NET_PEER_PORT]:r$(t.port),[$Q.SEMATTRS_DB_USER]:t.user,[QQ.AttributeNames.IDLE_TIMEOUT_MILLIS]:t.idleTimeoutMillis,[QQ.AttributeNames.MAX_CLIENT]:t.maxClient}},BQ.shouldSkipInstrumentation=function(t){return!0===t.requireParentSpan&&void 0===zQ.trace.getSpan(zQ.context.active())},BQ.handleConfigQuery=function(t,n,e){const{connectionParameters:r}=this,o=n$(r.database,e),i=t.startSpan(o,{kind:zQ.SpanKind.CLIENT,attributes:o$(r)});if(!e)return i;if(e.text&&i.setAttribute($Q.SEMATTRS_DB_STATEMENT,e.text),n.enhancedDatabaseReporting&&Array.isArray(e.values))try{const t=e.values.map((t=>null==t?"null":t instanceof Buffer?t.toString():"object"==typeof t?"function"==typeof t.toPostgres?t.toPostgres():JSON.stringify(t):t.toString()));i.setAttribute(QQ.AttributeNames.PG_VALUES,t)}catch(t){zQ.diag.error("failed to stringify ",e.values,t)}return"string"==typeof e.name&&i.setAttribute(QQ.AttributeNames.PG_PLAN,e.name),i},BQ.handleExecutionResult=i$,BQ.patchCallback=function(t,n,e){return function(r,o){r?n.setStatus({code:zQ.SpanStatusCode.ERROR,message:r.message}):i$(t,n,o),n.end(),e.call(this,r,o)}},BQ.patchCallbackPGPool=function(t,n){return function(e,r,o){e&&t.setStatus({code:zQ.SpanStatusCode.ERROR,message:e.message}),t.end(),n.call(this,e,r,o)}},BQ.patchClientConnectCallback=function(t,n){return function(e){e&&t.setStatus({code:zQ.SpanStatusCode.ERROR,message:e.message}),t.end(),n.apply(this,arguments)}},BQ.getErrorMessage=function(t){return"object"==typeof t&&null!==t&&"message"in t?String(t.message):void 0},BQ.isObjectWithTextString=function(t){var n;return"object"==typeof t&&"string"==typeof(null===(n=t)||void 0===n?void 0:n.text)};var s$={};Object.defineProperty(s$,"__esModule",{value:!0}),s$.VERSION=void 0,s$.VERSION="0.40.0",Object.defineProperty(KQ,"__esModule",{value:!0}),KQ.PgInstrumentation=void 0;const c$=_F,u$=io,a$=BQ,l$=pz,f$=s$,d$=JQ;class h$ extends c$.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-pg",f$.VERSION,Object.assign({},t))}init(){return[new c$.InstrumentationNodeModuleDefinition("pg",["8.*"],((t,n)=>{this.Ct.debug(`Applying patch for pg@${n}`);const e="Module"===t[Symbol.toStringTag]?t.default:t;return(0,c$.isWrapped)(e.Client.prototype.query)&&this.Rt(e.Client.prototype,"query"),(0,c$.isWrapped)(e.Client.prototype.connect)&&this.Rt(e.Client.prototype,"connect"),this.yt(e.Client.prototype,"query",this.Gi()),this.yt(e.Client.prototype,"connect",this.Xi()),t}),((t,n)=>{const e="Module"===t[Symbol.toStringTag]?t.default:t;this.Ct.debug(`Removing patch for pg@${n}`),(0,c$.isWrapped)(e.Client.prototype.query)&&this.Rt(e.Client.prototype,"query")})),new c$.InstrumentationNodeModuleDefinition("pg-pool",["2.*","3.*"],((t,n)=>(this.Ct.debug(`Applying patch for pg-pool@${n}`),(0,c$.isWrapped)(t.prototype.connect)&&this.Rt(t.prototype,"connect"),this.yt(t.prototype,"connect",this.Ui()),t)),((t,n)=>{this.Ct.debug(`Removing patch for pg-pool@${n}`),(0,c$.isWrapped)(t.prototype.connect)&&this.Rt(t.prototype,"connect")}))]}setConfig(t={}){this.Nt=Object.assign({},t)}getConfig(){return this.Nt}Xi(){const t=this;return n=>function(e){if(a$.shouldSkipInstrumentation(t.getConfig()))return n.call(this,e);const r=t.tracer.startSpan(d$.SpanNames.CONNECT,{kind:u$.SpanKind.CLIENT,attributes:a$.getSemanticAttributesFromConnection(this)});if(e){const t=u$.trace.getSpan(u$.context.active());e=a$.patchClientConnectCallback(r,e),t&&(e=u$.context.bind(u$.context.active(),e))}return p$(r,u$.context.with(u$.trace.setSpan(u$.context.active(),r),(()=>n.call(this,e))))}}Gi(){const t=this;return n=>(this.Ct.debug("Patching pg.Client.prototype.query"),function(...e){if(a$.shouldSkipInstrumentation(t.getConfig()))return n.apply(this,e);const r=e[0],o="string"==typeof r,i=a$.isObjectWithTextString(r),s=o?{text:r,values:Array.isArray(e[1])?e[1]:void 0}:i?r:void 0,c=t.getConfig(),u=a$.handleConfigQuery.call(this,t.tracer,c,s);if(c.addSqlCommenterCommentToQueries&&(e[0]=o?(0,l$.addSqlCommenterComment)(u,r):i?Object.assign(Object.assign({},r),{text:(0,l$.addSqlCommenterComment)(u,r.text)}):e[0]),e.length>0){const n=u$.trace.getSpan(u$.context.active());if("function"==typeof e[e.length-1])e[e.length-1]=a$.patchCallback(c,u,e[e.length-1]),n&&(e[e.length-1]=u$.context.bind(u$.context.active(),e[e.length-1]));else if("function"==typeof(null==s?void 0:s.callback)){let r=a$.patchCallback(t.getConfig(),u,s.callback);n&&(r=u$.context.bind(u$.context.active(),r)),e[0].callback=r}}let a;"function"==typeof c.requestHook&&s&&(0,c$.safeExecuteInTheMiddle)((()=>{const{database:t,host:n,port:e,user:r}=this.connectionParameters,o={database:t,host:n,port:e,user:r};c.requestHook(u,{connection:o,query:{text:s.text,values:s.values,name:s.name}})}),(n=>{n&&t.Ct.error("Error running query hook",n)}),!0);try{a=n.apply(this,e)}catch(t){throw u.setStatus({code:u$.SpanStatusCode.ERROR,message:a$.getErrorMessage(t)}),u.end(),t}return a instanceof Promise?a.then((n=>new Promise((e=>{a$.handleExecutionResult(t.getConfig(),u,n),u.end(),e(n)})))).catch((t=>new Promise(((n,e)=>{u.setStatus({code:u$.SpanStatusCode.ERROR,message:t.message}),u.end(),e(t)})))):a})}Ui(){const t=this;return n=>function(e){if(a$.shouldSkipInstrumentation(t.getConfig()))return n.call(this,e);const r=t.tracer.startSpan(d$.SpanNames.POOL_CONNECT,{kind:u$.SpanKind.CLIENT,attributes:a$.getSemanticAttributesFromPool(this.options)});if(e){const t=u$.trace.getSpan(u$.context.active());e=a$.patchCallbackPGPool(r,e),t&&(e=u$.context.bind(u$.context.active(),e))}return p$(r,u$.context.with(u$.trace.setSpan(u$.context.active(),r),(()=>n.call(this,e))))}}}function p$(t,n){if(!(n instanceof Promise))return n;const e=n;return u$.context.bind(u$.context.active(),e.then((n=>(t.end(),n))).catch((n=>(t.setStatus({code:u$.SpanStatusCode.ERROR,message:a$.getErrorMessage(n)}),t.end(),Promise.reject(n)))))}KQ.PgInstrumentation=h$;var S$={};Object.defineProperty(S$,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(KQ,t),e(S$,t),e(FQ,t)}(kQ);const E$="Postgres",m$=cF(E$,(()=>new kQ.PgInstrumentation({requireParentSpan:!0,requestHook(t){yK(t,"auto.db.otel.postgres")}}))),T$=()=>({name:E$,setupOnce(){m$()}});var _$=xt(_x);function b$(t,n){return null!=t?t:n()}var v$=Object.defineProperty,y$=Object.getOwnPropertyDescriptor,R$=Object.getOwnPropertyNames,A$=Object.prototype.hasOwnProperty,O$={};((t,n)=>{for(var e in n)v$(t,e,{get:n[e],enumerable:!0})})(O$,{ActiveTracingHelper:()=>I$});var g$=(t=>((t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of R$(n))A$.call(t,o)||o===e||v$(t,o,{get:()=>n[o],enumerable:!(r=y$(n,o))||r.enumerable});return t})(v$({},"__esModule",{value:!0}),t))(O$),N$=io,C$=_$,L$="true"===process.env.PRISMA_SHOW_ALL_TRACES,I$=class{constructor({traceMiddleware:t}){this.traceMiddleware=t}isEnabled(){return!0}getTraceParent(t){const n=N$.trace.getSpanContext(b$(t,(()=>N$.context.active())));return n?`00-${n.traceId}-${n.spanId}-0${n.traceFlags}`:"00-10-10-00"}createEngineSpan(t){const n=N$.trace.getTracer("prisma");t.spans.forEach((t=>{const e={traceId:t.trace_id,spanId:t.span_id,traceFlags:N$.TraceFlags.SAMPLED},r=function(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}([t,"access",t=>t.links,"optionalAccess",t=>t.map,"call",t=>t((t=>({context:{traceId:t.trace_id,spanId:t.span_id,traceFlags:N$.TraceFlags.SAMPLED}})))]),o=new C$.Span(n,N$.ROOT_CONTEXT,t.name,e,N$.SpanKind.INTERNAL,t.parent_span_id,r,t.start_time);t.attributes&&o.setAttributes(t.attributes),o.end(t.end_time)}))}getActiveContext(){return N$.context.active()}runInChildSpan(t,n){if("string"==typeof t&&(t={name:t}),t.internal&&!L$)return n();if(t.middleware&&!this.traceMiddleware)return n();const e=N$.trace.getTracer("prisma"),r=b$(t.context,(()=>this.getActiveContext())),o=`prisma:client:${t.name}`;if(!1===t.active){const i=e.startSpan(o,t,r);return w$(i,n(i,r))}return e.startActiveSpan(o,t,(t=>w$(t,n(t,r))))}};function w$(t,n){return null!=(e=n)&&"function"==typeof e.then?n.then((n=>(t.end(),n)),(n=>{throw t.end(),n})):(t.end(),n);var e}var M$=Object.defineProperty,Z$=Object.getOwnPropertyDescriptor,P$=Object.getOwnPropertyNames,V$=Object.prototype.hasOwnProperty,G$={};((t,n)=>{for(var e in n)M$(t,e,{get:n[e],enumerable:!0})})(G$,{__commonJS:()=>W$});var X$=(t=>((t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of P$(n))V$.call(t,o)||o===e||M$(t,o,{get:()=>n[o],enumerable:!(r=Z$(n,o))||r.enumerable});return t})(M$({},"__esModule",{value:!0}),t))(G$),U$=Object.getOwnPropertyNames,W$=(t,n)=>function(){return n||(0,t[U$(t)[0]])((n={exports:{}}).exports,n),n.exports},Y$=Object.defineProperty,H$=Object.getOwnPropertyDescriptor,D$=Object.getOwnPropertyNames,j$=Object.prototype.hasOwnProperty,x$={};((t,n)=>{for(var e in n)Y$(t,e,{get:n[e],enumerable:!0})})(x$,{GLOBAL_KEY:()=>J$,MODULE_NAME:()=>$$,NAME:()=>Q$,VERSION:()=>z$});var k$=(t=>((t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of D$(n))j$.call(t,o)||o===e||Y$(t,o,{get:()=>n[o],enumerable:!(r=H$(n,o))||r.enumerable});return t})(Y$({},"__esModule",{value:!0}),t))(x$),K$=(0,X$.__commonJS)({"package.json"(t,n){n.exports={name:"@prisma/instrumentation",version:"5.13.0",description:"OpenTelemetry compliant instrumentation for Prisma Client",main:"dist/index.js",types:"dist/index.d.ts",license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation"},bugs:"https://github.com/prisma/prisma/issues",devDependencies:{"@prisma/internals":"workspace:*","@swc/core":"1.4.11","@types/jest":"29.5.12","@types/node":"18.19.31",jest:"29.7.0","jest-junit":"16.0.0",typescript:"5.3.3"},dependencies:{"@opentelemetry/api":"1.8.0","@opentelemetry/instrumentation":"0.50.0","@opentelemetry/sdk-trace-base":"1.23.0"},files:["dist"],keywords:["prisma","instrumentation","opentelemetry","otel"],scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"jest"},sideEffects:!1}}}),{version:B$,name:F$}=K$(),J$="PRISMA_INSTRUMENTATION",z$=B$,Q$=F$,$$="prisma";var q$=Object.defineProperty,tq=Object.getOwnPropertyDescriptor,nq=Object.getOwnPropertyNames,eq=Object.prototype.hasOwnProperty,rq={};((t,n)=>{for(var e in n)q$(t,e,{get:n[e],enumerable:!0})})(rq,{PrismaInstrumentation:()=>uq});var oq=(t=>((t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of nq(n))eq.call(t,o)||o===e||q$(t,o,{get:()=>n[o],enumerable:!(r=tq(n,o))||r.enumerable});return t})(q$({},"__esModule",{value:!0}),t))(rq),iq=g$,sq=k$,cq=_F,uq=class extends cq.InstrumentationBase{constructor(t={}){super(sq.NAME,sq.VERSION,t)}init(){return[new cq.InstrumentationNodeModuleDefinition(sq.MODULE_NAME,[sq.VERSION])]}enable(){const t=this.Nt,n={helper:new iq.ActiveTracingHelper({traceMiddleware:(e=t.middleware,r=()=>!1,null!=e?e:r())})};var e,r;Dt[sq.GLOBAL_KEY]=n}disable(){delete Dt[sq.GLOBAL_KEY]}isEnabled(){return Boolean(Dt[sq.GLOBAL_KEY])}},aq=Object.defineProperty,lq=Object.getOwnPropertyDescriptor,fq=Object.getOwnPropertyNames,dq=Object.prototype.hasOwnProperty,hq={};((t,n)=>{for(var e in n)aq(t,e,{get:n[e],enumerable:!0})})(hq,{PrismaInstrumentation:()=>Sq.PrismaInstrumentation});var pq=(t=>((t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of fq(n))dq.call(t,o)||o===e||aq(t,o,{get:()=>n[o],enumerable:!(r=lq(n,o))||r.enumerable});return t})(aq({},"__esModule",{value:!0}),t))(hq),Sq=oq,Eq=N({__proto__:null,default:jt(pq)},[pq]);const mq="Prisma",Tq=cF(mq,(()=>new(Qn([Eq,"access",t=>t.default,"optionalAccess",t=>t.PrismaInstrumentation])||pq.PrismaInstrumentation)({}))),_q=()=>({name:mq,setupOnce(){Tq()},setup(t){t.on("spanStart",(t=>{const n=uW(t);Qn([n,"access",t=>t.description,"optionalAccess",t=>t.startsWith,"call",t=>t("prisma:")])&&t.setAttribute(JU,"auto.db.otel.prisma"),"prisma:engine:db_query"===n.description&&t.setAttribute("db.system","prisma")}))}});var bq={},vq={},yq=function(){function t(){}return t.prototype.emit=function(t){},t}(),Rq=new(function(){function t(){}return t.prototype.getLogger=function(t,n,e){return new yq},t}()),Aq="object"==typeof globalThis?globalThis:global,Oq=Symbol.for("io.opentelemetry.js.api.logs"),gq=Aq;var Nq=function(){function t(){}return t.getInstance=function(){return this.L||(this.L=new t),this.L},t.prototype.setGlobalLoggerProvider=function(t){return gq[Oq]?this.getLoggerProvider():(gq[Oq]=(n=1,e=t,r=Rq,function(t){return t===n?e:r}),t);var n,e,r},t.prototype.getLoggerProvider=function(){var t,n;return null!==(n=null===(t=gq[Oq])||void 0===t?void 0:t.call(gq,1))&&void 0!==n?n:Rq},t.prototype.getLogger=function(t,n,e){return this.getLoggerProvider().getLogger(t,n,e)},t.prototype.disable=function(){delete gq[Oq]},t}(),Cq=Nq.getInstance();function Lq(t){void 0===t&&(t=[]);for(var n=[],e=0,r=t.length;e<r;e++){var o=t[e];if(Array.isArray(o)){var i=Lq(o);n=n.concat(i.instrumentations)}else"function"==typeof o?n.push(new o):o.instrumentationName&&n.push(o)}return{instrumentations:n}}var Iq=function(){return Iq=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},Iq.apply(this,arguments)},wq=function(){function t(t,n,e){void 0===e&&(e={}),this.instrumentationName=t,this.instrumentationVersion=n,this.yt=yy.wrap,this.Rt=yy.unwrap,this.At=yy.massWrap,this.Ot=yy.massUnwrap,this.Nt=Iq({enabled:!0},e),this.Ct=Yr.createComponentLogger({namespace:t}),this.Lt=ro.getTracer(t,n),this.It=xr.getMeter(t,n),this.wt=Cq.getLogger(t,n),this.Mt()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(t){this.It=t.getMeter(this.instrumentationName,this.instrumentationVersion),this.Mt()},Object.defineProperty(t.prototype,"logger",{get:function(){return this.wt},enumerable:!1,configurable:!0}),t.prototype.setLoggerProvider=function(t){this.wt=t.getLogger(this.instrumentationName,this.instrumentationVersion)},t.prototype.getModuleDefinitions=function(){var t,n=null!==(t=this.init())&&void 0!==t?t:[];return Array.isArray(n)?n:[n]},t.prototype.Mt=function(){},t.prototype.getConfig=function(){return this.Nt},t.prototype.setConfig=function(t){void 0===t&&(t={}),this.Nt=Object.assign({},t)},t.prototype.setTracerProvider=function(t){this.Lt=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this.Lt},enumerable:!1,configurable:!0}),t}(),Mq=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Zq=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return s},Pq=function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))},Vq="/",Gq=function(){this.hooks=[],this.children=new Map},Xq=function(){function t(){this.en=new Gq,this.rn=0}return t.prototype.insert=function(t){var n,e,r=this.en;try{for(var o=Mq(t.moduleName.split(Vq)),i=o.next();!i.done;i=o.next()){var s=i.value,c=r.children.get(s);c||(c=new Gq,r.children.set(s,c)),r=c}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}r.hooks.push({hook:t,insertedId:this.rn++})},t.prototype.search=function(t,n){var e,r,o=void 0===n?{}:n,i=o.maintainInsertionOrder,s=o.fullOnly,c=this.en,u=[],a=!0;try{for(var l=Mq(t.split(Vq)),f=l.next();!f.done;f=l.next()){var d=f.value,h=c.children.get(d);if(!h){a=!1;break}s||u.push.apply(u,Pq([],Zq(h.hooks),!1)),c=h}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s&&a&&u.push.apply(u,Pq([],Zq(c.hooks),!1)),0===u.length?[]:1===u.length?[u[0].hook]:(i&&u.sort((function(t,n){return t.insertedId-n.insertedId})),u.map((function(t){return t.hook})))},t}(),Uq=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Wq=["afterEach","after","beforeEach","before","describe","it"].every((function(t){return"function"==typeof global[t]})),Yq=function(){function t(){this.sn=new Xq,this.cn()}return t.prototype.cn=function(){var t=this;new qR(null,{internals:!0},(function(n,e,r){var o,i,s,c=(s=e,C.sep!==Vq?s.split(C.sep).join(Vq):s),u=t.sn.search(c,{maintainInsertionOrder:!0,fullOnly:void 0===r});try{for(var a=Uq(u),l=a.next();!l.done;l=a.next()){n=(0,l.value.onRequire)(n,e,r)}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return n}))},t.prototype.register=function(t,n){var e={moduleName:t,onRequire:n};return this.sn.insert(e),e},t.getInstance=function(){var n;return Wq?new t:this.L=null!==(n=this.L)&&void 0!==n?n:new t},t}();var Hq=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dq=function(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},jq=function(t){function n(n,r,o){void 0===o&&(o={});var i=t.call(this,n,r,o)||this;i.an=[],i.ln=Yq.getInstance(),i.fn=!1,i.yt=function(t,n,r){if(e.types.isProxy(t)){var o=yy.wrap(Object.assign({},t),n,r);return Object.defineProperty(t,n,{value:o})}return yy.wrap(t,n,r)},i.Rt=function(t,n){return e.types.isProxy(t)?Object.defineProperty(t,n,{value:t[n]}):yy.unwrap(t,n)},i.At=function(t,n,e){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.yt(t,n,e)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")},i.Ot=function(t,n){t?(Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach((function(t){n.forEach((function(n){i.Rt(t,n)}))})):Yr.error("must provide one or more functions to wrap on modules")):Yr.error("must provide one or more modules to patch")};var s=i.init();return s&&!Array.isArray(s)&&(s=[s]),i.dn=s||[],0===i.dn.length&&Yr.debug("No modules instrumentation has been defined for '"+i.instrumentationName+"@"+i.instrumentationVersion+"', nothing will be patched"),i.Nt.enabled&&i.enable(),i}return Hq(n,t),n.prototype.hn=function(){var t=this;this.dn.forEach((function(n){var e=n.name;try{var r=require.resolve(e);require.cache[r]&&t.Ct.warn("Module "+e+" has been loaded before "+t.instrumentationName+" so it might not work, please initialize it before requiring "+e)}catch(t){}}))},n.prototype.pn=function(t){try{var n=o.readFileSync(C.join(t,"package.json"),{encoding:"utf8"}),e=JSON.parse(n).version;return"string"==typeof e?e:void 0}catch(n){Yr.warn("Failed extracting version",t)}},n.prototype.Sn=function(t,n,e,r){var o,i=this;if(!r)return"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?(this.Ct.debug("Applying instrumentation patch for nodejs core module on require hook",{module:t.name}),t.patch(n)):n;var s=this.pn(r);if(t.moduleVersion=s,t.name===e)return xq(t.supportedVersions,s,t.includePrerelease)&&"function"==typeof t.patch&&(t.moduleExports=n,this.fn)?(this.Ct.debug("Applying instrumentation patch for module on require hook",{module:t.name,version:t.moduleVersion,baseDir:r}),t.patch(n,t.moduleVersion)):n;var c=null!==(o=t.files)&&void 0!==o?o:[],u=C.normalize(e);return c.filter((function(t){return t.name===u})).filter((function(n){return xq(n.supportedVersions,s,t.includePrerelease)})).reduce((function(n,e){return e.moduleExports=n,i.fn?(i.Ct.debug("Applying instrumentation patch for nodejs module file on require hook",{module:t.name,version:t.moduleVersion,fileName:e.name,baseDir:r}),e.patch(n,t.moduleVersion)):n}),n)},n.prototype.enable=function(){var t,n,e,r,o,i,s=this;if(!this.fn)if(this.fn=!0,this.an.length>0)try{for(var c=Dq(this.dn),u=c.next();!u.done;u=c.next()){var a=u.value;"function"==typeof a.patch&&a.moduleExports&&(this.Ct.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:a.name,version:a.moduleVersion}),a.patch(a.moduleExports,a.moduleVersion));try{for(var l=(e=void 0,Dq(a.files)),f=l.next();!f.done;f=l.next()){var d=f.value;d.moduleExports&&(this.Ct.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:a.name,version:a.moduleVersion,fileName:d.name}),d.patch(d.moduleExports,a.moduleVersion))}}catch(t){e={error:t}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}else{this.hn();var h=function(t){var n=function(n,e,r){return s.Sn(t,n,e,r)},e=C.isAbsolute(t.name)?new qR([t.name],{internals:!0},n):p.ln.register(t.name,n);p.an.push(e);var r=new ik([t.name],{internals:!1},(function(n,e,r){return s.Sn(t,n,e,r)}));p.an.push(r)},p=this;try{for(var S=Dq(this.dn),E=S.next();!E.done;E=S.next()){h(E.value)}}catch(t){o={error:t}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(o)throw o.error}}}},n.prototype.disable=function(){var t,n,e,r;if(this.fn){this.fn=!1;try{for(var o=Dq(this.dn),i=o.next();!i.done;i=o.next()){var s=i.value;"function"==typeof s.unpatch&&s.moduleExports&&(this.Ct.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:s.name,version:s.moduleVersion}),s.unpatch(s.moduleExports,s.moduleVersion));try{for(var c=(e=void 0,Dq(s.files)),u=c.next();!u.done;u=c.next()){var a=u.value;a.moduleExports&&(this.Ct.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:s.name,version:s.moduleVersion,fileName:a.name}),a.unpatch(a.moduleExports,s.moduleVersion))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},n.prototype.isEnabled=function(){return this.fn},n}(wq);function xq(t,n,e){return void 0===n?t.includes("*"):t.some((function(t){return ny.satisfies(n,t,{includePrerelease:e})}))}var kq=function(t,n,e,r,o){this.name=t,this.supportedVersions=n,this.patch=e,this.unpatch=r,this.files=o||[]},Kq=function(t,e,r,o){this.supportedVersions=e,this.patch=r,this.unpatch=o,this.name=n.normalize(t)},Bq=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}u((r=r.apply(t,n||[])).next())}))},Fq=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var Jq=Object.freeze({__proto__:null,InstrumentationBase:jq,InstrumentationNodeModuleDefinition:kq,InstrumentationNodeModuleFile:Kq,isWrapped:function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped},registerInstrumentations:function(t){var n=Lq(t.instrumentations).instrumentations,e=t.tracerProvider||ro.getTracerProvider(),r=t.meterProvider||xr.getMeterProvider(),o=t.loggerProvider||Cq.getLoggerProvider();return function(t,n,e,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];n&&s.setTracerProvider(n),e&&s.setMeterProvider(e),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}}(n,e,r,o),function(){!function(t){t.forEach((function(t){return t.disable()}))}(n)}},safeExecuteInTheMiddle:function(t,n,e){var r,o;try{o=t()}catch(t){r=t}finally{if(n(r,o),r&&!e)throw r;return o}},safeExecuteInTheMiddleAsync:function(t,n,e){return Bq(this,void 0,void 0,(function(){var r,o,i;return Fq(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),[4,t()];case 1:return o=s.sent(),[3,4];case 2:return i=s.sent(),r=i,[3,4];case 3:if(n(r,o),r&&!e)throw r;return[2,o];case 4:return[2]}}))}))}}),zq=xt(Jq),Qq={};Object.defineProperty(Qq,"__esModule",{value:!0}),Qq.VERSION=void 0,Qq.VERSION="0.38.0";var $q={};Object.defineProperty($q,"__esModule",{value:!0}),$q.HapiLifecycleMethodNames=$q.HapiLayerType=$q.handlerPatched=$q.HapiComponentName=void 0,$q.HapiComponentName="@hapi/hapi",$q.handlerPatched=Symbol("hapi-handler-patched"),$q.HapiLayerType={ROUTER:"router",PLUGIN:"plugin",EXT:"server.ext"},$q.HapiLifecycleMethodNames=new Set(["onPreAuth","onCredentials","onPostAuth","onPreHandler","onPostHandler","onPreResponse","onRequest"]);var qq={},t0={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.HAPI_TYPE="hapi.type",t.PLUGIN_NAME="hapi.plugin.name",t.EXT_TYPE="server.ext.type"}(t.AttributeNames||(t.AttributeNames={}))}(t0),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getPluginFromInput=t.getExtMetadata=t.getRouteMetadata=t.isPatchableExtMethod=t.isDirectExtInput=t.isLifecycleExtEventObj=t.isLifecycleExtType=t.getPluginName=void 0;const n=FB,e=$q,r=t0;t.getPluginName=function(t){return t.name?t.name:t.pkg.name};t.isLifecycleExtType=t=>"string"==typeof t&&e.HapiLifecycleMethodNames.has(t);t.isLifecycleExtEventObj=n=>{var e;const r=null===(e=n)||void 0===e?void 0:e.type;return void 0!==r&&(0,t.isLifecycleExtType)(r)};t.isDirectExtInput=n=>Array.isArray(n)&&n.length<=3&&(0,t.isLifecycleExtType)(n[0])&&"function"==typeof n[1];t.isPatchableExtMethod=t=>!Array.isArray(t);t.getRouteMetadata=(t,o)=>o?{attributes:{[n.SemanticAttributes.HTTP_ROUTE]:t.path,[n.SemanticAttributes.HTTP_METHOD]:t.method,[r.AttributeNames.HAPI_TYPE]:e.HapiLayerType.PLUGIN,[r.AttributeNames.PLUGIN_NAME]:o},name:`${o}: route - ${t.path}`}:{attributes:{[n.SemanticAttributes.HTTP_ROUTE]:t.path,[n.SemanticAttributes.HTTP_METHOD]:t.method,[r.AttributeNames.HAPI_TYPE]:e.HapiLayerType.ROUTER},name:`route - ${t.path}`};t.getExtMetadata=(t,n)=>n?{attributes:{[r.AttributeNames.EXT_TYPE]:t,[r.AttributeNames.HAPI_TYPE]:e.HapiLayerType.EXT,[r.AttributeNames.PLUGIN_NAME]:n},name:`${n}: ext - ${t}`}:{attributes:{[r.AttributeNames.EXT_TYPE]:t,[r.AttributeNames.HAPI_TYPE]:e.HapiLayerType.EXT},name:`ext - ${t}`};t.getPluginFromInput=t=>"plugin"in t?"plugin"in t.plugin?t.plugin.plugin:t.plugin:t}(qq),Object.defineProperty(vq,"__esModule",{value:!0}),vq.HapiInstrumentation=void 0;const n0=io,e0=EB,r0=zq,o0=Qq,i0=$q,s0=qq;class c0 extends r0.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-hapi",o0.VERSION,t)}init(){return new r0.InstrumentationNodeModuleDefinition(i0.HapiComponentName,[">=17 <22"],(t=>((0,r0.isWrapped)(t.server)||this.yt(t,"server",this.Wi.bind(this)),(0,r0.isWrapped)(t.Server)||this.yt(t,"Server",this.Wi.bind(this)),t)),(t=>{this.Ot([t],["server","Server"])}))}Wi(t){const n=this,e=this;return function(r){const o=t.apply(this,[r]);return e.yt(o,"route",(t=>n.Yi.bind(n)(t))),e.yt(o,"ext",(t=>n.Hi.bind(n)(t))),e.yt(o,"register",n.Di.bind(n)),o}}Di(t){const n=this;return function(e,r){if(Array.isArray(e))for(const t of e){const e=(0,s0.getPluginFromInput)(t);n.ji(e)}else{const t=(0,s0.getPluginFromInput)(e);n.ji(t)}return t.apply(this,[e,r])}}Hi(t,n){const e=this;return function(...r){if(Array.isArray(r[0])){const o=r[0];for(let t=0;t<o.length;t++){const r=o[t];if((0,s0.isLifecycleExtType)(r.type)){const i=r,s=e.xi(i.method,r.type,n);i.method=s,o[t]=i}}return t.apply(this,r)}if((0,s0.isDirectExtInput)(r)){const o=r,i=o[1],s=e.xi(i,o[0],n);return t.apply(this,[o[0],s,o[2]])}if((0,s0.isLifecycleExtEventObj)(r[0])){const o=r[0],i=e.xi(o.method,o.type,n);return o.method=i,t.call(this,o)}return t.apply(this,r)}}Yi(t,n){const e=this;return function(r){if(Array.isArray(r))for(let t=0;t<r.length;t++){const o=e.ki.call(e,r[t],n);r[t]=o}else r=e.ki.call(e,r,n);return t.apply(this,[r])}}ji(t){const n=this,e=(0,s0.getPluginName)(t),r=t.register,o=this;t.register=function(t,i){return o.yt(t,"route",(t=>n.Yi.bind(n)(t,e))),o.yt(t,"ext",(t=>n.Hi.bind(n)(t,e))),r(t,i)}}xi(t,n,e){const r=this;if(t instanceof Array){for(let e=0;e<t.length;e++)t[e]=r.xi(t[e],n);return t}if((0,s0.isPatchableExtMethod)(t)){if(!0===t[i0.handlerPatched])return t;t[i0.handlerPatched]=!0;return async function(...o){if(void 0===n0.trace.getSpan(n0.context.active()))return await t.apply(this,o);const i=(0,s0.getExtMetadata)(n,e),s=r.tracer.startSpan(i.name,{attributes:i.attributes});try{return await n0.context.with(n0.trace.setSpan(n0.context.active(),s),t,void 0,...o)}catch(t){throw s.recordException(t),s.setStatus({code:n0.SpanStatusCode.ERROR,message:t.message}),t}finally{s.end()}}}return t}ki(t,n){var e;const r=this;if(!0===t[i0.handlerPatched])return t;t[i0.handlerPatched]=!0;const o=e=>async function(...o){if(void 0===n0.trace.getSpan(n0.context.active()))return await e.call(this,...o);const i=(0,e0.getRPCMetadata)(n0.context.active());(null==i?void 0:i.type)===e0.RPCType.HTTP&&(i.route=t.path);const s=(0,s0.getRouteMetadata)(t,n),c=r.tracer.startSpan(s.name,{attributes:s.attributes});try{return await n0.context.with(n0.trace.setSpan(n0.context.active(),c),(()=>e.call(this,...o)))}catch(t){throw c.recordException(t),c.setStatus({code:n0.SpanStatusCode.ERROR,message:t.message}),t}finally{c.end()}};if("function"==typeof t.handler)t.handler=o(t.handler);else if("function"==typeof t.options){const n=t.options;t.options=function(t){const e=n(t);return"function"==typeof e.handler&&(e.handler=o(e.handler)),e}}else"function"==typeof(null===(e=t.options)||void 0===e?void 0:e.handler)&&(t.options.handler=o(t.options.handler));return t}}vq.HapiInstrumentation=c0,function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(vq,t),e(t0,t)}(bq);const u0="Hapi",a0=cF(u0,(()=>new bq.HapiInstrumentation)),l0=()=>({name:u0,setupOnce(){a0()}});function f0(t){captureException(t,{mechanism:{type:"hapi",handled:!1,data:{function:"hapiErrorPlugin"}}})}const d0={name:"SentryHapiErrorPlugin",version:IY,register:async function(t){t.events.on("request",((t,n)=>{if(UU()!==IU()){const n=t.route;n&&n.path&&UU().setTransactionName(`${Qn([n,"access",t=>t.method,"optionalAccess",t=>t.toUpperCase,"call",t=>t()])||"GET"} ${n.path}`)}const e=EW(),r=e?SW(e):void 0;var o;t.response&&((o=t.response)&&void 0!==o.isBoom)?f0(t.response):function(t){return t&&void 0!==t.error}(n)&&f0(n.error),r&&(r.setStatus({code:nW,message:"internal_error"}),r.end())}))}};var h0={},p0={},S0={};!function(t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.KoaLayerType=void 0,(n=t.KoaLayerType||(t.KoaLayerType={})).ROUTER="router",n.MIDDLEWARE="middleware"}(S0);var E0={};Object.defineProperty(E0,"__esModule",{value:!0}),E0.VERSION=void 0,E0.VERSION="0.39.0";var m0={},T0={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.KOA_TYPE="koa.type",t.KOA_NAME="koa.name"}(t.AttributeNames||(t.AttributeNames={}))}(T0),Object.defineProperty(m0,"__esModule",{value:!0}),m0.isLayerIgnored=m0.getMiddlewareMetadata=void 0;const _0=S0,b0=T0,v0=FB;m0.getMiddlewareMetadata=(t,n,e,r)=>{var o;return e?{attributes:{[b0.AttributeNames.KOA_NAME]:null==r?void 0:r.toString(),[b0.AttributeNames.KOA_TYPE]:_0.KoaLayerType.ROUTER,[v0.SEMATTRS_HTTP_ROUTE]:null==r?void 0:r.toString()},name:t.Ki||`router - ${r}`}:{attributes:{[b0.AttributeNames.KOA_NAME]:null!==(o=n.name)&&void 0!==o?o:"middleware",[b0.AttributeNames.KOA_TYPE]:_0.KoaLayerType.MIDDLEWARE},name:`middleware - ${n.name}`}};m0.isLayerIgnored=(t,n)=>{var e;return!(!Array.isArray(null==n?void 0:n.ignoreLayersType)||!(null===(e=null==n?void 0:n.ignoreLayersType)||void 0===e?void 0:e.includes(t)))};var y0={};Object.defineProperty(y0,"__esModule",{value:!0}),y0.kLayerPatched=void 0,y0.kLayerPatched=Symbol("koa-layer-patched"),Object.defineProperty(p0,"__esModule",{value:!0}),p0.KoaInstrumentation=void 0;const R0=io,A0=_F,O0=S0,g0=E0,N0=m0,C0=EB,L0=y0;class I0 extends A0.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-koa",g0.VERSION,Object.assign({},t))}setConfig(t={}){this.Nt=Object.assign({},t)}getConfig(){return this.Nt}init(){return new A0.InstrumentationNodeModuleDefinition("koa",["^2.0.0"],(t=>{const n="Module"===t[Symbol.toStringTag]?t.default:t;return null==n?n:(R0.diag.debug("Patching Koa"),(0,A0.isWrapped)(n.prototype.use)&&this.Rt(n.prototype,"use"),this.yt(n.prototype,"use",this.Bi.bind(this)),t)}),(t=>{const n="Module"===t[Symbol.toStringTag]?t.default:t;R0.diag.debug("Unpatching Koa"),(0,A0.isWrapped)(n.prototype.use)&&this.Rt(n.prototype,"use")}))}Bi(t){const n=this;return function(e){let r;return r=e.router?n.Fi(e):n.Ji(e,!1),t.apply(this,[r])}}Fi(t){var n;R0.diag.debug("Patching @koa/router dispatch");const e=t.router,r=null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:[];for(const t of r){const n=t.path,e=t.stack;for(let t=0;t<e.length;t++){const r=e[t];e[t]=this.Ji(r,!0,n)}}return t}Ji(t,n,e){const r=n?O0.KoaLayerType.ROUTER:O0.KoaLayerType.MIDDLEWARE;return!0===t[L0.kLayerPatched]||(0,N0.isLayerIgnored)(r,this.getConfig())?t:"GeneratorFunction"===t.constructor.name||"AsyncGeneratorFunction"===t.constructor.name?(R0.diag.debug("ignoring generator-based Koa middleware layer"),t):(t[L0.kLayerPatched]=!0,R0.diag.debug("patching Koa middleware layer"),async(o,i)=>{if(void 0===R0.trace.getSpan(R0.context.active()))return t(o,i);const s=(0,N0.getMiddlewareMetadata)(o,t,n,e),c=this.tracer.startSpan(s.name,{attributes:s.attributes}),u=(0,C0.getRPCMetadata)(R0.context.active());(null==u?void 0:u.type)===C0.RPCType.HTTP&&o.zi&&(u.route=o.zi.toString()),this.getConfig().requestHook&&(0,A0.safeExecuteInTheMiddle)((()=>this.getConfig().requestHook(c,{context:o,middlewareLayer:t,layerType:r})),(t=>{t&&R0.diag.error("koa instrumentation: request hook failed",t)}),!0);const a=R0.trace.setSpan(R0.context.active(),c);return R0.context.with(a,(async()=>{try{return await t(o,i)}catch(t){throw c.recordException(t),t}finally{c.end()}}))})}}p0.KoaInstrumentation=I0,function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(p0,t),e(S0,t),e(T0,t)}(h0);const w0=cF("Koa",(()=>new h0.KoaInstrumentation({requestHook(t,n){if(function(t){t.setAttribute(JU,"auto.http.otel.koa");const n=uW(t).data||{},e=n["koa.type"];e&&t.setAttribute(FU,`${e}.koa`);const r=n["koa.name"];"string"==typeof r&&t.updateName(r||"< unknown >")}(t),UU()===IU())return;const e=uW(t).data,r=e&&e[WC],o=n.context.request.method.toUpperCase()||"GET";r&&UU().setTransactionName(`${o} ${r}`)}}))),M0=()=>({name:"Koa",setupOnce(){w0()}});var Z0={},P0={};!function(t){var n,e;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectNames=t.ConnectTypes=t.AttributeNames=void 0,function(t){t.CONNECT_TYPE="connect.type",t.CONNECT_NAME="connect.name"}(t.AttributeNames||(t.AttributeNames={})),(n=t.ConnectTypes||(t.ConnectTypes={})).MIDDLEWARE="middleware",n.REQUEST_HANDLER="request_handler",(e=t.ConnectNames||(t.ConnectNames={})).MIDDLEWARE="middleware",e.REQUEST_HANDLER="request handler"}(P0);var V0={},G0={};Object.defineProperty(G0,"__esModule",{value:!0}),G0.VERSION=void 0,G0.VERSION="0.35.0";var X0={},U0={};Object.defineProperty(U0,"__esModule",{value:!0}),U0.Eo=void 0,U0.Eo=Symbol("opentelemetry.instrumentation-connect.request-route-stack"),Object.defineProperty(X0,"__esModule",{value:!0}),X0.generateRoute=X0.replaceCurrentStackRoute=X0.addNewStackLayer=void 0;const W0=io,Y0=U0;X0.addNewStackLayer=t=>{!1===Array.isArray(t[Y0.Eo])&&Object.defineProperty(t,Y0.Eo,{enumerable:!1,value:[]}),t[Y0.Eo].push("/");const n=t[Y0.Eo].length;return()=>{n===t[Y0.Eo].length?t[Y0.Eo].pop():W0.diag.warn("Connect: Trying to pop the stack multiple time")}};X0.replaceCurrentStackRoute=(t,n)=>{n&&t[Y0.Eo].splice(-1,1,n)};X0.generateRoute=t=>t[Y0.Eo].reduce(((t,n)=>t.replace(/\/+$/,"")+n)),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectInstrumentation=t.ANONYMOUS_NAME=void 0;const n=io,e=EB,r=P0,o=G0,i=_F,s=FB,c=X0;t.ANONYMOUS_NAME="anonymous";class u extends i.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-connect",o.VERSION,Object.assign({},t))}init(){return[new i.InstrumentationNodeModuleDefinition("connect",["^3.0.0"],((t,e)=>(n.diag.debug(`Applying patch for connect@${e}`),this.Ro(t))),((t,e)=>{n.diag.debug(`Removing patch for connect@${e}`)}))]}Qi(t){(0,i.isWrapped)(t.use)||this.yt(t,"use",this.$i.bind(this)),(0,i.isWrapped)(t.handle)||this.yt(t,"handle",this.qi.bind(this))}Ro(t){const n=this;return function(...e){const r=t.apply(this,e);return n.Qi(r),r}}ts(t,n){return function(e){const r=t.apply(this,[e]);return n(),r}}fi(n,e){let o,i,c;n?(o=r.ConnectTypes.REQUEST_HANDLER,c=r.ConnectNames.REQUEST_HANDLER,i=n):(o=r.ConnectTypes.MIDDLEWARE,c=r.ConnectNames.MIDDLEWARE,i=e.name||t.ANONYMOUS_NAME);const u=`${c} - ${i}`,a={attributes:{[s.SemanticAttributes.HTTP_ROUTE]:n.length>0?n:"/",[r.AttributeNames.CONNECT_TYPE]:o,[r.AttributeNames.CONNECT_NAME]:i}};return this.tracer.startSpan(u,a)}ns(r,o){const i=this,s=4===o.length;function u(){if(!i.isEnabled())return o.apply(this,arguments);const[u,a,l]=s?[1,2,3]:[0,1,2],f=arguments[u],d=arguments[a],h=arguments[l];(0,c.replaceCurrentStackRoute)(f,r);const p=(0,e.getRPCMetadata)(n.context.active());r&&(null==p?void 0:p.type)===e.RPCType.HTTP&&(p.route=(0,c.generateRoute)(f));let S="";S=r?`request handler - ${r}`:`middleware - ${o.name||t.ANONYMOUS_NAME}`;const E=i.fi(r,o);i.Ct.debug("start span",S);let m=!1;function T(){m?i.Ct.debug(`span ${E.name} - already finished`):(m=!0,i.Ct.debug(`finishing span ${E.name}`),E.end()),d.removeListener("close",T)}return d.addListener("close",T),arguments[l]=i.ts(h,T),o.apply(this,arguments)}return Object.defineProperty(u,"length",{value:o.length,writable:!1,configurable:!0}),u}$i(t){const n=this;return function(...e){const r=e[e.length-1],o=e[e.length-2]||"";return e[e.length-1]=n.ns(o,r),t.apply(this,e)}}qi(t){const n=this;return function(){const[e,r]=[0,2],o=arguments[e],i=arguments[r],s=(0,c.addNewStackLayer)(o);return"function"==typeof i&&(arguments[r]=n.es(i,s)),t.apply(this,arguments)}}es(t,n){return function(...e){return n(),Reflect.apply(t,this,e)}}}t.ConnectInstrumentation=u}(V0),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(P0,t),e(V0,t)}(Z0);const H0="Connect",D0=cF(H0,(()=>new Z0.ConnectInstrumentation)),j0=()=>({name:H0,setupOnce(){D0()}});function x0(t,n,e,r){captureException(t),r(t)}const k0=(t={})=>{const n={sidecarUrl:t.sidecarUrl||"http://localhost:8969/stream"};return{name:"Spotlight",setup(t){"object"==typeof process&&process.env&&"development"!==process.env.NODE_ENV&&ut.warn("[Spotlight] It seems you're not in dev mode. Do you really want to have Spotlight enabled?"),function(t,n){const e=function(t){try{return new URL(`${t}`)}catch(n){return void ut.warn(`[Spotlight] Invalid sidecar URL: ${t}`)}}(n.sidecarUrl);if(!e)return;let r=0;t.on("beforeEnvelope",(t=>{if(r>3)return void ut.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests");const n=Xn(t),o=function(){const{request:t}=M;if(n=t,"__sentry_original__"in n)return t.__sentry_original__;var n;return t}()({method:"POST",path:e.pathname,hostname:e.hostname,port:e.port,headers:{"Content-Type":"application/x-sentry-envelope"}},(t=>{t.on("data",(()=>{})),t.on("end",(()=>{})),t.setEncoding("utf8")}));o.on("error",(()=>{r++,ut.warn("[Spotlight] Failed to send envelope to Spotlight Sidecar")})),o.write(n),o.end()}))}(t,n)}}};var K0={},B0={},F0={};Object.defineProperty(F0,"__esModule",{value:!0}),F0.AbstractAsyncHooksContextManager=void 0;const J0=p,z0=["addListener","on","once","prependListener","prependOnceListener"];F0.AbstractAsyncHooksContextManager=class{constructor(){this.rs=Symbol("OtListeners"),this.ss=!1}bind(t,n){return n instanceof J0.EventEmitter?this.cs(t,n):"function"==typeof n?this.us(t,n):n}us(t,n){const e=this,r=function(...r){return e.with(t,(()=>n.apply(this,r)))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),r}cs(t,n){return void 0!==this.ls(n)||(this.ds(n),z0.forEach((e=>{void 0!==n[e]&&(n[e]=this.hs(n,n[e],t))})),"function"==typeof n.removeListener&&(n.removeListener=this.ps(n,n.removeListener)),"function"==typeof n.off&&(n.off=this.ps(n,n.off)),"function"==typeof n.removeAllListeners&&(n.removeAllListeners=this.Ss(n,n.removeAllListeners))),n}ps(t,n){const e=this;return function(r,o){var i;const s=null===(i=e.ls(t))||void 0===i?void 0:i[r];if(void 0===s)return n.call(this,r,o);const c=s.get(o);return n.call(this,r,c||o)}}Ss(t,n){const e=this;return function(r){const o=e.ls(t);return void 0!==o&&(0===arguments.length?e.ds(t):void 0!==o[r]&&delete o[r]),n.apply(this,arguments)}}hs(t,n,e){const r=this;return function(o,i){if(r.ss)return n.call(this,o,i);let s=r.ls(t);void 0===s&&(s=r.ds(t));let c=s[o];void 0===c&&(c=new WeakMap,s[o]=c);const u=r.bind(e,i);c.set(i,u),r.ss=!0;try{return n.call(this,o,u)}finally{r.ss=!1}}}ds(t){const n=Object.create(null);return t[this.rs]=n,n}ls(t){return t[this.rs]}},Object.defineProperty(B0,"__esModule",{value:!0}),B0.AsyncHooksContextManager=void 0;const Q0=io,$0=A,q0=F0;class t1 extends q0.AbstractAsyncHooksContextManager{constructor(){super(),this.Fn=new Map,this.se=[],this.Es=$0.createHook({init:this.Ts.bind(this),before:this._s.bind(this),after:this.bs.bind(this),destroy:this.vs.bind(this),promiseResolve:this.vs.bind(this)})}active(){var t;return null!==(t=this.se[this.se.length-1])&&void 0!==t?t:Q0.ROOT_CONTEXT}with(t,n,e,...r){this.ys(t);try{return n.call(e,...r)}finally{this.Rs()}}enable(){return this.Es.enable(),this}disable(){return this.Es.disable(),this.Fn.clear(),this.se=[],this}Ts(t,n){if("TIMERWRAP"===n)return;const e=this.se[this.se.length-1];void 0!==e&&this.Fn.set(t,e)}vs(t){this.Fn.delete(t)}_s(t){const n=this.Fn.get(t);void 0!==n&&this.ys(n)}bs(){this.Rs()}ys(t){this.se.push(t)}Rs(){this.se.pop()}}B0.AsyncHooksContextManager=t1;var n1={};Object.defineProperty(n1,"__esModule",{value:!0}),n1.AsyncLocalStorageContextManager=void 0;const e1=io,r1=A,o1=F0;class i1 extends o1.AbstractAsyncHooksContextManager{constructor(){super(),this.As=new r1.AsyncLocalStorage}active(){var t;return null!==(t=this.As.getStore())&&void 0!==t?t:e1.ROOT_CONTEXT}with(t,n,e,...r){const o=null==e?n:n.bind(e);return this.As.run(t,o,...r)}enable(){return this}disable(){return this.As.disable(),this}}n1.AsyncLocalStorageContextManager=i1,function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(B0,t),e(n1,t)}(K0);const s1=(c1=K0.AsyncLocalStorageContextManager,class extends c1{constructor(){super(),Uk("SentryContextManager")}with(t,n,e,...r){const o=Ik(t),i=eK([o,"optionalAccess",t=>t.scope])||XU(),s=eK([o,"optionalAccess",t=>t.isolationScope])||UU(),c=!0===t.getValue(gk),u=t.getValue(Nk),a=t.getValue(Ck),l=u||i.clone(),f=wk(t,{scope:l,isolationScope:a||(c?s.clone():s)}).deleteValue(gk).deleteValue(Nk).deleteValue(Ck);return function(t,n){St(t,Lk,n)}(l,f),super.with(f,n,e,...r)}});var c1;const u1=Symbol("AgentBaseInternalState");class a1 extends M.Agent{constructor(t){super(t),this[u1]={}}isSecureEndpoint(t){if(t){if("boolean"==typeof t.secureEndpoint)return t.secureEndpoint;if("string"==typeof t.protocol)return"https:"===t.protocol}const{stack:n}=new Error;return"string"==typeof n&&n.split("\n").some((t=>-1!==t.indexOf("(https.js:")||-1!==t.indexOf("node:https:")))}createSocket(t,n,e){const r={...n,secureEndpoint:this.isSecureEndpoint(n)};Promise.resolve().then((()=>this.connect(t,r))).then((o=>{if(o instanceof M.Agent)return o.addRequest(t,r);this[u1].currentSocket=o,super.createSocket(t,n,e)}),e)}createConnection(){const t=this[u1].currentSocket;if(this[u1].currentSocket=void 0,!t)throw new Error("No socket was returned in the `connect()` function");return t}get defaultPort(){return zn(this[u1].defaultPort,(()=>"https:"===this.protocol?443:80))}set defaultPort(t){this[u1]&&(this[u1].defaultPort=t)}get protocol(){return zn(this[u1].protocol,(()=>this.isSecureEndpoint()?"https:":"http:"))}set protocol(t){this[u1]&&(this[u1].protocol=t)}}function l1(...t){ut.log("[https-proxy-agent:parse-proxy-response]",...t)}function f1(t){return new Promise(((n,e)=>{let r=0;const o=[];function i(){const c=t.read();c?function(c){o.push(c),r+=c.length;const u=Buffer.concat(o,r),a=u.indexOf("\r\n\r\n");if(-1===a)return l1("have not received end of HTTP headers yet..."),void i();const l=u.slice(0,a).toString("ascii").split("\r\n"),f=l.shift();if(!f)return t.destroy(),e(new Error("No header received from proxy CONNECT response"));const d=f.split(" "),h=+d[1],p=d.slice(2).join(" "),S={};for(const n of l){if(!n)continue;const r=n.indexOf(":");if(-1===r)return t.destroy(),e(new Error(`Invalid header from proxy CONNECT response: "${n}"`));const o=n.slice(0,r).toLowerCase(),i=n.slice(r+1).trimStart(),s=S[o];"string"==typeof s?S[o]=[s,i]:Array.isArray(s)?s.push(i):S[o]=i}l1("got proxy server response: %o %o",f,S),s(),n({connect:{statusCode:h,statusText:p,headers:S},buffered:u})}(c):t.once("readable",i)}function s(){t.removeListener("end",c),t.removeListener("error",u),t.removeListener("readable",i)}function c(){s(),l1("onend"),e(new Error("Proxy connection ended before receiving CONNECT response"))}function u(t){s(),l1("onerror %o",t),e(t)}t.on("error",u),t.on("end",c),i()}))}function d1(...t){ut.log("[https-proxy-agent]",...t)}class h1 extends a1{static __initStatic(){this.protocols=["http","https"]}constructor(t,n){super(n),this.options={},this.proxy="string"==typeof t?new URL(t):t,this.proxyHeaders=zn(Qn([n,"optionalAccess",t=>t.headers]),(()=>({}))),d1("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const e=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),r=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...n?S1(n,"headers"):null,host:e,port:r}}async connect(t,n){const{proxy:e}=this;if(!n.host)throw new TypeError('No "host" provided');let r;if("https:"===e.protocol){d1("Creating `tls.Socket`: %o",this.connectOpts);const t=this.connectOpts.servername||this.connectOpts.host;r=V.connect({...this.connectOpts,servername:t&&P.isIP(t)?void 0:t})}else d1("Creating `net.Socket`: %o",this.connectOpts),r=P.connect(this.connectOpts);const o="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},i=P.isIPv6(n.host)?`[${n.host}]`:n.host;let s=`CONNECT ${i}:${n.port} HTTP/1.1\r\n`;if(e.username||e.password){const t=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(t).toString("base64")}`}o.Host=`${i}:${n.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const t of Object.keys(o))s+=`${t}: ${o[t]}\r\n`;const c=f1(r);r.write(`${s}\r\n`);const{connect:u,buffered:a}=await c;if(t.emit("proxyConnect",u),this.emit("proxyConnect",u,t),200===u.statusCode){if(t.once("socket",p1),n.secureEndpoint){d1("Upgrading socket connection to TLS");const t=n.servername||n.host;return V.connect({...S1(n,"host","path","port"),socket:r,servername:P.isIP(t)?void 0:t})}return r}r.destroy();const l=new P.Socket({writable:!1});return l.readable=!0,t.once("socket",(t=>{d1("Replaying proxy buffer for failed request"),t.push(a),t.push(null)})),l}}function p1(t){t.resume()}function S1(t,...n){const e={};let r;for(r in t)n.includes(r)||(e[r]=t[r]);return e}h1.__initStatic();const E1=32768;function m1(t){let n;try{n=new URL(t.url)}catch(n){return ct((()=>{console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used.")})),CY(t,(()=>Promise.resolve({})))}const e="https:"===n.protocol,r=function(t,n){const{no_proxy:e}=process.env;return e&&e.split(",").some((n=>t.host.endsWith(n)||t.hostname.endsWith(n)))?void 0:n}(n,t.proxy||(e?process.env.https_proxy:void 0)||process.env.http_proxy),o=e?Z:M,i=void 0!==t.keepAlive&&t.keepAlive,s=r?new h1(r):new o.Agent({keepAlive:i,maxSockets:30,timeout:2e3});return function(t){const n=KW();return n.suppressTracing?n.suppressTracing(t):YU((n=>(n.setSDKProcessingMetadata({[YW]:!0}),t())))}((()=>{const n=function(t,n,e){const{hostname:r,pathname:o,port:i,protocol:s,search:c}=new URL(t.url);return function(u){return new Promise(((a,l)=>{let f=function(t){return new _.Readable({read(){this.push(t),this.push(null)}})}(u.body);const d={...t.headers};u.body.length>E1&&(d["content-encoding"]="gzip",f=f.pipe(b.createGzip()));const h=n.request({method:"POST",agent:e,headers:d,hostname:r,path:`${o}${c}`,port:i,protocol:s,ca:t.caCerts},(t=>{t.on("data",(()=>{})),t.on("end",(()=>{})),t.setEncoding("utf8");const n=zn(t.headers["retry-after"],(()=>null)),e=zn(t.headers["x-sentry-rate-limits"],(()=>null));a({statusCode:t.statusCode,headers:{"retry-after":n,"x-sentry-rate-limits":Array.isArray(e)?e[0]:e}})}));h.on("error",l),f.pipe(h)}))}}(t,zn(t.httpModule,(()=>o)),s);return CY(t,n)}))}function T1(t){return t.replace(/^[A-Z]:/,"").replace(/\\/g,"/")}function _1(t=(process.argv[1]?function(t){const n=nn(t),e=n[0];let r=n[1];return e||r?(r&&(r=r.slice(0,r.length-1)),e+r):"."}(process.argv[1]):process.cwd()),n="\\"===h.sep){const e=n?T1(t):t;return t=>{if(!t)return;const r=n?T1(t):t;let{dir:o,base:i,ext:s}=h.posix.parse(r);".js"!==s&&".mjs"!==s&&".cjs"!==s||(i=i.slice(0,-1*s.length)),o||(o=".");const c=o.lastIndexOf("/node_modules");if(c>-1)return`${o.slice(c+14).replace(/\//g,".")}:${i}`;if(o.startsWith(e)){let t=o.slice(e.length+1).replace(/\//g,".");return t&&(t+=":"),t+=i,t}return i}}function b1(t){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:tt.SENTRY_RELEASE&&tt.SENTRY_RELEASE.id?tt.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||process.env.CF_PAGES_COMMIT_SHA||t}const v1=Ot([90,yn(_1())]);class y1 extends gY{constructor(t){const n={...t,platform:"node",runtime:{name:"node",version:global.process.version},serverName:t.serverName||global.process.env.SENTRY_NAME||I.hostname()};!function(t,n,e=[n],r="npm"){const o=t.Me||{};o.sdk||(o.sdk={name:`sentry.javascript.${n}`,packages:e.map((t=>({name:`${r}:@sentry/${t}`,version:IY}))),version:IY}),t.Me=o}(n,"node"),ut.log(`Initializing Sentry: process: ${process.pid}, thread: ${R.isMainThread?"main":`worker-${R.threadId}`}.`),super(n)}get tracer(){if(this.Lt)return this.Lt;const t=IY,n=ro.getTracer("@sentry/node",t);return this.Lt=n,n}async flush(t){const n=Qn([this.traceProvider,"optionalAccess",t=>t.activeSpanProcessor]);return n&&await n.forceFlush(),super.flush(t)}}function R1(t){t.getOptions().debug&&function(){const t=new Proxy(ut,{get(t,n,e){const r="verbose"===n?"debug":n;return Reflect.get(t,r,e)}});Yr.disable(),Yr.setLogger(t,de.DEBUG)}();const n=function(t){const n=new lx({sampler:new bK(t),resource:new sx({[RG]:"node",[AG]:"sentry",[gG]:IY}),forceFlushTimeoutMillis:500});return n.addSpanProcessor(new _K),n.register({propagator:new Hk,contextManager:new s1}),n}(t);t.traceProvider=n}function A1(t={}){return function(t={},n){const e=function(t,n){const e=function(t){if(void 0!==t)return t;const n=b1();if(void 0!==n)return n;return}(t.release),r="string"==typeof e&&(void 0===t.autoSessionTracking||t.autoSessionTracking),o=function(t){if(void 0!==t)return t;const n=process.env.SENTRY_TRACES_SAMPLE_RATE;if(!n)return;const e=parseFloat(n);return isFinite(e)?e:void 0}(t.tracesSampleRate),i=_t({transport:m1,dsn:process.env.SENTRY_DSN,environment:process.env.SENTRY_ENVIRONMENT}),s=_t({release:e,autoSessionTracking:r,tracesSampleRate:o}),c={...i,...t,...s};void 0===t.defaultIntegrations&&(t.defaultIntegrations=n(c));const u={...c,stackParser:gt(t.stackParser||v1),integrations:bY({defaultIntegrations:t.defaultIntegrations,integrations:t.integrations})};return u}(t,n);!0===e.debug&&ct((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}));uF()||function(){const[t,n]=process.versions.node.split(".").map(Number);if(t>=22||20===t&&n>=6||18===t&&n>=19){const t=void 0!==("undefined"==typeof document?require("url").pathToFileURL(__filename).href:O&&O.src||new URL("index-GixK7okg.js",document.baseURI).href)?"undefined"==typeof document?require("url").pathToFileURL(__filename).href:O&&O.src||new URL("index-GixK7okg.js",document.baseURI).href:void 0;if(!tt.Os&&t)try{r.register("@opentelemetry/instrumentation/hook.mjs",t),tt.Os=!0}catch(t){ut.warn("Failed to register ESM hook",t)}}else ct((()=>{console.warn('[Sentry] You are using Node.js in ESM mode ("import syntax"). The Sentry Node.js SDK is not compatible with ESM in Node.js versions before 18.19.0 or before 20.6.0. Please either build your application with CommonJS ("require() syntax"), or use version 7.x of the Sentry Node.js SDK.')}))}();nK();XU().update(t.initialScope);const o=new y1(e);XU().setClient(o),function(t){return!1!==t.getOptions().enabled&&void 0!==t.getTransport()}(o)&&o.init();ut.log(`Running in ${uF()?"CommonJS":"ESM"} mode.`),t.autoSessionTracking&&function(){const t=DU();t&&t.getOptions().autoSessionTracking&&t.initSessionFlusher();hY(),process.on("beforeExit",(()=>{const t=UU().getSession();t&&"ok"!==t.status&&pY()}))}();if(function(){const t=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(t)){const t=wn(process.env.SENTRY_TRACE,process.env.SENTRY_BAGGAGE);XU().setPropagationContext(t)}}(),t.spotlight){const n=o.getOptions().integrations;for(const t of n)o.addIntegration(t);o.addIntegration(k0({sidecarUrl:"string"==typeof t.spotlight?t.spotlight:void 0}))}t.skipOpenTelemetrySetup||R1(o);!function(t){t.on("preprocessEvent",(t=>{const n=Gk();if(!n||"transaction"===t.type)return;const e=n.spanContext();t.contexts={trace:_t({trace_id:e.traceId,span_id:e.spanId,parent_span_id:mk(n)?n.parentSpanId:void 0}),...t.contexts};const r=SW(n);return t.sdkProcessingMetadata={dynamicSamplingContext:Vk(r),...t.sdkProcessingMetadata},t}))}(o)}(t,(()=>[]))}const O1=[["january","1"],["february","2"],["march","3"],["april","4"],["may","5"],["june","6"],["july","7"],["august","8"],["september","9"],["october","10"],["november","11"],["december","12"],["jan","1"],["feb","2"],["mar","3"],["apr","4"],["may","5"],["jun","6"],["jul","7"],["aug","8"],["sep","9"],["oct","10"],["nov","11"],["dec","12"],["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]];function g1(t){return O1.reduce(((t,[n,e])=>t.replace(new RegExp(n,"gi"),e)),t)}const N1="Automatic instrumentation of CronJob only supports crontab string";const C1={instrumentCron:function(t,n){let e=!1;return new Proxy(t,{construct(t,r){const[o,i,s,c,u,...a]=r;if("string"!=typeof o)throw new Error(N1);if(e)throw new Error(`A job named '${n}' has already been scheduled`);e=!0;const l=g1(o);return new t(o,(async function(t,e){return fY(n,(async()=>{try{await i(t,e)}catch(t){throw captureException(t),t}}),{schedule:{type:"crontab",value:l},timezone:u||void 0})}),s,c,u,...a)},get:(t,r)=>"from"===r?r=>{const{cronTime:o,onTick:i,timeZone:s}=r;if("string"!=typeof o)throw new Error(N1);if(e)throw new Error(`A job named '${n}' has already been scheduled`);e=!0;const c=g1(o);return r.onTick=async(t,e)=>fY(n,(async()=>{try{await i(t,e)}catch(t){throw captureException(t),t}}),{schedule:{type:"crontab",value:c},timezone:s||void 0}),t.from(r)}:t[r]})},instrumentNodeCron:function(t){return new Proxy(t,{get:(t,n)=>"schedule"===n&&t.schedule?new Proxy(t.schedule,{apply(t,n,e){const[r,o,i]=e;if(!Qn([i,"optionalAccess",t=>t.name]))throw new Error('Missing "name" for scheduled job. A name is required for Sentry check-in monitoring.');return t.apply(n,[r,async function(){return fY(i.name,(async()=>{try{return await o()}catch(t){throw captureException(t),t}}),{schedule:{type:"crontab",value:g1(r)},timezone:Qn([i,"optionalAccess",t=>t.timezone])})},i])}}):t[n]})},instrumentNodeSchedule:function(t){return new Proxy(t,{get:(t,n)=>"scheduleJob"===n?new Proxy(t.scheduleJob,{apply(t,n,e){const[r,o,i]=e;if("string"!=typeof r||"string"!=typeof o||"function"!=typeof i)throw new Error("Automatic instrumentation of 'node-schedule' requires the first parameter of 'scheduleJob' to be a job name string and the second parameter to be a crontab string");const s=r,c=o;return t.apply(n,[s,c,async function(){return fY(s,(async()=>{await Qn([i,"optionalCall",t=>t()])}),{schedule:{type:"crontab",value:g1(c)}})}])}}):t[n]})}};var L1={},I1={},w1={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeNames=void 0,function(t){t.AWS_OPERATION="aws.operation",t.AWS_REGION="aws.region",t.AWS_SERVICE_API="aws.service.api",t.AWS_SERVICE_NAME="aws.service.name",t.AWS_SERVICE_IDENTIFIER="aws.service.identifier",t.AWS_REQUEST_ID="aws.request.id",t.AWS_REQUEST_EXTENDED_ID="aws.request.extended_id",t.AWS_SIGNATURE_VERSION="aws.signature.version"}(t.AttributeNames||(t.AttributeNames={}))}(w1);var M1={},Z1={},P1={},V1={},G1={};Object.defineProperty(G1,"__esModule",{value:!0});const X1=io,U1=Symbol("opentelemetry.pubsub-propagation.start_span"),W1=Symbol("opentelemetry.pubsub-propagation.end_span"),Y1=(t,n,e)=>{const r=t.filter;Object.defineProperty(t,"filter",{enumerable:!1,value:function(...t){const o=r.apply(this,t);return j1(o,n,e),o}})};function H1(t){var n;return"function"==typeof(null===(n=t)||void 0===n?void 0:n.then)}const D1=(t,n,e,r)=>{const o=t[n];Object.defineProperty(t,n,{enumerable:!1,value:function(...t){const n=t[0];t[0]=function(...t){var e;const o=t[0],i=null===(e=null==o?void 0:o[U1])||void 0===e?void 0:e.call(o);if(!i)return n.apply(this,t);const s=X1.context.with(X1.trace.setSpan(r,i),(()=>{var e;let r;try{if(r=n.apply(this,t),H1(r)){const t=()=>{var t;return null===(t=o[W1])||void 0===t?void 0:t.call(o)};r.then(t,t)}return r}finally{H1(r)||null===(e=o[W1])||void 0===e||e.call(o)}}));if("object"==typeof s){const t=Object.getOwnPropertyDescriptor(o,U1);t&&Object.defineProperty(s,U1,t);const n=Object.getOwnPropertyDescriptor(o,W1);n&&Object.defineProperty(s,W1,n)}return s};const i=o.apply(this,t);return Array.isArray(i)&&j1(i,e,r),i}})},j1=(t,n,e=X1.context.active())=>{D1(t,"forEach",n,e),D1(t,"map",n,e),Y1(t,n,e)};G1.default={patchMessagesArrayToStartProcessSpans:({messages:t,tracer:n,parentContext:e,messageToSpanDetails:r,processHook:o})=>{t.forEach((t=>{const{attributes:i,name:s,parentContext:c}=r(t);Object.defineProperty(t,U1,{enumerable:!1,writable:!0,value:()=>((t,n,e,r,o,i,s)=>{const c=[],u=X1.trace.getSpanContext(o);u&&c.push({context:u});const a=`${n} process`,l=i.startSpan(a,{kind:X1.SpanKind.CONSUMER,attributes:Object.assign(Object.assign({},e),{"messaging.operation":"process"}),links:c},r);Object.defineProperty(t,U1,{enumerable:!1,writable:!0,value:()=>l}),Object.defineProperty(t,W1,{enumerable:!1,writable:!0,value:()=>{l.end(),Object.defineProperty(t,W1,{enumerable:!1,writable:!0,value:()=>{}})}});try{null==s||s(l,t)}catch(t){X1.diag.error("opentelemetry-pubsub-propagation: process hook error",t)}return l})(t,s,i,e,c,n,o)})}))},patchArrayForProcessSpans:j1},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pubsubPropagation=void 0;var n=G1;Object.defineProperty(t,"pubsubPropagation",{enumerable:!0,get:function(){return n.default}})}(V1);var x1={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.addPropagationFieldsToAttributeNames=t.extractPropagationContext=t.injectPropagationContext=t.contextGetter=t.contextSetter=t.MAX_MESSAGE_ATTRIBUTES=void 0;const n=io;t.MAX_MESSAGE_ATTRIBUTES=10;t.contextSetter=new class{set(t,n,e){t[n]={DataType:"String",StringValue:e}}};t.contextGetter=new class{keys(t){return null==t?[]:Object.keys(t)}get(t,n){var e,r;return(null===(e=null==t?void 0:t[n])||void 0===e?void 0:e.StringValue)||(null===(r=null==t?void 0:t[n])||void 0===r?void 0:r.Value)}};t.injectPropagationContext=e=>{const r=null!=e?e:{};return Object.keys(r).length+n.propagation.fields().length<=t.MAX_MESSAGE_ATTRIBUTES?n.propagation.inject(n.context.active(),r,t.contextSetter):n.diag.warn("aws-sdk instrumentation: cannot set context propagation on SQS/SNS message due to maximum amount of MessageAttributes"),r};t.extractPropagationContext=(t,e)=>{const r=n.propagation.fields();if(Object.keys(t.MessageAttributes||[]).some((t=>r.includes(t))))return t.MessageAttributes;if(e&&t.Body)try{return JSON.parse(t.Body).MessageAttributes}catch(t){n.diag.debug("failed to parse SQS payload to extract context propagation, trace might be incomplete.")}};t.addPropagationFieldsToAttributeNames=(t=[],n)=>t.length?Array.from(new Set([...t,...n])):n}(x1),Object.defineProperty(P1,"__esModule",{value:!0}),P1.SqsServiceExtension=void 0;const k1=io,K1=V1,B1=FB,F1=x1;P1.SqsServiceExtension=class{constructor(){this.requestPostSpanHook=t=>{var n,e;switch(t.commandName){case"SendMessage":{const e=null!==(n=t.commandInput.MessageAttributes)&&void 0!==n?n:{};e&&(t.commandInput.MessageAttributes=(0,F1.injectPropagationContext)(e))}break;case"SendMessageBatch":{const n=null===(e=t.commandInput)||void 0===e?void 0:e.Entries;Array.isArray(n)&&n.forEach((t=>{var n;t.MessageAttributes=(0,F1.injectPropagationContext)(null!==(n=t.MessageAttributes)&&void 0!==n?n:{})}))}}},this.responseHook=(t,n,e,r)=>{var o,i;switch(t.request.commandName){case"SendMessage":n.setAttribute(B1.SemanticAttributes.MESSAGING_MESSAGE_ID,null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.MessageId);break;case"SendMessageBatch":break;case"ReceiveMessage":{const o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.Messages;if(o){const i=this.extractQueueUrl(t.request.commandInput),s=this.extractQueueNameFromUrl(i);K1.pubsubPropagation.patchMessagesArrayToStartProcessSpans({messages:o,parentContext:k1.trace.setSpan(k1.context.active(),n),tracer:e,messageToSpanDetails:t=>({name:null!=s?s:"unknown",parentContext:k1.propagation.extract(k1.ROOT_CONTEXT,(0,F1.extractPropagationContext)(t,r.sqsExtractContextPropagationFromPayload),F1.contextGetter),attributes:{[B1.SemanticAttributes.MESSAGING_SYSTEM]:"aws.sqs",[B1.SemanticAttributes.MESSAGING_DESTINATION]:s,[B1.SemanticAttributes.MESSAGING_DESTINATION_KIND]:B1.MessagingDestinationKindValues.QUEUE,[B1.SemanticAttributes.MESSAGING_MESSAGE_ID]:t.MessageId,[B1.SemanticAttributes.MESSAGING_URL]:i,[B1.SemanticAttributes.MESSAGING_OPERATION]:B1.MessagingOperationValues.PROCESS}}),processHook:(t,n)=>{var e;return null===(e=r.sqsProcessHook)||void 0===e?void 0:e.call(r,t,{message:n})}}),K1.pubsubPropagation.patchArrayForProcessSpans(o,e,k1.context.active())}break}}},this.extractQueueUrl=t=>null==t?void 0:t.QueueUrl,this.extractQueueNameFromUrl=t=>{if(!t)return;const n=t.split("/");return 0!==n.length?n[n.length-1]:void 0}}requestPreSpanHook(t,n){const e=this.extractQueueUrl(t.commandInput),r=this.extractQueueNameFromUrl(e);let o,i=k1.SpanKind.CLIENT;const s={[B1.SemanticAttributes.MESSAGING_SYSTEM]:"aws.sqs",[B1.SemanticAttributes.MESSAGING_DESTINATION_KIND]:B1.MessagingDestinationKindValues.QUEUE,[B1.SemanticAttributes.MESSAGING_DESTINATION]:r,[B1.SemanticAttributes.MESSAGING_URL]:e};let c=!1;switch(t.commandName){case"ReceiveMessage":c=!0,i=k1.SpanKind.CONSUMER,o=`${r} receive`,s[B1.SemanticAttributes.MESSAGING_OPERATION]=B1.MessagingOperationValues.RECEIVE,t.commandInput.MessageAttributeNames=(0,F1.addPropagationFieldsToAttributeNames)(t.commandInput.MessageAttributeNames,k1.propagation.fields());break;case"SendMessage":case"SendMessageBatch":i=k1.SpanKind.PRODUCER,o=`${r} send`}return{isIncoming:c,spanAttributes:s,spanKind:i,spanName:o}}};var J1={};Object.defineProperty(J1,"__esModule",{value:!0}),J1.DynamodbServiceExtension=void 0;const z1=io,Q1=FB;J1.DynamodbServiceExtension=class{toArray(t){return Array.isArray(t)?t:[t]}requestPreSpanHook(t,n,e){var r,o,i,s,c,u,a,l,f,d,h,p,S,E,m,T,_,b,v,y,R;const A=z1.SpanKind.CLIENT;const O=t.commandName,g={[Q1.SemanticAttributes.DB_SYSTEM]:Q1.DbSystemValues.DYNAMODB,[Q1.SemanticAttributes.DB_NAME]:null===(r=t.commandInput)||void 0===r?void 0:r.TableName,[Q1.SemanticAttributes.DB_OPERATION]:O};if(n.dynamoDBStatementSerializer)try{const e=n.dynamoDBStatementSerializer(O,t.commandInput);"string"==typeof e&&(g[Q1.SemanticAttributes.DB_STATEMENT]=e)}catch(t){e.error("failed to sanitize DynamoDB statement",t)}return(null===(o=t.commandInput)||void 0===o?void 0:o.TableName)?g[Q1.SemanticAttributes.AWS_DYNAMODB_TABLE_NAMES]=[t.commandInput.TableName]:(null===(i=t.commandInput)||void 0===i?void 0:i.RequestItems)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_TABLE_NAMES]=Object.keys(t.commandInput.RequestItems)),"CreateTable"!==O&&"UpdateTable"!==O||(null===(s=t.commandInput)||void 0===s?void 0:s.ProvisionedThroughput)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_PROVISIONED_READ_CAPACITY]=t.commandInput.ProvisionedThroughput.ReadCapacityUnits,g[Q1.SemanticAttributes.AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY]=t.commandInput.ProvisionedThroughput.WriteCapacityUnits),"GetItem"!==O&&"Scan"!==O&&"Query"!==O||(null===(c=t.commandInput)||void 0===c?void 0:c.ConsistentRead)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_CONSISTENT_READ]=t.commandInput.ConsistentRead),"Query"!==O&&"Scan"!==O||(null===(u=t.commandInput)||void 0===u?void 0:u.ProjectionExpression)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_PROJECTION]=t.commandInput.ProjectionExpression),"CreateTable"===O&&((null===(a=t.commandInput)||void 0===a?void 0:a.GlobalSecondaryIndexes)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES]=this.toArray(t.commandInput.GlobalSecondaryIndexes).map((t=>JSON.stringify(t)))),(null===(l=t.commandInput)||void 0===l?void 0:l.LocalSecondaryIndexes)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES]=this.toArray(t.commandInput.LocalSecondaryIndexes).map((t=>JSON.stringify(t))))),"ListTables"!==O&&"Query"!==O&&"Scan"!==O||(null===(f=t.commandInput)||void 0===f?void 0:f.Limit)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_LIMIT]=t.commandInput.Limit),"ListTables"===O&&(null===(d=t.commandInput)||void 0===d?void 0:d.ExclusiveStartTableName)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_EXCLUSIVE_START_TABLE]=t.commandInput.ExclusiveStartTableName),"Query"===O&&((null===(h=t.commandInput)||void 0===h?void 0:h.ScanIndexForward)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_SCAN_FORWARD]=t.commandInput.ScanIndexForward),(null===(p=t.commandInput)||void 0===p?void 0:p.IndexName)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_INDEX_NAME]=t.commandInput.IndexName),(null===(S=t.commandInput)||void 0===S?void 0:S.Select)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_SELECT]=t.commandInput.Select)),"Scan"===O&&((null===(E=t.commandInput)||void 0===E?void 0:E.Segment)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_SEGMENT]=null===(m=t.commandInput)||void 0===m?void 0:m.Segment),(null===(T=t.commandInput)||void 0===T?void 0:T.TotalSegments)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_TOTAL_SEGMENTS]=null===(_=t.commandInput)||void 0===_?void 0:_.TotalSegments),(null===(b=t.commandInput)||void 0===b?void 0:b.IndexName)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_INDEX_NAME]=t.commandInput.IndexName),(null===(v=t.commandInput)||void 0===v?void 0:v.Select)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_SELECT]=t.commandInput.Select)),"UpdateTable"===O&&((null===(y=t.commandInput)||void 0===y?void 0:y.AttributeDefinitions)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS]=this.toArray(t.commandInput.AttributeDefinitions).map((t=>JSON.stringify(t)))),(null===(R=t.commandInput)||void 0===R?void 0:R.GlobalSecondaryIndexUpdates)&&(g[Q1.SemanticAttributes.AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES]=this.toArray(t.commandInput.GlobalSecondaryIndexUpdates).map((t=>JSON.stringify(t))))),{isIncoming:!1,spanAttributes:g,spanKind:A,spanName:undefined}}responseHook(t,n,e,r){var o,i,s,c,u,a,l,f,d;(null===(o=t.data)||void 0===o?void 0:o.ConsumedCapacity)&&n.setAttribute(Q1.SemanticAttributes.AWS_DYNAMODB_CONSUMED_CAPACITY,(d=t.data.ConsumedCapacity,Array.isArray(d)?d:[d]).map((t=>JSON.stringify(t)))),(null===(i=t.data)||void 0===i?void 0:i.ItemCollectionMetrics)&&n.setAttribute(Q1.SemanticAttributes.AWS_DYNAMODB_ITEM_COLLECTION_METRICS,this.toArray(t.data.ItemCollectionMetrics).map((t=>JSON.stringify(t)))),(null===(s=t.data)||void 0===s?void 0:s.TableNames)&&n.setAttribute(Q1.SemanticAttributes.AWS_DYNAMODB_TABLE_COUNT,null===(c=t.data)||void 0===c?void 0:c.TableNames.length),(null===(u=t.data)||void 0===u?void 0:u.Count)&&n.setAttribute(Q1.SemanticAttributes.AWS_DYNAMODB_COUNT,null===(a=t.data)||void 0===a?void 0:a.Count),(null===(l=t.data)||void 0===l?void 0:l.ScannedCount)&&n.setAttribute(Q1.SemanticAttributes.AWS_DYNAMODB_SCANNED_COUNT,null===(f=t.data)||void 0===f?void 0:f.ScannedCount)}};var $1={};Object.defineProperty($1,"__esModule",{value:!0}),$1.SnsServiceExtension=void 0;const q1=io,t2=FB,n2=x1;$1.SnsServiceExtension=class{requestPreSpanHook(t,n){let e=q1.SpanKind.CLIENT,r=`SNS ${t.commandName}`;const o={[t2.SemanticAttributes.MESSAGING_SYSTEM]:"aws.sns"};if("Publish"===t.commandName){e=q1.SpanKind.PRODUCER,o[t2.SemanticAttributes.MESSAGING_DESTINATION_KIND]=t2.MessagingDestinationKindValues.TOPIC;const{TopicArn:n,TargetArn:i,PhoneNumber:s}=t.commandInput;o[t2.SemanticAttributes.MESSAGING_DESTINATION]=this.extractDestinationName(n,i,s),o["messaging.destination.name"]=n||i||s||"unknown",r=`${s?"phone_number":o[t2.SemanticAttributes.MESSAGING_DESTINATION]} send`}return{isIncoming:!1,spanAttributes:o,spanKind:e,spanName:r}}requestPostSpanHook(t){var n;if("Publish"===t.commandName){const e=null!==(n=t.commandInput.MessageAttributes)&&void 0!==n?n:{};e&&(t.commandInput.MessageAttributes=(0,n2.injectPropagationContext)(e))}}responseHook(t,n,e,r){}extractDestinationName(t,n,e){if(!t&&!n)return e||"unknown";{const e=null!=t?t:n;try{return e.substr(e.lastIndexOf(":")+1)}catch(t){return e}}}};var e2={};Object.defineProperty(e2,"__esModule",{value:!0}),e2.LambdaServiceExtension=void 0;const r2=io,o2=FB,i2=io;class s2{}s2.Invoke="Invoke";e2.LambdaServiceExtension=class{constructor(){this.requestPostSpanHook=t=>{if(t.commandName===s2.Invoke)t.commandInput&&(t.commandInput.ClientContext=c2(t.commandInput.ClientContext))},this.extractFunctionName=t=>null==t?void 0:t.FunctionName}requestPreSpanHook(t,n){const e=this.extractFunctionName(t.commandInput);let r,o={};if("Invoke"===t.commandName)o={[o2.SemanticAttributes.FAAS_INVOKED_NAME]:e,[o2.SemanticAttributes.FAAS_INVOKED_PROVIDER]:"aws"},t.region&&(o[o2.SemanticAttributes.FAAS_INVOKED_REGION]=t.region),r=`${e} ${s2.Invoke}`;return{isIncoming:!1,spanAttributes:o,spanKind:r2.SpanKind.CLIENT,spanName:r}}responseHook(t,n,e,r){if(t.request.commandName===s2.Invoke)n.setAttribute(o2.SemanticAttributes.FAAS_EXECUTION,t.requestId)}};const c2=t=>{try{const n={};i2.propagation.inject(i2.context.active(),n);const e=t?JSON.parse(Buffer.from(t,"base64").toString("utf8")):{},r=Object.assign(Object.assign({},e),{Custom:Object.assign(Object.assign({},e.Custom),n)}),o=Buffer.from(JSON.stringify(r)).toString("base64");return o.length>3583?(r2.diag.warn("lambda instrumentation: cannot set context propagation on lambda invoke parameters due to ClientContext length limitations."),t):o}catch(n){return r2.diag.debug("lambda instrumentation: failed to set context propagation on ClientContext",n),t}};Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.ServicesExtensions=void 0;const u2=P1,a2=J1,l2=$1,f2=e2;Z1.ServicesExtensions=class{constructor(){this.services=new Map,this.services.set("SQS",new u2.SqsServiceExtension),this.services.set("SNS",new l2.SnsServiceExtension),this.services.set("DynamoDB",new a2.DynamodbServiceExtension),this.services.set("Lambda",new f2.LambdaServiceExtension)}requestPreSpanHook(t,n,e){const r=this.services.get(t.serviceName);return r?r.requestPreSpanHook(t,n,e):{isIncoming:!1}}requestPostSpanHook(t){const n=this.services.get(t.serviceName);if(null==n?void 0:n.requestPostSpanHook)return n.requestPostSpanHook(t)}responseHook(t,n,e,r){var o;const i=this.services.get(t.request.serviceName);null===(o=null==i?void 0:i.responseHook)||void 0===o||o.call(i,t,n,e,r)}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicesExtensions=void 0;var n=Z1;Object.defineProperty(t,"ServicesExtensions",{enumerable:!0,get:function(){return n.ServicesExtensions}})}(M1);var d2={};Object.defineProperty(d2,"__esModule",{value:!0}),d2.VERSION=void 0,d2.VERSION="0.40.0";var h2={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bindPromise=t.extractAttributesFromNormalizedRequest=t.normalizeV3Request=t.normalizeV2Request=t.removeSuffixFromStringIfExists=void 0;const n=io,e=FB,r=w1;t.removeSuffixFromStringIfExists=(t,n)=>{const e=n.length;return(null==t?void 0:t.slice(-e))===n?t.slice(0,t.length-e):t};t.normalizeV2Request=t=>{var n,e,r;const o=null==t?void 0:t.service;return{serviceName:null===(e=null===(n=null==o?void 0:o.api)||void 0===n?void 0:n.serviceId)||void 0===e?void 0:e.replace(/\s+/g,""),commandName:(i=null==t?void 0:t.operation,"string"==typeof i?i.charAt(0).toUpperCase()+i.slice(1):i),commandInput:t.params,region:null===(r=null==o?void 0:o.config)||void 0===r?void 0:r.region};var i};t.normalizeV3Request=(n,e,r,o)=>({serviceName:null==n?void 0:n.replace(/\s+/g,""),commandName:(0,t.removeSuffixFromStringIfExists)(e,"Command"),commandInput:r,region:o});t.extractAttributesFromNormalizedRequest=t=>({[e.SemanticAttributes.RPC_SYSTEM]:"aws-api",[e.SemanticAttributes.RPC_METHOD]:t.commandName,[e.SemanticAttributes.RPC_SERVICE]:t.serviceName,[r.AttributeNames.AWS_REGION]:t.region});t.bindPromise=(e,r,o=1)=>{const i=e.then;return e.then=function(e,s){const c=n.context.bind(r,e),u=n.context.bind(r,s),a=i.call(this,c,u);return o>1?(0,t.bindPromise)(a,r,o-1):a},e}}(h2);var p2={};Object.defineProperty(p2,"__esModule",{value:!0}),p2.propwrap=void 0;const S2=Object.defineProperty,E2=Object.getOwnPropertyDescriptor,m2=Object.prototype.hasOwnProperty,T2=Object.getOwnPropertyNames,_2=(t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(const o of T2(n))m2.call(t,o)||o===e||S2(t,o,{get:()=>n[o],enumerable:!(r=E2(n,o))||r.enumerable});return t};p2.propwrap=(t,n,e)=>{const r=n.split("."),o=[t];let i,s,c=t;for(let t=0;t<r.length;t++){if(i=r[t],s=c[i],!s)throw new TypeError(`cannot wrap "${n}": "<obj>.${r.slice(0,t).join(".")}" is ${typeof s}`);if(t<r.length-1){if("object"!=typeof s)throw new TypeError(`cannot wrap "${n}": "<obj>.${r.slice(0,t).join(".")}" is not an Object`);c=s,o.push(c)}}for(let t=r.length-1;t>=0;t--){if(i=r[t],c=o[t],t===r.length-1){s=e(c[i])}else s=o[t+1];const n=E2(c,i),u=S2({},i,{value:s,enumerable:!n||n.enumerable});_2(u,c,i),o[t]=u}return o[0]},Object.defineProperty(I1,"__esModule",{value:!0}),I1.AwsInstrumentation=void 0;const b2=io,v2=EB,y2=w1,R2=M1,A2=d2,O2=_F,g2=h2,N2=p2,C2=FB,L2=Symbol("opentelemetry.instrumentation.aws-sdk.client.config"),I2=Symbol("opentelemetry.instrumentation.aws-sdk.span");class w2 extends O2.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-aws-sdk",A2.VERSION,Object.assign({},t)),this.servicesExtensions=new R2.ServicesExtensions}setConfig(t={}){this.Nt=Object.assign({},t)}init(){const t=new O2.InstrumentationNodeModuleFile("@aws-sdk/middleware-stack/dist/cjs/MiddlewareStack.js",[">=3.1.0 <3.35.0"],this.patchV3ConstructStack.bind(this),this.unpatchV3ConstructStack.bind(this)),n=new O2.InstrumentationNodeModuleFile("@aws-sdk/middleware-stack/dist-cjs/MiddlewareStack.js",[">=3.35.0"],this.patchV3ConstructStack.bind(this),this.unpatchV3ConstructStack.bind(this)),e=new O2.InstrumentationNodeModuleDefinition("@aws-sdk/middleware-stack",["^3.1.0"],void 0,void 0,[t,n]),r=this,o=new O2.InstrumentationNodeModuleDefinition("@smithy/middleware-stack",[">=2.0.0"],((t,n)=>(0,N2.propwrap)(t,"constructStack",(t=>(r.Ct.debug("propwrapping aws-sdk v3 constructStack"),r.gs(n,t)))))),i=new O2.InstrumentationNodeModuleDefinition("@aws-sdk/smithy-client",["^3.1.0"],this.patchV3SmithyClient.bind(this),this.unpatchV3SmithyClient.bind(this)),s=new O2.InstrumentationNodeModuleDefinition("@smithy/smithy-client",[">=1.0.3"],this.patchV3SmithyClient.bind(this),this.unpatchV3SmithyClient.bind(this)),c=new O2.InstrumentationNodeModuleFile("aws-sdk/lib/core.js",["^2.308.0"],this.patchV2.bind(this),this.unpatchV2.bind(this));return[new O2.InstrumentationNodeModuleDefinition("aws-sdk",["^2.308.0"],void 0,void 0,[c]),e,o,i,s]}patchV3ConstructStack(t,n){return b2.diag.debug("aws-sdk instrumentation: applying patch to aws-sdk v3 constructStack"),this.yt(t,"constructStack",this.gs.bind(this,n)),t}unpatchV3ConstructStack(t){return b2.diag.debug("aws-sdk instrumentation: applying unpatch to aws-sdk v3 constructStack"),this.Rt(t,"constructStack"),t}patchV3SmithyClient(t){return b2.diag.debug("aws-sdk instrumentation: applying patch to aws-sdk v3 client send"),this.yt(t.Client.prototype,"send",this.Ns.bind(this)),t}unpatchV3SmithyClient(t){return b2.diag.debug("aws-sdk instrumentation: applying patch to aws-sdk v3 constructStack"),this.Rt(t.Client.prototype,"send"),t}patchV2(t,n){return b2.diag.debug(`aws-sdk instrumentation: applying patch to ${w2.component}`),this.unpatchV2(t),this.yt(null==t?void 0:t.Request.prototype,"send",this.Cs.bind(this,n)),this.yt(null==t?void 0:t.Request.prototype,"promise",this.Ls.bind(this,n)),t}unpatchV2(t){(0,O2.isWrapped)(null==t?void 0:t.Request.prototype.send)&&this.Rt(t.Request.prototype,"send"),(0,O2.isWrapped)(null==t?void 0:t.Request.prototype.promise)&&this.Rt(t.Request.prototype,"promise")}Is(t,n){var e,r;const o=null!==(e=n.spanName)&&void 0!==e?e:`${t.serviceName}.${t.commandName}`;return this.tracer.startSpan(o,{kind:null!==(r=n.spanKind)&&void 0!==r?r:b2.SpanKind.CLIENT,attributes:Object.assign(Object.assign({},(0,g2.extractAttributesFromNormalizedRequest)(t)),n.spanAttributes)})}ws(t,n,e){var r,o,i,s,c;const u=t.operation,a=t.service,l=null==a?void 0:a.serviceIdentifier,f=null!==(r=n.spanName)&&void 0!==r?r:`${e.serviceName}.${e.commandName}`;return this.tracer.startSpan(f,{kind:null!==(o=n.spanKind)&&void 0!==o?o:b2.SpanKind.CLIENT,attributes:Object.assign(Object.assign({[y2.AttributeNames.AWS_OPERATION]:u,[y2.AttributeNames.AWS_SIGNATURE_VERSION]:null===(i=null==a?void 0:a.config)||void 0===i?void 0:i.signatureVersion,[y2.AttributeNames.AWS_SERVICE_API]:null===(s=null==a?void 0:a.api)||void 0===s?void 0:s.className,[y2.AttributeNames.AWS_SERVICE_IDENTIFIER]:l,[y2.AttributeNames.AWS_SERVICE_NAME]:null===(c=null==a?void 0:a.api)||void 0===c?void 0:c.abbreviation},(0,g2.extractAttributesFromNormalizedRequest)(e)),n.spanAttributes)})}Ms(t,n,e){var r;if(null===(r=this.Nt)||void 0===r?void 0:r.preRequestHook){const r={moduleVersion:e,request:n};(0,O2.safeExecuteInTheMiddle)((()=>this.Nt.preRequestHook(t,r)),(t=>{t&&b2.diag.error(`${w2.component} instrumentation: preRequestHook error`,t)}),!0)}}Zs(t,n){var e;const r=null===(e=this.Nt)||void 0===e?void 0:e.responseHook;if(!r)return;const o={response:n};(0,O2.safeExecuteInTheMiddle)((()=>r(t,o)),(t=>{t&&b2.diag.error(`${w2.component} instrumentation: responseHook error`,t)}),!0)}Ps(t,n,e,r){const o=this;n.on("complete",(i=>{b2.context.with(r,(()=>{var r;if(!n[I2])return;delete n[I2];const s=i.requestId,c={data:i.data,request:e,requestId:s};o.Zs(t,c),i.error?t.recordException(i.error):this.servicesExtensions.responseHook(c,t,o.tracer,o.Nt),t.setAttribute(y2.AttributeNames.AWS_REQUEST_ID,s);const u=null===(r=i.httpResponse)||void 0===r?void 0:r.statusCode;u&&t.setAttribute(C2.SemanticAttributes.HTTP_STATUS_CODE,u),t.end()}))}))}gs(t,n){const e=this;return function(...r){const o=n.apply(this,r);return e.patchV3MiddlewareStack(t,o),o}}Ns(t){return function(n,...e){return n[L2]=this.config,t.apply(this,[n,...e])}}patchV3MiddlewareStack(t,n){(0,O2.isWrapped)(n.resolve)||this.yt(n,"resolve",this.Vs.bind(this,t)),this.yt(n,"clone",this.Gs.bind(this,t)),this.yt(n,"concat",this.Gs.bind(this,t))}Gs(t,n){const e=this;return function(...r){const o=n.apply(this,r);return e.patchV3MiddlewareStack(t,o),o}}Vs(t,n){const e=this;return function(r,o){const i=n.call(this,r,o);return function(n){var r,s,c,u;const a=n[L2],l=null===(r=null==a?void 0:a.region)||void 0===r?void 0:r.call(a),f=null!==(s=null==a?void 0:a.serviceId)&&void 0!==s?s:(0,g2.removeSuffixFromStringIfExists)(o.clientName,"Client"),d=null!==(c=o.commandName)&&void 0!==c?c:null===(u=n.constructor)||void 0===u?void 0:u.name,h=(0,g2.normalizeV3Request)(f,d,n.input,void 0),p=e.servicesExtensions.requestPreSpanHook(h,e.Nt,e.Ct),S=e.Is(h,p),E=b2.trace.setSpan(b2.context.active(),S),m=new Promise(((r,o)=>{Promise.resolve(l).then((t=>{h.region=t,S.setAttribute(y2.AttributeNames.AWS_REGION,t)})).catch((t=>{b2.diag.debug(`${w2.component} instrumentation: failed to extract region from async function`,t)})).finally((()=>{e.Ms(S,h,t);const s=b2.context.with(E,(()=>(e.servicesExtensions.requestPostSpanHook(h),e.Ei((()=>i.call(this,n)))))).then((t=>{var n,r,o,i,s,c;const u=null===(r=null===(n=t.output)||void 0===n?void 0:n.$metadata)||void 0===r?void 0:r.requestId;u&&S.setAttribute(y2.AttributeNames.AWS_REQUEST_ID,u);const a=null===(i=null===(o=t.output)||void 0===o?void 0:o.$metadata)||void 0===i?void 0:i.httpStatusCode;a&&S.setAttribute(C2.SemanticAttributes.HTTP_STATUS_CODE,a);const l=null===(c=null===(s=t.output)||void 0===s?void 0:s.$metadata)||void 0===c?void 0:c.extendedRequestId;l&&S.setAttribute(y2.AttributeNames.AWS_REQUEST_EXTENDED_ID,l);const f={data:t.output,request:h,requestId:u};return e.servicesExtensions.responseHook(f,S,e.tracer,e.Nt),e.Zs(S,f),t})).catch((t=>{const n=null==t?void 0:t.RequestId;n&&S.setAttribute(y2.AttributeNames.AWS_REQUEST_ID,n);const e=null==t?void 0:t.extendedRequestId;throw e&&S.setAttribute(y2.AttributeNames.AWS_REQUEST_EXTENDED_ID,e),S.setStatus({code:b2.SpanStatusCode.ERROR,message:t.message}),S.recordException(t),t})).finally((()=>{S.end()}));s.then((t=>{r(t)})).catch((t=>o(t)))}))}));return p.isIncoming?(0,g2.bindPromise)(m,E,2):m}}}Cs(t,n){const e=this;return function(r){if(this[I2])return n.call(this,r);const o=(0,g2.normalizeV2Request)(this),i=e.servicesExtensions.requestPreSpanHook(o,e.Nt,e.Ct),s=e.ws(this,i,o);this[I2]=s;const c=b2.trace.setSpan(b2.context.active(),s),u=b2.context.bind(c,r);return e.Ms(s,o,t),e.Ps(s,this,o,c),b2.context.with(c,(()=>(e.servicesExtensions.requestPostSpanHook(o),e.Ei((()=>n.call(this,u))))))}}Ls(t,n){const e=this;return function(...r){if(this[I2])return n.apply(this,r);const o=(0,g2.normalizeV2Request)(this),i=e.servicesExtensions.requestPreSpanHook(o,e.Nt,e.Ct),s=e.ws(this,i,o);this[I2]=s;const c=b2.trace.setSpan(b2.context.active(),s);e.Ms(s,o,t),e.Ps(s,this,o,c);const u=b2.context.with(c,(()=>(e.servicesExtensions.requestPostSpanHook(o),e.Ei((()=>n.call(this,arguments))))));return i.isIncoming?(0,g2.bindPromise)(u,c):u}}Ei(t){var n;return(null===(n=this.Nt)||void 0===n?void 0:n.suppressInternalInstrumentation)?b2.context.with((0,v2.suppressTracing)(b2.context.active()),t):t()}}I1.AwsInstrumentation=w2,w2.component="aws-sdk";var M2={};Object.defineProperty(M2,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(I1,t),e(M2,t)}(L1);const Z2=()=>({name:"Aws",setupOnce(){vK(new L1.AwsInstrumentation({preRequestHook(t){t.setAttribute(JU,"auto.otel.aws")}}))}});var P2={},V2={},G2="x-amzn-trace-id",X2=function(){function t(){}return t.prototype.inject=function(t,n,e){var r,o=null===(r=ro.getSpan(t))||void 0===r?void 0:r.spanContext();if(o&&Rr(o)){var i=o.traceId,s="Root=1-"+i.substring(0,8)+"-"+i.substring(8)+";Parent="+o.spanId+";Sampled="+((Qe.SAMPLED&o.traceFlags)===Qe.SAMPLED?"1":"0");e.set(n,G2,s)}},t.prototype.extract=function(t,n,e){var r=this.getSpanContextFromHeader(n,e);return Rr(r)?ro.setSpan(t,ro.wrapSpanContext(r)):t},t.prototype.fields=function(){return[G2]},t.prototype.getSpanContextFromHeader=function(n,e){var r=e.keys(n).find((function(t){return t.toLowerCase()===G2}));if(!r)return lr;var o=e.get(n,r);if(!o||"string"!=typeof o)return lr;for(var i,s=0,c=ar,u=ur,a=null;s<o.length;){var l=o.indexOf(";",s);l>=0?(i=o.substring(s,l).trim(),s=l+1):(i=o.substring(s).trim(),s=o.length);var f=i.indexOf("="),d=i.substring(f+1);i.startsWith("Root")?c=t.Xs(d):i.startsWith("Parent")?u=t.Us(d):i.startsWith("Sampled")&&(a=t.Ws(d))}if(null===a)return lr;var h={traceId:c,spanId:u,traceFlags:a,isRemote:!0};return Rr(h)?h:lr},t.Xs=function(t){if(35!==t.length)return ar;if(!t.startsWith("1"))return ar;if("-"!==t.charAt(1)||"-"!==t.charAt(10))return ar;var n=t.substring(2,10)+t.substring(11,35);return vr(n)?n:ar},t.Us=function(t){return yr(t)?t:ur},t.Ws=function(t){return"0"===t?Qe.NONE:"1"===t?Qe.SAMPLED:null},t}(),U2=xt(Object.freeze({__proto__:null,AWSXRAY_TRACE_ID_HEADER:G2,AWSXRayPropagator:X2})),W2={};Object.defineProperty(W2,"__esModule",{value:!0}),W2.VERSION=void 0,W2.VERSION="0.40.0",function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AwsLambdaInstrumentation=t.traceContextEnvironmentKey=void 0;const e=n,r=o,i=_F,s=io,c=U2,a=FB,l=W2,f=u,d=new c.AWSXRayPropagator,h={keys:t=>Object.keys(t),get:(t,n)=>t[n]};t.traceContextEnvironmentKey="_X_AMZN_TRACE_ID";class p extends i.InstrumentationBase{constructor(t={}){super("@opentelemetry/instrumentation-aws-lambda",l.VERSION,t),this.Nt=t,null==this.Nt.disableAwsContextPropagation&&"string"==typeof f.env.OTEL_LAMBDA_DISABLE_AWS_CONTEXT_PROPAGATION&&"true"===f.env.OTEL_LAMBDA_DISABLE_AWS_CONTEXT_PROPAGATION.toLocaleLowerCase()&&(this.Nt.disableAwsContextPropagation=!0)}setConfig(t={}){this.Nt=t}init(){var t;const n=process.env.LAMBDA_TASK_ROOT,o=null!==(t=this.Nt.lambdaHandler)&&void 0!==t?t:process.env._HANDLER;if(!n||!o)return this.Ct.debug("Skipping lambda instrumentation: no _HANDLER/lambdaHandler or LAMBDA_TASK_ROOT.",{taskRoot:n,handlerDef:o}),[];const c=e.basename(o),u=o.substr(0,o.length-c.length),[a,l]=c.split(".",2);let f=e.resolve(n,u,a);if(!f.endsWith(".js"))try{r.statSync(`${f}.js`),f+=".js"}catch(t){f+=".cjs"}return s.diag.debug("Instrumenting lambda handler",{taskRoot:n,handlerDef:o,handler:c,moduleRoot:u,module:a,filename:f,functionName:l}),[new i.InstrumentationNodeModuleDefinition(f,["*"],void 0,void 0,[new i.InstrumentationNodeModuleFile(a,["*"],(t=>(s.diag.debug("Applying patch for lambda handler"),(0,i.isWrapped)(t[l])&&this.Rt(t,l),this.yt(t,l,this.Ys()),t)),(t=>{null!=t&&(s.diag.debug("Removing patch for lambda handler"),this.Rt(t,l))}))])]}Ys(){return t=>this.Hs(t)}Hs(t){s.diag.debug("patch handler function");const n=this;return function(e,r,o){const c=n.Nt,u=p.Ds(e,r,!0===c.disableAwsContextPropagation,c.eventContextExtractor||p.js),l=r.functionName,f=n.tracer.startSpan(l,{kind:s.SpanKind.SERVER,attributes:{[a.SemanticAttributes.FAAS_EXECUTION]:r.awsRequestId,[a.SemanticResourceAttributes.FAAS_ID]:r.invokedFunctionArn,[a.SemanticResourceAttributes.CLOUD_ACCOUNT_ID]:p.xs(r.invokedFunctionArn)}},u);return c.requestHook&&(0,i.safeExecuteInTheMiddle)((()=>c.requestHook(f,{event:e,context:r})),(t=>{t&&s.diag.error("aws-lambda instrumentation: requestHook error",t)}),!0),s.context.with(s.trace.setSpan(u,f),(()=>{const s=n.ks(o,f),c=(0,i.safeExecuteInTheMiddle)((()=>t.apply(this,[e,r,s])),(t=>{null!=t&&(n.Ks(f,t),n.Bs(f,t,(()=>{})))}));return"function"==typeof(null==c?void 0:c.then)?c.then((t=>(n.Ks(f,null,t),new Promise((e=>n.Bs(f,void 0,(()=>e(t))))))),(t=>(n.Ks(f,t),new Promise(((e,r)=>n.Bs(f,t,(()=>r(t)))))))):c}))}}setTracerProvider(t){super.setTracerProvider(t),this.Fs=this.Js(t)}Js(t){if(!t)return;let n=t;return"function"==typeof n.getDelegate&&(n=n.getDelegate()),"function"==typeof n.forceFlush?n.forceFlush.bind(n):void 0}setMeterProvider(t){super.setMeterProvider(t),this.zs=this.Qs(t)}Qs(t){if(!t)return;const n=t;return"function"==typeof n.forceFlush?n.forceFlush.bind(n):void 0}ks(t,n){const e=this;return function(r,o){s.diag.debug("executing wrapped lookup callback function"),e.Ks(n,r,o),e.Bs(n,r,(()=>(s.diag.debug("executing original lookup callback function"),t.apply(this,[r,o]))))}}Bs(t,n,e){let r;n&&t.recordException(n),"string"==typeof n?r=n:n&&(r=n.message),r&&t.setStatus({code:s.SpanStatusCode.ERROR,message:r}),t.end();const o=[];this.Fs?o.push(this.Fs()):s.diag.error("Spans may not be exported for the lambda function because we are not force flushing before callback."),this.zs?o.push(this.zs()):s.diag.error("Metrics may not be exported for the lambda function because we are not force flushing before callback."),Promise.all(o).then(e,e)}Ks(t,n,e){var r;(null===(r=this.Nt)||void 0===r?void 0:r.responseHook)&&(0,i.safeExecuteInTheMiddle)((()=>this.Nt.responseHook(t,{err:n,res:e})),(t=>{t&&s.diag.error("aws-lambda instrumentation: responseHook error",t)}),!0)}static xs(t){const n=t.split(":");if(n.length>=5)return n[4]}static js(t){const n=t.headers||{};return s.propagation.extract(s.context.active(),n,h)}static Ds(n,e,r,o){var u,a;let l;if(!r){const n=process.env[t.traceContextEnvironmentKey];if(n&&(l=d.extract(s.context.active(),{[c.AWSXRAY_TRACE_ID_HEADER]:n},h)),l){const t=null===(u=s.trace.getSpan(l))||void 0===u?void 0:u.spanContext();if(t&&(t.traceFlags&s.TraceFlags.SAMPLED)===s.TraceFlags.SAMPLED)return l}}const f=(0,i.safeExecuteInTheMiddle)((()=>o(n,e)),(t=>{t&&s.diag.error("aws-lambda instrumentation: eventContextExtractor error",t)}),!0);return(null===(a=s.trace.getSpan(f))||void 0===a?void 0:a.spanContext())?f:l||s.ROOT_CONTEXT}}t.AwsLambdaInstrumentation=p}(V2);var Y2={};Object.defineProperty(Y2,"__esModule",{value:!0}),function(t){var n=Dt&&Dt.__createBinding||(Object.create?function(t,n,e,r){void 0===r&&(r=e),Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[e]}})}:function(t,n,e,r){void 0===r&&(r=e),t[r]=n[e]}),e=Dt&&Dt.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(t,"__esModule",{value:!0}),e(V2,t),e(Y2,t)}(P2);const H2=()=>({name:"AwsLambda",setupOnce(){vK(new P2.AwsLambdaInstrumentation({requestHook(t){t.setAttribute(JU,"auto.otel.aws-lambda")}}))}});function D2(t){return t.addEventProcessor((t=>(Kt(t,{handled:!1}),t))),t}function j2(t){let n,e=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==e)return;"access"===o||"optionalAccess"===o?(n=e,e=i(e)):"call"!==o&&"optionalCall"!==o||(e=i(((...t)=>e.call(n,...t))),n=void 0)}return e}const{isPromise:x2}=e.types;function k2(t){return[WY(),XY(),HY(),jY(),ZK(),CK(),MK(),uB(),aB(),xK(),nB(),GK(),...uF()?[rB()]:[],Z2(),H2()]}function K2(t){return"function"==typeof t.getRemainingTimeInMillis?t.getRemainingTimeInMillis():0}function B2(n,e={}){const r=t.performance.now(),o={flushTimeout:2e3,callbackWaitsForEmptyEventLoop:!1,captureTimeoutWarning:!0,timeoutWarningLimit:500,captureAllSettledReasons:!1,startTrace:!0,...e};let s;const c=n.length>2?(t,e)=>new Promise(((r,o)=>{const i=n(t,e,((t,n)=>{null==t?r(n):o(t)}));x2(i)&&i.then(r,o)})):n;return async(n,e)=>{e.callbackWaitsForEmptyEventLoop=o.callbackWaitsForEmptyEventLoop;const u=Math.ceil(K2(e)/1e3),a=Math.floor(u/60),l=u%60,f=a>0?`${a}m${l}s`:`${l}s`;if(o.captureTimeoutWarning){const t=K2(e)-o.timeoutWarningLimit;s=setTimeout((()=>{YU((t=>{t.setTag("timeout",f),captureMessage(`Possible function timeout: ${e.functionName}`,"warning")}))}),t)}async function d(i){const u=XU();let a;try{if(function(n,e,r){n.setContext("aws.lambda",{aws_request_id:e.awsRequestId,function_name:e.functionName,function_version:e.functionVersion,invoked_function_arn:e.invokedFunctionArn,execution_duration_in_millis:t.performance.now()-r,remaining_time_in_millis:K2(e),"sys.argv":process.argv}),n.setContext("aws.cloudwatch.logs",{log_group:e.logGroupName,log_stream:e.logStreamName,url:`https://console.aws.amazon.com/cloudwatch/home?region=${process.env.AWS_REGION}#logsV2:log-groups/log-group/${encodeURIComponent(e.logGroupName)}/log-events/${encodeURIComponent(e.logStreamName)}?filterPattern="${e.awsRequestId}"`})}(u,e,r),a=await c(n,e),o.captureAllSettledReasons&&Array.isArray(a)&&a.every((t=>Object.prototype.hasOwnProperty.call(t,"status")&&(Object.prototype.hasOwnProperty.call(t,"value")||Object.prototype.hasOwnProperty.call(t,"reason"))))){const t=a.reduce(((t,n)=>("rejected"===n.status&&n.reason&&t.push(n.reason),t)),[]);t.forEach((t=>{captureException(t,(t=>D2(t)))}))}}catch(t){throw captureException(t,(t=>D2(t))),t}finally{clearTimeout(s),j2([i,"optionalAccess",t=>t.end,"call",t=>t()]),await dY(o.flushTimeout).catch((t=>{}))}return a}if(o.startTrace){const t=n;return qk({sentryTrace:t.headers&&W(t.headers["sentry-trace"])?t.headers["sentry-trace"]:void 0,baggage:j2([t,"access",t=>t.headers,"optionalAccess",t=>t.baggage])},(()=>HW({name:e.functionName,op:"function.aws.lambda",attributes:{[KU]:"component",[JU]:"auto.function.serverless"}},(t=>(function(t,n){t.addEventProcessor((t=>(t.transaction=n.functionName,t))),t.setTag("server_name",process.env._AWS_XRAY_DAEMON_ADDRESS||process.env.SENTRY_NAME||i.hostname()),t.setTag("url",`awslambda:///${n.functionName}`)}(XU(),e),d(t))))))}return YU((async()=>d(void 0)))}}exports.DEFAULT_USER_INCLUDES=Sn,exports.NodeClient=y1,exports.SDK_VERSION=IY,exports.SEMANTIC_ATTRIBUTE_SENTRY_OP=FU,exports.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=JU,exports.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=BU,exports.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=KU,exports.Scope=CU,exports.addBreadcrumb=PY,exports.addEventProcessor=function(t){UU().addEventProcessor(t)},exports.addIntegration=function(t){const n=DU();n&&n.addIntegration(t)},exports.addOpenTelemetryInstrumentation=vK,exports.addRequestDataToEvent=Tn,exports.anrIntegration=hB,exports.awsIntegration=Z2,exports.awsLambdaIntegration=H2,exports.captureCheckIn=lY,exports.captureConsoleIntegration=xY,exports.captureEvent=rY,exports.captureException=captureException,exports.captureFeedback=function(t,n={},e=XU()){const{message:r,name:o,email:i,url:s,source:c,associatedEventId:u}=t,a={contexts:{feedback:_t({contact_email:i,name:o,message:r,url:s,source:c,associated_event_id:u})},type:"feedback",level:"info"},l=e&&e.getClient()||DU();return l&&l.emit("beforeSendFeedback",a,n),e.captureEvent(a,n)},exports.captureMessage=captureMessage,exports.captureSession=function(t=!1){t?pY():SY()},exports.close=async function(t){const n=DU();return n?n.close(t):Promise.resolve(!1)},exports.commonjsGlobal=Dt,exports.connectIntegration=j0,exports.consoleIntegration=ZK,exports.contextLinesIntegration=xK,exports.continueTrace=qk,exports.createGetModuleFromFilename=_1,exports.createTransport=CY,exports.cron=C1,exports.debugIntegration=kY,exports.dedupeIntegration=KY,exports.defaultStackParser=v1,exports.endSession=pY,exports.expressErrorHandler=hF,exports.expressIntegration=dF,exports.extraErrorDataIntegration=QY,exports.extractRequestData=mn,exports.fastifyIntegration=CF,exports.flush=dY,exports.functionToStringIntegration=XY,exports.getActiveSpan=EW,exports.getAugmentedNamespace=xt,exports.getAutoPerformanceIntegrations=function(){return[dF(),CF(),QF(),ZJ(),KJ(),fz(),wz(),CQ(),T$(),xQ(),l0(),M0(),j0()]},exports.getClient=DU,exports.getCurrentHub=mH,exports.getCurrentScope=XU,exports.getDefaultIntegrations=k2,exports.getGlobalScope=WU,exports.getIsolationScope=UU,exports.getRootSpan=SW,exports.getSentryRelease=b1,exports.getSpanDescendants=pW,exports.getSpanStatusFromHttpCode=eW,exports.graphqlIntegration=QF,exports.hapiIntegration=l0,exports.httpIntegration=CK,exports.inboundFiltersIntegration=WY,exports.init=function(t={}){const n={Me:{},defaultIntegrations:k2(),...t};n.Me.sdk=n.Me.sdk||{name:"sentry.javascript.aws-serverless",integrations:["AWSLambda"],packages:[{name:"npm:@sentry/aws-serverless",version:IY}],version:IY},A1(n)},exports.initOpenTelemetry=R1,exports.isInitialized=function(){return!!DU()},exports.koaIntegration=M0,exports.lastEventId=function(){return UU().lastEventId()},exports.linkedErrorsIntegration=HY,exports.localVariablesIntegration=nB,exports.makeNodeTransport=m1,exports.metricsDefault=SH,exports.modulesIntegration=rB,exports.mongoIntegration=ZJ,exports.mongooseIntegration=KJ,exports.mysql2Integration=wz,exports.mysqlIntegration=fz,exports.nativeNodeFetchIntegration=MK,exports.nestIntegration=xQ,exports.nodeContextIntegration=GK,exports.onUncaughtExceptionIntegration=uB,exports.onUnhandledRejectionIntegration=aB,exports.parameterize=function(t,...n){const e=new String(String.raw(t,...n));return e.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),e.__sentry_template_values__=n,e},exports.postgresIntegration=T$,exports.prismaIntegration=_q,exports.redisIntegration=CQ,exports.requestDataIntegration=jY,exports.require$$1=FB,exports.rewriteFramesIntegration=$Y,exports.sessionTimingIntegration=qY,exports.setContext=oY,exports.setCurrentClient=function(t){XU().setClient(t),function(t){const n=vU(bU());n.hub&&"function"==typeof n.hub.getStackTop&&(n.hub.getStackTop().client=t)}(t)},exports.setExtra=sY,exports.setExtras=iY,exports.setHttpStatus=function(t,n){t.setAttribute("http.response.status_code",n);const e=eW(n);"unknown_error"!==e.message&&t.setStatus(e)},exports.setMeasurement=function(t,n,e){const r=EW(),o=r&&SW(r);o&&o.addEvent(t,{[QU]:n,[zU]:e})},exports.setTag=uY,exports.setTags=cY,exports.setUser=aY,exports.setupConnectErrorHandler=t=>{t.use(x0);const n=DU();n&&n.on("spanStart",(t=>{!function(t){const n=uW(t).data||{},e=n["connect.type"];if(n[FU]||!e)return;t.setAttributes({[JU]:"auto.http.otel.connect",[FU]:`${e}.connect`});const r=n["connect.name"];"string"==typeof r&&t.updateName(r)}(t)})),aF(t.use,"connect")},exports.setupExpressErrorHandler=function(t){t.use(hF()),aF(t.use,"express")},exports.setupHapiErrorHandler=async function(t){await t.register(d0);const n=DU();n&&n.on("spanStart",(t=>{!function(t){const n=uW(t).data||{},e=n["hapi.type"];if(n[FU]||!e)return;t.setAttributes({[JU]:"auto.http.otel.hapi",[FU]:`${e}.hapi`})}(t)})),aF(t.register,"hapi")},exports.setupKoaErrorHandler=t=>{t.use((async(t,n)=>{try{await n()}catch(t){captureException(t)}})),aF(t.use,"koa")},exports.setupNestErrorHandler=function(t,n){const e=DU();e&&e.on("spanStart",(t=>{!function(t){const n=uW(t).data||{},e=n["nestjs.type"];if(n[FU]||!e)return;t.setAttributes({[JU]:"auto.http.otel.nestjs",[FU]:`${e}.nestjs`})}(t)})),t.useGlobalInterceptors({intercept(t,n){if(UU()===IU())return ut.warn("Isolation scope is still the default isolation scope, skipping setting transactionName."),n.handle();if("http"===t.getType()){const n=t.switchToHttp().getRequest();n.route&&UU().setTransactionName(`${Qn([n,"access",t=>t.method,"optionalAccess",t=>t.toUpperCase,"call",t=>t()])||"GET"} ${n.route.path}`)}return n.handle()}});const r=new Proxy(n,{get(t,n,e){if("catch"===n){const r=Reflect.get(t,n,e);return(n,e)=>(captureException(n),r.apply(t,[n,e]))}return Reflect.get(t,n,e)}});t.useGlobalFilters(r)},exports.spanToBaggageHeader=function(t){return Nn(MW(t))},exports.spanToJSON=uW,exports.spanToTraceHeader=function(t){const{traceId:n,spanId:e}=t.spanContext();return Mn(n,e,aW(t))},exports.spotlightIntegration=k0,exports.startInactiveSpan=function(t){const n=KW();if(n.startInactiveSpan)return n.startInactiveSpan(t);const e=kW(t),r=t.scope||XU(),o=FW(r);return t.onlyIfParent&&!o?new gW:xW({parentSpan:o,spanContext:e,forceTransaction:t.forceTransaction,scope:r})},exports.startNewTrace=function(t){return YU((n=>(n.setPropagationContext(qn()),jW(null,t))))},exports.startSession=hY,exports.startSpan=function(t,n){const e=KW();if(e.startSpan)return e.startSpan(t,n);const r=kW(t);return YU(t.scope,(e=>{const o=FW(e),i=t.onlyIfParent&&!o?new gW:xW({parentSpan:o,spanContext:r,forceTransaction:t.forceTransaction,scope:e});return OU(e,i),NW((()=>n(i)),(()=>{const{status:t}=uW(i);!i.isRecording()||t&&"ok"!==t||i.setStatus({code:nW,message:"internal_error"})}),(()=>i.end()))}))},exports.startSpanManual=HW,exports.trpcMiddleware=function(t={}){return function(n){const{path:e,type:r,next:o,rawInput:i}=n,s=DU(),c=s&&s.getOptions(),u={procedure_type:r};function a(t){"object"==typeof t&&null!==t&&"ok"in t&&!t.ok&&"error"in t&&captureException(t.error,EH)}return(void 0!==t.attachRpcInput?t.attachRpcInput:c&&c.sendDefaultPii)&&(u.input=Qt(i)),oY("trpc",u),HW({name:`trpc/${e}`,op:"rpc.server",attributes:{[KU]:"route",[JU]:"auto.rpc.trpc"}},(t=>{let n;try{n=o()}catch(n){throw captureException(n,EH),t.end(),n}return D(n)?n.then((n=>(a(n),t.end(),n)),(n=>{throw captureException(n,EH),t.end(),n})):(a(n),t.end(),n)}))}},exports.tryPatchHandler=function(t,e){const r=n.basename(e),i=r.match(/^([^.]*)\.(.*)$/);if(!i)return;const[,s,c]=i;let u,a,l;try{const i=e.substring(0,e.indexOf(r));u=function(t,e,r){const i=n.resolve(t,e,r);return o.existsSync(i)||o.existsSync(`${i}.js`)?require(i):require(require.resolve(r,{paths:[t,e]}))}(t,i,s)}catch(t){return}c.split(".").forEach((t=>{a=u,u=u&&u[t],l=t})),u&&"function"==typeof u&&(a[l]=B2(u))},exports.withActiveSpan=jW,exports.withIsolationScope=HU,exports.withMonitor=fY,exports.withScope=YU,exports.wrapHandler=B2,exports.zodErrorsIntegration=rH;
